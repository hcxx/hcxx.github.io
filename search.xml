<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>MyBlog</title>
    <url>/2021/01/19/MyBlog/</url>
    <content><![CDATA[<p><span style="font-size:40px;font-family:å¾®è½¯é›…é»‘">ç”Ÿæ´»å¾ˆæ®‹é…·ï¼Œä¸–ç•Œå¾ˆç¾ä¸½ï¼</span></p>
<p><span style="font-size:40px;font-family:å¾®è½¯é›…é»‘">Life is cruel, but the world is beautiful !</span></p>
]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/2023/06/03/20230603/</url>
    <content><![CDATA[<p>æ—¶é—´å¥½å¿«ï¼Œè¿™ä¸ªåŸŸåä½¿ç”¨å°±å¿«è¦3å¹´äº†ã€‚è¿˜æ˜¯topä¾¿å®œå‘€ï¼Œç‚¹åæ‰¹è¯„oneåŸŸåï¼Œä¸­é€”æ¶¨ä»·ï¼Œç¿»äº†ä¸€å€ä»·æ ¼ã€‚åŸæœ¬èƒ½ä¹°ä¸¤å¹´çš„é’±ï¼Œç°åœ¨åªèƒ½ä¹°ä¸€å¹´äº†ğŸ˜­ã€‚</p>
<p>æ„Ÿè§‰éƒ½è¦ç»­è´¹ä¸èµ·oneåŸŸåäº†ï¼Œç­‰æˆ‘ä»¥åè¦æ˜¯å“ªå¤©æ²¡é’±äº†ï¼Œä¼šä¸ä¼šè¿è¿™ä¸ªtopåŸŸåä¹Ÿä¸ç»­è´¹äº†å‘¢ã€‚å—¯ï¼Œè°çŸ¥é“å‘¢ã€‚ç»­è´¹10å¤šå¹´ä¹Ÿè¦å¾ˆå¤šé’±å‘¢ã€‚å•Šå•Šï¼Œåˆæ˜¯æƒ³è¦æš´å¯Œçš„ä¸€å¤©ã€‚</p>
<p>å…¶å®æˆ‘ä¹ŸæŒºæƒ³çŸ¥é“è¿™é‡Œç»Ÿè®¡çš„30å¤©å†…çš„è®¿é—®äººæ¬¡é™¤äº†æˆ‘è¿˜æœ‰çœŸäººå—ï¼Ÿä¸ä¼šå…¨æ˜¯çˆ¬è™«å§ğŸ¤£ã€‚å¥½åƒå„ä¸ªæœç´¢å¼•æ“ä¹Ÿæ²¡æ”¶å½•å§ï¼Œå±…ç„¶è¿˜å¤©å¤©çˆ¬ğŸ˜¥ã€‚</p>
<p><img src="/2023/06/03/20230603/image-20230604235937735.png" alt></p>
]]></content>
  </entry>
  <entry>
    <title>AI For Everyoneç¬”è®°</title>
    <url>/2023/05/29/AI-For-Everyone%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p><a href="https://baike.baidu.com/item/%E5%90%B4%E6%81%A9%E8%BE%BE">Andrew Ng</a>çš„ã€ŠAI For Everyoneã€‹è§†é¢‘ç¬”è®°ï¼Œæ­¤è¯¾ç¨‹ä¸»è¦æ˜¯AIæ–¹å‘æ‰«ç›²ã€‚å­¦å®Œåªèƒ½è®©è‡ªå·±å¯¹AIç›¸å…³çš„æ¦‚å¿µä¸å†ä¸€æ— æ‰€çŸ¥ã€‚å¹¶ä¸èƒ½è®©è‡ªå·±å…·å¤‡AIç›¸å…³çš„æŠ€èƒ½ã€‚</p>
<span id="more"></span>
<h1>ç¬¬ä¸€ç¯‡</h1>
<h2 id="introduction">Introduction</h2>
<blockquote>
<p>ANIï¼šå…¨ç§°artificial narrow intelligenceï¼Œå¼±äººå·¥æ™ºèƒ½ï¼Œèƒ½å¤Ÿå®ŒæˆæŸä¸€ç‰¹å®šæ–¹é¢çš„ä»»åŠ¡ã€‚ä¾‹å¦‚æ™ºèƒ½éŸ³ç®±ï¼Œè‡ªåŠ¨é©¾é©¶ç­‰ã€‚</p>
</blockquote>
<blockquote>
<p>AGIï¼šartificial general intelligenceï¼Œé€šç”¨äººå·¥æ™ºèƒ½ï¼ˆå¼ºäººå·¥æ™ºèƒ½ï¼‰ï¼Œèƒ½å¤Ÿå®Œæˆä»»ä½•äººç±»å¯ä»¥å®Œæˆçš„äº‹æƒ…</p>
</blockquote>
<p>ç›®å‰æˆ‘ä»¬æ‰€æ¥è§¦åˆ°çš„AIéƒ½æ˜¯ANIï¼Œç¦»AGIçš„å‘å±•è‡³å°‘è¿˜éœ€è¦å¾ˆå¤šå¹´ã€‚</p>
<h2 id="machine-learning">Machine Learning</h2>
<blockquote>
<p>ç›‘ç£å­¦ä¹ ï¼šå®Œæˆè¾“å…¥åˆ°è¾“å‡ºçš„æ˜ å°„è¢«ç§°ä¸ºç›‘ç£å­¦ä¹ ï¼Œç›‘ç£å­¦ä¹ çš„æ•°æ®éƒ½æ˜¯æœ‰ç¡®å®šæ ‡æ³¨ï¼ˆlabelï¼‰çš„ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚è¾“å…¥Aæ˜¯ä¸€å°é‚®ä»¶ï¼Œè¾“å‡ºBä¸ºæ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶ï¼ˆ1æˆ–0ï¼‰ï¼Œè¿™å°±æ˜¯ç”¨äºæ„å»ºåƒåœ¾é‚®ä»¶ç­›é€‰çš„AIæ ¸å¿ƒæ€æƒ³ã€‚<br>
å¯¹äºå¹¿å‘Šæ¨èç³»ç»Ÿï¼Œè¾“å…¥ä¸€äº›å¹¿å‘Šä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€äº›ä½ çš„ä¿¡æ¯ï¼Œç„¶åè¯•å›¾é¢„æµ‹ï¼Œä½ æ˜¯å¦ä¼šç‚¹å‡»å¹¿å‘Šã€‚<br>
è¿˜æœ‰å…¶ä»–è¯¸å¦‚éŸ³é¢‘è½¬æ–‡å­—ã€æœºå™¨ç¿»è¯‘ã€åŸºäºå›¾åƒé›·è¾¾çš„è‡ªåŠ¨é©¾é©¶ã€è§†è§‰æ£€æŸ¥ç­‰ã€‚</p>
<p><strong>ç›‘ç£å­¦ä¹ çš„é£é€Ÿå‘å±•</strong>ï¼š<br>
ç›‘ç£å­¦ä¹ çš„æ¦‚å¿µæ—©å·²å­˜åœ¨ï¼Œç›´åˆ°æœ€è¿‘ï¼ˆå¤§æ¦‚201Xå¹´å·¦å³ï¼Ÿï¼‰æ‰é£é€Ÿå‘å±•ã€‚ä¸»è¦åŸå› æ˜¯äº’è”ç½‘å’Œè®¡ç®—æœºçš„å…´èµ·ï¼Œä¿¡æ¯å¯ä»¥è¢«è®°å½•å†è®¡ç®—æœºé‡Œï¼Œæ‚¨å¯ä»¥æ‹¿åˆ°çš„æ•°æ®é‡æœ‰äº†è¾ƒå¤§å¢é•¿ã€‚</p>
<p>å¯¹äºä¼ ç»Ÿçš„äººå·¥æ™ºèƒ½ï¼Œå½“ä½ è¾“å…¥æ•°æ®æ›´å¤šæ—¶ï¼Œå®ƒçš„æ€§èƒ½ä¼šå¥½ä¸€ç‚¹ï¼Œå½“è¶…è¿‡ä¸€å®šèŒƒå›´ï¼Œæ€§èƒ½å¹¶ä¸ä¼šæŒç»­å¢é•¿ã€‚(æœ‰ç‚¹ç±»ä¼¼äºæœ€åè¶‹è¿‘å¹³çš„å¯¹æ•°æ›²çº¿ï¼‰ã€‚<br>
ä½†æ˜¯å¯¹äºç°ä»£äººå·¥æ™ºèƒ½æŠ€æœ¯ä»¥åŠç¥ç»ç½‘ç»œï¼Œå¦‚æœä½ è®­ç»ƒçš„æ˜¯ä¸€ä¸ªç¨å¤§çš„ç¥ç»ç½‘ç»œï¼Œé‚£ä¹ˆå®ƒçš„æ€§èƒ½ä¼šæ¯”ä¼ ç»Ÿçš„äººå·¥æ™ºèƒ½æ€§èƒ½æ›´å¼ºã€‚å¦‚æœæ˜¯ä¸€ä¸ªæ›´å¤§è§„æ¨¡çš„ç¥ç»ç½‘ç»œï¼Œé‚£ä¹ˆå®ƒçš„æ€§èƒ½ä¹Ÿä¼šå˜å¾—è¶Šæ¥è¶Šå¥½ã€‚ï¼ˆæœ€åä¹Ÿä¼šè¶‹è¿‘æ•°æ®äºå¹³ï¼‰</p>
<p><strong>å¦‚ä½•å…·æœ‰æ›´é«˜çš„æ€§èƒ½æ°´å¹³</strong>ï¼š</p>
<ol>
<li>æ‹¥æœ‰å¤§æ•°æ®é‡ï¼Œå³å¤§æ•°æ®ï¼Œæ•°æ®è¶Šå¤šè¶Šå¥½ã€‚</li>
<li>è®­ç»ƒä¸€ä¸ªéå¸¸å¤§çš„ç¥ç»ç½‘ç»œã€‚</li>
</ol>
<p>äººå·¥æ™ºèƒ½ä¸­æœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯æœºå™¨å­¦ä¹ ï¼ŒåŒ…æ‹¬ç›‘ç£å­¦ä¹ ï¼Œå³ä»è¾“å…¥åˆ°è¾“å‡ºçš„æ˜ å°„ï¼Œæ•°æ®èƒ½ä½¿å®ƒæœ‰å¾ˆå¥½çš„è¡¨ç°ã€‚</p>
<h2 id="what-is-data">What is data</h2>
<table>
<thead>
<tr>
<th style="text-align:center">æˆ¿å­å¤§å°</th>
<th style="text-align:center">å§å®¤æ•°é‡</th>
<th style="text-align:center">ä»·æ ¼ï¼ˆ1000$ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">523</td>
<td style="text-align:center">1</td>
<td style="text-align:center">115</td>
</tr>
<tr>
<td style="text-align:center">645</td>
<td style="text-align:center">1</td>
<td style="text-align:center">150</td>
</tr>
<tr>
<td style="text-align:center">708</td>
<td style="text-align:center">2</td>
<td style="text-align:center">210</td>
</tr>
</tbody>
</table>
<p>ä¸€ä¸ªæ•°æ®è¡¨æ ¼ï¼Œä¹Ÿæˆä¸ºæ•°æ®é›†ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªå¦‚ä¸Šçš„è¡¨æ ¼ä¸­ã€‚<br>
æŠŠAè®¾å®šä¸ºæˆ¿å­å¤§å°ï¼ŒBè®¾å®šä¸ºæˆ¿å­ä»·æ ¼ï¼Œå¤šå¤§çš„æˆ¿å­èƒ½å–å¤šå°‘é’±ï¼Œè®©AIç³»ç»Ÿå»å­¦ä¹ è¿™ä¸ªè¾“å…¥åˆ°è¾“å‡ºçš„æ˜ å°„ï¼Œä¹Ÿå°±æ˜¯Aåˆ°Bæ˜ å°„ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¢åŠ é¢å¤–çš„æ¡ä»¶ï¼Œä¾‹å¦‚æˆ¿å­å§å®¤æ•°é‡ï¼Œè¿™æ—¶Aå°±æ˜¯å‰ä¸¤åˆ—æ•°æ®ã€‚æ‰€ä»¥å®é™…ä¸Šï¼Œå…·ä½“ä»€ä¹ˆæ˜¯Aã€Bï¼Œå–å†³äºä½ æˆ–ä½ çš„ä¸šåŠ¡ã€‚<br>
åˆå‡è®¾ï¼Œæˆ‘æœ‰ä¸€å®šçš„é¢„ç®—ï¼Œæˆ‘æƒ³çŸ¥é“æˆ‘èƒ½ä¹°å¤šå¤§çš„æˆ¿å­ï¼Œè¿™æ—¶Aæ˜¯ä»·æ ¼ï¼ŒBæ˜¯æˆ¿å­å¤§å°ã€‚<br>
åˆå‡è®¾ï¼Œä½ æœ‰ä¸€ç»„å›¾ç‰‡æ•°æ®é›†ï¼Œå…¶ä¸­è¾“å…¥Aä»£è¡¨ä¸€ç»„ä¸åŒçš„å›¾åƒï¼Œè¾“å‡ºBæ˜¯ä»–ä»¬çš„æ ‡ç­¾ï¼ŒæŸå¼ ç…§ç‰‡æ˜¯çŒ«ï¼ŒæŸå¼ ä¸æ˜¯çŒ«ã€‚</p>
<p>PSï¼šæŠŠçŒ«ä½œä¸ºä¸€ä¸ªè°ˆè®ºï¼Œæ˜¯æœºå™¨å­¦ä¹ çš„æƒ¯ä¾‹ã€‚</p>
<p><strong>å¦‚ä½•è·å–æ•°æ®</strong>ï¼š</p>
<p>æ‰‹åŠ¨æ ‡æ³¨ã€‚è·å–ä¸€äº›æ•°æ®åï¼Œäººå·¥æ‰‹åŠ¨å»æ ‡æ³¨ä½ éœ€è¦çš„æ•°æ®å…³é”®ä¿¡æ¯ï¼Œä¾‹å¦‚è¿™å¼ å›¾ç‰‡æ˜¯çŒ«ã€ä¸æ˜¯çŒ«ã€‚æ‰‹åŠ¨æ ‡æ³¨ï¼Œæ˜¯ä¸€ä¸ªè®©ä½ åŒæ—¶æ‹¥æœ‰Aå’ŒBæ•°æ®é›†çš„æœ‰æ•ˆæ–¹æ³•ã€‚</p>
<p>è§‚å¯Ÿç”¨æˆ·çš„è¡Œä¸ºæˆ–å…¶ä»–ç±»å‹è¡Œä¸ºã€‚å¦‚ç”µå•†å¹³å°ä¸Šï¼Œä¸åŒçš„ç‰©å“ä¼šæœ‰ä¸åŒçš„ä»·æ ¼ï¼Œé€šè¿‡çºªå½•ç”¨æˆ·æ˜¯å¦è´­ä¹°äº§å“ï¼Œå°±å¯ä»¥æ”¶é›†åˆ°ç”¨æˆ·åï¼Œäº§å“çš„ä»·æ ¼ï¼Œè´­ä¹°æ—¥æœŸï¼Œä»¥åŠè´­ä¹°è¡Œä¸ºç­‰æ•°æ®ã€‚<br>
ä¾‹å¦‚å·¥å‚ä¸­çš„æœºå™¨ï¼Œä½ æƒ³è¦é¢„æµ‹ä¸€å°æœºå™¨æ˜¯å¦å³å°†å‡ºç°æ•…éšœï¼Œé‚£ä¹ˆä½ å¯ä»¥è®°å½•ä¸€ä¸ªè¿™æ ·çš„æ•°æ®é›†ï¼Œæœºå™¨åºåˆ—å·ã€æœºå™¨çš„æ¸©åº¦ã€æœºå™¨é‡Œçš„å‹å¼ºã€å’Œæœºå™¨ä¹‹å‰æ˜¯å¦å‡ºç°è¿‡æ•…éšœã€‚å¯ä»¥é€‰æ‹©æœºå™¨åºåˆ—å·ã€æœºå™¨çš„æ¸©åº¦ã€æœºå™¨é‡Œçš„å‹å¼ºä½œä¸ºè¾“å…¥Aï¼Œæœºå™¨ä¹‹å‰æ˜¯å¦å‡ºç°è¿‡æ•…éšœä½œä¸ºè¾“å‡ºBã€‚</p>
<p>ä»ç½‘ç«™ä¸Šä¸‹è½½æˆ–ä»åˆä½œä¼™ä¼´é‚£é‡Œè·å–ã€‚å¼€æ”¾çš„äº’è”ç½‘ä¸Šæœ‰è®¸å¤šæ•°æ®é›†å¯ä»¥å…è´¹ä¸‹è½½ï¼Œåªéµå®ˆç›¸å…³åè®®å³å¯ã€‚</p>
<p><strong>æ•°æ®æ˜¯é‡è¦çš„ï¼Œä½†ä¹Ÿæœ‰2ç‚¹è¯¯è§£</strong></p>
<ol>
<li><strong>å…ˆè·å–è¶³å¤Ÿçš„æ•°æ®ï¼Œå†æ„å»ºAIå›¢é˜Ÿ</strong>ï¼›ä¸€æ—¦å¼€å§‹æ”¶é›†æ•°æ®ï¼Œé©¬ä¸ŠæŠŠæ•°æ®ç»™AIå›¢é˜Ÿï¼ŒAIå›¢é˜Ÿå¯ä»¥åé¦ˆç»™ITå›¢é˜Ÿéœ€è¦å“ªäº›æ•°æ®ï¼Œæˆ–è€…éœ€è¦æ›´ç»†è‡´çš„æ•°æ®ã€‚</li>
<li><strong>åªè¦æœ‰æ•°æ®ï¼Œå°±ä¼šæœ‰ç»“æœ</strong>ï¼›é€šå¸¸æ•°æ®å¤šç¡®å®æ¯”æ•°æ®å°‘è¦å¥½ï¼Œä¸€äº›å†³ç­–è€…è®¤ä¸ºå¤§é‡æ•°æ®ç»™åˆ°AIå›¢é˜Ÿï¼Œå°±ä¸€å®šèƒ½å‘æ˜è¿™äº›æ•°æ®çš„ä»·å€¼ä»è€Œè·å¾—å›æŠ¥ã€‚å¹¶ä¸æ€»æ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼Œä¸€å®¶å…¬å¸æ”¶è´­äº†è®¸å¤šå…¶ä»–åŒ»è¯å…¬å¸çš„æ•°æ®ï¼Œ ç†è®ºä¸Šè®²è¿™äº›æ•°æ®æ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚ ä½†æ˜¯å‡ å¹´åï¼Œ ä»–ä»¬çš„å·¥ç¨‹å¸ˆä»¬è¿˜æ˜¯æ²¡æœ‰äº†å¼„æ˜ç™½å¦‚ä½•ä½¿ç”¨è¿™äº›æ•°æ®ï¼Œå¹¶ä¸”çœŸæ­£åœ°ä»ä¸­åˆ›é€ ä»·å€¼ã€‚<br>
ä¸è¦ä¸ºäº†è·å–æ•°æ®è€Œè¿‡åº¦æŠ•èµ„ï¼Œé™¤éåŒæ—¶è˜ç”¨ä¸€ä¸ªAIå›¢é˜Ÿæ¥ç ”ç©¶è¿™äº›æ•°æ®ï¼Œå› ä¸ºä»–ä»¬èƒ½åˆ†æå‡ºå“ªäº›æ•°æ®æ˜¯æœ‰ä»·å€¼çš„ã€‚</li>
</ol>
<p>æ•°æ®æ˜¯æ•£ä¹±çš„ï¼›å¦‚æœæ•°æ®çš„è´¨é‡å·®ï¼Œé‚£ä¹ˆAIä¼šå­¦ä¹ å‡ºä¸å‡†ç¡®çš„ç»“æœï¼ŒAIå›¢é˜Ÿè¦è§£å†³å¦‚ä½•æ¸…ç†æ•°æ®çš„é—®é¢˜ã€‚å¤„ç†ä¸æ­£ç¡®çš„æ ‡ç­¾ã€‚</p>
<p>æ•°æ®çš„ç±»å‹æœ‰å¾ˆå¤šï¼Œ å›¾ç‰‡ã€è§†é¢‘å’Œæ–‡æœ¬è¿™äº›ç±»å‹çš„æ•°æ®ï¼Œç§°ä¹‹ä¸º<strong>éç»“æ„åŒ–æ•°æ®</strong>ï¼Œéç»“æ„åŒ–æ•°æ®æ²¡æœ‰é¢„å®šä¹‰çš„æ•°æ®æ¨¡å‹ã€‚ç»“æ„åŒ–æ•°æ®æ˜¯é«˜åº¦ç»„ç»‡å’Œæ•´é½æ ¼å¼åŒ–çš„æ•°æ®ï¼Œå®¹æ˜“å‚¨å­˜åœ¨ä¸€ä¸ªå·¨å¤§çš„ç”µå­è¡¨æ ¼é‡Œã€‚å¤„ç†éç»“æ„åŒ–æ•°æ®çš„æŠ€æœ¯è¦æ¯”å¤„ç†è¿™äº›ç»“æ„åŒ–æ•°æ®çš„æŠ€æœ¯éš¾ä¸€ç‚¹ã€‚</p>
<h2 id="the-terminology-of-ai">The terminology of AI</h2>
<blockquote>
<p>æœºå™¨å­¦ä¹ ç³»ç»Ÿçš„å­¦ä¹ ä»è¾“å…¥Aåˆ°è¾“å‡ºBçš„æ˜ å°„ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„AIç³»ç»Ÿã€‚</p>
</blockquote>
<p>æ•°æ®ç§‘å­¦ï¼šæ•°æ®ç§‘å­¦çš„é¡¹ç›®ç»“è®ºé€šå¸¸æ˜¯ä¸€äº›å¸®åŠ©ä½ åšä¸Šå•†ä¸šå†³å®šçš„è§è§£ï¼Œæ¯”å¦‚å»ºé€ é‚£ç§æˆ¿å±‹æˆ–è€…æ˜¯æŠ•èµ„ç¿»æ–°æˆ¿å­ã€‚<br>
æœºå™¨å­¦ä¹ ï¼šæœºå™¨å­¦ä¹ æ˜¯ä¸€ä¸ªè®©ç”µè„‘åœ¨ä¸è¢«ç¼–ç¨‹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è‡ªå·±å­¦ä¹ çš„ç ”ç©¶é¢†åŸŸï¼Œæ— éœ€æ˜¾ç¤ºç¼–ç¨‹ï¼Œ è¿™æ˜¯Arthur Samuelå‡ åå¹´å‰æå‡ºçš„å®šä¹‰ã€‚</p>
<blockquote>
<p>æœºå™¨å­¦ä¹ é¡¹ç›®é€šå¸¸ä¼šå¸¦å‡ºä¸€ä¸ªè¿è¡Œçš„è½¯ä»¶ï¼Œç”¨ç»™å®šçš„Aå¾—åˆ°è¾“å‡ºçš„Bã€‚ä¸æœºå™¨å­¦ä¹ ç›¸æ¯”ï¼Œæ•°æ®ç§‘å­¦é€šè¿‡æŒ–æ˜æ•°æ®æ¥è·å–è§è§£ã€‚é€šå¸¸çš„æ•°æ®ç§‘å­¦é¡¹ç›®çš„ç»“æœæ˜¯ä¸€ç»„å¹»ç¯ç‰‡ã€‚</p>
</blockquote>
<p>å¦‚ä»Šå¤§å‹å•†ä¸šç½‘ç«™ä¸­å¤§å¤šéƒ½æœ‰AIç³»ç»Ÿï¼Œä¾‹å¦‚é¢„æµ‹ä½ æ˜¯å¦ä¼šç‚¹å‡»æŸä¸ªå¹¿å‘Šå¹¶æ¨é€ã€‚è¿™æ˜¯ä¸€ä¸ªåˆ©æ¶¦ä¸°åšçš„AIç³»ç»Ÿã€‚å¹¿å‘Šè¡Œä¸šçš„æ•°æ®ç§‘å­¦é¡¹ç›®ï¼Œä¾‹å¦‚æ•°æ®åˆ†æå¾—åˆ°ï¼Œæ—…æ¸¸å…¬å¸æ²¡æœ‰è´­ä¹°è¶³å¤Ÿçš„å¹¿å‘Šï¼Œè¿™æ—¶å¯ä»¥æ´¾å‡ºæ›´å¤šé”€å”®äººå‘˜ï¼Œè¯´æœä»–ä»¬ä½¿ç”¨æ›´å¤šçš„å¹¿å‘Šã€‚<br>
å³ä½¿æ˜¯åŒä¸€å®¶å…¬å¸ï¼Œä¹Ÿä¼šåŒæ—¶æœ‰ä¸åŒçš„æœºå™¨å­¦ä¹ é¡¹ç›®å’Œæ•°æ®ç§‘å­¦é¡¹ç›®ï¼Œè¿™ä¸¤é¡¹éƒ½éå¸¸å…·æœ‰ä»·å€¼ã€‚</p>
<blockquote>
<p>æ·±åº¦å­¦ä¹ æ˜¯ä¸€ç§ç‰¹æ®Šçš„æœºå™¨å­¦ä¹ ï¼Œä»–é€šè¿‡ç¥ç»ç½‘ç»œå¤„ç†è¾“å…¥Aåˆ°è¾“å…¥Bçš„æ˜ å°„ã€‚ä¸ºäº†åŒºåˆ†äººçš„å¤§è„‘ï¼Œä¹Ÿç§°ä¸ºäººå·¥ç¥ç»ç½‘ç»œã€‚</p>
</blockquote>
<p>äººå·¥ç¥ç»ç½‘ç»œå…¶å®æ˜¯ç±»æ¯”çš„äººçš„ç¥ç»ç½‘ç»œï¼Œå¦‚ä¸‹å›¾ä¸­çš„å°åœˆç§°ä¸ºäººå·¥ç¥ç»å…ƒï¼Œæˆ–ç®€ç§°ç¥ç»å…ƒã€‚è¿™äº›ç¥ç»å…ƒç›¸äº’ä¼ é€’ï¼Œ<strong>ç¥ç»ç½‘ç»œå…¶å®æ˜¯ä¸€ä¸ªå¤§çš„æ•°æ®æ–¹ç¨‹</strong>ï¼Œæ ¹æ®è¾“å…¥Aï¼Œå‘Šè¯‰å¦‚ä½•è®¡ç®—Bã€‚å¦‚ä»Šçš„ç¥ç»ç½‘ç»œä¸€è¯å‡ ä¹ç­‰åŒäºæ·±åº¦å­¦ä¹ ã€‚</p>
<p><img src="/2023/05/29/AI-For-Everyone%E7%AC%94%E8%AE%B0/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C.webp" alt="ç¥ç»ç½‘ç»œ"></p>
<p>ä½ å¯èƒ½ä¹Ÿåœ¨åª’ä½“ä¸Šå¬åˆ°å…¶ä»–æµè¡Œè¯­å¦‚æ— ç›‘ç£å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œå›¾å½¢æ¨¡å‹ï¼Œè®¡åˆ’ï¼ŒçŸ¥è¯†å›¾è¡¨ç­‰ã€‚ä½†æ˜¯æœºå™¨å­¦ä¹ ã€æ•°æ®ç§‘å­¦ã€æ·±åº¦å­¦ä¹ å’Œç¥ç»ç½‘ç»œä¹Ÿæ˜¯éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p><img src="/2023/05/29/AI-For-Everyone%E7%AC%94%E8%AE%B0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%85%B3%E7%B3%BB.webp" alt="å…³ç³»å›¾ï¼Œå›¾ç‰‡æ¥æºäºç½‘ç»œï¼Œç•¥æœ‰å¢æ”¹"></p>
<h2 id="what-makes-an-ai-company">What makes an AI company</h2>
<p>å¦‚ä½•è®©å…¬å¸æ“…é•¿äººå·¥æ™ºèƒ½ï¼Ÿä»äº’è”ç½‘çš„å…´èµ·ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œäº’è”ç½‘å…¬å¸å¹¶ä¸ç­‰äºwebç½‘ç«™+å…¬å¸ã€‚åŒæ ·ï¼Œäººå·¥æ™ºèƒ½å…¬å¸å¹¶ä¸ç­‰åŒäºä½¿ç”¨äººå·¥æ™ºèƒ½çš„å…¬å¸ã€‚</p>
<ol>
<li>äººå·¥æ™ºèƒ½å…¬å¸æ“…é•¿æ•°æ®é‡‡é›†ã€‚ä¹Ÿå› æ­¤å¤§å‹æ¶ˆè´¹ç§‘æŠ€å…¬å¸ä¼šæœ‰å…è´¹äº§å“æ¥å¸®åŠ©ä»–ä»¬æ”¶é›†æ•°æ®ï¼Œå¹¶åœ¨åˆ«å¤„äº§ç”Ÿæ”¶ç›Šã€‚</li>
<li>äººå·¥æ™ºèƒ½å…¬å¸ä¼šå»ºç«‹ç»Ÿä¸€çš„æ•°æ®ä»“åº“ã€‚å¦‚æœæœ‰éå¸¸å¤šä¸ªä¸åŒä»“åº“ï¼Œæ¥åˆ†åˆ«è·å–æ•°æ®å¹¶åˆ†æï¼Œé‚£ä¹ˆå‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚</li>
<li>äººå·¥æ™ºèƒ½å…¬å¸æ“…é•¿å‘ç°è‡ªåŠ¨åŒ–çš„æœºä¼šï¼Œ</li>
<li>äººå·¥æ™ºèƒ½å…¬å¸æœ‰å¾ˆå¤šæ–°çš„å²—ä½å¦‚MLEï¼Œå’Œæ–°åˆ†é…ä»»åŠ¡çš„æ–¹å¼ã€‚</li>
</ol>
<p>ä¸€ä¸ªå…¬å¸æƒ³è¦å˜å¾—æ“…é•¿äººå·¥æ™ºèƒ½ï¼Œæ„å‘³ç€è¿™ä¸ªå…¬å¸ç”¨äººå·¥æ™ºèƒ½å»åšæŸäº›äº‹æƒ…ï¼Œå¹¶æŠŠå®ƒåšå¾—å¾ˆå¥½ã€‚è¿‡å»å¾ˆå¤šå…¬å¸ä¾‹å¦‚GOOGLEèŠ±è´¹äº†ä¸€å®šæ—¶é—´æˆä¸ºæ“…é•¿äººå·¥æ™ºèƒ½çš„å…¬å¸ã€‚ä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªä¸å¯å¤ç°çš„è¿‡ç¨‹ã€‚è½¬å‹äººå·¥æ™ºèƒ½å…¬å¸æœ‰ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>å¯åŠ¨è¯•ç‚¹é¡¹ç›®ï¼Œä»è€Œäº†è§£äººå·¥æ™ºèƒ½ï¼Œå¤§æ¦‚çŸ¥é“äººå·¥æ™ºèƒ½å¯ä»¥åšä»€ä¹ˆï¼Œä¸å¯ä»¥åšä»€ä¹ˆã€‚</li>
<li>åœ¨å…¬å¸å†…éƒ¨å»ºç«‹ä¸€ä¸ªäººå·¥æ™ºèƒ½å›¢é˜Ÿï¼Œ</li>
<li>æä¾›å¹¿æ³›çš„äººå·¥æ™ºèƒ½åŸ¹è®­ï¼Œä¸ä»…è¦ç»™å·¥ç¨‹å¸ˆåŸ¹è®­ï¼Œè¿˜è¦æä¾›ç»™éƒ¨é—¨é¢†å¯¼äºé«˜å±‚ç®¡ç†äººå‘˜ã€‚</li>
<li>åˆ¶å®šå…¬å¸çš„äººå·¥æ™ºèƒ½å‘å±•æˆ˜ç•¥ã€‚</li>
<li>ä¿è¯å†…å¤–éƒ¨å¯¹äºäººå·¥æ™ºèƒ½å‘å±•æˆ˜ç•¥æ²Ÿé€šä¸€è‡´ã€‚æ‰€æœ‰çš„ç›¸å…³äººå‘˜åŒ…æ‹¬é¡¾å®¢åˆ°æŠ•èµ„äººéƒ½çŸ¥é“ä½ çš„å…¬å¸æ˜¯å¦‚ä½•åœ¨äººå·¥æ™ºèƒ½çš„å…´èµ·ä¸­æ‰¾åˆ°å‰è¡Œæ–¹å‘çš„ã€‚</li>
</ol>
<h2 id="what-machine-learning-can-and-cannot-do">What machine learning can and cannot do</h2>
<div class="panel panel-info">
    <div class="panel-title">æœ¬ç« çš„ä¸€ç‚¹ä¸ªäººçœ‹æ³•</div>
    <div class="panel-body">
        <p>æœ¬ç« ä¸­å´æ©è¾¾è€å¸ˆä»‹ç»çš„AIä¸èƒ½åšäº‹æƒ…ï¼Œä½†ç°åœ¨ç”±äºopenAIçš„ChatGPT(èŠå¤©ç”Ÿæˆé¢„è®­ç»ƒè½¬æ¢å™¨ï¼ŒåŸºäº<strong>ç”Ÿæˆå‹é¢„è®­ç»ƒå˜æ¢æ¨¡å‹3(GPT3)</strong>ï¼Œæ˜¯ä¸€ä¸ªè‡ªå›å½’è¯­è¨€æ¨¡å‹ï¼Œä»¥ç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ æ–¹å¼è®­ç»ƒï¼ŒåŸºäºæ·±åº¦å­¦ä¹ æ–¹å¼ç”Ÿæˆäººç±»è¯­è¨€)çš„èŠå¤©ç¨‹åºï¼Œå´è€å¸ˆå½“æ—¶æ‰€è®¤ä¸ºæ— æ³•åšåˆ°ä»»åŠ¡ä¹Ÿè¢«åšåˆ°äº†ã€‚ç”±äºæœ‰ä¸€å®šçš„æ—¶é—´å·®ï¼Œå› æ­¤æœ¬ç« éœ€è¦è¾©è¯çœ‹å¾…ã€‚</p>

    </div>
    </div>
]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>é‚£äº›å¹´ç©è¿‡çš„æ¸¸æˆ</title>
    <url>/2023/05/18/%E9%82%A3%E4%BA%9B%E5%B9%B4%E7%8E%A9%E8%BF%87%E7%9A%84%E6%B8%B8%E6%88%8F/</url>
    <content><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œsongbirdsæ˜¯ä¸€ä¸ªå–œæ¬¢ç©æ¸¸æˆçš„äººã€‚</p>
<span id="more"></span>
<p><a href="https://store.steampowered.com/app/646570/Slay_the_Spire/">Steam ä¸Šçš„ Slay the Spire</a></p>
<p><img src="/2023/05/18/%E9%82%A3%E4%BA%9B%E5%B9%B4%E7%8E%A9%E8%BF%87%E7%9A%84%E6%B8%B8%E6%88%8F/slay-the-Spire.webp" alt="Slay the Spire"></p>
<p><a href="https://store.steampowered.com/app/550/Left_4_Dead_2/">Steam ä¸Šçš„ Left 4 Dead 2</a></p>
<p><img src="/2023/05/18/%E9%82%A3%E4%BA%9B%E5%B9%B4%E7%8E%A9%E8%BF%87%E7%9A%84%E6%B8%B8%E6%88%8F/left4-dead-2.webp" alt="Left 4 Dead 2"></p>
<p><a href="https://store.steampowered.com/app/730/CounterStrike_Global_Offensive/">Steam ä¸Šçš„ Counter-Strike: Global Offensive</a></p>
<p><img src="/2023/05/18/%E9%82%A3%E4%BA%9B%E5%B9%B4%E7%8E%A9%E8%BF%87%E7%9A%84%E6%B8%B8%E6%88%8F/CSGO.webp" alt="CSGO"></p>
<p><a href="https://store.steampowered.com/app/322330/_/">Steam ä¸Šçš„ é¥¥è’è”æœºç‰ˆ </a></p>
<p><img src="/2023/05/18/%E9%82%A3%E4%BA%9B%E5%B9%B4%E7%8E%A9%E8%BF%87%E7%9A%84%E6%B8%B8%E6%88%8F/Don't-Starve-Together.webp" alt="Don't Starve Together"></p>
<p><a href="https://store.steampowered.com/app/994280/Gujian3/">Steam ä¸Šçš„ å¤å‰‘å¥‡è°­ä¸‰(Gujian3)</a></p>
<p><img src="/2023/05/18/%E9%82%A3%E4%BA%9B%E5%B9%B4%E7%8E%A9%E8%BF%87%E7%9A%84%E6%B8%B8%E6%88%8F/Gujian3.webp" alt="å¤å‰‘å¥‡è°­ä¸‰"></p>
]]></content>
      <categories>
        <category>ç”Ÿæ´»</category>
      </categories>
  </entry>
  <entry>
    <title>jMeterä½¿ç”¨</title>
    <url>/2023/05/03/jMeter%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>jMeterä½¿ç”¨</p>
<span id="more"></span>
<h2 id="1-åˆ‡æ¢è¯­è¨€">1.åˆ‡æ¢è¯­è¨€</h2>
<p><img src="/2023/05/03/jMeter%E4%BD%BF%E7%94%A8/%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80.webp" alt="åˆ‡æ¢è¯­è¨€"></p>
<h2 id="2-æ·»åŠ çº¿ç¨‹ç»„ä»»åŠ¡">2.æ·»åŠ çº¿ç¨‹ç»„ä»»åŠ¡</h2>
<p><img src="/2023/05/03/jMeter%E4%BD%BF%E7%94%A8/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%BB%841.webp" alt="åˆ›å»ºçº¿ç¨‹ç»„1"></p>
<p><img src="/2023/05/03/jMeter%E4%BD%BF%E7%94%A8/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%BB%842.webp" alt="åˆ›å»ºçº¿ç¨‹ç»„2"></p>
<p>æ­¤å¤„éœ€è¦æµ‹è¯•çš„httpè¯·æ±‚ï¼Œç„¶åæŒ‰è¦æ±‚å¡«å†™åŸŸåæˆ–ipåœ°å€ï¼Œç«¯å£ï¼Œè¯·æ±‚ç±»å‹ï¼Œå‚æ•°å³å¯</p>
<p><img src="/2023/05/03/jMeter%E4%BD%BF%E7%94%A8/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%BB%843.webp" alt="åˆ›å»ºçº¿ç¨‹ç»„3"></p>
<p>éœ€è¦æŸ¥çœ‹ç»“æœã€‚æ·»åŠ ç›‘å¬å™¨ã€‚è¿™é‡Œçš„ç›‘å¬å™¨ä¸»è¦æœ‰ï¼šæŸ¥çœ‹ç»“æœæ ‘ã€æ±‡æ€»æŠ¥å‘Šã€èšåˆæŠ¥å‘Šã€æ±‡æ€»å›¾ã€å“åº”æ—¶é—´å›¾ã€‚ä¸»è¦ç”¨å‰ä¸‰ä¸ªã€‚åé¢ä¸¤ä¸ªç”¨äºå›¾è¡¨å±•ç¤ºã€‚</p>
<p><img src="/2023/05/03/jMeter%E4%BD%BF%E7%94%A8/%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%BB%844.webp" alt="åˆ›å»ºçº¿ç¨‹ç»„4"></p>
<h2 id="3-å¯åŠ¨">3.å¯åŠ¨</h2>
<p>å¯åŠ¨å³å¯</p>
<h2 id="4-å¯èƒ½çš„ç«¯å£å ç”¨å¼‚å¸¸">4.å¯èƒ½çš„ç«¯å£å ç”¨å¼‚å¸¸</h2>
<p>jMeteråœ¨è·‘å¤§é‡æµ‹è¯•çš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿå¹¶å‘è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè¿æ¥å ç”¨ä¸€ä¸ªç«¯å£ï¼Œwinç»™TCP/IPçš„é“¾æ¥ç«¯å£ä¸º1024-5000ï¼Œå¹¶ä¸”å››åˆ†é’Ÿå¾ªç¯å›æ”¶ï¼Œå¯¼è‡´çŸ­æ—¶é—´å¤§é‡è¯·æ±‚ç«¯å£å æ»¡ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆå‚è€ƒï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/291449056">Jmeterè·‘è„šæœ¬ç«¯å£å ç”¨é—®é¢˜æ•´ç† - çŸ¥ä¹</a></p>
<p><a href="https://blog.csdn.net/fengyuyeguirenenen/article/details/123998742">WINDOWSä¸‹JMETERç«¯å£å ç”¨é—®é¢˜è¯¦ç»†è§£å†³-CSDNåšå®¢</a></p>
]]></content>
      <categories>
        <category>åç«¯</category>
      </categories>
  </entry>
  <entry>
    <title>SpringBootæ•´åˆES-High-Level-Client</title>
    <url>/2023/04/17/SpringBoot%E6%95%B4%E5%90%88ES-High-Level-Client/</url>
    <content><![CDATA[<p>æœ¬ç¬”è®°åŸºäºrest-high-level-clientï¼Œä½†æ˜¯åœ¨ESçš„7.15ç‰ˆæœ¬rest-high-level-clientç°åœ¨å·²ç»è¢«æ ‡è®°ä¸ºè¿‡æ—¶äº†ã€‚æ¨èä½¿ç”¨spring-boot-starter-data-elasticsearchä¾èµ–ã€‚æœ¬ç¯‡å¯ä»¥ä»…ä½œäº†è§£ã€‚</p>
<span id="more"></span>
<h2 id="1-å»ºå¾®æœåŠ¡">1.å»ºå¾®æœåŠ¡</h2>
<p>ä¸ºESå•ç‹¬å»ºç«‹ä¸€ä¸ªå¾®æœåŠ¡ï¼Œæ¨¡æ¿å»ºç«‹çš„æ—¶å€™ä»…é€‰æ‹©Spring-webä¾èµ–å³å¯ï¼Œæˆ‘è¿™é‡Œçš„spring-bootç‰ˆæœ¬é€‰æ‹©çš„2.6.8ä¸å…¶ä»–å¾®æœåŠ¡ä¸€è‡´ã€‚</p>
<h2 id="2-å¼•å…¥ä¾èµ–">2.å¼•å…¥ä¾èµ–</h2>
<p>å¼•å…¥commonå¾®æœåŠ¡ä¾èµ–ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example.mall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mall-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¼•å…¥esä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šESç‰ˆæœ¬ï¼Œå› ä¸ºæ˜¯SpringBooté¡¹ç›®ï¼Œæ‰€ä»¥ESç‰ˆæœ¬ä¼šè¢«SpringBootç‰ˆæœ¬ç®¡ç†ï¼Œéœ€è¦æ‰‹åŠ¨æ”¹ä¸ºä¸è‡ªå·±å®‰è£…çš„ESç‰ˆæœ¬ä¸€è‡´ã€‚æŒ‰å›¾ä¾æ¬¡ç‚¹å‡»å³å¯æŸ¥çœ‹Spring-bootç®¡ç†çš„ç‰ˆæœ¬ï¼š</p>
<p><img src="/2023/04/17/SpringBoot%E6%95%B4%E5%90%88ES-High-Level-Client/%E6%9F%A5%E7%9C%8BSpringBoot%E7%AE%A1%E7%90%86%E7%89%88%E6%9C%AC.webp" alt="æŸ¥çœ‹SpringBootç®¡ç†ç‰ˆæœ¬"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šesç‰ˆæœ¬ä¸º7.4.2ï¼Œå¦åˆ™ä»¥spring-boot-starter-parentä¸­ä¸ºå‡†ï¼Œä¸è‡ªå®šä¹‰çš„å†²çª --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">elasticsearch.version</span>&gt;</span>7.4.2<span class="tag">&lt;/<span class="name">elasticsearch.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-å¯åŠ¨æŠ¥é”™">3.å¯åŠ¨æŠ¥é”™</h2>
<p>æŠ¥é”™ä¿¡æ¯ï¼šError creating bean with name â€˜configurationPropertiesBeansâ€™</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">Caused by<span class="punctuation">:</span> org.springframework.beans.factory.BeanCreationException<span class="punctuation">:</span> Error creating bean with name &#x27;configurationPropertiesBeans&#x27; defined in class path resource <span class="punctuation">[</span>org/springframework/cloud/autoconfigure/ConfigurationPropertiesRebinderAutoConfiguration.class<span class="punctuation">]</span><span class="punctuation">:</span> Post-processing of merged bean definition failed; nested exception is java.lang.IllegalStateException<span class="punctuation">:</span> Failed to introspect Class <span class="punctuation">[</span>org.springframework.cloud.context.properties.ConfigurationPropertiesBeans<span class="punctuation">]</span> from ClassLoader <span class="punctuation">[</span>sun.misc.Launcher$AppClassLoader@<span class="number">18</span>b4aac2<span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>æŠ¥é”™åŸå› ï¼šcommonä¸­çš„alibaba-spring-cloud-nacos-discoverï¼Œalibaba-spring-cloud-nacos-configä¸¤ä¸ªä¾èµ–ä¸­çš„å†…éƒ¨ä¸¤ä¸ªä¾èµ–ï¼š<code>spring-cloud-commons</code>ã€<code>spring-cloud-context</code>çš„ç‰ˆæœ¬ï¼Œå’Œspring-cloud-starterçš„å†…éƒ¨ä¸¤ä¸ªä¾èµ–ç‰ˆæœ¬ä¸åŒã€‚<br>
å…¶ä»–ä¾èµ–commonçš„å¾®æœåŠ¡æ²¡æœ‰é—®é¢˜ï¼Œæ˜¯å› ä¸ºåˆå¼•å…¥äº†loader-balanceä¹‹ç±»çš„ï¼Œå…¶å†…éƒ¨ä¹Ÿæœ‰è¿™ä¸¤ä¸ªä¾èµ–ï¼Œè¦†ç›–ä¹‹åå°±æ²¡æœ‰é—®é¢˜äº†ã€‚<br>
æ‰€ä»¥æˆ‘ä»¬æ‰‹åŠ¨å¼•å…¥è¿™ä¸¤ä¸ªä¾èµ–ï¼Œè¦†ç›–å³å¯ã€‚å¼•å…¥ä¾èµ–å’Œspring-cloud-starterå†…éƒ¨ç‰ˆæœ¬ä¸€è‡´å³å¯ã€‚</p>
<p><img src="/2023/04/17/SpringBoot%E6%95%B4%E5%90%88ES-High-Level-Client/common%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%89%88%E6%9C%AC%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98.webp" alt="commonå¾®æœåŠ¡ç‰ˆæœ¬ä¸ä¸€è‡´é—®é¢˜"></p>
<p>æ‰‹åŠ¨è¦†ç›–ç‰ˆæœ¬ï¼Œä¸spring-cloud-starterä¿æŒä¸€è‡´</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-context --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-commons --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-commons<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-å®Œæ•´pom">4.å®Œæ•´pom</h2>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example.mall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mall-search<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>mall-search<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">description</span>&gt;</span>mallæ£€ç´¢æœåŠ¡<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- æŒ‡å®šesç‰ˆæœ¬ä¸º7.4.2ï¼Œå¦åˆ™ä»¥spring-boot-starter-parentä¸­ä¸ºå‡†ï¼Œä¸è‡ªå®šä¹‰çš„å†²çª --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">elasticsearch.version</span>&gt;</span>7.4.2<span class="tag">&lt;/<span class="name">elasticsearch.version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.mall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mall-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- commonåŒ…ä¸­nacosä¸‹çš„cloud-contextä¸cloud-commons ä¸ spring-cloudä¸­çš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œæ‰‹åŠ¨æŒ‡å®šä¸springä¸€è‡´çš„ç‰ˆæœ¬--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--å…¶ä»–æœåŠ¡ä¸æŠ¥é”™çš„åŸå› æ˜¯å› ä¸ºå¼•å…¥äº†loadbalancer æˆ–è€…feignï¼Œè¿™ä¸­çš„è¦†ç›–äº† --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-context --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-commons --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-commons<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- esä¾èµ– --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>7.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-é…ç½®bootstrapæ–‡ä»¶">5.é…ç½®bootstrapæ–‡ä»¶</h2>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">mall-search</span></span><br></pre></td></tr></table></figure>
<h2 id="6-ç¼–å†™esé…ç½®æ–‡ä»¶">6.ç¼–å†™ESé…ç½®æ–‡ä»¶</h2>
<p>å»ºç«‹configåŒ…ã€‚äºconfigåŒ…ä¸‹åˆ›å»ºElasticSearchConfigç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * esé…ç½®ç±»</span></span><br><span class="line"><span class="comment"> * 1. å¯¼å…¥ä¾èµ–</span></span><br><span class="line"><span class="comment"> * 2. ç¼–å†™é…ç½®ï¼Œç»™å®¹å™¨æ³¨å…¥ä¸€ä¸ªRestHighLevelClient</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ElasticSearchConfig</span> &#123;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// ESé€šç”¨é…ç½®ï¼Œæ˜¯å…¬ç”¨çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> RequestOptions COMMON_OPTIONS;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        RequestOptions.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> RequestOptions.DEFAULT.toBuilder();</span><br><span class="line">        COMMON_OPTIONS = builder.build();</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// å°†ESå®ä¾‹æ³¨å…¥åˆ°IOCå®¹å™¨ï¼Œåç»­éƒ½æ³¨å…¥æ­¤å®ä¾‹ä½¿ç”¨å³å¯</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestHighLevelClient <span class="title function_">esRestClient</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(</span><br><span class="line">                RestClient.builder(<span class="keyword">new</span> <span class="title class_">HttpHost</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">9200</span>, <span class="string">&quot;http&quot;</span>))</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-æµ‹è¯•">7. æµ‹è¯•</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ElaTests</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * å­˜å‚¨æµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@SneakyThrows</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">indexData</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="comment">// è·å–users ç´¢å¼•ï¼ˆæ•°æ®åº“ï¼‰ã€‚å¦‚æœæ²¡æœ‰ä¼šåˆ›å»º</span></span><br><span class="line">		<span class="type">IndexRequest</span> <span class="variable">indexRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexRequest</span>(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">         <span class="comment">// idä¸º1</span></span><br><span class="line">		indexRequest.id(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">		<span class="comment">// indexRequest.source(&quot;userName&quot;, &quot;zhangsan&quot;, &quot;age&quot;, 18, &quot;gender&quot;, &quot;ç”·&quot;);</span></span><br><span class="line">		<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;zhangsan&quot;</span>,  <span class="string">&quot;ç”·&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">// é€šè¿‡jsonå­˜å‚¨ </span></span><br><span class="line">		<span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> JSONObject.toJSONString(user);</span><br><span class="line">		indexRequest.source(s, XContentType.JSON);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">		<span class="type">IndexResponse</span> <span class="variable">index</span> <span class="operator">=</span> client.index(indexRequest, ElasticSearchConfig.COMMON_OPTIONS);</span><br><span class="line">		System.out.println(index);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Data</span></span><br><span class="line">	<span class="meta">@AllArgsConstructor</span></span><br><span class="line">	<span class="meta">@NoArgsConstructor</span></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">		<span class="keyword">private</span> String userName;</span><br><span class="line">		<span class="keyword">private</span> String gender;</span><br><span class="line">		<span class="keyword">private</span> Integer age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@SneakyThrows</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">searchData</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// 1.åˆ›å»ºæ£€ç´¢è¯·æ±‚</span></span><br><span class="line">		<span class="type">SearchRequest</span> <span class="variable">searchRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>();</span><br><span class="line">		<span class="comment">// 2.æŒ‡å®šç´¢å¼•</span></span><br><span class="line">		searchRequest.indices(<span class="string">&quot;bank&quot;</span>);</span><br><span class="line">		<span class="comment">// 3.æŒ‡å®šæ£€ç´¢æ¡ä»¶</span></span><br><span class="line">		<span class="type">SearchSourceBuilder</span> <span class="variable">sourceBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchSourceBuilder</span>();</span><br><span class="line">		<span class="comment">// 3.1 æ„é€ æ¡ä»¶ï¼Œå¯¹åº”å…·ä½“çš„esçš„jsonä¸­çš„è¯­å¥</span></span><br><span class="line">		<span class="comment">//sourceBuilder.query();</span></span><br><span class="line">		<span class="comment">//sourceBuilder.from()</span></span><br><span class="line">		<span class="comment">//sourceBuilder.size();</span></span><br><span class="line">		sourceBuilder.query(QueryBuilders.matchQuery(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;mill&quot;</span>));</span><br><span class="line">		<span class="comment">// 3.2æŒ‰ç…§å¹´é¾„çš„å€¼åˆ†å¸ƒèšåˆ</span></span><br><span class="line">		<span class="type">TermsAggregationBuilder</span> <span class="variable">ageAgg</span> <span class="operator">=</span> AggregationBuilders.terms(<span class="string">&quot;ageAgg&quot;</span>).field(<span class="string">&quot;age&quot;</span>).size(<span class="number">10</span>);</span><br><span class="line">		sourceBuilder.aggregation(ageAgg);</span><br><span class="line">		<span class="comment">// 3.3è®¡ç®—å¹³å‡å€¼</span></span><br><span class="line">		searchRequest.source(sourceBuilder);</span><br><span class="line">		<span class="type">AvgAggregationBuilder</span> <span class="variable">balanceAvg</span> <span class="operator">=</span> AggregationBuilders.avg(<span class="string">&quot;balanceAvg&quot;</span>).field(<span class="string">&quot;balance&quot;</span>);</span><br><span class="line">		sourceBuilder.aggregation(balanceAvg);</span><br><span class="line">		System.out.println(sourceBuilder.toString());</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4.æ‰§è¡Œæ£€ç´¢</span></span><br><span class="line">		<span class="type">SearchResponse</span> <span class="variable">search</span> <span class="operator">=</span> client.search(searchRequest, ElasticSearchConfig.COMMON_OPTIONS);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 5.åˆ†æç»“æœ</span></span><br><span class="line">		System.out.println(search.toString());</span><br><span class="line">		<span class="comment">// 5.1è·å–æŸ¥åˆ°çš„æ•°æ®</span></span><br><span class="line">		<span class="type">SearchHits</span> <span class="variable">hits</span> <span class="operator">=</span> search.getHits();</span><br><span class="line">		SearchHit[] searchHits = hits.getHits();</span><br><span class="line">		<span class="keyword">for</span> (SearchHit hit : searchHits) &#123;</span><br><span class="line">			<span class="comment">// å‘½ä¸­çš„è®°å½•ä¿¡æ¯</span></span><br><span class="line">			<span class="type">String</span> <span class="variable">sourceAsString</span> <span class="operator">=</span> hit.getSourceAsString();</span><br><span class="line">			<span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> JSONObject.parseObject(sourceAsString, Account.class);</span><br><span class="line">			System.out.println(<span class="string">&quot;account: &quot;</span> + account);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 5.2è·å–æ£€ç´¢çš„åˆ†æä¿¡æ¯</span></span><br><span class="line">		<span class="type">Aggregations</span> <span class="variable">aggregations</span> <span class="operator">=</span> search.getAggregations();</span><br><span class="line">		<span class="type">Terms</span> <span class="variable">ageAgg1</span> <span class="operator">=</span> aggregations.get(<span class="string">&quot;ageAgg&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span> (Terms.Bucket bucket : ageAgg1.getBuckets()) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;å¹´é¾„ï¼š&quot;</span> + bucket.getKeyAsString() + <span class="string">&quot;  æ€»æ•°&quot;</span> + bucket.getDocCount());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="type">Avg</span> <span class="variable">balanceAvg1</span> <span class="operator">=</span> aggregations.get(<span class="string">&quot;balanceAvg&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;å¹³å‡è–ªèµ„ï¼š&quot;</span> + balanceAvg1.getValueAsString());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * ï¼ˆ1ï¼‰ã€å†—ä½™ä¿å­˜ï¼Œæ–¹ä¾¿æ£€ç´¢</span></span><br><span class="line"><span class="comment">	 * &#123;</span></span><br><span class="line"><span class="comment">	 *     b:1</span></span><br><span class="line"><span class="comment">	 *     skuTittle:ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨</span></span><br><span class="line"><span class="comment">	 *     priceï¼š128</span></span><br><span class="line"><span class="comment">	 *     saleCount:99</span></span><br><span class="line"><span class="comment">	 *     attrs:[</span></span><br><span class="line"><span class="comment">	 *     		&#123;é¡µæ•°ï¼š500é¡µ&#125;</span></span><br><span class="line"><span class="comment">	 *     		&#123;ä½œè€…ï¼šè‚¯å°¼æ–¯.H.ç½—æ£®&#125;</span></span><br><span class="line"><span class="comment">	 *     ]</span></span><br><span class="line"><span class="comment">	 * &#125;</span></span><br><span class="line"><span class="comment">	 * ï¼ˆ2ï¼‰ï¼šèŠ‚çœäº†ç©ºé—´ï¼Œä½†æ˜¯æ‹¿spuæŸ¥è¯¢çš„æ—¶å€™ï¼Œå›æºå¸¦éå¸¸å¤šçš„spuIdï¼Œæ¶ˆè€—è¿‡å¤šçš„è¯·æ±‚å¸¦å®½ï¼Œç½‘ç»œé˜»å¡IO</span></span><br><span class="line"><span class="comment">	 * skuç´¢å¼• &#123;</span></span><br><span class="line"><span class="comment">	 *     bId:1</span></span><br><span class="line"><span class="comment">	 *     attrId:11</span></span><br><span class="line"><span class="comment">	 *     xxxx</span></span><br><span class="line"><span class="comment">	 * &#125;</span></span><br><span class="line"><span class="comment">	 * attrç´¢å¼•&#123;</span></span><br><span class="line"><span class="comment">	 *     attrId:11</span></span><br><span class="line"><span class="comment">	 *     attrs:[</span></span><br><span class="line"><span class="comment">	 *     		&#123;ä½œè€…ï¼šè‚¯å°¼æ–¯.H.ç½—æ£®&#125;</span></span><br><span class="line"><span class="comment">	 *     ]</span></span><br><span class="line"><span class="comment">	 * &#125;</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(client);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>ä¸­é—´ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>elasticSearchåŸºç¡€</title>
    <url>/2023/03/26/elasticSearch%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<p>elasticSearchç®€å•ä»‹ç»ï¼Œæ³¨æ„ï¼Œæ­¤ç¬”è®°åŸºäºelasticsearch7ç‰ˆæœ¬ï¼Œ8ç‰ˆæœ¬å·²ç»ç§»é™¤typeæ¦‚å¿µã€‚</p>
<span id="more"></span>
<blockquote>
<p>Elasticsearchï¼ˆç®€ç§°ESï¼‰æ˜¯ä¸€ä¸ªåŸºäºApache Luceneâ„¢çš„å¼€æºæœç´¢å¼•æ“ï¼Œæ— è®ºåœ¨å¼€æºè¿˜æ˜¯ä¸“æœ‰é¢†åŸŸï¼ŒLucene å¯ä»¥è¢«è®¤ä¸ºæ˜¯è¿„ä»Šä¸ºæ­¢æœ€å…ˆè¿›ã€æ€§èƒ½æœ€å¥½çš„ã€åŠŸèƒ½æœ€å…¨çš„æœç´¢å¼•æ“åº“ã€‚æ³¨æ„ï¼ŒLucene åªæ˜¯ä¸€ä¸ªåº“ã€‚æƒ³è¦å‘æŒ¥å…¶å¼ºå¤§çš„ä½œç”¨ï¼Œä½ éœ€ä½¿ç”¨ Java å¹¶è¦å°†å…¶é›†æˆåˆ°ä½ çš„åº”ç”¨ä¸­ã€‚</p>
<p>Lucene éå¸¸å¤æ‚ï¼Œä½ éœ€è¦æ·±å…¥çš„äº†è§£æ£€ç´¢ç›¸å…³çŸ¥è¯†æ¥ç†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå°±è·Ÿå­¦ä¹  springmvc ä¹‹å‰å…ˆä» servlet å¼€å§‹ï¼Œç¹çå¤æ‚çš„å·¥ä½œï¼ŒSolorã€Elasticsearch åº”ç”±è€Œç”Ÿï¼Œ å…¶ä½¿ç”¨ Java ç¼–å†™å¹¶ä½¿ç”¨ Lucene æ¥å»ºç«‹ç´¢å¼•å¹¶å®ç°æœç´¢åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒçš„ç›®çš„æ˜¯é€šè¿‡ç®€å•è¿è´¯çš„ RESTful API è®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•å¹¶éšè— Lucene çš„å¤æ‚æ€§ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„ä»‹ç»æ‘˜è‡ª<a href="https://blog.csdn.net/chwensrong/article/details/123378129">ElasticsearchåŸºæœ¬æ¦‚å¿µ_æ³¢æ–¯_è¾£æ¤’çš„åšå®¢</a>ã€‚æ ¹æ®<a href="http://creativecommons.org/licenses/by-sa/4.0/"> CC 4.0 BY-SA </a>åè®®è·å–æˆæƒå¹¶è½¬è½½ã€‚ï¼ˆå·ä¸ªæ‡’ï¼Œæ¯•ç«Ÿä»‹ç»éƒ½å·®ä¸å¤š(âÂ´â—¡`â)ï¼‰ã€‚<br>
æ³¨ï¼šSoloræ˜¯å¦ä¸€ä¸ªluceneå°è£…åº“ã€‚</p>
<p><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/foreword_id.html">Elasticsearch: æƒå¨æŒ‡å— | Elastic</a>ã€‚ä¸­æ–‡æ–‡æ¡£ï¼Œå¯èƒ½å·²ç»è¿‡æ—¶ã€‚</p>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">Elasticsearch Guide | Elastic</a>ã€‚è‹±æ–‡æ–‡æ¡£ã€‚</p>
<h2 id="1-å®‰è£…elasticsearch">1.å®‰è£…elasticSearch</h2>
<p>dockerå‘½ä»¤å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/sxzlc/article/details/107676425">Dockerå‘½ä»¤_å„ç§å‚æ•°ç®€ä»‹åšå®¢</a></p>
<ol>
<li>é€šè¿‡dockerä¸‹è½½</li>
</ol>
<p>ä¸‹è½½çš„ç‰ˆæœ¬æ˜¯7.6.2</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull elasticsearch:7.6.2</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>é…ç½®</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºç›®å½•, ç”¨äºåé¢å°†dockerä¸­çš„é…ç½®æ–‡ä»¶æ˜ å°„åˆ°ç‰©ç†æœºä¸­</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/elasticsearch/config  </span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/elasticsearch/data</span><br><span class="line"><span class="comment"># å†™å…¥`http.host: 0.0.0.0`åˆ°configä¸‹çš„elasticsearch.ymlæ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment"># å…è®¸ä»»ä½•ipè®¿é—®ï¼ˆåœ¨é˜²ç«å¢™é™åˆ¶ipï¼ˆå› ä¸ºæœ¬åœ°æ˜¯æµ®åŠ¨ipï¼‰ï¼‰</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;http.host: 0.0.0.0&quot;</span> &gt;/mydata/elasticsearch/config/elasticsearch.yml </span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†mydata/elasticsearch/æ–‡ä»¶å¤¹ä¸­æ–‡ä»¶éƒ½å¯è¯»å¯å†™ï¼ˆç”Ÿäº§åº”è¯¥æ›´å¥½çš„åšæ³•ï¼‰ï¼Œ-Ræ˜¯é€’å½’çš„æ„æ€</span></span><br><span class="line"><span class="built_in">chmod</span> -R 777 /mydata/elasticsearch/</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å¯åŠ¨Elastic search</li>
</ol>
<p>ä¸‹é¢çš„å‘½ä»¤éœ€è¦å»é™¤æ³¨é‡Šåå…¨éƒ¨æ‰§è¡Œã€‚æ³¨æ„ï¼š</p>
<ul>
<li>docker run åªåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œçš„æ—¶å€™ä½¿ç”¨ï¼Œï¼ˆåç»­ä½¿ç”¨docker startï¼‰ï¼Œç”¨äºå°†é•œåƒæ”¾åˆ°å®¹å™¨ä¸­ã€‚ä¸ç”¨æŒ‡å®šå®¹å™¨idæˆ–åç§°</li>
<li>docker start é‡æ–°å¯åŠ¨å·²å­˜åœ¨çš„é•œåƒã€‚ç”¨äºåé¢é‡æ–°å¯åŠ¨é•œåƒã€‚éœ€è¦æŒ‡å®šå®¹å™¨idæˆ–åç§°ã€‚</li>
<li>æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼šdocker logs å®¹å™¨åç§°æˆ–ID</li>
<li>å¦‚æœå®‰è£…é…ç½®é”™è¯¯ï¼Œå¯ä»¥è€ƒè™‘åˆ é™¤å®¹å™¨ï¼ˆä¸æ˜¯åˆ é™¤é•œåƒï¼‰ã€‚
<ol>
<li>docker stop å®¹å™¨ID</li>
<li>docker rm å®¹å™¨ID</li>
<li>é‡æ–°æ‰§è¡Œdocker run</li>
</ol>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¼šåˆ›å»ºé•œåƒï¼Œåç§°ä¸ºelasticsearchï¼Œæ˜ å°„å®¹å™¨çš„ç«¯å£9200åˆ°ç‰©ç†æœºçš„9200ï¼ˆhttpè¯·æ±‚ï¼‰ï¼Œ9300ï¼ˆé›†ç¾¤é€šä¿¡ï¼‰</span></span><br><span class="line">docker run --name elasticsearch -p 9200:9200 -p 9300:9300 \</span><br><span class="line"><span class="comment"># å¯åŠ¨æ¨¡å¼ï¼šå•èŠ‚ç‚¹ã€‚`-e`:è®¾ç½®é•œåƒçš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">-e  <span class="string">&quot;discovery.type=single-node&quot;</span> \</span><br><span class="line"><span class="comment"># é™åˆ¶å†…å­˜å¤§å°ï¼Œå¦åˆ™ä¼šä½¿ç”¨æ‰€æœ‰å†…å­˜(esç‰¹åˆ«å ç”¨å†…å­˜ï¼‰</span></span><br><span class="line">-e ES_JAVA_OPTS=<span class="string">&quot;-Xms64m -Xmx512m&quot;</span> \</span><br><span class="line"><span class="comment"># æŒ‚è½½dockerä¸­çš„é…ç½®åˆ°å¤–éƒ¨é…ç½®ã€‚`-v` æŒ‚è½½æ•°æ®å·</span></span><br><span class="line"><span class="comment"># å°†dockerä¸­çš„elasticsearch.ymlæŒ‚è½½åˆ°ç‰©ç†æœºä¸­çš„elasticsearch.ymlï¼›æŒ‚è½½dataæ–‡ä»¶å¤¹ï¼ŒæŒ‚è½½pluginsæ–‡ä»¶å¤¹</span></span><br><span class="line">-v /mydata/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \</span><br><span class="line">-v /mydata/elasticsearch/data:/usr/share/elasticsearch/data \</span><br><span class="line">-v  /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins \</span><br><span class="line"><span class="comment"># åå°è¿è¡Œ</span></span><br><span class="line">-d elasticsearch:7.6.2</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>è®¾ç½®å¼€æœºå¯åŠ¨ï¼ˆéå¿…é¡»ï¼‰</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker update elasticsearch --restart=always</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>å¼€æ”¾ç«¯å£ï¼š9200ï¼Œ9300</li>
<li>è®¿é—®</li>
</ol>
<p>ç›´æ¥è®¿é—®ip+ç«¯å£ï¼Œæ­¤å¤„ç«¯å£ä¸ºä¸Šé¢è®¾ç½®çš„9200ã€‚è‹¥å®‰è£…å¤±è´¥ï¼Œä½¿ç”¨<code>docker logs å®¹å™¨id</code>æŸ¥çœ‹æ—¥å¿—ã€‚</p>
<p><img src="/2023/03/26/elasticSearch%E5%9F%BA%E7%A1%80/elasticSearch%E5%AE%89%E8%A3%85%E8%AE%BF%E9%97%AE.webp" alt="elasticSearchå®‰è£…è®¿é—®"></p>
<h2 id="2-å®‰è£…kibana">2.å®‰è£…kibana</h2>
<ol>
<li>é€šè¿‡dockerä¸‹è½½ï¼Œéœ€è¦ä¸elasticsearchç‰ˆæœ¬ä¿æŒä¸€è‡´</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull kibana:7.6.2</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å¯åŠ¨kibanaï¼Œå¹¶è®¾ç½®kibanaçš„elasticsearchåœ°å€</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§æ–¹å¼å¯åŠ¨ï¼Œéœ€è¦æŒ‡å®šåœ°å€ä¸ºip(å±€åŸŸç½‘ip)</span></span><br><span class="line">docker run --name kibana -e ELASTICSEARCH_HOSTS=http://192.168.6.128:9200 -p 5601:5601 -d kibana:7.6.2</span><br><span class="line"><span class="comment"># ç¬¬äºŒç§æ–¹å¼å¯åŠ¨ å¯ä»¥æŒ‡å®šåœ°å€ä¸ºlocalhost(æ¨è)</span></span><br><span class="line"><span class="comment"># `-d`åå°è¿è¡Œï¼Œ`-p`æ˜ å°„ç«¯å£ï¼Œç‰©ç†æœºç«¯å£5601åˆ°å®¹å™¨ç«¯å£5601ï¼Œ--linkï¼Œé“¾æ¥åä¸ºelasticsearchçš„å®¹å™¨ï¼Œ</span></span><br><span class="line"><span class="comment"># `-e`é…ç½®ç¯å¢ƒå˜é‡ELASTICSEARCH_URL=localhost:9200ï¼Œ9200æ˜¯elesticsearch</span></span><br><span class="line">docker run -d -p 5601:5601 --<span class="built_in">link</span> elasticsearch -e <span class="string">&quot;ELASTICSEARCH_URL=localhost:9200&quot;</span> kibana:7.6.2</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å¼€æ”¾ç«¯å£ï¼š5601</li>
<li>è®¿é—®kibana</li>
</ol>
<p>è‹¥å®‰è£…æˆåŠŸï¼Œåˆ™å¯ä»¥ç›´æ¥è®¿é—®kibanaçš„åœ°å€ã€‚ä¸»æœºip+portã€‚æ­¤å¤„ä¸º5601ã€‚è‹¥å®‰è£…å¤±è´¥ï¼Œä½¿ç”¨<code>docker logs å®¹å™¨id</code>æŸ¥çœ‹æ—¥å¿—ã€‚</p>
<p><img src="/2023/03/26/elasticSearch%E5%9F%BA%E7%A1%80/kibana%E8%AE%BF%E9%97%AE.webp" alt="kibanaè®¿é—®"></p>
<h2 id="3-elasticsearchæ¦‚å¿µ">3.elasticSearchæ¦‚å¿µ</h2>
<h3 id="åŸºæœ¬æ¦‚å¿µï¼š">åŸºæœ¬æ¦‚å¿µï¼š</h3>
<p>ç´¢å¼•ï¼ˆindicesï¼‰-------------------Databases æ•°æ®åº“<br>
ç±»å‹ï¼ˆtypeï¼‰----------------------Table æ•°æ®è¡¨ï¼Œåœ¨indicesä¸‹ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªtypeã€‚ï¼ˆES8å·²ç§»é™¤ï¼‰<br>
æ–‡æ¡£ï¼ˆDocumentï¼‰---------------Row è¡Œã€‚ä»¥JSONçš„å½¢å¼ä¿å­˜<br>
å­—æ®µï¼ˆFieldï¼‰---------------------Columns åˆ—</p>
<h3 id="æ­£æ’ç´¢å¼•ï¼š">æ­£æ’ç´¢å¼•ï¼š</h3>
<p>æ˜¯ä»¥æ–‡æ¡£å¯¹è±¡çš„å”¯ä¸€ ID ä½œä¸ºç´¢å¼•ï¼Œä»¥æ–‡æ¡£å†…å®¹ä½œä¸ºè®°å½•çš„ç»“æ„ã€‚ä¾‹å¦‚å…³ç³»å‹æ•°æ®åº“çš„IDã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">docID</th>
<th style="text-align:left">value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">åŠ¨æ€è§„åˆ’</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">åŠ¨æ€å£çº¸è¶…å¥½çœ‹</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">å¥½çœ‹åŠ¨æ€å›¾</td>
</tr>
</tbody>
</table>
<h3 id="å€’æ’ç´¢å¼•">å€’æ’ç´¢å¼•</h3>
<p>å°†æ–‡æ¡£å†…å®¹ä¸­çš„å•è¯ä½œä¸ºç´¢å¼•ï¼Œå°†åŒ…å«è¯¥è¯çš„æ–‡æ¡£ docID ä½œä¸ºè®°å½•çš„ç»“æ„ã€‚</p>
<ol>
<li>å…ˆç»è¿‡æ­£æ’ç´¢å¼•ï¼Œç»™æ–‡æ¡£ç¼–å·ï¼Œä½œä¸ºä¸ºå”¯ä¸€æ ‡è¯†ï¼Œå¦‚ä¸Šæ­£æ’ç´¢å¼•çš„è¡¨ä¸­docID</li>
<li>å¯¹å­—æ®µè¿›è¡Œåˆ†è¯ã€‚ï¼ˆå› æ­¤æœ‰å„ç§åˆ†è¯å™¨ï¼‰</li>
<li>æŒ‰åˆ†è¯å»ºç«‹å€’æ’ç´¢å¼•è¡¨ã€‚termä¸ºè¯ï¼Œposting listä¸ºè¿™ä¸ªè¯åœ¨å“ªäº›docIDçš„valueä¸­å‡ºç°è¿‡</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">term</th>
<th style="text-align:left">posting list</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">åŠ¨æ€</td>
<td style="text-align:left">1ï¼Œ2ï¼Œ3</td>
</tr>
<tr>
<td style="text-align:left">è§„åˆ’</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">å¥½çœ‹</td>
<td style="text-align:left">2ï¼Œ3</td>
</tr>
<tr>
<td style="text-align:left">å£çº¸</td>
<td style="text-align:left">2</td>
</tr>
<tr>
<td style="text-align:left">å›¾</td>
<td style="text-align:left">3</td>
</tr>
</tbody>
</table>
<p>è¿™äº›è¯å°±æ˜¯termï¼Œè€Œå­˜å‚¨åŸIDçš„æ˜¯posting listï¼Œå­˜å‚¨äº†æ‰€æœ‰ç¬¦åˆæŸä¸ªtermçš„æ–‡æ¡£idã€‚</p>
<p>å½“æœç´¢  <strong>åŠ¨æ€é«˜æ¸…å£çº¸</strong>  çš„æ—¶å€™ï¼ŒID=2çš„å‘½ä¸­ä¸¤æ¬¡ï¼ŒID=1ã€3åˆ†åˆ«å‘½ä¸­1æ¬¡ã€‚ç»è¿‡ä¸€äº›åˆ—ç®—æ³•ï¼Œ<strong>åŠ¨æ€å£çº¸è¶…å¥½çœ‹</strong>  åˆ†æ•°æœ€é«˜ã€‚æ‰€æœ‰å‘½ä¸­çš„éƒ½å¯ä»¥æŸ¥åˆ°ï¼Œä½†æ˜¯åˆ†æ•°è¾ƒä½ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™æ ·çš„å­˜å‚¨è‚¯å®šä¼šç‰¹åˆ«å ç”¨å†…å­˜ï¼Œæœç´¢è¯termçš„çš„æ—¶å€™ä¹Ÿä¼šæ¯”è¾ƒè€—æ—¶ï¼Œåº•å±‚Luceneæœ‰è‡ªå·±æ›´ä¸ºå¤æ‚çš„å®ç°ã€‚<br>
PSï¼šå¥½å§ï¼Œæˆ‘å°±æ˜¯ä¸æ‡‚ğŸ˜­</p>
<h2 id="4-elasticsearchæ¥å£">4.elasticSearchæ¥å£</h2>
<p>å…¶æ¥å£æ˜¯<strong>RestFul</strong>é£æ ¼çš„ã€‚</p>
<h3 id="æŸ¥çœ‹catæ”¯æŒçš„æ‰€æœ‰æŒ‡ä»¤">æŸ¥çœ‹catæ”¯æŒçš„æ‰€æœ‰æŒ‡ä»¤</h3>
<p>GET: <a href="http://localhost:9200/_cat">http://localhost:9200/_cat</a></p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line">=^.^=</span><br><span class="line">/_cat/allocation</span><br><span class="line">/_cat/shards</span><br><span class="line">/_cat/shards/<span class="punctuation">&#123;</span>index<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/master</span><br><span class="line">/_cat/nodes</span><br><span class="line">/_cat/tasks</span><br><span class="line">/_cat/indices</span><br><span class="line">/_cat/indices/<span class="punctuation">&#123;</span>index<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/segments</span><br><span class="line">/_cat/segments/<span class="punctuation">&#123;</span>index<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/count</span><br><span class="line">/_cat/count/<span class="punctuation">&#123;</span>index<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/recovery</span><br><span class="line">/_cat/recovery/<span class="punctuation">&#123;</span>index<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/health</span><br><span class="line">/_cat/pending_tasks</span><br><span class="line">/_cat/aliases</span><br><span class="line">/_cat/aliases/<span class="punctuation">&#123;</span>alias<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/thread_pool</span><br><span class="line">/_cat/thread_pool/<span class="punctuation">&#123;</span>thread_pools<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/plugins</span><br><span class="line">/_cat/fielddata</span><br><span class="line">/_cat/fielddata/<span class="punctuation">&#123;</span>fields<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/nodeattrs</span><br><span class="line">/_cat/repositories</span><br><span class="line">/_cat/snapshots/<span class="punctuation">&#123;</span>repository<span class="punctuation">&#125;</span></span><br><span class="line">/_cat/templates</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯-catæ˜¯kibana-æ§åˆ¶å°">æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯ï¼ˆ_catæ˜¯Kibana æ§åˆ¶å°ï¼‰</h3>
<p>GETï¼š<a href="http://localhost:9200/_cat/nodes%E3%80%82">http://localhost:9200/_cat/nodesã€‚</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">17</span> <span class="number">97</span> <span class="number">1</span> <span class="number">0.01</span> <span class="number">0.02</span> <span class="number">0.00</span> dilm * a0afe6713d7f</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹èŠ‚ç‚¹çš„å¥åº·æƒ…å†µ">æŸ¥çœ‹èŠ‚ç‚¹çš„å¥åº·æƒ…å†µ</h3>
<p>GET <a href="http://localhost:9200/_cat/health">http://localhost:9200/_cat/health</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="number">1680096955</span> <span class="number">13</span><span class="punctuation">:</span><span class="number">35</span><span class="punctuation">:</span><span class="number">55</span> elasticsearch yellow <span class="number">1</span> <span class="number">1</span> <span class="number">6</span> <span class="number">6</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3</span> <span class="number">0</span> - <span class="number">66.7</span>%</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹ä¸»èŠ‚ç‚¹ä¿¡æ¯">æŸ¥çœ‹ä¸»èŠ‚ç‚¹ä¿¡æ¯</h3>
<p>GET <a href="http://localhost:9200/_cat/master">http://localhost:9200/_cat/master</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">Z8a8Ekp4TVuqkv9rEQEzzA <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> a0afe6713d7f</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹esçš„ç´¢å¼•-æ•°æ®åº“">æŸ¥çœ‹ESçš„ç´¢å¼•ï¼ˆæ•°æ®åº“ï¼‰</h3>
<p>GET <a href="http://localhost.28:9200/_cat/indices">http://localhost.28:9200/_cat/indices</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">yellow open website                  LA03aN0qStmXdO8nmuzWDw <span class="number">1</span> <span class="number">1</span>    <span class="number">2</span> <span class="number">2</span>   <span class="number">8.6</span>kb   <span class="number">8.6</span>kb</span><br><span class="line">yellow open bank                     tAFAIEHTSkK-Oavb2Wd3JQ <span class="number">1</span> <span class="number">1</span> <span class="number">1000</span> <span class="number">0</span> <span class="number">414.3</span>kb <span class="number">414.3</span>kb</span><br><span class="line">green  open .kibana_task_manager_1   V13OX5BcTiaN4YLaXsObfQ <span class="number">1</span> <span class="number">0</span>    <span class="number">2</span> <span class="number">0</span>  <span class="number">21.7</span>kb  <span class="number">21.7</span>kb</span><br><span class="line">green  open .apm-agent-configuration isjY4x8cRvCW2XMevs0ypw <span class="number">1</span> <span class="number">0</span>    <span class="number">0</span> <span class="number">0</span>    <span class="number">283</span>b    <span class="number">283</span>b</span><br><span class="line">green  open .kibana_1                mK0GqkVdREKfabACDAxPKQ <span class="number">1</span> <span class="number">0</span>    <span class="number">8</span> <span class="number">0</span>  <span class="number">25.2</span>kb  <span class="number">25.2</span>kb</span><br><span class="line">yellow open customer                 X34j-t18T12nerLUajXISQ <span class="number">1</span> <span class="number">1</span>    <span class="number">3</span> <span class="number">0</span>   <span class="number">3.7</span>kb   <span class="number">3.7</span>kb</span><br></pre></td></tr></table></figure>
<h3 id="ç´¢å¼•ä¸€ä¸ªæ–‡æ¡£">ç´¢å¼•ä¸€ä¸ªæ–‡æ¡£</h3>
<p>GET <a href="http://localhost:9200/customer/external/1">http://localhost:9200/customer/external/1</a><br>
æŸ¥è¯¢customerç´¢å¼•ï¼Œexternalç±»å‹ä¸‹çš„IDä¸º1</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span><span class="punctuation">,</span> # ç´¢å¼•</span><br><span class="line">    <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;external&quot;</span><span class="punctuation">,</span> # ç±»å‹</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span>	# id</span><br><span class="line">    <span class="attr">&quot;_version&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span>	# ç‰ˆæœ¬å·</span><br><span class="line">    <span class="attr">&quot;_seq_no&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span> # åºåˆ—å·ç”¨äºå¹¶å‘æ§åˆ¶</span><br><span class="line">    <span class="attr">&quot;_primary_term&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;found&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    	# å…·ä½“çš„key-value</span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;John Doe&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="postæ–°å¢ä¸ä¿®æ”¹">postæ–°å¢ä¸ä¿®æ”¹</h3>
<p>å¯ä»¥ä¸æŒ‡å®šIDï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™è‡ªåŠ¨ç”ŸæˆIDã€‚å¦‚æœæŒ‡å®šäº†ï¼Œåˆ™æ˜¯ä¿®æ”¹ï¼ŒåŒæ—¶<code>_version</code>ä¼šåŠ 1ï¼Œ<code>_seq_no</code>ä¹Ÿä¼šåŠ 1ã€‚<br>
POST: <a href="http://localhost:9200/customer/external/2">http://localhost:9200/customer/external/2</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;John Doe&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;external&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_version&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;updated&quot;</span><span class="punctuation">,</span> # ç»“æœæ˜¯æ›´æ–°</span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_seq_no&quot;</span><span class="punctuation">:</span> <span class="number">14</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_primary_term&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="putæ–°å¢ä¸ä¿®æ”¹">putæ–°å¢ä¸ä¿®æ”¹</h3>
<p>å¿…é¡»æŒ‡å®šIDï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™æ˜¯æ–°å¢ï¼Œå¦åˆ™æ˜¯ä¿®æ”¹<br>
PUTï¼š<a href="http://localhost:9200/customer/external/1">http://localhost:9200/customer/external/1</a></p>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;John Doe&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;external&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_version&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;updated&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_seq_no&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_primary_term&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¹è§‚é”ä¿®æ”¹">ä¹è§‚é”ä¿®æ”¹</h3>
<p><code>_seq_no</code>ï¼Œ<code>_primary_term</code>ï¼Œå¯ä»¥ç”¨äºä¹è§‚é”æ›´æ–°ã€‚if_seq_no=1&amp;if_primary_term=1ã€‚é€šè¿‡åºåˆ—å¥½ä½¿ç”¨ä¹è§‚é”<br>
PUTï¼š<a href="http://localhost:9200/customer/external/1?if_seq_no=1&amp;if_primary_term=1">http://localhost:9200/customer/external/1?if_seq_no=1&amp;if_primary_term=1</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;aa&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;version_conflict_engine_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[1]: version conflict, required seqNo [1], primary term [1]. current document has seqNo [18] and primary term [1]&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;index_uuid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;X34j-t18T12nerLUajXISQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;shard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;version_conflict_engine_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[1]: version conflict, required seqNo [1], primary term [1]. current document has seqNo [18] and primary term [1]&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;index_uuid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;X34j-t18T12nerLUajXISQ&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;shard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">409</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="postæ›´æ–°-å¸¦id-å¸¦-update">postæ›´æ–°ï¼Œå¸¦IDï¼Œå¸¦<code>_update</code></h3>
<p>å¦‚æœæ›´æ–°çš„æ•°æ®æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ</p>
<p>POSTï¼š<a href="http://localhost:9200/customer/external/1/_update">http://localhost:9200/customer/external/1/_update</a></p>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;doc&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;john name&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœ</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;external&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_version&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span> # ç‰ˆæœ¬å·å¢åŠ </span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;updated&quot;</span><span class="punctuation">,</span> # ç»“æœæ˜¯æ›´æ–°</span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_seq_no&quot;</span><span class="punctuation">:</span> <span class="number">23</span><span class="punctuation">,</span> # åºåˆ—å·å¢åŠ </span><br><span class="line">    <span class="attr">&quot;_primary_term&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å†æ¬¡è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;external&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_version&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span> # ä¸å˜åŒ–</span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;noop&quot;</span><span class="punctuation">,</span> # noop</span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_seq_no&quot;</span><span class="punctuation">:</span> <span class="number">23</span><span class="punctuation">,</span> # ä¸å˜åŒ–</span><br><span class="line">    <span class="attr">&quot;_primary_term&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤æ•°æ®">åˆ é™¤æ•°æ®</h3>
<p>DELETEï¼š<a href="http://localhost:9200/customer/external/1">http://localhost:9200/customer/external/1</a></p>
<p>è¿”å›æ•°æ®</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;customer&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;external&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_version&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="string">&quot;deleted&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_seq_no&quot;</span><span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_primary_term&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‰¹é‡æ“ä½œ-åªèƒ½åœ¨kibanaä¸Š">æ‰¹é‡æ“ä½œï¼Œåªèƒ½åœ¨kibanaä¸Š</h3>
<p>å¦‚ä¸‹ä¸ºæ‰¹é‡æ·»åŠ ä¸¤æ¡æ•°æ®</p>
<p><a href="https://gitee.com/WangJiaHui202144/elasticsearch-test-data">elasticsearch-test-data: esæµ‹è¯•æ•°æ® (gitee.com)</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">POST /bank/account/_bulk</span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;index&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span><span class="string">&quot;1&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span><span class="number">39225</span><span class="punctuation">,</span><span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span><span class="string">&quot;Amber&quot;</span><span class="punctuation">,</span><span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span><span class="string">&quot;Duke&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">32</span><span class="punctuation">,</span><span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span><span class="string">&quot;M&quot;</span><span class="punctuation">,</span><span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;880 Holmes Lane&quot;</span><span class="punctuation">,</span><span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span><span class="string">&quot;Pyrami&quot;</span><span class="punctuation">,</span><span class="attr">&quot;email&quot;</span><span class="punctuation">:</span><span class="string">&quot;amberduke@pyrami.com&quot;</span><span class="punctuation">,</span><span class="attr">&quot;city&quot;</span><span class="punctuation">:</span><span class="string">&quot;Brogan&quot;</span><span class="punctuation">,</span><span class="attr">&quot;state&quot;</span><span class="punctuation">:</span><span class="string">&quot;IL&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;index&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span><span class="string">&quot;6&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span><span class="number">6</span><span class="punctuation">,</span><span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span><span class="number">5686</span><span class="punctuation">,</span><span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span><span class="string">&quot;Hattie&quot;</span><span class="punctuation">,</span><span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span><span class="string">&quot;Bond&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">36</span><span class="punctuation">,</span><span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span><span class="string">&quot;M&quot;</span><span class="punctuation">,</span><span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;671 Bristol Street&quot;</span><span class="punctuation">,</span><span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span><span class="string">&quot;Netagy&quot;</span><span class="punctuation">,</span><span class="attr">&quot;email&quot;</span><span class="punctuation">:</span><span class="string">&quot;hattiebond@netagy.com&quot;</span><span class="punctuation">,</span><span class="attr">&quot;city&quot;</span><span class="punctuation">:</span><span class="string">&quot;Dante&quot;</span><span class="punctuation">,</span><span class="attr">&quot;state&quot;</span><span class="punctuation">:</span><span class="string">&quot;TN&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-esæ£€ç´¢æ¥å£">5 ESæ£€ç´¢æ¥å£</h2>
<p>æ‰€æœ‰çš„æ£€ç´¢éƒ½æ˜¯å…ˆæ¥ç´¢å¼•åæ¥<code>_search</code>ã€‚</p>
<h3 id="æŸ¥è¯¢æ¡ä»¶ä½äºurl">æŸ¥è¯¢æ¡ä»¶ä½äºURL</h3>
<p>GET <a href="http://localhost:9200/bank/_search?q=*&amp;sort=account_number:asc">http://localhost:9200/bank/_search?q=*&amp;sort=account_number:asc</a></p>
<p>æŸ¥è¯¢bankç´¢å¼•ä¸‹ï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸ºæ‰€æœ‰æ•°æ®ï¼ˆq=*ï¼‰ï¼ŒæŒ‰account_numberå‡åºæ’åº</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">43</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span>  # æ€»å…±<span class="number">1000</span>æ¡æ•°æ®ï¼Œæ­¤æŸ¥è¯¢ä¼šé»˜è®¤è¿”å›<span class="number">10</span>æ¡</span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span> # æŸ¥è¯¢æ¡ä»¶ä¸ºç­‰äºï¼ˆeqï¼‰</span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span> # æœ€å¤§å¾—åˆ†ä¸ºç©ºï¼ˆæ²¡æœ‰æœ€å¤§å¾—åˆ†ï¼‰</span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">16623</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bradshaw&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mckenzie&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">29</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;244 Columbus Place&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Euron&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bradshawmckenzie@euron.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hobucken&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CO&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="number">0</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="æŸ¥è¯¢æ¡ä»¶ä½äºjson-dslæŸ¥è¯¢">æŸ¥è¯¢æ¡ä»¶ä½äºjsonï¼ˆDSLæŸ¥è¯¢ï¼‰</h3>
<p>æŸ¥è¯¢bankç´¢å¼•ä¸‹çš„æ•°æ®</p>
<p>GET <a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;match_all&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span>  # æŸ¥è¯¢æ‰€æœ‰</span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="string">&quot;asc&quot;</span> # æ’åºè§„åˆ™ï¼Œæ­¤å¤„ä¸ºç®€å†™</span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="string">&quot;desc&quot;</span> # æ’åºè§„åˆ™ï¼Œæ­¤å¤„ä¸ºå…¨å†™</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span>  # åˆ†é¡µæŸ¥è¯¢ï¼Œä»<span class="number">0</span>å¼€å§‹ï¼ŒåªæŸ¥<span class="number">5</span>æ¡</span><br><span class="line">    <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>   # å¦‚æœåªæƒ³è¿”å›balanceä¸firstnameå­—æ®µ</span><br><span class="line">        <span class="string">&quot;balance&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;firstname&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›ï¼š</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bradshaw&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">16623</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="number">16623</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Amber&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">39225</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="number">39225</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Roberta&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">28838</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="number">28838</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Levine&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">44947</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="number">44947</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Rodriquez&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">27658</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="number">27658</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="å…¨æ–‡æ£€ç´¢-åˆ†è¯æŸ¥è¯¢">å…¨æ–‡æ£€ç´¢ï¼ˆåˆ†è¯æŸ¥è¯¢ï¼‰</h3>
<p>ä½¿ç”¨matchï¼Œæ˜¯åˆ†è¯æŸ¥è¯¢ï¼Œä¼šæŒ‰è¯„åˆ†è¿›è¡Œæ’åº</p>
<p>GET <a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;match&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">             # æŸ¥è¯¢addressåŒ…å«Kings Placeåˆ†è¯åçš„æ•°æ®ï¼ˆæ­¤å¤„ä¼šï¼‰</span><br><span class="line">        	 # æ­¤å¤„ä¼šè¢«åˆ†ä¸ºKingsï¼ŒPlaceä¸¤ä¸ªè¯ï¼Œ</span><br><span class="line">            <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Kings Place&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">182</span><span class="punctuation">,</span> # <span class="number">182</span>æ¡</span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span>  # æŸ¥è¯¢å…³ç³» ä¸ºç­‰äº</span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="number">7.6978617</span><span class="punctuation">,</span> # æœ€å¤§å¾—åˆ†</span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;20&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">7.6978617</span><span class="punctuation">,</span>  # æŸ¥è¯¢åˆ°çš„åˆ†æ•°ï¼ˆæ­¤æ¡æ˜¯æœ€é«˜çš„ï¼‰</span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">16418</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Elinor&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ratliff&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">36</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;282 Kings Place&quot;</span><span class="punctuation">,</span> # æŸ¥è¯¢åŒ¹é…å­—æ®µ</span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Scentric&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elinorratliff@scentric.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ribera&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;WA&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;722&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">5.9908285</span><span class="punctuation">,</span> # æŸ¥è¯¢åˆ°çš„åˆ†æ•°</span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">722</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">27256</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Roberts&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Beasley&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">34</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;305 Kings Hwy&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Quintity&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;robertsbeasley@quintity.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hayden&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PA&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;37&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">1.7070332</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">37</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">18612</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mcgee&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mooney&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">39</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;826 Fillmore Place&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Reversus&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mcgeemooney@reversus.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Tooleville&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OK&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="çŸ­è¯­åŒ¹é…">çŸ­è¯­åŒ¹é…</h3>
<p>ä½¿ç”¨match_phraseè¿›è¡ŒçŸ­è¯­åŒ¹é…ã€‚åªè¦æ–‡æ¡£é‡Œé¢åŒ…å«æ‰€æœ‰åˆ†è¯åçš„çŸ­è¯­ï¼Œå°±ä¼šè¢«æŸ¥åˆ°ï¼Œæ˜¯åˆ†è¯åå»æŸ¥è¯¢çš„ï¼Œ<strong>ç›®æ ‡æ–‡æ¡£å¿…é¡»åŒ…å«åˆ†è¯åçš„æ‰€æœ‰è¯</strong>ï¼Œä¸<strong>termçš„ç²¾ç¡®åŒ¹é…</strong>ä¸åŒ</p>
<p>GET <a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;match_phrase&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Kings Place&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">11</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="number">7.6978617</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;20&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">7.6978617</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">16418</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Elinor&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ratliff&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">36</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;282 Kings Place&quot;</span><span class="punctuation">,</span> # åªæœ‰è¿™ä¸€æ¡æ˜¯ç²¾ç¡®åŒ¹é…</span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Scentric&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elinorratliff@scentric.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ribera&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;WA&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="å¤šå­—æ®µåŒ¹é…">å¤šå­—æ®µåŒ¹é…</h3>
<p>ä½¿ç”¨multi_matchè¿›è¡Œå¤šå­—æ®µåŒ¹é…ã€‚å¤šä¸ªå­—æ®µåŒ¹é…æŸ¥è¯¢æ¡ä»¶ï¼Œç›¸å½“äºsqlçš„oræ¡ä»¶ã€‚ä¼šè¿›è¡Œåˆ†è¯ã€‚</p>
<p>GET: <a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;multi_match&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mill movico&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;address&quot;</span><span class="punctuation">,</span> <span class="string">&quot;city&quot;</span>  # è¿™ä¸¤ä¸ªå­—æ®µåŒ¹é…æŸ¥è¯¢æ¡ä»¶</span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="number">6.505949</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;472&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">6.505949</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">472</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">25571</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lee&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Long&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;288 Mill Street&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Comverges&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;leelong@comverges.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Movico&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MT&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;970&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">5.4032025</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">970</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">19648</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Forbes&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wallace&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;990 Mill Road&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Pheast&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;forbeswallace@pheast.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lopezo&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AK&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;136&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">5.4032025</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">136</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">45801</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Winnie&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Holland&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">38</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;198 Mill Lane&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Neteria&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;winnieholland@neteria.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Urie&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IL&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;345&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">5.4032025</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">345</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">9812</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Parker&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hines&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">38</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;715 Mill Avenue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Baluba&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;parkerhines@baluba.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Blackgum&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;KY&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="boolå¤åˆæŸ¥è¯¢">boolå¤åˆæŸ¥è¯¢</h3>
<p>ç”¨äºæ„å»ºåˆå¹¶å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ã€‚</p>
<p>must: å¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼›ä½œä¸ºæ¡ä»¶ï¼ŒåŒæ—¶è¿˜ä¼š<strong>è´¡çŒ®å¾—åˆ†</strong>ï¼Œä¸filteråŒºåˆ«</p>
<p>must_notï¼šå¿…é¡»ä¸æ»¡è¶³ï¼›ä¸ä¼šè´¡çŒ®å¾—åˆ†ï¼Œé€šfilter</p>
<p>shouldï¼šåº”è¯¥ï¼Œæ»¡è¶³äº†ä¼šè´¡çŒ®å¾—åˆ†ã€‚</p>
<p>GETï¼š<a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨ï¼š</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è°ƒç”¨JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;bool&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;must&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span>  # å¿…é¡»æ»¡è¶³çš„æ¡ä»¶</span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;match&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span>  # åŒ¹é…</span><br><span class="line">                        <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span>  # genderå­—æ®µM</span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;match&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mill&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;must_not&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span>  # å¿…é¡»ä¸æ»¡è¶³</span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;match&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">38</span> # å¹´é¾„ä¸ç­‰äº<span class="number">38</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;should&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  # åº”è¯¥ï¼Œæ»¡äº†ä¼šåŠ åˆ†ï¼Œä¸æ»¡è¶³ä¹Ÿä¼šæŸ¥åˆ°ï¼Œä½†æ˜¯ä¸åŠ åˆ†</span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;match&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wallace&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<p>è¿”å›ï¼š</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="number">12.585751</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;970&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">12.585751</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">970</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">19648</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Forbes&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wallace&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;990 Mill Road&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Pheast&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;forbeswallace@pheast.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lopezo&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AK&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="filterè¿‡æ»¤">filterè¿‡æ»¤</h3>
<p>ç”¨æ¥ä½œä¸ºç­›é€‰æ¡ä»¶ï¼Œä¸ä¼šè´¡çŒ®å¾—åˆ†ã€‚ä¸åŒäºmustä¸must_not</p>
<p>GETï¼š<a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;bool&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;filter&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;range&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span> # ä¸ºèŒƒå›´æŸ¥è¯¢</span><br><span class="line">                        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span>  # æŸ¥è¯¢å¹´é¾„åœ¨<span class="number">18</span>åˆ°<span class="number">20</span></span><br><span class="line">                            <span class="attr">&quot;gte&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;lte&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">44</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span>  # æœ€é«˜çš„åˆ†ä¸º<span class="number">0</span>ï¼ŒéªŒè¯äº†ä¸ä¼šè´¡çŒ®å¾—åˆ†</span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;157&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">157</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">39868</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Claudia&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Terry&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;132 Gunnison Court&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lumbrex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;claudiaterry@lumbrex.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Castleton&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MD&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;_index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;215&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_score&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;_source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="number">215</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">37427</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Copeland&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Solomon&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;741 McDonald Avenue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Recognia&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;copelandsolomon@recognia.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Edmund&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ME&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="termä¸æ–‡æœ¬ç²¾ç¡®æŸ¥è¯¢">termä¸æ–‡æœ¬ç²¾ç¡®æŸ¥è¯¢</h3>
<p>termçš„ç²¾ç¡®åŒ¹é…ï¼Œä¸ä¼šè¿›è¡Œåˆ†è¯ã€‚éæ–‡æœ¬å­—æ®µçš„ç²¾ç¡®æŸ¥è¯¢ï¼Œä¾‹å¦‚å¹´é¾„ã€é‡‘é¢ç­‰æ•°å­—ã€‚</p>
<p>è‹¥éœ€è¦ç²¾ç¡®æ£€ç´¢ï¼Œä½¿ç”¨å­—æ®µ.keywwordã€‚</p>
<p>GETï¼š<a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;term&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">28</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ–‡æœ¬çš„ç²¾ç¡®æŸ¥è¯¢</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;match&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;address.keyword&quot;</span><span class="punctuation">:</span> <span class="string">&quot;789 Madison Street&quot;</span> # keywwordå…³é”®å­—</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="èšåˆæ£€ç´¢aggs">èšåˆæ£€ç´¢aggs</h3>
<p>ç”¨äºå¯¹æŸ¥è¯¢åçš„æ¡ä»¶è¿›è¡Œåˆ†æä¸æå–ï¼Œç±»ä¼¼äºSQLçš„group byå’ŒSQLçš„èšåˆå‡½æ•°ã€‚</p>
<p><strong>æœç´¢addressä¸ºmillï¼Œæ‰€æœ‰äººçš„å¹´é¾„åˆ†å¸ƒï¼Œä¸å¹³å‡å¹´é¾„ã€‚ä½†æ˜¯ä¸æ˜¾ç¤ºè¿™äº›äººçš„è¯¦æƒ…ã€‚</strong></p>
<p>GETï¼š<a href="http://localhost:9200/bank/_search">http://localhost:9200/bank/_search</a></p>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;match&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mill&quot;</span>   # æŸ¥è¯¢addressä¸ºmillçš„æ•°æ®</span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;aggs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ageAgg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # è‡ªå®šä¹‰èšåˆåå­—ä¸ºageAgg</span><br><span class="line">            <span class="attr">&quot;terms&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span> # èšåˆç±»å‹termsï¼Œè¯¥ç±»å‹ç±»ä¼¼äºcount group by `age` æŒ‰å¹´é¾„åˆ†ç»„ç»Ÿè®¡æ•°é‡</span><br><span class="line">                <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ag&quot;</span><span class="punctuation">,</span> </span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10</span> # åªå±•ç¤ºå‰<span class="number">10</span>ä¸ª</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ageAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # è‡ªå®šä¹‰èšåˆåå­—ä¸ºageAvg</span><br><span class="line">            <span class="attr">&quot;avg&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span> # èšåˆç±»å‹ä¸ºavg</span><br><span class="line">                <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;age&quot;</span> # ç»Ÿè®¡å¹³å‡å¹´é¾„</span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;size&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0&quot;</span>  # åˆ†é¡µä¸º<span class="number">0</span>ï¼Œä¸è¦ä»»ä½•æ–‡æ¡£æ•°æ®ï¼Œåªè¦èšåˆç»“æœ</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›ï¼š</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;aggregations&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ageAgg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  # è‡ªå®šä¹‰åå­—ä¸ºageAggçš„èšåˆ</span><br><span class="line">            <span class="attr">&quot;doc_count_error_upper_bound&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;sum_other_doc_count&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;buckets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="number">38</span><span class="punctuation">,</span>  # å¹´é¾„<span class="number">38</span>çš„æœ‰<span class="number">2</span>ä¸ª</span><br><span class="line">                    <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ageAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  # è‡ªå®šä¹‰åå­—ä¸ºageAvgçš„èšåˆ</span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">34.0</span>  # å¹³å‡å¹´é¾„ä¸º<span class="number">34.0</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<p><strong>æŒ‰å¹´é¾„åˆ†ç»„ç»Ÿè®¡æ•°é‡ï¼›æŒ‰å¹´é¾„ã€æ€§åˆ«åˆ†ç»„ç»Ÿè®¡æ•°é‡ï¼›  æŒ‰å¹´é¾„ã€æ€§åˆ«åˆ†ç»„ç»Ÿè®¡å¹³å‡å·¥èµ„ï¼›  æŒ‰å¹´é¾„çš„å¹³å‡å·¥èµ„</strong></p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è°ƒç”¨JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;match_all&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;aggs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  # èšåˆ</span><br><span class="line">        <span class="attr">&quot;ageAgg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  #  è‡ªå®šä¹‰èšåˆå</span><br><span class="line">             </span><br><span class="line">            <span class="attr">&quot;terms&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;age&quot;</span><span class="punctuation">,</span>  # æŒ‰å¹´é¾„count</span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2</span>   # å±•ç¤ºå‰<span class="number">3</span>æ¡</span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;aggs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # åµŒå¥—èšåˆï¼Œæ­¤èšåˆåŸºäºæŒ‰ageåˆ†ç»„å</span><br><span class="line">                     </span><br><span class="line">                <span class="attr">&quot;genderAgg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  #è‡ªå®šä¹‰èšåˆåå­—</span><br><span class="line">                    <span class="attr">&quot;terms&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gender.keyword&quot;</span><span class="punctuation">,</span>  # èšåˆæŒ‰genderçš„ç²¾ç¡®å­—æ®µç»Ÿè®¡ï¼ˆå› ä¸ºæ­¤å­—æ®µæ˜¯æ–‡æœ¬ï¼‰</span><br><span class="line">                        <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;aggs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  # åµŒå¥—èšåˆï¼Œæ­¤èšåˆåŸºäºæŒ‰ageã€genderåˆ†ç»„å</span><br><span class="line">                        <span class="attr">&quot;balanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # è‡ªå®šä¹‰èšåˆåå­—</span><br><span class="line">                            <span class="attr">&quot;avg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # æ±‚balanceå¹³å‡å€¼</span><br><span class="line">                                <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;balance&quot;</span> </span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">                <span class="attr">&quot;ageBalanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # è‡ªå®šä¹‰èšåˆåå­—</span><br><span class="line">                    <span class="attr">&quot;avg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # æ±‚å¹³å‡å€¼ ï¼ˆæ¯ä¸ªageçš„å¹³å‡balanceï¼‰</span><br><span class="line">                        <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;balance&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<p>è¿”å›ï¼š</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;took&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timed_out&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;_shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;successful&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;skipped&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;relation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;max_score&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;hits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;aggregations&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ageAgg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # èšåˆåç§°</span><br><span class="line">            <span class="attr">&quot;doc_count_error_upper_bound&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;sum_other_doc_count&quot;</span><span class="punctuation">:</span> <span class="number">879</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;buckets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="number">31</span><span class="punctuation">,</span> # å¹´é¾„<span class="number">31</span>çš„</span><br><span class="line">                    <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">61</span><span class="punctuation">,</span> # æ•°é‡</span><br><span class="line">                    <span class="attr">&quot;genderAgg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # èšåˆåç§°</span><br><span class="line">                        <span class="attr">&quot;doc_count_error_upper_bound&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;sum_other_doc_count&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;buckets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span>  # gender ä¸ºMçš„</span><br><span class="line">                                <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">35</span><span class="punctuation">,</span> # æ•°é‡</span><br><span class="line">                                <span class="attr">&quot;balanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  # èšåˆåç§°</span><br><span class="line">                                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">29565.628571428573</span>  # balanceå¹³å‡å€¼<span class="number">29565.628571428573</span></span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F&quot;</span><span class="punctuation">,</span> # genderä¸ºFçš„</span><br><span class="line">                                <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">26</span><span class="punctuation">,</span> # æ•°é‡<span class="number">26</span></span><br><span class="line">                                <span class="attr">&quot;balanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # èšåˆåç§°</span><br><span class="line">                                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">26626.576923076922</span> # balanceå¹³å‡å€¼<span class="number">29565.628571428573</span>ï¼ˆå¹´é¾„<span class="number">31</span>çš„ã€genderä¸ºFçš„å¹³å‡balanceï¼‰</span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;ageBalanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  # èšåˆå</span><br><span class="line">                        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">28312.918032786885</span> # balancå¹³å‡å€¼<span class="number">28312.918032786885</span>ï¼ˆå¹´é¾„<span class="number">38</span>çš„å¹³å‡balanceï¼‰</span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="number">39</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">60</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;genderAgg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;doc_count_error_upper_bound&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;sum_other_doc_count&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;buckets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;F&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">38</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;balanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">26348.684210526317</span></span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;doc_count&quot;</span><span class="punctuation">:</span> <span class="number">22</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;balanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">23405.68181818182</span></span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;ageBalanceAvg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">25269.583333333332</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="æ˜ å°„mapping">æ˜ å°„Mapping</h3>
<p>ç±»ä¼¼ä¸åˆ›å»ºSQLæ—¶çš„å®šä¹‰çš„å­—æ®µæ•°æ®ç±»å‹ï¼ˆä¸åŒäºtypeï¼‰ã€‚ç´¢å¼•ä¸‹çš„ç±»å‹ï¼ˆtypeï¼‰åœ¨ES7ç‰ˆæœ¬å¯é€‰ï¼Œ8ç‰ˆæœ¬ç§»é™¤ã€‚</p>
<p>æ˜ å°„ä¼šåœ¨åˆ›å»ºæ—¶ESè‡ªåŠ¨æ¨æ–­</p>
<p>GET <a href="http://localhost:9200/bank/_mapping">http://localhost:9200/bank/_mapping</a></p>
<p>è·å–æ‰€æœ‰å­—æ®µæ˜ å°„</p>
<p>è¿”å›</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>è¿”å›JSON</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;bank&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;account_number&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;long&quot;</span> # ç±»å‹ä¸ºlong</span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span>  #ç±»å‹ä¸ºæ–‡æœ¬</span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;long&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;long&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;employer&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<p><strong>æ‰‹åŠ¨åˆ›å»ºæ˜ å°„</strong>ï¼Œåœ¨åˆ›å»ºç´¢å¼•æ—¶å¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œåˆ›å»ºmy_indexç´¢å¼•</p>
<p>PUT <a href="http://localhost:9200/my_index">http://localhost:9200/my_index</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  # åˆ›å»ºçš„æ—¶å€™éœ€è¦</span><br><span class="line">        <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # æŒ‡å®šä¸ºæ˜ å°„</span><br><span class="line">            <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;integer&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ·»åŠ æ˜ å°„</strong></p>
<p>PUT <a href="http://localhost:9200/my_index/_mapping">http://localhost:9200/my_index/_mapping</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # æ·»åŠ æ˜ å°„</span><br><span class="line">        <span class="attr">&quot;employee-id&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>è¿ç§»æ•°æ®</strong></p>
<p>ä¸æ”¯æŒä¿®æ”¹ç´¢å¼•ï¼Œå»ºè®®è¿ç§»ã€‚å…ˆåˆ›å»ºç´¢å¼•ï¼Œå†è¿ç§»</p>
<p>PUT <a href="http://localhost:9200/_reindex">http://localhost:9200/_reindex</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # ä»é‚£è¿ç§»</span><br><span class="line">        <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bank&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> # è¿ç§»åˆ°</span><br><span class="line">        <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;newbank&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-å®‰è£…åˆ†è¯å™¨">6 å®‰è£…åˆ†è¯å™¨</h2>
<p>è¿™é‡Œä½¿ç”¨IKåˆ†è¯å™¨ï¼Œ<a href="https://github.com/medcl/elasticsearch-analysis-ik">medcl/elasticsearch-analysis-ik: The IK Analysis plugin integrates Lucene IK analyzer into elasticsearch, support customized dictionary. (github.com)</a>ã€‚ä¸‹è½½ä¸ESå¯¹åº”çš„ikåˆ†è¯å™¨ç‰ˆæœ¬å³å¯ã€‚<br>
ç„¶è§£å‹åˆ°ä¹‹å‰æ˜ å°„çš„pluginsç›®å½•ä¸‹å³å¯ã€‚</p>
<h3 id="ä½¿ç”¨ikåˆ†è¯å™¨">ä½¿ç”¨Ikåˆ†è¯å™¨</h3>
<p>GET <a href="http://localhost:9200/_analyze">http://localhost:9200/_analyze</a></p>
<p>è°ƒç”¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span><span class="punctuation">,</span> # ä½¿ç”¨ikåˆ†è¯å™¨</span><br><span class="line">    <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Elasticsearchï¼ˆç®€ç§°ESï¼‰æ˜¯ä¸€ä¸ªåŸºäºApache Luceneâ„¢çš„å¼€æºæœç´¢å¼•æ“&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;tokens&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elasticsearch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">13</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ENGLISH&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç®€ç§°&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">14</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN_WORD&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ENGLISH&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ˜¯&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">19</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN_CHAR&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸€ä¸ª&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">22</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN_WORD&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åŸºäº&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">22</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN_WORD&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;apache&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ENGLISH&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">6</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lucene&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">31</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">37</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ENGLISH&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">7</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;çš„&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">38</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">39</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN_CHAR&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">8</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼€æº&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">39</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">41</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN_WORD&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æœç´¢å¼•æ“&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;start_offset&quot;</span><span class="punctuation">:</span> <span class="number">41</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end_offset&quot;</span><span class="punctuation">:</span> <span class="number">45</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN_WORD&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>ä¸­é—´ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰</title>
    <url>/2023/01/15/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%EF%BC%88%E5%A0%86%EF%BC%89/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬å…­ç« 6.1èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<p>ä¼˜å…ˆé˜Ÿåˆ—åˆç§°ä¸ºå †ï¼Œæ˜¯ç”¨æ¥å¤„ç†å…·æœ‰ä¼˜å…ˆçº§çš„å…ƒç´ çš„æ•°æ®ç»“æ„ã€‚</p>
<h2 id="6-1-æ¨¡å‹">6.1 æ¨¡å‹</h2>
<p>ä¼˜å…ˆé˜Ÿåˆ—åˆ†ä¸ºä¸¤ç§ã€‚<br>
ä¸€ç§æ˜¯å°é¡¶å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—ï¼Œåœ¨å †é¡¶æ˜¯æœ€å°çš„å…ƒç´ ï¼Œæ¯æ¬¡å¯ä»¥ç›´æ¥è®¿é—®æœ€å°çš„å…ƒç´ ã€‚<br>
å¦ä¸€ç§æ˜¯å¤§é¡¶å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—ï¼Œåœ¨å †é¡¶æ˜¯æœ€å¤§å…ƒç´ ã€‚æ¯æ¬¡å¯ä»¥ç›´æ¥è®¿é—®æœ€å¤§çš„å…ƒç´ ã€‚</p>
<p>å¯¹äºå°é¡¶å †è€Œè¨€ï¼Œè‡³å°‘æ”¯æŒä¸¤ç§æ“ä½œï¼Œinsertæ’å…¥ï¼Œå°†å…ƒç´ æŒ‰ä¼˜å…ˆçº§æ’å…¥åˆ°æŒ‡å®šä½ç½®ï¼Œdeleteminåˆ é™¤ï¼Œåˆ é™¤å †é¡¶çš„æœ€å°å…ƒç´ ã€‚insertæ“ä½œç­‰ä»·äºå…¥é˜Ÿï¼Œdeleteminç­‰ä»·äºå‡ºé˜Ÿã€‚ï¼ˆç”±å †çš„ä¼˜å…ˆçº§ï¼Œå¯ä»¥å¼•å‡ºå †æ’åºï¼‰ã€‚</p>
<p>åç»­ä»¥å°é¡¶å †ä¸ºä¾‹ã€‚</p>
<h2 id="6-2-ä¸€äº›ç®€å•å®ç°">6.2 ä¸€äº›ç®€å•å®ç°</h2>
<p>ä½¿ç”¨æœ‰åºé“¾è¡¨æ¥å®ç°ï¼Œè¡¨å¤´çš„å…ƒç´ æœ€å°ï¼Œåˆ™æ¯æ¬¡deleteMinçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œå¯¹äºNä¸ªå…ƒç´ ï¼Œåˆ™æ˜¯O(N)ã€‚å¯¹äºæ¯æ¬¡insertæ“ä½œï¼Œç”±äºéœ€è¦éå†æ‰¾åˆ°æ’å…¥çš„ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œå¯¹äºNä¸ªå…ƒç´ ï¼Œåˆ™æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p>
<p>ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘å®ç°ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘ä¸¤ç§æ“ä½œå®ç°çš†æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œå¯¹äºNä¸ªå…ƒç´ ï¼Œå®ç°æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(NlogN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ã€‚ä¸è¿‡äºŒå‰æŸ¥æ‰¾æ ‘çš„å®ç°è¾ƒä¸ºå¤æ‚ï¼Œè€Œä¸”è®¸å¤šæ”¯æŒçš„æ“ä½œæˆ‘ä»¬å¹¶ä¸éœ€è¦ã€‚å°†å®ç°äºŒå‰å †ï¼Œæ¥æ”¯æŒè¿™ä¸ªæ“ä½œï¼Œå¹¶ä¸”æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(NlogN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ã€‚</p>
<h2 id="6-3-äºŒå‰å †">6.3 äºŒå‰å †</h2>
<p>å †ä¸€èˆ¬æŒ‡äºŒå‰å †ã€‚å †å…·æœ‰<strong>ç»“æ„æ€§</strong>å’Œ<strong>å †åºæ€§</strong>ã€‚å¯¹å †çš„ä¸€æ¬¡æ“ä½œï¼Œå¯èƒ½ä¼šç ´åè¿™ä¸¤ä¸ªæ€§è´¨ä¸­çš„ä¸€ä¸ªã€‚å› æ­¤å¯¹äºå †ä¸€æ¬¡æ“ä½œï¼Œå¿…é¡»è¿˜åŸè¿™ä¸¤ä¸ªæ€§è´¨ï¼Œæ‰ç®—ä½œä¸€æ¬¡æ“ä½œç»ˆæ­¢ã€‚</p>
<h3 id="6-3-1-ç»“æ„æ€§è´¨">6.3.1 ç»“æ„æ€§è´¨</h3>
<p>å †æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œé™¤æœ€åº•å±‚å¤–ï¼Œæ¯ä¸€å±‚éƒ½è¢«å¡«æ»¡ã€‚å®¹æ˜“è¯æ˜ä¸€æ£µé«˜ä¸ºhçš„å®Œå…¨äºŒå‰æ ‘æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>h</mi></msup><mtext>åˆ°</mtext><msup><mn>2</mn><mrow><mi>h</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn><mtext>ä¸ªèŠ‚ç‚¹</mtext></mrow><annotation encoding="application/x-tex">2^h åˆ° 2^{h+1}-1ä¸ªèŠ‚ç‚¹</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.932438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">h</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">åˆ°</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord cjk_fallback">ä¸ª</span><span class="mord cjk_fallback">èŠ‚</span><span class="mord cjk_fallback">ç‚¹</span></span></span></span>ã€‚å³èŠ‚ç‚¹ä¸ªæ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><msup><mn>2</mn><mi>h</mi></msup><mtext>æˆ–</mtext><msup><mn>2</mn><mrow><mi>h</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn><mtext>ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤ï¼Œé«˜åº¦</mtext></mrow><annotation encoding="application/x-tex">N = 2^h æˆ– 2^{h+1}-1ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤ï¼Œé«˜åº¦</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.932438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">h</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">æˆ–</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord cjk_fallback">ä¸ª</span><span class="mord cjk_fallback">èŠ‚</span><span class="mord cjk_fallback">ç‚¹</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">å› </span><span class="mord cjk_fallback">æ­¤</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">é«˜</span><span class="mord cjk_fallback">åº¦</span></span></span></span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h = O(logN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ã€‚</p>
<p><strong>å †æ€§è´¨</strong>ï¼šå †å¤§å¤šéƒ½ç”±æ•°ç»„å®ç°ï¼Œè€Œä¸æ˜¯é“¾è¡¨ã€‚å¯¹äºæ•°ç»„ä¸Šçš„ä»»ä¸€ä½ç½®içš„å…ƒç´ ï¼Œå…¶å·¦å„¿å­åœ¨2iï¼Œå³å„¿å­åœ¨2i+1ã€‚å®ƒçš„çˆ¶äº²åœ¨i/2ä¸Š(javaçš„æ•´é™¤çš„æ€§è´¨ï¼Œå¯¹äºèŠ‚ç‚¹iï¼Œæ— è®ºä»–æ˜¯å·¦å„¿å­ï¼Œè¿˜æ˜¯å³å„¿å­ï¼Œæ•´é™¤å¾—åˆ°çš„ç»“æœéƒ½æ˜¯i/2)ã€‚</p>
<p>ç”±äºæ˜¯ç”¨æ•°ç»„å®ç°ï¼Œå½“æˆ‘ä»¬éå†æ‰€æœ‰å…ƒç´ æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡è®¡ç®—ï¼Œæ¥å¾—çŸ¥è®¿é—®çš„ä¸‹æ ‡ã€‚ä¾‹å¦‚ä¸‹æ ‡1çš„å·¦å„¿å­åœ¨ä¸‹æ ‡2ï¼Œå³å„¿å­åœ¨ä¸‹æ ‡3ã€‚æŒ‰é¡ºåºè®¿é—®ã€‚</p>
<p>**æœ¬èŠ‚æˆ‘ä»¬å›¾ç¤ºçš†ä»¥äºŒå‰æ ‘å±•ç¤ºï¼Œä½†æ˜¯å®ç°ä»ç„¶æ˜¯æ•°ç»„ã€‚**å®ç°çš„æ˜¯å°é¡¶å †ã€‚</p>
<p>æ³¨æ„ï¼šæˆ‘ä»¬çš„å †æ•°ç»„ï¼Œä¸‹æ ‡ä¸º0çš„ä½ç½®æ˜¯ä¸ä½¿ç”¨çš„ï¼Œå› ä¸º2i =  0ï¼Œå¾—åˆ°çš„ç»“æœå’Œçˆ¶èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„ä½ç½®ã€‚æ‰€ä»¥æœ‰æ•ˆèŠ‚ç‚¹ä»1å¼€å§‹ã€‚(çº¿æ®µæ ‘ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½¿ç”¨æ•°ç»„å®ç°æ ‘ï¼Œä¸”0çš„ä½ç½®ä¸ä½¿ç”¨)ã€‚</p>
<h3 id="6-3-2-å †åºæ€§">6.3.2 å †åºæ€§</h3>
<p>å¯¹äºå°é¡¶å †ï¼Œæ ¹èŠ‚ç‚¹åº”è¯¥æ˜¯æœ€å°çš„å…ƒç´ ã€‚åŒæ—¶ï¼Œå¯¹äºäºŒå‰å †çš„ä»»æ„å­æ ‘ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå°é¡¶å †ï¼Œå­æ ‘çš„æ ¹èŠ‚ç‚¹ä¹Ÿåº”è¯¥æ˜¯å­æ ‘çš„æœ€å°å…ƒç´ ã€‚</p>
<p>å› æ­¤ï¼Œå¯¹äºä¸€ä¸ªå°é¡¶å †ï¼Œå¯¹äºä»»æ„èŠ‚ç‚¹iï¼Œå¦‚æœå…¶æœ‰å·¦å³å­èŠ‚ç‚¹ï¼Œåˆ™åº”è¯¥æ»¡è¶³ï¼Œnum[i] &lt;= num[2i]ï¼Œnum[i] &lt;= num[2i + 1]ã€‚</p>
<p><img src="/2023/01/15/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%EF%BC%88%E5%A0%86%EF%BC%89/%E5%B0%8F%E9%A1%B6%E5%A0%86.webp" alt></p>
<p>æ ¹æ®å †åºæ€§ï¼Œæœ€å°çš„å…ƒç´ æ€»æ˜¯å¯ä»¥ä»¥O(1)çš„æ—¶é—´åœ¨å †çš„æ ¹å¤„æ‰¾åˆ°ã€‚å®ç°ä¸ºfindMinã€‚</p>
<h3 id="6-3-3-å †çš„åŸºæœ¬æ“ä½œ">6.3.3 å †çš„åŸºæœ¬æ“ä½œ</h3>
<p><strong>æ’å…¥</strong>ï¼ˆinsertï¼‰</p>
<p>ä¸ºäº†å°†ä¸€ä¸ªå…ƒç´ Xæ’å…¥åˆ°å †ä¸­ï¼Œå¯ä»¥å…ˆåœ¨ä¸‹ä¸€ä¸ªå¯ç”¨çš„ä½ç½®åˆ›å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹ã€‚å¦‚æœXå¯ä»¥æ”¾å…¥è¯¥èŠ‚ç‚¹è€Œä¸ç ´åŒ–<strong>å †åºæ€§</strong>ï¼Œé‚£ä¹ˆæ’å…¥å®Œæˆã€‚å¦åˆ™ç©ºèŠ‚ç‚¹åº”è¯¥æœç€æ ¹çš„æ–¹å‘å†’ä¸€æ­¥ã€‚ç»§ç»­è¯¥è¿‡ç¨‹ï¼ŒçŸ¥é“Xèƒ½è¢«æ”¾å…¥ç©ºèŠ‚ç‚¹ä¸ºæ­¢ã€‚å¦‚ä¸‹å›¾ï¼Œä¸ºäº†æ’å…¥14ï¼Œå…ˆåˆ›å»ºç©ºèŠ‚ç‚¹ï¼Œæ’å…¥14ä¸æ»¡è¶³ï¼Œå°†ç©ºèŠ‚ç‚¹ä¸Šå†’ï¼ŒçŸ¥é“å°†14æ’å…¥æ­£ç¡®çš„ä½ç½®ã€‚</p>
<p><img src="/2023/01/15/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%EF%BC%88%E5%A0%86%EF%BC%89/%E5%B0%9D%E8%AF%95%E6%8F%92%E5%85%A514.webp" alt="å°è¯•æ’å…¥14ï¼šåˆ›å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œå†å°†ç©ºèŠ‚ç‚¹ä¸Šå†’"></p>
<p><img src="/2023/01/15/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%EF%BC%88%E5%A0%86%EF%BC%89/%E5%B0%9D%E8%AF%95%E6%8F%92%E5%85%A514%E5%90%8E%E7%BB%AD.webp" alt="å°è¯•æ’å…¥14ï¼šåç»­"></p>
<p>è¿™ç§ç­–ç•¥ä¸€èˆ¬å«åšä¸Šæ»¤ï¼Œæ–°å…ƒç´ åœ¨å †ä¸­ä¸Šæ»¤çŸ¥é“æ‰¾å‡ºæ­£ç¡®çš„ä½ç½®ã€‚ä½¿ç”¨å¦‚ä¸‹ä»£ç å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(T x)</span> &#123;</span><br><span class="line">    <span class="comment">// currentSizeï¼šè¢«ä½¿ç”¨çš„æ•°ç»„å¤§å°</span></span><br><span class="line">    <span class="keyword">if</span> (currentSize == array.length - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// ä¸‹æ ‡0ä¸ç”¨ï¼Œæ‰€ä»¥éœ€è¦å‡å»1</span></span><br><span class="line">        <span class="comment">// 2å€æ‰©å®¹ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨çš„ç©ºé—´ä¸º2çš„å€æ•°ä¸ª</span></span><br><span class="line">        <span class="built_in">this</span>.enlargeArray(array.length * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨çš„ä½ç½®åŠ 1ï¼ˆcurrentSize + 1åä¸ºå³å°†å°è¯•ä½¿ç”¨çš„ä¸‹æ ‡ï¼‰</span></span><br><span class="line">    currentSize++;</span><br><span class="line">    <span class="comment">// ç©ºèŠ‚ç‚¹ä¸‹æ ‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">hole</span> <span class="operator">=</span> currentSize;</span><br><span class="line">    <span class="comment">// å…ˆå°†xå­˜åˆ°ä¸‹æ ‡0çš„ä½ç½®ï¼ˆè¯¥ä½ç½®ä¸ä½¿ç”¨ï¼‰ï¼Œhole = hole / 2ï¼šæ„æ€æ˜¯è®¿é—®holeçš„çˆ¶èŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ä¸Šæ»¤</span></span><br><span class="line">    <span class="keyword">for</span> (array[<span class="number">0</span>] = x; x.compareTo(array[hole / <span class="number">2</span>]) &lt; <span class="number">0</span>; hole /= <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="comment">// ç†è§£çš„ä¸ºxåœ¨ç©ºèŠ‚ç‚¹holeå¤„ï¼Œ</span></span><br><span class="line">        <span class="comment">// x.compareTo(array[hole / 2]) &lt; 0 ï¼š xå°äºçˆ¶èŠ‚ç‚¹çš„å…ƒç´ ã€‚å°†çˆ¶èŠ‚ç‚¹çš„å€¼ä¸‹æµ®åˆ°ç©ºèŠ‚ç‚¹ï¼ˆç­‰åŒäºå°†ç©ºèŠ‚ç‚¹ä¸Šå†’åˆ°çˆ¶èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">        array[hole] = array[hole / <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    array[hole] = x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦æ’å…¥çš„å…ƒç´ æ˜¯æœ€å°çš„å…ƒç´ ï¼Œé‚£ä¹ˆä»–å°†ä¸€ç›´è¢«æ¨å‘é¡¶ç«¯ã€‚</p>
<p><strong>deleteMin</strong>ï¼ˆåˆ é™¤æœ€å°å…ƒç´ ï¼‰</p>
<p>æœ€å°çš„å…ƒç´ åœ¨é¡¶ç«¯ï¼Œå³ä¸‹æ ‡ä¸º1å¤„ã€‚åˆ é™¤æœ€å°çš„å…ƒç´ ï¼Œè¦åœ¨æ ¹èŠ‚ç‚¹ï¼ˆä¸‹æ ‡1å¤„ï¼‰å»ºç«‹ä¸€ä¸ªç©ºç©´ã€‚å°†ç©ºç©´ä¸­çš„ä¸¤ä¸ªå­—èŠ‚çš„çš„è¾ƒå°å€¼ç§»å…¥ç©ºç©´ï¼Œåˆ™ç©ºç©´ä¸‹ç§»åŠ¨ä¸€å±‚ã€‚é‡å¤è¿™ä¸€è¿‡ç¨‹ã€‚æœ€åå†å°†å †ä¸­çš„æœ€å¤§å…ƒç´ ï¼ˆå¦‚å›¾31ï¼‰è¢«ç§»å…¥ç©ºç©´ã€‚</p>
<p><img src="/2023/01/15/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%EF%BC%88%E5%A0%86%EF%BC%89/deleteMin_%E6%A0%B9%E5%A4%84%E5%BB%BA%E7%A9%B4.webp" alt="åœ¨æ ¹å¤„å»ºç©´"></p>
<p><img src="/2023/01/15/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%EF%BC%88%E5%A0%86%EF%BC%89/deleteMin_%E6%8E%A5%E4%B8%8B%E6%9D%A5%E4%B8%A4%E6%AD%A5.webp" alt="deleteMin_æ¥ä¸‹æ¥ä¸¤æ­¥"></p>
<p><img src="/2023/01/15/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%EF%BC%88%E5%A0%86%EF%BC%89/deleteMin_%E6%9C%80%E5%90%8E%E4%B8%A4%E6%AD%A5.webp" alt="deleteMin_æœ€åä¸¤æ­¥"></p>
<p>ä»£ç å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> T <span class="title function_">deleteMin</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// å †ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (currentSize == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æœ€å°çš„å…ƒç´ åœ¨æ ¹å¤„</span></span><br><span class="line">    <span class="type">T</span> <span class="variable">minItem</span> <span class="operator">=</span> array[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// å°†æœ€å¤§çš„å…ƒç´ æ”¾ç½®åˆ°æ ¹å¤„ï¼Œç›¸å½“äºåˆ æ‰äº†æ ¹å¤„çš„å…ƒç´ ï¼ŒåŒæ—¶ä½¿ç”¨æŠ½è±¡å‡ºæ¥çš„æ–¹æ³•ä¸‹æµ®æœ€å¤§å€¼ã€‚</span></span><br><span class="line">    array[<span class="number">1</span>] = array[currentSize];</span><br><span class="line">    currentSize -= <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// å°†èŠ‚ç‚¹1å¤„çš„å€¼ä¸‹æµ®</span></span><br><span class="line">    percolateDown(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> minItem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">percolateDown</span><span class="params">(<span class="type">int</span> hole)</span> &#123;</span><br><span class="line">    <span class="type">int</span> child;</span><br><span class="line">    <span class="comment">// è¦ä¸‹æµ®çš„å…ƒç´ çš„å€¼</span></span><br><span class="line">    <span class="type">T</span> <span class="variable">temp</span> <span class="operator">=</span> array[hole];</span><br><span class="line">    <span class="keyword">for</span> (; hole * <span class="number">2</span> &lt;= currentSize; hole = child) &#123;</span><br><span class="line">        <span class="comment">// å·¦å„¿å­çš„ä¸‹æ ‡</span></span><br><span class="line">        child = hole * <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœå·¦å„¿å­ä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”å³å„¿å­å°äºå·¦å„¿å­ï¼Œ</span></span><br><span class="line">        <span class="keyword">if</span> (child != currentSize &amp;&amp; array[child + <span class="number">1</span>].compareTo(array[child]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// è¦ç§»åŠ¨çš„åˆ™æ˜¯è¾ƒå°çš„å³å„¿å­</span></span><br><span class="line">            child++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (array[child].compareTo(temp) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå­èŠ‚ç‚¹çš„å€¼æ¯”è¦ä¸‹æµ®çš„å€¼å°ï¼Œé‚£ä¹ˆå­èŠ‚ç‚¹å‘ä¸Šç§»åŠ¨ï¼ˆç›¸å½“äºä¸‹æµ®èŠ‚ç‚¹ä¸‹æµ®ï¼‰</span></span><br><span class="line">            array[hole] = array[child];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦åˆ™ç»ˆæ­¢</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// temp(æœ€å¤§å€¼)ç§»åŠ¨åˆ°ç©ºç©´ä½ç½®ï¼Œå®Œæˆä¸‹æµ®</span></span><br><span class="line">    array[hole] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å»ºå †</strong></p>
<p>é€šè¿‡åˆå§‹æ„é€ é›†åˆå»ºå †ï¼Œå¯ä»¥è€ƒè™‘å»ºå †ä½¿ç”¨Nä¸ªinsertæ–¹æ³•æ¥å»ºå †ï¼Œæ¯ä¸ªinsertçš„å¹³å‡æ—¶é—´æ˜¯Oï¼ˆ1ï¼‰,è€Œæœ€åçš„æ—¶é—´æ˜¯Oï¼ˆlgNï¼‰ã€‚å› æ­¤æ€»çš„å¹³å‡æ—¶é—´ä¸ºOï¼ˆNï¼‰ï¼Œæ€»çš„æœ€åæ—¶é—´ä¸ºOï¼ˆNlgNï¼‰ã€‚</p>
<p>ä¸€èˆ¬çš„ç®—æ³•æ˜¯å°†Né¡¹ä»¥ä»»æ„é¡ºåºæ”¾å…¥å †ä¸­ï¼Œä¿æŒç»“æ„æ€§ï¼Œæ­¤æ—¶percolateDown(i)ä»èŠ‚ç‚¹iä¸‹æ»¤ï¼Œä½¿ç”¨å¦‚ä¸‹çš„ç¨‹åºåˆ›å»ºä¸€æ£µå †åºçš„æ ‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ•°ç»„å»ºå †</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">BinaryHeap</span><span class="params">(T[ ] items )</span> &#123;</span><br><span class="line">    currentSize = items.length;</span><br><span class="line">    <span class="comment">// å¼€è¾Ÿç©ºé—´æ•°ç»„</span></span><br><span class="line">    array = (T[]) <span class="keyword">new</span> <span class="title class_">Comparable</span>[ ( currentSize + <span class="number">2</span> ) * <span class="number">11</span> / <span class="number">10</span> ];</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å †æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span>(T item : items ) &#123;</span><br><span class="line">        array[i++] = item;</span><br><span class="line">    &#125;</span><br><span class="line">    buildHeap();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildHeap</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> currentSize / <span class="number">2</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">// å¾ªç¯éå†æ¥ä¸‹æµ®å»ºå †</span></span><br><span class="line">        percolateDown(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-4-å®Œæ•´ä»£ç ">6.4 å®Œæ•´ä»£ç </h2>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>å †å®Œæ•´ä»£ç </span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinaryHeap</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;? <span class="built_in">super</span> T&gt;&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“å‰å †ä¸­çš„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentSize;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨å †çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> T[] array;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Construct the binary heap.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinaryHeap</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨æœ¬ç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>(DEFAULT_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinaryHeap</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å †æ•°ç»„çš„0çš„ä½ç½®æ˜¯ä¸ä½¿ç”¨çš„ï¼Œæ‰€ä»¥é•¿åº¦éœ€è¦åŠ 1</span></span><br><span class="line">        array = (T[]) <span class="keyword">new</span> <span class="title class_">Comparable</span>[capacity + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨æ•°ç»„å»ºå †</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinaryHeap</span><span class="params">(T[] items)</span> &#123;</span><br><span class="line">        currentSize = items.length;</span><br><span class="line">        <span class="comment">// å¼€è¾Ÿç©ºé—´æ•°ç»„</span></span><br><span class="line">        array = (T[]) <span class="keyword">new</span> <span class="title class_">Comparable</span>[(currentSize + <span class="number">2</span>) * <span class="number">11</span> / <span class="number">10</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å †æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (T item : items) &#123;</span><br><span class="line">            array[i++] = item;</span><br><span class="line">        &#125;</span><br><span class="line">        buildHeap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildHeap</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> currentSize / <span class="number">2</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// å¾ªç¯éå†æ¥xia&#x27;fu&#x27;shen&#x27;sh</span></span><br><span class="line">            percolateDown(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (currentSize == array.length - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// ä¸‹æ ‡0ä¸ç”¨ï¼Œæ‰€ä»¥éœ€è¦å‡å»1</span></span><br><span class="line">            <span class="comment">// 2å€æ‰©å®¹ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨çš„ç©ºé—´ä¸º2çš„å€æ•°ä¸ª</span></span><br><span class="line">            <span class="built_in">this</span>.enlargeArray(array.length * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†Xä¸Šå†’åˆ°æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">        currentSize++;</span><br><span class="line">        <span class="comment">// ç©ºèŠ‚ç‚¹ä¸‹æ ‡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">hole</span> <span class="operator">=</span> currentSize;</span><br><span class="line">        <span class="comment">// å…ˆå°†xå­˜åˆ°ä¸‹æ ‡0çš„ä½ç½®ï¼ˆè¯¥ä½ç½®ä¸ä½¿ç”¨ï¼‰ï¼Œhole = hole / 2ï¼šæ„æ€æ˜¯è®¿é—®holeçš„çˆ¶èŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ä¸Šå†’</span></span><br><span class="line">        <span class="keyword">for</span> (array[<span class="number">0</span>] = x; x.compareTo(array[hole / <span class="number">2</span>]) &lt; <span class="number">0</span>; hole /= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="comment">// ç†è§£çš„ä¸ºxåœ¨ç©ºèŠ‚ç‚¹holeå¤„ï¼Œ</span></span><br><span class="line">            <span class="comment">// x.compareTo(array[hole / 2]) &lt; 0 ï¼š xå°äºçˆ¶èŠ‚ç‚¹çš„å…ƒç´ ã€‚å°†çˆ¶èŠ‚ç‚¹çš„å€¼ä¸‹æµ®åˆ°ç©ºèŠ‚ç‚¹ï¼ˆç­‰åŒäºå°†ç©ºèŠ‚ç‚¹ä¸Šå†’åˆ°çˆ¶èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">            array[hole] = array[hole / <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        array[hole] = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">deleteMin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å †ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (currentSize == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€å°çš„å…ƒç´ åœ¨æ ¹å¤„</span></span><br><span class="line">        <span class="type">T</span> <span class="variable">minItem</span> <span class="operator">=</span> findMin();</span><br><span class="line">        <span class="comment">// å°†æœ€å¤§çš„å…ƒç´ æ”¾ç½®åˆ°æ ¹å¤„ï¼Œç›¸å½“äºåˆ æ‰äº†æ ¹å¤„çš„å…ƒç´ ï¼ŒåŒæ—¶ä½¿ç”¨æŠ½è±¡å‡ºæ¥çš„æ–¹æ³•ä¸‹æµ®æœ€å¤§å€¼ã€‚</span></span><br><span class="line">        array[<span class="number">1</span>] = array[currentSize];</span><br><span class="line">        currentSize -= <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å°†èŠ‚ç‚¹1å¤„çš„å€¼ä¸‹æµ®</span></span><br><span class="line">        percolateDown(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> minItem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">findMin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">currentSize</span> <span class="operator">=</span>= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">percolateDown</span><span class="params">(<span class="type">int</span> hole)</span> &#123;</span><br><span class="line">        <span class="type">int</span> child;</span><br><span class="line">        <span class="comment">// è¦ä¸‹æµ®çš„å…ƒç´ çš„å€¼</span></span><br><span class="line">        <span class="type">T</span> <span class="variable">temp</span> <span class="operator">=</span> array[hole];</span><br><span class="line">        <span class="keyword">for</span> (; hole * <span class="number">2</span> &lt;= currentSize; hole = child) &#123;</span><br><span class="line">            <span class="comment">// å·¦å„¿å­çš„ä¸‹æ ‡</span></span><br><span class="line">            child = hole * <span class="number">2</span>;</span><br><span class="line">            <span class="comment">// å¦‚æœå·¦å„¿å­ä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”å³å„¿å­å°äºå·¦å„¿å­ï¼Œ</span></span><br><span class="line">            <span class="keyword">if</span> (child != currentSize &amp;&amp; array[child + <span class="number">1</span>].compareTo(array[child]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// è¦ç§»åŠ¨çš„åˆ™æ˜¯è¾ƒå°çš„å³å„¿å­</span></span><br><span class="line">                child++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (array[child].compareTo(temp) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœå­èŠ‚ç‚¹çš„å€¼æ¯”è¦ä¸‹æµ®çš„å€¼å°ï¼Œé‚£ä¹ˆå­èŠ‚ç‚¹å‘ä¸Šç§»åŠ¨ï¼ˆç›¸å½“äºä¸‹æµ®èŠ‚ç‚¹ä¸‹æµ®ï¼‰</span></span><br><span class="line">                array[hole] = array[child];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦åˆ™ç»ˆæ­¢</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// tempç§»åŠ¨åˆ°ç©ºç©´ä½ç½®</span></span><br><span class="line">        array[hole] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰©å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">enlargeArray</span><span class="params">(<span class="type">int</span> newSize)</span> &#123;</span><br><span class="line">        T[] old = array;</span><br><span class="line">        array = (T[]) <span class="keyword">new</span> <span class="title class_">Comparable</span>[newSize];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; old.length; i++) &#123;</span><br><span class="line">            array[i] = old[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">numItems</span> <span class="operator">=</span> <span class="number">10000</span>;</span><br><span class="line">        BinaryHeap&lt;Integer&gt; h = <span class="keyword">new</span> <span class="title class_">BinaryHeap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">37</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">37</span>; i != <span class="number">0</span>; i = (i + <span class="number">37</span>) % numItems) &#123;</span><br><span class="line">            h.insert(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; numItems; i++) &#123;</span><br><span class="line">            System.out.println(h.findMin());</span><br><span class="line">            h.deleteMin();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°è®ºæ‚é¡¹</title>
    <url>/2023/01/14/%E6%95%B0%E8%AE%BA%E6%9D%82%E9%A1%B9/</url>
    <content><![CDATA[<p>æ•°è®ºæ‚é¡¹</p>
<span id="more"></span>
<h2 id="å–ä½™-åŒºåˆ«pythonçš„å–æ¨¡">å–ä½™ï¼ˆåŒºåˆ«pythonçš„å–æ¨¡ï¼‰</h2>
<p>æ³¨æ„ï¼šå¯¹äºå–ä½™ï¼Œä¸‹é¢ç»Ÿä¸€ç”¨%ç¬¦å·ï¼Œå¯¹äºå–æ¨¡ï¼Œç»Ÿä¸€ç”¨modå…³é”®å­—<br>
åŒºåˆ«äºpythonï¼Œjavaä¸­çš„<strong>è´Ÿ(æ­£)æ•° / è´Ÿ(æ­£)æ•° = ç­”æ¡ˆ</strong>ï¼Œè¿™ä¸ªç­”æ¡ˆä¼šå‘0é è¿‘ï¼Œå–æ¨¡çš„ç»“æœå°±æ˜¯å‰©ä¸‹çš„æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>âˆ’</mo><mn>7</mn></mrow><mi mathvariant="normal">/</mi><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow><mtext>ä½™</mtext><mrow><mo>âˆ’</mo><mn>3</mn></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>âˆ’</mo><mn>7</mn></mrow><mi mathvariant="normal">/</mi><mrow><mo>âˆ’</mo><mn>4</mn></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1</mn><mtext>ä½™</mtext><mrow><mo>âˆ’</mo><mn>3</mn></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>7</mn><mi mathvariant="normal">/</mi><mrow><mo>âˆ’</mo><mn>4</mn></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow><mtext>ä½™</mtext><mn>3</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
{-7} / 4 &amp;= {-1}ä½™{-3} \\
{-7} / {-4} &amp;= {1} ä½™ {-3} \\
7 / {-4} &amp;= {-1} ä½™ 3
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.500000000000002em;vertical-align:-2.000000000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">âˆ’</span><span class="mord">7</span></span><span class="mord">/</span><span class="mord">4</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">âˆ’</span><span class="mord">7</span></span><span class="mord">/</span><span class="mord"><span class="mord">âˆ’</span><span class="mord">4</span></span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">7</span><span class="mord">/</span><span class="mord"><span class="mord">âˆ’</span><span class="mord">4</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span><span class="mord cjk_fallback">ä½™</span><span class="mord"><span class="mord">âˆ’</span><span class="mord">3</span></span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord">1</span></span><span class="mord cjk_fallback">ä½™</span><span class="mord"><span class="mord">âˆ’</span><span class="mord">3</span></span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span><span class="mord cjk_fallback">ä½™</span><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<h3 id="å–æ¨¡åˆ†é…å¾‹-é™¤æ³•ä¾‹å¤–">å–æ¨¡åˆ†é…å¾‹ï¼ˆé™¤æ³•ä¾‹å¤–ï¼‰</h3>
<p>é™¤æ³•çš„å–æ¨¡éœ€è¦è¿›è¡Œé€†å…ƒè¿ç®—æ‰èƒ½æ±‚è§£ã€‚</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi><mo>+</mo><mi>b</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>âˆ’</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi><mo>âˆ’</mo><mi>b</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>âˆ—</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi><mo>âˆ—</mo><mi>b</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>a</mi><mi>b</mi></msup><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>a</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi><msup><mo stretchy="false">)</mo><mi>b</mi></msup><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>p</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
(a + b)\ mod \ p &amp;= (a\ mod \ p + b\ mod \ p)\ mod \ p \\
(a - b)\ mod \ p &amp;= (a\ mod \ p - b\ mod \ p)\ mod \ p \\
(a * b)\ mod \ p &amp;= (a\ mod \ p * b\ mod \ p)\ mod \ p \\
a ^ b\ mod \ p &amp;= ((a\ mod \ p) ^ b)\ mod \ p
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.059108em;vertical-align:-2.7795540000000005em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.279554em;"><span style="top:-5.439554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span><span style="top:-3.9395540000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span><span style="top:-2.4395539999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span><span style="top:-0.8804459999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.7795540000000005em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.279554em;"><span style="top:-5.439554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span><span style="top:-3.9395540000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span><span style="top:-2.4395539999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span><span style="top:-0.8804459999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.7795540000000005em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<h3 id="å–æ¨¡åŒä½™å®šç†">å–æ¨¡åŒä½™å®šç†</h3>
<p>å¯¹äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>âˆ’</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>k</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">(a - b) \  mod \ k = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>ï¼Œåˆ™æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>k</mi><mo>=</mo><mi>b</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>k</mi></mrow><annotation encoding="application/x-tex">a \ mod \ k = b \ mod \ k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>ã€‚å¯¹äºpythonï¼Œæœ¬èº«å°±æ˜¯å–æ¨¡ï¼Œç›´æ¥å–æ¨¡è¿ç®—å³å¯ã€‚<br>
å¯¹äºjavaçš„å–ä½™éœ€è¦ç‰¹æ®Šå¤„ç†ä¸€ä¸‹ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mtext>Â </mtext><mi mathvariant="normal">%</mi><mtext>Â </mtext><mi>k</mi><mo>+</mo><mi>k</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi mathvariant="normal">%</mi><mtext>Â </mtext><mi>k</mi><mo>=</mo><mo stretchy="false">(</mo><mi>b</mi><mtext>Â </mtext><mi mathvariant="normal">%</mi><mtext>Â </mtext><mi>k</mi><mo>+</mo><mi>k</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi mathvariant="normal">%</mi><mtext>Â </mtext><mi>k</mi></mrow><annotation encoding="application/x-tex">(a \ \% \ k + k)\ \% \ k = (b \ \% \ k + k)\ \% \ k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace">Â </span><span class="mord">%</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord">%</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mspace">Â </span><span class="mord">%</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord">%</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span></p>
<p>ç”¨é€”ï¼š<br>
<a href="https://leetcode.cn/problems/subarray-sums-divisible-by-k/">974. å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>ï¼Œå‰ç¼€å’Œå¤„ç†åï¼Œ(sum[j] - sum[i]) % k = 0çš„æ¢å¤„ç†ã€‚</p>
<p>å­—ç¬¦ä¸²Hashæ–‡ç« ä¸­ <a href="/2022/11/27/%E5%AD%97%E7%AC%A6%E4%B8%B2Hash/" title="å­—ç¬¦ä¸²Hash">å­—ç¬¦ä¸²Hash</a>ï¼Œä»£ç é‡Œé¢å–ä½™(å¤§äºkï¼Œå–ä½™å˜å°)åï¼Œå†å»å‡(å°äºkï¼Œä¸å˜)å¯èƒ½å‡ºç°è´Ÿæ•°æƒ…å†µçš„å¤„ç†ï¼ˆè§ä»£ç æ³¨é‡Šï¼‰ã€‚è½¬æ¢ä¸ºæ•´æ•°ã€‚</p>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>è´¨æ•°</title>
    <url>/2023/01/02/%E8%B4%A8%E6%95%B0/</url>
    <content><![CDATA[<p>è´¨æ•°ç›¸å…³</p>
<span id="more"></span>
<p>å†™è¿™ä¸ªçš„åŸå› ï¼Œä¸»è¦æ˜¯<a href="https://leetcode.cn/contest/weekly-contest-326/">ç¬¬ 326 åœºå‘¨èµ› - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>ï¼Œå¤šé“é¢˜ç›®è€ƒåˆ°äº†è´¨æ•°ï¼Œä¹Ÿæ˜¯æœ¬äººç¬¬ä¸€åœºAKçš„å‘¨èµ›ã€‚LCç»™å¤§å®¶2023å¹´çš„ç¬¬ä¸€åœºç¦åˆ©å‘¨èµ›ã€‚</p>
<h2 id="1-gcd-æœ€å¤§å…¬å› æ•°">1. gcdï¼ˆæœ€å¤§å…¬å› æ•°ï¼‰</h2>
<p>æ±‚è§£ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬å› æ•°ï¼Œä¾‹å¦‚24ã€30çš„æœ€å¤§å…¬å› æ•°æ˜¯6.</p>
<h3 id="1-è¾—è½¬ç›¸é™¤æ³•">1 è¾—è½¬ç›¸é™¤æ³•</h3>
<p>è¾—è½¬ç›¸é™¤æ³•çš„å…¬å¼ä¸ºï¼šgcd(a,b) = gcd(b, a mod b)ã€‚å…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼šå‡å¦‚éœ€è¦æ±‚ 1997 å’Œ 615 ä¸¤ä¸ªæ­£æ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°,ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼Œæ˜¯è¿™æ ·è¿›è¡Œçš„ï¼š</p>
<div class="panel panel-info">
    <div class="panel-title">è¾—è½¬ç›¸é™¤æ³•æ­¥éª¤</div>
    <div class="panel-body">
        <ul>
<li>1997 Ã· 615 = 3 (ä½™ 152)</li>
<li>615 Ã· 152 = 4(ä½™7)</li>
<li>152 Ã· 7 = 21(ä½™5)</li>
<li>7 Ã· 5 = 1 (ä½™2)</li>
<li>5 Ã· 2 = 2 (ä½™1)</li>
<li>2 Ã· 1 = 2 (ä½™0)</li>
<li>1 Ã· 0 = ï¼Ÿ</li>
<li>ç›´åˆ°b = 0ï¼Œè‡³æ­¤ï¼Œæœ€å¤§å…¬çº¦æ•°ä¸ºa = 1</li>
</ul>

    </div>
    </div>
<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šå¯¹äºgcd(a, b)ï¼Œå‡è®¾b &lt;= aï¼Œåˆ™gcdçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logb)ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¾ªç¯ç‰ˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="comment">// å½“bä¸ç­‰äº0ï¼Œå³ä½™æ•°ä¸ç­‰äº0</span></span><br><span class="line">    <span class="keyword">while</span> (b != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// è·å¾—ä½™æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rem</span> <span class="operator">=</span> a % b;</span><br><span class="line">        <span class="comment">// æ¥ä¸‹æ¥è®¡ç®—gcd(b, a mod b)</span></span><br><span class="line">        a = b;</span><br><span class="line">        b = rem;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// bç­‰äº0äº†ï¼Œ</span></span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’ç‰ˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGcd2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> getGcd2(b, a % b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-ä½¿ç”¨javaçš„api">2 ä½¿ç”¨javaçš„API</h3>
<p>javaçš„bigIntegeræœ‰æ±‚è§£gcdçš„çš„APIï¼Œä½†æ˜¯å¿…é¡»æŠŠæ•°å­—è½¬ä¸ºbigIntegerã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getGcd3</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="type">BigInteger</span> <span class="variable">bigA</span> <span class="operator">=</span> BigInteger.valueOf(a);</span><br><span class="line">    <span class="type">BigInteger</span> <span class="variable">bigB</span> <span class="operator">=</span> BigInteger.valueOf(b);</span><br><span class="line">    <span class="type">BigInteger</span> <span class="variable">ans</span> <span class="operator">=</span> bigA.gcd(bigB);</span><br><span class="line">    <span class="keyword">return</span> ans.intValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-åˆ¤æ–­ä¸€ä¸ªæ•°è´¨æ•°">2. åˆ¤æ–­ä¸€ä¸ªæ•°è´¨æ•°</h2>
<p>ä½¿ç”¨è¯•é™¤æ³•ï¼Œå¦‚æœèƒ½å¤Ÿæ•´é™¤ä»¥ä¸€ä¸ªæ•°ï¼Œåˆ™è¯´æ˜ä¸æ˜¯è´¨æ•°ã€‚ä¼˜åŒ–ç‚¹ï¼Œæ˜¯æˆ‘ä»¬åªç”¨è¯•é™¤åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>N</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.11333499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9266650000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-2.886665em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.11333499999999996em;"><span></span></span></span></span></span></span></span></span>å³å¯ï¼Œå› ä¸ºå¦‚æœæ˜¯åˆæ•°ï¼ˆéè´¨æ•°ï¼‰ï¼Œåˆ™N = a * bï¼Œï¼ˆå‡è®¾b &lt;= aï¼‰ï¼Œåˆ™æœ‰b &lt;= <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>N</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.11333499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9266650000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-2.886665em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.11333499999999996em;"><span></span></span></span></span></span></span></span></span>æˆç«‹ã€‚è¯´æ˜æˆ‘ä»¬è¯•é™¤åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>N</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.11333499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9266650000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-2.886665em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.11333499999999996em;"><span></span></span></span></span></span></span></span></span>ï¼Œå°±ç›¸å½“äºå°è¯•äº†æ‰€æœ‰å¯èƒ½çš„å¯ä»¥æ•´é™¤çš„æ•°ã€‚</p>
<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>N</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt{N})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.176665em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9266650000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-2.886665em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.11333499999999996em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> a)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i * i &lt;= a; i++) &#123;</span><br><span class="line">        <span class="comment">// èƒ½å¤Ÿæ•´é™¤iï¼Œè¯´æ˜æ˜¯åˆæ•°ï¼Œä¸æ˜¯è´¨æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (a % i == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-åˆ†è§£è´¨å› æ•°">3.åˆ†è§£è´¨å› æ•°</h2>
<p>åˆ†è§£ä¸€ä¸ªæ•°çš„æ‰€æœ‰è´¨å› æ•°ã€‚é‡‡ç”¨è¯•é™¤æ³•ï¼Œä»æœ€å°çš„2å¼€å§‹ã€‚è·å–æ‰€æœ‰æœ€å°èƒ½å¤Ÿæ•´é™¤ä»¥çš„æ•°ã€‚ç„¶åä¸€ç›´é™¤ä¸‹å»ã€‚</p>
<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<s>O(N)ï¼Œåœ¨Næ˜¯è´¨æ•°çš„æƒ…å†µä¸‹ï¼Œè¾¾åˆ°æœ€åçš„æƒ…å†µã€‚</s></p>
<p>æ›´æ–°ï¼šO(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>N</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.11333499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9266650000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-2.886665em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.11333499999999996em;"><span></span></span></span></span></span></span></span></span>)ï¼ŒåŒåˆ¤æ–­ä¸€ä¸ªè´¨æ•°ï¼Œå³ä½¿åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿåªéœ€è¦è¯•åˆ†è§£åˆ°O(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>N</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.11333499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9266650000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-2.886665em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.11333499999999996em;"><span></span></span></span></span></span></span></span></span>)ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">getAllPrime</span><span class="params">(<span class="type">int</span> a)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; ansList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span> (b * b &lt;= a) &#123;</span><br><span class="line">        <span class="comment">// aèƒ½å¤Ÿæ•´é™¤ä»¥b</span></span><br><span class="line">        <span class="keyword">if</span> (a % b == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// åˆ™åˆ†è§£a</span></span><br><span class="line">            ansList.add(b);</span><br><span class="line">            <span class="comment">// åˆ†è§£åï¼Œa = a / b;</span></span><br><span class="line">            a = a / b;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸èƒ½å¤Ÿæ•´é™¤ä»¥ï¼Œåˆ™b+1</span></span><br><span class="line">            b++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ansList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-è·å–1åˆ°nçš„æ‰€æœ‰è´¨æ•°">4.è·å–1åˆ°nçš„æ‰€æœ‰è´¨æ•°</h2>
<h3 id="4-1-æš´åŠ›">4.1 æš´åŠ›</h3>
<p>é‡‡ç”¨åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯è´¨æ•°çš„æ–¹æ³•ï¼Œä»2åˆ¤æ–­åˆ°nï¼Œæš´åŠ›çš„ç­›é€‰å‡ºæ‰€æœ‰è´¨æ•°ã€‚<br>
<strong>æ—¶é—´å¤æ‚è¯»</strong>ï¼šä¸æ¸…æ¥š^_^ï¼Œå¤§æ¦‚èŒƒå›´æ˜¯O(N) &lt; t &lt; O(N^2)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">getPrimes1</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; ansList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨åˆ¤æ–­æ˜¯å¦æ˜¯è´¨æ•°çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">if</span> (isPrime(i)) &#123;</span><br><span class="line">            ansList.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ansList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-åŸƒå¼ç­›">4.2 åŸƒå¼ç­›</h3>
<p>åŸƒå¼ç­›çš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œä¸”å¤æ‚åº¦ä¹Ÿåªå¤šäº†loglogNï¼Œåœ¨ä¸ç‰¹åˆ«ä¸¥è‹›çš„æƒ…å†µä¸‹ä½¿ç”¨åŸƒå¼ç­›å³å¯ã€‚</p>
<p>åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•ï¼Œç®€ç§°<a href="https://baike.baidu.com/item/%E5%9F%83%E6%8B%89%E6%89%98%E6%96%AF%E7%89%B9%E5%B0%BC%E7%AD%9B%E6%B3%95">åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•_ç™¾åº¦ç™¾ç§‘</a>ï¼Œè¦å¾—åˆ°è‡ªç„¶æ•°nä»¥å†…çš„å…¨éƒ¨ç´ æ•°ï¼Œå¿…é¡»æŠŠä¸å¤§äºæ ¹å·nçš„æ‰€æœ‰ç´ æ•°çš„å€æ•°å‰”é™¤ï¼Œå‰©ä¸‹çš„å°±æ˜¯ç´ æ•°ã€‚</p>
<p>ç»™å‡ºè¦ç­›æ•°å€¼çš„èŒƒå›´nï¼Œæ‰¾å‡ºä»¥å†…çš„ç´ æ•°ã€‚å…ˆç”¨2å»ç­›ï¼Œå³æŠŠ2ç•™ä¸‹ï¼ŒæŠŠ2çš„å€æ•°å‰”é™¤æ‰ï¼›å†ç”¨ä¸‹ä¸€ä¸ªè´¨æ•°ï¼Œä¹Ÿå°±æ˜¯3ç­›ï¼ŒæŠŠ3ç•™ä¸‹ï¼ŒæŠŠ3çš„å€æ•°å‰”é™¤æ‰ï¼›æ¥ä¸‹å»ç”¨ä¸‹ä¸€ä¸ªè´¨æ•°5ç­›ï¼ŒæŠŠ5ç•™ä¸‹ï¼ŒæŠŠ5çš„å€æ•°å‰”é™¤æ‰ï¼›ä¸æ–­é‡å¤ä¸‹å»â€¦ã€‚</p>
<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nloglogN)</p>
<div class="panel panel-info">
    <div class="panel-title">åŸƒå¼ç­›æ­¥éª¤</div>
    <div class="panel-body">
        <ul>
<li>åˆ—å‡º2ä»¥åçš„æ‰€æœ‰åºåˆ—ï¼š<br>
2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</li>
<li>æ ‡å‡ºåºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªç´ æ•°ï¼Œä¹Ÿå°±æ˜¯2ï¼Œåºåˆ—å˜æˆï¼š<br>
2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</li>
<li>å°†å‰©ä¸‹åºåˆ—ä¸­ï¼Œåˆ’æ‰2çš„å€æ•°ï¼Œåºåˆ—å˜æˆï¼š<br>
2 3 5 7 9 11 13 15 17 19 21 23 25</li>
<li>å‰©ä¸‹çš„åºåˆ—ä¸­ç¬¬ä¸€ä¸ªç´ æ•°æ˜¯3ï¼Œå°†ä¸»åºåˆ—ä¸­3çš„å€æ•°åˆ’æ‰ï¼Œä¸»åºåˆ—å˜æˆï¼š<br>
2 3 5 7 11 13 17 19 23 25</li>
<li>æˆ‘ä»¬å¾—åˆ°çš„ç´ æ•°æœ‰ï¼š2ï¼Œ3</li>
<li>ç›´åˆ°æ ‡å‡ºæ‰€æœ‰ç´ æ•°<br>
2 3 5 7 11 13 17 19 23</li>
</ul>
<p><strong>ç‰¹åˆ«æ³¨æ„ï¼šç­›æ³•çš„æ–¹æ³•å»ºè®®å†™æˆé™æ€çš„ï¼Œç„¶åé™æ€è°ƒç”¨ã€‚å¦åˆ™å¤šæ¬¡åˆå§‹åŒ–ä¼šè¢«LCå¡æ‰ã€‚<br>
å¦å¤–å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éœ€è¦çš„æœ€ç»ˆç»“æœé›†æ˜¯ä¸€ä¸ªSETã€‚æ­¤ç­›æ³•çš„ansListï¼Œä¸å‚ä¸å–å€¼è¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥æ”¹æˆsetã€‚</strong></p>

    </div>
    </div>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®æˆé™æ€ï¼Œé¿å…å¤šæ¬¡è°ƒç”¨TLE</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Set&lt;Integer&gt; primeSet = eulerFlagPrime((<span class="type">int</span>) <span class="number">4e6</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">eratosFlagPrime</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; ansList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// ç­›é€‰2åˆ°100çš„æ‰€æœ‰è´¨æ•°</span></span><br><span class="line">    <span class="comment">// æ ‡è®°æ˜¯å¦å¼è´¨æ•°ï¼Œä¸‹æ ‡iä»£è¡¨æ•°iï¼Œæœ€å¤§ä¸‹æ ‡ä¸º100</span></span><br><span class="line">    Boolean[] primeArr = <span class="keyword">new</span> <span class="title class_">Boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// å¦‚æœä¸ºnullåˆ™ä»£è¡¨ä¸ºè´¨æ•°ï¼Œçœå»éå†ä¸€éæ”¹ä¸ºtrueçš„æ—¶é—´</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸ºnullåˆ™ä¸ºç´ æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (primeArr[i] == <span class="literal">null</span>) &#123;</span><br><span class="line">            ansList.add(i);</span><br><span class="line">            <span class="comment">// j åˆå§‹åŒ–ä¸º 2*i,æ¯æ¬¡éå†åŠ ä¸€ä¸ªiï¼Œç›¸å½“äºä»2*i åˆ° k*iï¼Œä»è€Œåˆ’æ‰æ‰€æœ‰içš„å€æ•°</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">2</span> * i; j &lt;= n; j += i) &#123;</span><br><span class="line">                primeArr[j] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ansList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-æ¬§æ‹‰ç­›-çº¿æ€§ç­›">4.3 æ¬§æ‹‰ç­›ï¼ˆçº¿æ€§ç­›ï¼‰</h3>
<p>æ¬§æ‹‰ç­›æ˜¯å¯¹åŸƒæ°ç­›çš„æ”¹è¿›ï¼Œé¿å…é‡ç­›ï¼Œæé«˜æ•ˆç‡ã€‚ä½†ä»£ç ä¼šæ›´åŠ å¤æ‚ï¼Œåªåšä»‹ç»ã€‚</p>
<p>æ¬§æ‹‰ç­›çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ç¡®ä¿æ¯ä¸ªåˆæ•°åªè¢«æœ€å°è´¨å› æ•°ç­›æ‰ã€‚æˆ–è€…è¯´æ˜¯è¢«åˆæ•°çš„æœ€å¤§å› å­ç­›æ‰ã€‚</p>
<div class="panel panel-info">
    <div class="panel-title">æ¬§æ‹‰ç­›æ­¥éª¤</div>
    <div class="panel-body">
        <p>æ¯”å¦‚è¯´ 1 ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9ï¼Œ10ï¼Œ11ï¼Œ 12<br>
å½“ i=4æ—¶ï¼š primes = {2, 3}<br>
æ­¤æ—¶i%2=0, å¦‚æœä¸ç»“æŸå†…å±‚å¾ªç¯çš„è¯,12ä¼šè¢«3âˆ—4ç­›æ‰ï¼Œ å½“i=6æ—¶ï¼Œ12åˆä¼šè¢«2âˆ—6ç­›æ‰ã€‚</p>
<p><strong>ç‰¹åˆ«æ³¨æ„ï¼šå»ºè®®é™æ€ã€‚åŒæ—¶ansListä¸èƒ½æ”¹æˆSETï¼Œåœ¨éå†ansListéœ€è¦å…¶æœ‰åºï¼Œsetä¼šç ´åè¿™ä¸ªæœ‰åºã€‚æœ€ånew HashSet&lt;&gt;(ansList)å³å¯ã€‚</strong></p>

    </div>
    </div>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">eulerFlagPrime</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; ansList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Boolean[] primeArr = <span class="keyword">new</span> <span class="title class_">Boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="comment">// å½“å‰æ•°å¼ç´ æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (primeArr[i] == <span class="literal">null</span>) &#123;</span><br><span class="line">            ansList.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Integer prime : ansList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i * prime &gt; n) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ ‡è®°ä¸ä¸ºè´¨æ•°</span></span><br><span class="line">            primeArr[i * prime] = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (i % prime == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//é¿å…é‡ç­›,ä½¿å¾—ç¨‹åºæ›´æœ‰æ•ˆç‡</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ansList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-lcm-æœ€å°å…¬å€æ•°">5.LCMï¼ˆæœ€å°å…¬å€æ•°ï¼‰</h2>
<h3 id="å…¬å¼ï¼šæœ€å°å…¬å€æ•°-a-b-gcd-a-b">å…¬å¼ï¼šæœ€å°å…¬å€æ•°= (a * b) / gcd(a, b )</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lcm</span><span class="params">(a, b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (a * b) / getGcd(a, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²Hash</title>
    <url>/2022/11/27/%E5%AD%97%E7%AC%A6%E4%B8%B2Hash/</url>
    <content><![CDATA[<p>å­—ç¬¦ä¸²çš„åŒ¹é…ç®—æ³•ä¹‹ä¸€ï¼Œå­—ç¬¦ä¸²åŒ¹é…ä¸ªäººè§‰å¾—æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å•ç‹¬å†™ä¸€ç¯‡</p>
<span id="more"></span>
<p>å­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•ä¸­ï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„ç®—æ³•æ˜¯KMPï¼Œä½†æ˜¯KMPçš„ç†è§£ä¸è®°å¿†è¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚<br>
è€Œå­—ç¬¦ä¸²Hashç®—æ³•åˆ™æ˜¯ä¸€ç§æ¯”è¾ƒå®¹æ˜“ç®€å•çš„ç®—æ³•ã€‚ä½†æ˜¯å­—ç¬¦ä¸²Hashç®—æ³•ä»ç„¶æœ‰å…¶ç¼ºé™·ï¼Œå°±æ˜¯Hashå†²çªçš„å­˜åœ¨ï¼Œæ— è®ºæ€ä¹ˆå¤„ç†ï¼Œå†²çªçš„æ¦‚ç‡åªä¼šé™ä½ï¼Œä¸ä¼šå®Œå…¨æ¶ˆå¤±ã€‚ä½†å¥½åœ¨ï¼Œä¸€èˆ¬çš„é¢˜ç›®é™ä½åˆ°è¾ƒä½çš„å†²çªæ¦‚ç‡å³å¯ACã€‚</p>
<h2 id="1-å­—ç¬¦ä¸²hashåŸç†">1.å­—ç¬¦ä¸²HashåŸç†</h2>
<p>æˆ‘ä»¬è¦åœ¨ä¸€ä¸ªä¸»ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªæ¨¡å¼ä¸²ï¼Œåˆ™æ¨¡å¼ä¸²çš„é•¿åº¦æ˜¯å·²çŸ¥çš„ä¸ºnã€‚å­—ç¬¦ä¸²Hashçš„æœ¬è´¨åŸç†æ˜¯æšä¸¾æ‰€æœ‰é•¿åº¦ä¸ºnçš„å­ä¸²çš„Hashå€¼ã€‚æ‰€ä»¥å¦‚ä½•èƒ½å¤Ÿå¿«é€Ÿçš„æ±‚å‡ºä»¥leftä¸ºèµ·ç‚¹ï¼Œrightä¸ºç»“æŸç‚¹ï¼Œé•¿åº¦ä¸ºnçš„å­—ç¬¦ä¸²çš„Hashå€¼ã€‚æ˜¯æœ€ä¸ºå…³é”®çš„ã€‚<br>
å­—ç¬¦ä¸²Hashä½¿ç”¨è¿›åˆ¶æ€æƒ³æ±‚å‡ºHashå€¼ï¼Œä½¿ç”¨å‰ç¼€å’Œä»¥O(1)çš„æ—¶é—´æ±‚å‡ºleftåˆ°rightçš„Hashå€¼ã€‚</p>
<p>å¯¹äºå­—ç¬¦ä¸²<code>abc</code>ï¼Œè®¡ç®—Hashå€¼æ—¶ï¼Œæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªpè¿›åˆ¶æ•°ï¼Œå…¶Hashå€¼è®¡ç®—å¦‚ä¸‹(æœªå–æ¨¡)ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>a</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>0</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>a</mi><mi>b</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>a</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>1</mn></msup><mo>+</mo><mi>b</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>0</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>a</mi><mi>b</mi><mi>c</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>a</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>2</mn></msup><mo>+</mo><mi>b</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>1</mn></msup><mo>+</mo><mi>c</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>0</mn></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
a &amp;= açš„ASCIIç å€¼ * p^0\\
ab &amp;= açš„ASCIIç å€¼ * p^1 + bçš„ASCIIç å€¼ * p^0\\
abc &amp;= açš„ASCIIç å€¼ * p^2 + bçš„ASCIIç å€¼ * p^1 + cçš„ASCIIç å€¼ * p^0\\
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.572324em;vertical-align:-2.036162em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.536162em;"><span style="top:-4.672054em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3.147946em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span></span></span><span style="top:-1.6238380000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.036162em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.536162em;"><span style="top:-4.672054em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">a</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span><span style="top:-3.147946em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">a</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span><span style="top:-1.6238380000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">a</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.036162em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>åˆ™å­—ç¬¦ä¸²<code>bc</code>çš„Hashå¿«é€Ÿå–å€¼å¦‚ä¸‹ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right" columnspacing><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>b</mi><mi>c</mi><mo>=</mo><mi>b</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>1</mn></msup><mo>+</mo><mi>c</mi><mtext>çš„</mtext><mi>A</mi><mi>S</mi><mi>C</mi><mi>I</mi><mi>I</mi><mtext>ç å€¼</mtext><mo>âˆ—</mo><msup><mi>p</mi><mn>0</mn></msup><mo>=</mo><mi>a</mi><mi>b</mi><mi>c</mi><mo>âˆ’</mo><mi>a</mi><mo>âˆ—</mo><msup><mi>p</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
bc =  bçš„ASCIIç å€¼ * p^1 + cçš„ASCIIç å€¼ * p^0 = abc - a * p^2
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.524108em;vertical-align:-0.512054em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.012054em;"><span style="top:-3.147946em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">b</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">å€¼</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.512054em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å…·ä½“çš„æˆ‘ä»¬å¯ä»¥æœ‰ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy="false">[</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mtext>åˆ°</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false">]</mo><mo>=</mo><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy="false">[</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false">]</mo><mo>âˆ’</mo><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy="false">[</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo><mo>âˆ—</mo><mi>p</mi><mi>A</mi><mi>r</mi><mi>r</mi><mo stretchy="false">[</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>âˆ’</mo><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Hash[leftåˆ°right] = Hash[right] - Hash[left - 1] * pArr[right - left + 1]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord cjk_fallback">åˆ°</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">h</span><span class="mord mathdefault">t</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">h</span><span class="mord mathdefault">t</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">h</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span></p>
<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥å¼€è¾Ÿä¸¤ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªå­˜å‚¨åˆ°ä¸‹æ ‡1åˆ°ä¸‹æ ‡içš„Hashå€¼ï¼Œä¸€ä¸ªæ˜¯ä¸‹æ ‡içš„è¿›åˆ¶å€¼å¹‚æ¬¡ç»“æœã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„å­—ç¬¦ä¸²çš„ä¸‹æ ‡ä»1å¼€å§‹ï¼Œæˆ‘ä»¬çš„ä¸¤ä¸ªæ•°ç»„æ„ä¹‰ä¸Šä¹Ÿä»1å¼€å§‹</span></span><br><span class="line">p[<span class="number">0</span>] = <span class="number">1</span>; <span class="comment">// å­˜å‚¨è¿›åˆ¶çš„å¹‚æ¬¡ç»“æœï¼Œp[0]ä¸ä»£è¡¨å­—ç¬¦ï¼Œç”±äºæ˜¯å¹‚æ¬¡ï¼Œp^0 = 1;</span></span><br><span class="line">h[<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">// å­˜å‚¨ä¸‹æ ‡1åˆ°içš„Hashå€¼ï¼Œæ‰€ä»¥0åªèƒ½åˆå§‹åŒ–0.</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ç¤ºä¾‹æˆ‘ä»¬ç»™131è¿›åˆ¶</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= s.length(); i++) &#123;</span><br><span class="line">    h[i] = h[i - <span class="number">1</span>] * <span class="number">131</span> + s.charAt(i - <span class="number">1</span>); <span class="comment">// å¯¹äºç¬¬iä¸ªå­—ç¬¦ï¼Œå…¶ä¸‹æ ‡æ˜¯i-1</span></span><br><span class="line">    p[i] = p[i - <span class="number">1</span>] * <span class="number">131</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¹äºä¸‹æ ‡left åˆ°right ä¹‹é—´çš„å­—ç¬¦Hash,left &lt;= right</span></span><br><span class="line">h[leftåˆ°right] = h[right] - hash[left - <span class="number">1</span>] * P[right - left + <span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<h2 id="2-åŒhashå–æ¨¡">2.åŒHashå–æ¨¡</h2>
<p>å•Hashå–æ¨¡ï¼Œå°±æ˜¯åªæ¨¡ä¸€æ¬¡ï¼Œæ¯”åŒæ¨¡å†²çªçš„æ¦‚ç‡é«˜ä¸€ç‚¹ã€‚èŠ‚çœç‰ˆé¢ï¼Œåªä»‹ç»åŒhashå–æ¨¡ã€‚</p>
<p>æ‰€è°“çš„åŒHashå–æ¨¡ï¼Œå³åªå–ä¸¤æ¬¡æ¨¡ã€‚è¿›åˆ¶è´¨æ•°ï¼š131ï¼Œ13331 ï¼› å–æ¨¡è´¨æ•°ï¼š 1e9 + 7ï¼Œ1e9 + 9ã€‚<br>
è¿™å‡ ä¸ªæ•°éƒ½æ˜¯ç»éªŒå€¼ã€‚ä¸¤ç§æ•°éƒ½å–è´¨æ•°ï¼Œèƒ½æ˜¾è‘—é™ä½å†²çªã€‚<br>
åŒæ—¶å–æ¨¡è´¨æ•°åº”è¯¥å°½å¯èƒ½çš„å¤§ã€‚åŒæ—¶æ•°ç»„è¦å¼€longæ•°ç»„ï¼Œé¿å…æº¢å‡ºå˜ä¸ºè´Ÿæ•°çš„æƒ…å†µã€‚è¿˜è¦ä½¿ç”¨åŒä½™å®šç†ï¼Œé¿å…æ±‚leftåˆ°rightå‡å‡ºè´Ÿæ•°çš„æƒ…å†µã€‚</p>
<p>æ¨¡æ¿é¢˜ï¼š<a href="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/">28. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">strStr</span><span class="params">(String haystack, String needle)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">mod1</span> <span class="operator">=</span> (<span class="type">int</span>) (<span class="number">1e9</span> + <span class="number">7</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">mod2</span> <span class="operator">=</span> (<span class="type">int</span>) (<span class="number">1e9</span> + <span class="number">9</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="number">131L</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="number">13331L</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> haystack.length();</span><br><span class="line">        <span class="comment">// longæ•°ç»„</span></span><br><span class="line">        <span class="type">long</span>[] hArr1 = <span class="keyword">new</span> <span class="title class_">long</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="type">long</span>[] hArr2 = <span class="keyword">new</span> <span class="title class_">long</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="type">long</span>[] pArr1 = <span class="keyword">new</span> <span class="title class_">long</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="type">long</span>[] pArr2 = <span class="keyword">new</span> <span class="title class_">long</span>[n + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        hArr1[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        hArr2[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        pArr1[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        pArr2[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªå­—ç¬¦è®°ä¸º1ï¼Œæ‰€ä»¥åˆ°ç­‰äºnç»“æŸ</span></span><br><span class="line">        <span class="comment">// å¤„ç†Hashä¸è¿›åˆ¶çš„å¹‚æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="comment">// ä¸‹æ ‡ä¸ºiæ—¶ï¼Œæ‰¾çš„æ˜¯i-1ä¸ªå­—ç¬¦</span></span><br><span class="line">            hArr1[i] = ((hArr1[i - <span class="number">1</span>] * p1) % mod1 + haystack.charAt(i - <span class="number">1</span>)) % mod1;</span><br><span class="line">            hArr2[i] = ((hArr2[i - <span class="number">1</span>] * p2) % mod2 + haystack.charAt(i - <span class="number">1</span>)) % mod2;</span><br><span class="line"></span><br><span class="line">            pArr1[i] = (pArr1[i - <span class="number">1</span>] * p1) % mod1;</span><br><span class="line">            pArr2[i] = (pArr2[i - <span class="number">1</span>] * p2) % mod2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> needle.length();</span><br><span class="line">        <span class="type">long</span> <span class="variable">ansHash1</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ansHash2</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">        <span class="comment">// è®¡ç®—è¦åŒ¹é…å­—ç¬¦ä¸²çš„Hashå€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= k; i++) &#123;</span><br><span class="line">            ansHash1 = ((ansHash1 * p1) % mod1 + needle.charAt(i - <span class="number">1</span>)) % mod1;</span><br><span class="line">            ansHash2 = ((ansHash2 * p2) % mod2 + needle.charAt(i - <span class="number">1</span>)) % mod2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®å‰ç¼€Hashæšä¸¾æ‰€æœ‰Hashï¼Œiä»1å¼€å§‹ã€‚åŸå› è§ä¸Šé¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n - k + <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> i + k - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">long</span> <span class="variable">tempHash1</span> <span class="operator">=</span> hArr1[right] - hArr1[left - <span class="number">1</span>] * pArr1[right - left + <span class="number">1</span>];</span><br><span class="line">            <span class="comment">// (-x % mod + mod) % mod åŒä½™å®šç†ï¼Œé¿å…å‡å‡ºè´Ÿæ•°çš„æƒ…å†µ,ã€‚å¦‚æœæ˜¯æ­£æ•°ï¼Œä¸è¯¥å…¬å¼ç»“æœç›¸åŒ</span></span><br><span class="line">            tempHash1 = (tempHash1 % mod1 + mod1) % mod1;</span><br><span class="line"></span><br><span class="line">            <span class="type">long</span> <span class="variable">tempHash2</span> <span class="operator">=</span> hArr2[right] - hArr2[left - <span class="number">1</span>] * pArr2[right - left + <span class="number">1</span>];</span><br><span class="line">            tempHash2 = (tempHash2 % mod2 + mod2) % mod2;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (tempHash1 == ansHash1 &amp;&amp; tempHash2 == ansHash2) &#123;</span><br><span class="line">                <span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>LCå‘¨èµ›è®°å½•</title>
    <url>/2022/11/20/LC%E5%91%A8%E8%B5%9B%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>è®°å½•LCå‘¨èµ›é—®é¢˜</p>
<span id="more"></span>
<h2 id="ç¬¬-320-åœºå‘¨èµ›-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/contest/weekly-contest-320">ç¬¬ 320 åœºå‘¨èµ› - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 id="6242-äºŒå‰æœç´¢æ ‘æœ€è¿‘èŠ‚ç‚¹æŸ¥è¯¢-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/problems/closest-nodes-queries-in-a-binary-search-tree/">6242. äºŒå‰æœç´¢æ ‘æœ€è¿‘èŠ‚ç‚¹æŸ¥è¯¢ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h3>
<p>é—®é¢˜ï¼šTLE<br>
äºŒå‰æœç´¢æ ‘ä¸ä¸€å®šå¹³è¡¡ï¼šé¢˜ç›®ç»™å‡ºäº†äºŒå‰æœç´¢æ ‘ï¼Œä½†æ™®é€šçš„äºŒå‰æœç´¢æ ‘ä¸ä¸€å®šæ˜¯å¹³è¡¡çš„ï¼Œå½“ç”¨ä¾‹çš„äºŒå‰æœç´¢æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œæ—¶é—´ä¼šè¾¾åˆ°çº¿æ€§çš„æ—¶é—´å¤æ‚åº¦ï¼Œä»è€Œè¢«å¡æ‰ã€‚</p>
<h2 id="ç¬¬-327-åœºå‘¨èµ›-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/contest/weekly-contest-327/">ç¬¬ 327 åœºå‘¨èµ› - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 id="6284-ä½¿å­—ç¬¦ä¸²æ€»ä¸åŒå­—ç¬¦çš„æ•°ç›®ç›¸ç­‰-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/problems/make-number-of-distinct-characters-equal/">6284. ä½¿å­—ç¬¦ä¸²æ€»ä¸åŒå­—ç¬¦çš„æ•°ç›®ç›¸ç­‰ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h3>
<p>é—®é¢˜ï¼šè¯»é¢˜ä¸ä»”ç»†ã€ç®€å•çš„æš´åŠ›æƒ³å¤æ‚<br>
é¢˜ç›®æ˜¯è¦æ±‚èƒ½å¦ä¸¤ä¸ªå•è¯ä¸­ä¸åŒçš„å­—ç¬¦æ•°ç›®æ˜¯å¦èƒ½å¤Ÿç›¸ç­‰ï¼Œ<strong>æ˜¯å­—ç¬¦å»é‡åçš„ä¸ªæ•°æ˜¯å¦ç›¸ç­‰</strong>ã€‚ä¸”é¢˜ç›®è¯´æ˜äº†<strong>æ°å¥½ç§»åŠ¨ä¸€æ¬¡</strong>ï¼Œæ²¡æœ‰æ³¨æ„åˆ°è¯¥æ¡ä»¶ï¼Œä»¥ä¸ºå¯ä»¥ç§»åŠ¨å¤šæ¬¡ã€‚<br>
å¦‚æœåªç§»åŠ¨ä¸€æ¬¡ï¼Œåˆ™åº”è¯¥æš´åŠ›æ±‚è§£ï¼Œå°è¯•æ¯ä¸€ç§äº¤æ¢çš„å¯èƒ½ï¼Œæœ€å¤šå°è¯•26*26æ¬¡ï¼ˆå­—æ¯åªæœ‰26ä¸ªï¼Œä¸”åªäº¤æ¢ä¸€æ¬¡ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¯ä»¥æ»¡è¶³çš„ã€‚ï¼ˆO(N) = max(26 * 26, max(len(word1), len(word2))ï¼‰ã€‚</p>
<h2 id="ç¬¬-340-åœºå‘¨èµ›-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/contest/weekly-contest-340/">ç¬¬ 340 åœºå‘¨èµ› - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 id="2614-å¯¹è§’çº¿ä¸Šçš„è´¨æ•°-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/problems/prime-in-diagonal/">2614. å¯¹è§’çº¿ä¸Šçš„è´¨æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h3>
<p>ä½¿ç”¨äº†åŸƒæ°ç­›ï¼Œç­›é€‰åªéœ€è¦ä¸€æ¬¡å³å¯ï¼Œä½†æ˜¯ç­›é€‰å†™åœ¨äº†æ™®é€šæ–¹æ³•é‡Œé¢ï¼Œå¯¼è‡´æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šè·‘ä¸€éåŸƒæ°ç­›ï¼Œæœ€ç»ˆå¯¼è‡´äº†è¶…æ—¶ã€‚æ”¹æˆé™æ€åé€šè¿‡ã€‚</p>
<h2 id="ç¬¬-342-åœºå‘¨èµ›-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/contest/weekly-contest-342/">ç¬¬ 342 åœºå‘¨èµ› - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 id="2653-æ»‘åŠ¨å­æ•°ç»„çš„ç¾ä¸½å€¼-åŠ›æ‰£-leetcode"><a href="https://leetcode.cn/problems/sliding-subarray-beauty/">2653. æ»‘åŠ¨å­æ•°ç»„çš„ç¾ä¸½å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h3>
<p>è™½ç„¶nums.length=1e5ï¼Œä½†æ˜¯nums[i]çš„å€¼åŸŸåªæœ‰-50åˆ°50ï¼Œä½¿ç”¨æ¡¶æ’åºï¼ˆåŸºæ•°æ’åºï¼‰å³å¯æ»¡è¶³ï¼Œå¿«æ’ä¼šå¯¼è‡´æ—¶é—´å¤æ‚åº¦è¶…æ—¶ã€‚</p>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»å…¸ç®—æ³•</title>
    <url>/2022/09/05/%E7%BB%8F%E5%85%B8%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>ä¸€äº›æœ€ç»å…¸ï¼ˆåŸºç¡€ï¼‰çš„ç®—æ³•</p>
<span id="more"></span>
<h2 id="1-æ’åº">1. æ’åº</h2>
<h3 id="1-å¿«é€Ÿæ’åº">1.å¿«é€Ÿæ’åº</h3>
<p>åªæŒæ¡å¿«é€Ÿæ’åºçš„é€’å½’å†™æ³•å³å¯</p>
<p>æ™®é€šå¿«é€Ÿæ’åºï¼Œåœ¨æ•°ç»„<font color="red">é€†åºä¸”æœ‰åº</font>çš„æƒ…å†µï¼Œä¼šè¾¾åˆ°æœ€åçš„æƒ…å†µï¼Œä»è€Œè¢«ç”¨ä¾‹å¡æ‰ã€‚</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>æ™®é€šå¿«é€Ÿæ’åº</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    quickSort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (left &gt; right) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left;</span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> right;</span><br><span class="line">    <span class="type">int</span> <span class="variable">base</span> <span class="operator">=</span> nums[left];</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[j] &gt;= base) &#123;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[i] &lt;= base) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> nums[i];</span><br><span class="line">            nums[i] = nums[j];</span><br><span class="line">            nums[j] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nums[left] = nums[i];</span><br><span class="line">    nums[i] = base;</span><br><span class="line"></span><br><span class="line">    quickSort(nums, left, i - <span class="number">1</span>);</span><br><span class="line">    quickSort(nums, i + <span class="number">1</span>, right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<p>ä¸‰æ•°å–ä¸­å¿«é€Ÿæ’åºï¼šå°†arr[left]ã€arr[mid]ã€arr[right]æ’åºï¼Œå–arr[eft]ã€arr[mid]ã€arr[right]çš„ä¸­ä½æ•°ï¼Œç”¨ä¸­ä½æ•°ä½œä¸ºåŸºå‡†ï¼Œè¿™æ ·å°±èƒ½é¿å…æœ€åçš„æƒ…å†µã€‚</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>ä¸‰æ•°å–ä¸­å¿«é€Ÿæ’åº</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¿«é€Ÿæ’åº ä¸‰æ•°å–ä¸­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">midValueQuickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¸‰æ•°å–ä¸­</span></span><br><span class="line">    dealPivot(arr, left, right);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å› ä¸ºarr[left] å·²ç»å°äºåŸºå‡†ï¼Œarr[right] å·²ç»å¤§äºåŸºå‡†ï¼Œæ‰€ä»¥è¿™é‡Œåªéœ€è¦ç»§ç»­æ¯”è¾ƒäº¤æ¢left + 1 åˆ° right - 1å³å¯</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> right - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">base</span> <span class="operator">=</span> arr[i];</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[j] &gt;= base) &#123;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[i] &lt;= base) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">            swap(arr, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤æ¢åŸºå‡†ï¼Œarr[left + 1] = base</span></span><br><span class="line">    swap(arr, i, left + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    midValueQuickSort(arr, left, i -<span class="number">1</span>);</span><br><span class="line">    midValueQuickSort(arr, i + <span class="number">1</span>, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…ˆå°†arr[left]ã€arr[mid]ã€arr[right]æ’åº</span></span><br><span class="line"><span class="comment"> * å› ä¸ºæˆ‘ä¹ æƒ¯å·¦åŸºå‡†æ’åºï¼Œæ‰€ä»¥å°†arr[mid]åŸºå‡†ä¸arr[left+1]äº¤æ¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dealPivot</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// ä¸‹é¢ä¸‰ä¸ªifæ’åºï¼šleftã€midã€right</span></span><br><span class="line">    <span class="keyword">if</span> (arr[left] &gt; arr[mid]) &#123;</span><br><span class="line">        swap(arr, left, mid);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (arr[left] &gt; arr[right]) &#123;</span><br><span class="line">        swap(arr, left, right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (arr[mid] &gt; arr[right]) &#123;</span><br><span class="line">        swap(arr, mid, right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†ä¸­å€¼ç§»åŠ¨åˆ° left + 1 çš„ä½ç½®ï¼Œæˆ‘æ¯æ¬¡åŸºå‡†å€¼é€‰æ‹©æ”¾å·¦è¾¹çš„ï¼Œï¼ˆå› ä¸ºarr[left] &lt;= arr[mid] &lt;= arr[right], æ‰€ä»¥left å’Œrightä¸å†å¤„ç†ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (mid - left &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// é¿å…åªæœ‰ä¸¤ä¸ªæ•°çš„æ—¶å€™ï¼Œç›´æ¥äº¤æ¢ï¼Œå¯¼è‡´å¤§å°äº¤æ¢é”™è¯¯ã€‚</span></span><br><span class="line">        <span class="comment">// ps: å¦‚æœé€‰å–å³åŸºå‡†å¿«æ’çš„è¯ï¼Œè¿™é‡Œå¯ä»¥ç®€åŒ–ï¼Œä¸éœ€è¦ifåˆ¤æ–­ï¼Œå› ä¸ºright - 1 = midï¼Œ äº¤æ¢mid å’Œ right - 1æ²¡æœ‰é—®é¢˜</span></span><br><span class="line">        swap(arr, left + <span class="number">1</span>, mid);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> left, <span class="type">int</span> mid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[left];</span><br><span class="line">    arr[left] = arr[mid];</span><br><span class="line">    arr[mid] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="2-å½’å¹¶æ’åº">2.å½’å¹¶æ’åº</h3>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>å½’å¹¶æ’åº</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">mergeSort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] tempArr = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    merge(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>, tempArr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span>[] tempArr)</span> &#123;</span><br><span class="line">    <span class="comment">// é€’å½’å‡ºå£</span></span><br><span class="line">    <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½’å¹¶</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    merge(nums, left, mid, tempArr);</span><br><span class="line">    merge(nums, mid + <span class="number">1</span>, right, tempArr);</span><br><span class="line">    <span class="comment">// æ’åº</span></span><br><span class="line">    sort(nums, left, mid, right, tempArr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> left, <span class="type">int</span> mid, <span class="type">int</span> right, <span class="type">int</span>[] tempArr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">lPos</span> <span class="operator">=</span> left;</span><br><span class="line">    <span class="type">int</span> <span class="variable">rPos</span> <span class="operator">=</span> mid + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨å½’å¹¶ä¹‹åï¼Œæ¯ä¸€ä¸ªå­æ•°ç»„éƒ½æ˜¯æœ‰åºçš„ï¼Œ</span></span><br><span class="line">    <span class="comment">// åŸå› ï¼šå½’å¹¶çš„å‡ºå£æ—¶ï¼Œæ¯ä¸ªå­æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªå°±æ˜¯æœ‰åºï¼Œåé¢çš„å¤šä¸ªï¼Œéƒ½æ˜¯ç”±æ­¤æœ€åŸºç¡€çš„æ’åºè€Œæ¥</span></span><br><span class="line">    <span class="comment">// å› æ­¤å¯ä»¥è®¤ä¸ºï¼Œå·¦åŠå­æ•°ç»„ï¼Œå³åŠå­æ•°ç»„ä¸€å®šæœ‰åº</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯å°†ï¼Œä¸¤ä¸ªæœ‰åºå­æ•°ç»„ä¸­æœ€å°çš„ä¾æ¬¡æ”¾å…¥tempArrä¸­</span></span><br><span class="line">    <span class="keyword">while</span> (lPos &lt;= mid &amp;&amp; rPos &lt;= right) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œä½¿ç”¨å°äºç­‰äºï¼Œåœ¨å·¦åŠåŒºç­‰äºå³åŠåŒºçš„æ—¶å€™ï¼Œèƒ½ä¿è¯å·¦åŠåŒºçš„åœ¨å‰é¢ï¼Œ</span></span><br><span class="line">        <span class="comment">// ä»è€Œä¿è¯è¯¥æ’åºçš„ç¨³å®šæ€§ï¼Œè§„å®šæ’åºæ˜¯ç¨³å®šæ’åº</span></span><br><span class="line">        <span class="keyword">if</span> (nums[lPos] &lt;= nums[rPos]) &#123;</span><br><span class="line">            tempArr[pos] = nums[lPos];</span><br><span class="line">            <span class="comment">// lPos+1 æ›´å®¹æ˜“æ‡‚å¾—å†™æ³•ï¼Œåé¢å…¨éƒ¨é‡‡ç”¨ç®€åŒ–çš„å†™æ³•</span></span><br><span class="line">            lPos++;</span><br><span class="line">            pos++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tempArr[pos++] = nums[rPos++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå·¦å­æ•°ç»„è¿˜æœ‰</span></span><br><span class="line">    <span class="keyword">while</span> (lPos &lt;= mid) &#123;</span><br><span class="line">        tempArr[pos++] = nums[lPos++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå³å­æ•°ç»„è¿˜æœ‰</span></span><br><span class="line">    <span class="keyword">while</span> (rPos &lt;= right) &#123;</span><br><span class="line">        tempArr[pos++] = nums[rPos++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†tempArræ‹·è´åˆ°numsæ•°ç»„ä¸­</span></span><br><span class="line">    pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        nums[left++] = tempArr[pos++];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="3-å †æ’åº">3.å †æ’åº</h3>
<ol>
<li>é€’å½’ç‰ˆæœ¬</li>
</ol>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>å †æ’åº</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapSort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="comment">// æ³¨æ„ï¼Œè¿™é‡Œçš„næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œä»£è¡¨æœ‰nä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ä¸ºiçš„èŠ‚ç‚¹ çˆ¶èŠ‚ç‚¹ï¼šï¼ˆi-1ï¼‰/2 ã€æ•´é™¤æ³•ã€‘ æ ¸å¿ƒç‚¹</span></span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ä¸ºiçš„èŠ‚ç‚¹ å·¦å­èŠ‚ç‚¹ï¼ši * 2 + 1</span></span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ä¸ºiçš„èŠ‚ç‚¹ å³å­èŠ‚ç‚¹ï¼ši * 2 + 2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œä» i = n / 2 - 1 å¼€å§‹çš„åŸå› ï¼š</span></span><br><span class="line">    <span class="comment">// å¯¹äºç¬¬iä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸‹æ ‡æ˜¯ i - 1ï¼Œæ‰€ä»¥èŠ‚ç‚¹içš„çˆ¶èŠ‚ç‚¹æ˜¯ (ï¼ˆi - 1ï¼‰- 1) / 2 = i / 2 - 1</span></span><br><span class="line">    <span class="comment">// å¦‚æœnè¡¨ç¤ºçš„æ˜¯ä¸‹æ ‡ï¼Œè¿™é‡Œå°±ä¸å‡å»1</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥i = n / 2 - 1 è¡¨ç¤ºè·ç¦»æ ¹èŠ‚ç‚¹æœ€è¿œçš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span> ; i--) &#123;</span><br><span class="line">        buildMaxHeap(nums, n, i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºå¥½å¤§é¡¶å †åï¼Œæ ¹èŠ‚ç‚¹ï¼Œå³ä¸‹æ ‡ä¸º0å¤„æ˜¯æœ€å¤§å€¼ï¼Œ</span></span><br><span class="line">    <span class="comment">// å°†æœ€å¤§å€¼ä¸æ•°ç»„å½“å‰å¯é€‰éƒ¨åˆ†çš„æœ€åçš„ä¸‹æ ‡äº¤æ¢ä½ç½®ï¼Œä»è€Œå°†å¤§å€¼æ”¾å…¥æœ€å</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">// äº¤æ¢</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        nums[<span class="number">0</span>] = nums[i];</span><br><span class="line">        nums[i] = temp;</span><br><span class="line">        <span class="comment">// äº¤æ¢åç»´æŠ¤å¤§é¡¶å †ï¼Œç»´æŠ¤å¤§é¡¶å †</span></span><br><span class="line">        <span class="comment">// i : éœ€è¦ç»´æŠ¤çš„å…ƒç´ æœ‰iä¸ªï¼Œç»´æŠ¤çš„å…ƒç´ æ˜¯æ ¹å…ƒç´ </span></span><br><span class="line">        buildMaxHeap(nums, i, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é”®å †ä¸ç»´æŠ¤å †</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums å †æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n å †æ•°ç»„ç»´æŠ¤çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idx è¦ç»´æŠ¤å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">buildMaxHeap</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> n, <span class="type">int</span> idx)</span> &#123;</span><br><span class="line">    <span class="comment">// å‡å®šæœ€å¤§çš„å…ƒç´ çš„ä¸‹æ ‡æ˜¯idx</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">largest</span> <span class="operator">=</span> idx;</span><br><span class="line">    <span class="comment">// å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">lson</span> <span class="operator">=</span> idx * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// å³å­èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">rson</span> <span class="operator">=</span> idx * <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰èŠ‚ç‚¹ä¸å…¶å·¦å³å­èŠ‚ç‚¹ä¸­çš„æœ€å¤§èŠ‚ç‚¹ï¼Œå¹¶å°†åæ ‡èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (lson &lt; n &amp;&amp; nums[largest] &lt; nums[lson]) &#123;</span><br><span class="line">        largest = lson;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rson &lt; n &amp;&amp; nums[largest] &lt; nums[rson]) &#123;</span><br><span class="line">        largest = rson;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœï¼Œå½“å‰èŠ‚ç‚¹idxä¸æ˜¯æœ€å¤§èŠ‚ç‚¹ï¼Œåˆ™éœ€è¦äº¤æ¢ä¸¤ä¸ªèŠ‚ç‚¹çš„å…ƒç´ ï¼Œå¹¶ç»§ç»­é€’å½’çš„ç»´æŠ¤å¤§é¡¶å †</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯ï¼Œåˆ™è¯´æ˜å¤§é¡¶å †å·²æ„å»ºå®Œæˆï¼Œä¸éœ€è¦å†ç»§ç»­ç»´æŠ¤</span></span><br><span class="line">    <span class="keyword">if</span> (largest != idx) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> nums[idx];</span><br><span class="line">        nums[idx] = nums[largest];</span><br><span class="line">        nums[largest] = temp;</span><br><span class="line">        <span class="comment">// ç»§ç»­ç»´æŠ¤å †</span></span><br><span class="line">        buildMaxHeap(nums, n, largest);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h2 id="2-äºŒå‰æ ‘">2.äºŒå‰æ ‘</h2>
<h3 id="0-äºŒå‰æ ‘ç®€æ˜“å®šä¹‰">0.äºŒå‰æ ‘ç®€æ˜“å®šä¹‰</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äºŒå‰æ ‘ç®€æ˜“å®šä¹‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> val;</span><br><span class="line">    <span class="keyword">public</span> TreeNode left;</span><br><span class="line">    <span class="keyword">public</span> TreeNode right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">(<span class="type">int</span> val, TreeNode left, TreeNode right)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.left = left;</span><br><span class="line">        <span class="built_in">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-dfs">1.DFS</h3>
<ol>
<li>DFSçš„é€’å½’å®ç°</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;TreeNode&gt; nodeList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">        nodeList.add(node); <span class="comment">// å‰åº</span></span><br><span class="line">        preOrder(node.left);</span><br><span class="line">        preOrder(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">        inOrder(node.left);</span><br><span class="line">        nodeList.add(node); <span class="comment">// ä¸­åº</span></span><br><span class="line">        inOrder(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">        postOrder(node.left);</span><br><span class="line">        nodeList.add(node); <span class="comment">// ååº</span></span><br><span class="line">        postOrder(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>DFSçš„è¿­ä»£å®ç°</li>
</ol>
<p>è¿­ä»£ä½¿ç”¨æ ˆä¿å­˜èŠ‚ç‚¹å®ç°</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>DFSè¿­ä»£</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;Integer&gt; nodeList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰åºéå†</span></span><br><span class="line"><span class="comment">// é‡åˆ°ç›´æ¥æ‰“å°ï¼Œå…ˆå­˜å‚¨å³èŠ‚ç‚¹ï¼Œå†å­˜å‚¨å·¦èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    stack.addFirst(node.val);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">treeNode</span> <span class="operator">=</span> stack.pollFirst();</span><br><span class="line">        nodeList.add(treeNode);</span><br><span class="line">        <span class="comment">// å‰åºæ˜¯æ ¹å·¦å³ï¼Œå…ˆå‹å…¥å³èŠ‚ç‚¹ï¼Œå†å‹å…¥å·¦èŠ‚ç‚¹ï¼Œä¿è¯æ¯ä¸€æ¬¡å…ˆå¼¹å‡ºå·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// ä¸”æ¯æ¬¡åªå¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¿è¯ä¸€å¼€å§‹åªå¼¹å‡ºå·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (treeNode.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.addFirst(treeNode.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (treeNode.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.addFirst(treeNode.left);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­åºéå†</span></span><br><span class="line"><span class="comment">// é‡åˆ°å…ˆä¸€ç›´å¯»æ‰¾å·¦å­èŠ‚ç‚¹ï¼Œç„¶åå¼¹æ ˆï¼Œæ‰“å°ã€‚åœ¨å°†rootç½®ä¸ºå³å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// ä¸­åºæ˜¯å·¦æ ¹å³ï¼Œéœ€è¦ä¸€ç›´ä¸€ç›´éå†å·¦å­èŠ‚ç‚¹ï¼Œç›´åˆ°æ— å·¦å­èŠ‚ç‚¹ï¼Œå‹å…¥æ ˆä¸­</span></span><br><span class="line">        <span class="keyword">while</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.addFirst(root);</span><br><span class="line">            root = root.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// whileå¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶æ˜¯æ ˆä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¼¹å‡ºæ ˆé¡¶çš„å…ƒç´ ï¼Œï¼ˆè¦æ‰“å°çš„æ ¹å…ƒç´ ï¼‰</span></span><br><span class="line">        root = stack.pollFirst();</span><br><span class="line">        nodeList.add(root.val);</span><br><span class="line">        <span class="comment">// éå†rootçš„å³å…ƒç´ </span></span><br><span class="line">        root = root.right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ååºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">cur</span> <span class="operator">=</span> root; <span class="comment">// å½“å‰è®¿é—®çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// ä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// ä¸­åºæ˜¯å·¦å³æ ¹ï¼Œéœ€è¦ä¸€ç›´ä¸€ç›´éå†å·¦å­èŠ‚ç‚¹ï¼Œç›´åˆ°æ— å·¦å­èŠ‚ç‚¹ï¼Œå‹å…¥æ ˆä¸­</span></span><br><span class="line">        <span class="keyword">while</span> (cur != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.addFirst(cur);</span><br><span class="line">            cur = cur.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è·å–æ ˆé¡¶çš„å…ƒç´ ï¼Œè¿™ä¸ªå…ƒç´ å³å°†è¢«è®¿é—®</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">top</span> <span class="operator">=</span> stack.peek();</span><br><span class="line">        <span class="comment">// å¦‚æœå³å…ƒç´ ä¸ºç©ºï¼Œæˆ–è€…å³å…ƒç´ æ˜¯ä¸Šä¸€ä¸ªè¢«è®¿é—®çš„å…ƒç´ ï¼Œåˆ™è¿™ä¸ªæ ¹å…ƒç´ éœ€è¦è¢«æ‰“å°ï¼Œ</span></span><br><span class="line">        <span class="comment">// åŒæ—¶è¿™ä¸ªæ ¹å…ƒç´ ï¼Œæˆä¸ºä¸Šä¸€ä¸ªè®¿é—®çš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (top.right == <span class="literal">null</span> || top.right == pre) &#123;</span><br><span class="line">            stack.pollFirst();</span><br><span class="line">            pre = top; <span class="comment">// topæˆä¸ºä¸Šä¸€ä¸ªè®¿é—®çš„å…ƒç´ </span></span><br><span class="line">            nodeList.add(top.val);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸ä¸ºç©ºï¼Œä¹Ÿæ²¡æœ‰è®¿é—®è¿‡ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„å³èŠ‚ç‚¹æˆä¸ºcurèŠ‚ç‚¹</span></span><br><span class="line">            cur = top.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="2-bfs">2. BFS</h3>
<ol>
<li>BFSçš„è¿­ä»£å®ç°</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;Integer&gt; nodeList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bfs</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;TreeNode&gt; nodeQueue = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    nodeQueue.addLast(root);</span><br><span class="line">    <span class="keyword">while</span> (!nodeQueue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> nodeQueue.pollFirst();</span><br><span class="line">        nodeList.add(node.val);</span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            nodeQueue.addLast(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            nodeQueue.addLast(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>BFSçš„é€’å½’å®ç°ï¼ˆäº†è§£ï¼‰</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-å•è°ƒé˜Ÿåˆ—">3.å•è°ƒé˜Ÿåˆ—</h2>
<p>å•è°ƒé˜Ÿåˆ—ï¼Œæ³¨æ„ä¸å•è°ƒæ ˆåšå‡ºåŒºåˆ†ã€‚å•è°ƒé˜Ÿåˆ—ç”¨äº<strong>å¾—åˆ°å½“å‰çš„æŸä¸ªèŒƒå›´å†…çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼</strong><br>
å•è°ƒæ ˆï¼šæ²¡æœ‰é•¿åº¦ï¼Œå½“ä¸å•è°ƒæ—¶ï¼Œåªèƒ½ä»æ ˆé¦–å¼¹å‡ºã€‚éƒ½æ˜¯åœ¨å°¾éƒ¨æ·»åŠ ã€‚<br>
<a href="https://leetcode.cn/problems/remove-nodes-from-linked-list/">6247. ä»é“¾è¡¨ä¸­ç§»é™¤èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>ï¼šå•è°ƒæ ˆå‚è€ƒé¢˜ç›®<br>
å•è°ƒé˜Ÿåˆ—ï¼šä¸€èˆ¬æœ‰é•¿åº¦ï¼Œé™¤äº†ä»å°¾éƒ¨å¼¹å‡ºï¼Œå½“é•¿åº¦è¶…è¿‡é™åˆ¶åï¼Œä¼šä»é¦–éƒ¨ç§»é™¤å…ƒç´ ã€‚éƒ½æ˜¯åœ¨å°¾éƒ¨æ·»åŠ ã€‚<br>
<a href="https://leetcode.cn/problems/sliding-window-maximum/">239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>ï¼šå•è°ƒé˜Ÿåˆ—æ¨¡æ¿é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] maxSlidingWindow(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">    Deque&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// å•è°ƒé˜Ÿåˆ—ç»´æŠ¤çš„æ˜¯å°†æ¥å¯èƒ½æˆä¸ºæœ€å¤§å€¼çš„æ•°ï¼Œé˜Ÿåˆ—é¦–éƒ¨ä¸ºå½“å‰çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="comment">// å¯¹äº 1,3,-1,-3,5,3,6,7 æ•°ç»„ï¼Œ1 å…ˆè¿›å…¥ï¼Œå½“3è¿›å…¥æ—¶ï¼Œ3æ¯”1å¤§ï¼Œä¸”3æ¯”1å¹´è½»ï¼Œåˆ™1æ— è®ºå¦‚ä½•éƒ½ä¸å¯èƒ½æˆä¸ºæœ€å¤§å€¼ï¼Œæ‰€ä»¥1ç§»é™¤ã€‚</span></span><br><span class="line">    <span class="comment">// -1è¿›å…¥æ—¶å€™ï¼Œ-1æ¯”3å°ï¼Œæ‰€ä»¥3ä¸ç§»é™¤ï¼ŒåŒæ—¶-1æ›´å¹´è½»ï¼ˆ-1å¯èƒ½æ˜¯åé¢kçš„æœ€å¤§å€¼ï¼‰ï¼Œæ‰€ä»¥-1å…¥é˜Ÿ</span></span><br><span class="line">    <span class="comment">// æ­¤å¤„å…ˆå¤„ç†é•¿ä¸ºkçš„ï¼Œæ•…æ²¡æœ‰æˆ‘ä»¬æ‰‹åŠ¨ç§»é™¤çš„å…ƒç´ ï¼Œéƒ½æ˜¯è¢«æœ€å¤§å¯èƒ½æ€§ç§»é™¤çš„ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">        <span class="comment">// æ­¤ifå¯ä»¥ç²¾ç®€ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•éƒ½è¦queue.add(nums[i]);</span></span><br><span class="line">        <span class="keyword">if</span> (queue.isEmpty()) &#123;</span><br><span class="line">            queue.addLast(nums[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœé˜Ÿåˆ—å°¾éƒ¨çš„å…ƒç´ ï¼Œä¸å¯èƒ½æˆä¸ºæœ€å¤§å€¼ï¼Œåˆ™å°†å…¶ç§»é™¤</span></span><br><span class="line">            <span class="keyword">while</span> (!queue.isEmpty() &amp;&amp; queue.peekLast() &lt; nums[i]) &#123;</span><br><span class="line">                queue.pollLast();</span><br><span class="line">            &#125;</span><br><span class="line">            queue.addLast(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] ansArr = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length - k + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    ansArr[idx] = queue.peekFirst();</span><br><span class="line">    idx++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> k; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="comment">// ç¬¬ i - kä¸ªå…ƒç´ è¦ç§»é™¤ï¼Œä¿æŒæ»‘åŠ¨çª—å£é•¿åº¦ä¸ºkï¼Œå¦‚æœnums[i-k]ç­‰äºé˜Ÿåˆ—é¦–éƒ¨çš„å€¼ï¼Œåˆ™è¯´æ˜é˜Ÿåˆ—é¦–éƒ¨æ˜¯è¦ç§»é™¤çš„</span></span><br><span class="line">        <span class="keyword">if</span> (nums[i- k] == queue.peekFirst()) &#123;</span><br><span class="line">            queue.pollFirst();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœé˜Ÿåˆ—å°¾éƒ¨çš„å…ƒç´ ï¼Œä¸å¯èƒ½æˆä¸ºæœ€å¤§å€¼ï¼Œåˆ™å°†å…¶ç§»é™¤</span></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty() &amp;&amp; queue.peekLast() &lt; nums[i]) &#123;</span><br><span class="line">            queue.pollLast();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// nums[i] æ›´å¹´è½»ï¼ˆåé¢æœ‰å¯èƒ½æˆä¸ºé•¿åº¦kçš„æœ€å¤§å€¼ï¼‰ï¼Œæ‰€ä»¥nums[i]æ˜¯ä¸€å®šè¦å…¥é˜Ÿçš„</span></span><br><span class="line">        queue.addLast(nums[i]);</span><br><span class="line">        ansArr[idx] = queue.peekFirst();</span><br><span class="line">        idx++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ansArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-å¹¶æŸ¥é›†">4.å¹¶æŸ¥é›†</h2>
<p>å¹¶æŸ¥é›†åˆ†ä¸º<strong>å¹¶</strong>ä¸<strong>æŸ¥ä¸¤éƒ¨åˆ†</strong>ï¼Œä¸»è¦ç”¨äºæŸ¥æ‰¾ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºä¸€ä¸ªé›†åˆï¼Œæœ‰ä¸¤ç‚¹ä¼˜åŒ–ï¼š<br>
è·¯å¾„å‹ç¼©ï¼ˆæ‰¾åˆ°èŠ‚ç‚¹içš„ç¥–å…ˆèŠ‚ç‚¹åï¼Œå°†iç›´æ¥æŒ‡å‘ç¥–å…ˆèŠ‚ç‚¹ï¼Œä¸€èˆ¬å¿…é¡»ï¼‰ã€‚<br>
æŒ‰ç§©åˆå¹¶ï¼ˆèŠ‚rankä½çš„åˆå¹¶åˆ°ranké«˜çš„ä¸Šå»ï¼Œå°±æ˜¯èŠ‚æ ‘é«˜åº¦å°çš„åˆå¹¶åˆ°é«˜åº¦å¤§çš„ä¸Šå»ï¼Œä»è€Œä¸å¢åŠ æ ‘çš„é«˜åº¦ã€‚æœ‰ç‚¹é—®é¢˜ï¼Œæš‚æœªå®ç°ï¼‰ã€‚<br>
æ¨¡æ¿é¢˜ï¼š<a href="https://leetcode.cn/problems/bLyHh0/">å‰‘æŒ‡ Offer II 116. çœä»½æ•°é‡ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>å¹¶æŸ¥é›†</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">findCircleNum</span><span class="params">(<span class="type">int</span>[][] isConnected)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="type">int</span>[] parentArr = init(isConnected.length);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¹¶çš„éƒ¨åˆ†ï¼Œå°†æ¯ä¸€ä¸ªç‚¹å¹¶èµ·æ¥</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; isConnected.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; isConnected[i].length; j++) &#123;</span><br><span class="line">            <span class="comment">// ç¬¬iä¸ªçœä»½ä¸jæ•°ç»„ä¸­çš„ç›¸è¿ï¼Œå¹¶èµ·æ¥</span></span><br><span class="line">            <span class="keyword">if</span> (isConnected[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                merge(i, j, parentArr);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="type">Set</span> <span class="variable">ansSaveSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; isConnected.length; i++) &#123;</span><br><span class="line">        <span class="comment">// æŸ¥çš„éƒ¨åˆ†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> findParent(i, parentArr);</span><br><span class="line">        <span class="keyword">if</span> (!ansSaveSet.contains(parent)) &#123;</span><br><span class="line">            ansSaveSet.add(parent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ansSaveSet.size();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] init(<span class="type">int</span> n) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºç¥–å…ˆæ•°ç»„ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ç¥–å…ˆæ•°ç»„çš„å€¼ç›¸åŒï¼Œåˆ™ä»–ä»¬å±äºåŒä¸€ä¸ªé›†åˆ</span></span><br><span class="line">    <span class="type">int</span>[] parentArr = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–çš„ç¥–å…ˆæ•°ç»„éƒ½æŒ‡å‘è‡ªå·±</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        parentArr[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> parentArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ä¸€ä¸ªçœä»½çš„ç¥–å…ˆ</span></span><br><span class="line"><span class="comment">// æŸ¥çš„éƒ¨åˆ†ï¼šcity: çœä»½, parentArr: ç¥–å…ˆæ•°ç»„</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">findParent</span><span class="params">(<span class="type">int</span> city, <span class="type">int</span>[] parentArr)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ—¶ç¥–å…ˆèŠ‚ç‚¹ï¼Œåˆ™ä¸€å®šè‡ªå·±æ—¶è‡ªå·±çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œå³ï¼šparentArr[city] == city</span></span><br><span class="line">    <span class="keyword">if</span> (parentArr[city] == city) &#123;</span><br><span class="line">        <span class="keyword">return</span> city;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€’å½’æŸ¥æ‰¾ç¥–å…ˆèŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">rootCity</span> <span class="operator">=</span> findParent(parentArr[city], parentArr);</span><br><span class="line">    <span class="comment">// ä¼˜åŒ–ç‚¹1ï¼šè·¯å¾„åˆå¹¶</span></span><br><span class="line">    <span class="comment">// æ‰¾åˆ°åï¼Œå°†cityçš„ç¥–å…ˆèŠ‚ç‚¹è®¾ç½®ä¸ºrootCityï¼Œèƒ½å¤Ÿå‡å°‘èŠ‚ç‚¹é€€åŒ–ä¸ºé“¾è¡¨çš„å¯èƒ½æ€§</span></span><br><span class="line">    parentArr[city] = rootCity;</span><br><span class="line">    <span class="keyword">return</span> rootCity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå¹¶ä¸¤ä¸ªçœä»½åˆ°ä¸€ä¸ªé›†åˆ</span></span><br><span class="line"><span class="comment">// å¹¶çš„éƒ¨åˆ†ï¼Œa: çœä»½ï¼Œb: çœä»½ï¼ŒparentArr: ç¥–å…ˆæ•°ç»„</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span>[] parentArr)</span> &#123;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°açš„ç¥–å…ˆ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">parentA</span> <span class="operator">=</span> findParent(a, parentArr);</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°bçš„ç¥–å…ˆ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">parentB</span> <span class="operator">=</span> findParent(b, parentArr);</span><br><span class="line">    <span class="comment">// bæˆä¸ºaçš„ç¥–å…ˆï¼ˆåˆå¹¶ä¸¤ä¸ªç¥–å…ˆï¼‰</span></span><br><span class="line">    parentArr[parentA] = parentB;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h2 id="5-æ‹“æ‰‘æ’åº">5.æ‹“æ‰‘æ’åº</h2>
<p><a href="https://leetcode.cn/problems/course-schedule/">207. è¯¾ç¨‹è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>ï¼šæ‹“æ‰‘æ’åºæ¨¡æ¿é¢˜ç›®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canFinish</span><span class="params">(<span class="type">int</span> numCourses, <span class="type">int</span>[][] prerequisites)</span> &#123;</span><br><span class="line">    <span class="comment">// ç”¨æ¥ç»Ÿè®¡å…¥åº¦ï¼Œå…¥åº¦ä¸º0çš„ç‚¹åˆ™æ˜¯æ’åœ¨å‰é¢çš„ç‚¹ï¼ˆå¯ä»¥è¢«é€‰æ‹©çš„ç‚¹ï¼‰</span></span><br><span class="line">    <span class="type">int</span>[] indegressArr = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">    <span class="comment">// ä¸‹æ ‡iè¡¨ç¤ºç¬¬ié—¨è¯¾ç¨‹ï¼ŒcourseList[i]è¡¨ç¤ºç¬¬ié—¨é¢—æ˜¯è¯¥é›†åˆçš„å…ˆä¿®è¯¾ï¼Œè¿™é‡Œå¯ä»¥ç”¨é›†åˆï¼Œæ˜¯å› ä¸ºéƒ½æ˜¯è¿ç€çš„ï¼Œä¹Ÿå¯ä»¥ç”¨map&lt;List&gt;</span></span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; courseList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å› ä¸ºä¸‹æ ‡iè¡¨ç¤ºç¬¬ié—¨è¯¾ï¼Œæ‰€ä»¥æœ‰å‡ é—¨è¯¾å°±å…ˆåˆ›å»ºå‡ ä¸ªlistï¼ˆå¦‚æœç”¨é‚»æ¥è¡¨æ•°ç»„æˆ–è€…mapå°±ä¸éœ€è¦ï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; i++) &#123;</span><br><span class="line">        courseList.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; prerequisites.length; i++) &#123;</span><br><span class="line">        <span class="comment">// ç¬¬prerequisites[i][0] é—¨è¯¾çš„å…¥åº¦+1</span></span><br><span class="line">        indegressArr[prerequisites[i][<span class="number">0</span>]]++;</span><br><span class="line">        <span class="comment">// ç¬¬prerequisites[i][1] é—¨è¯¾æ˜¯prerequisites[i][0]é—¨è¯¾çš„å…ˆä¿®è¯¾</span></span><br><span class="line">        courseList.get(prerequisites[i][<span class="number">1</span>]).add(prerequisites[i][<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Deque&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// æ·»åŠ å…¥è¯»ä¸º0çš„è¯¾åˆ°é˜Ÿåˆ—ï¼Œè¿›è¡Œé€‰æ‹©</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; indegressArr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (indegressArr[i] == <span class="number">0</span>) &#123;</span><br><span class="line">            queue.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// å…ˆä¿®è¯¾</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">preCourse</span> <span class="operator">=</span> queue.pollFirst();</span><br><span class="line">        <span class="comment">// å…ˆä¿®è¯¾çš„åé¢çš„è¯¾</span></span><br><span class="line">        List&lt;Integer&gt; nextCourseList = courseList.get(preCourse);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nextCourseList.size(); i++) &#123;</span><br><span class="line">            <span class="comment">// è¿™äº›åä¿®è¯¾ç¨‹ï¼Œå…¥åº¦-1</span></span><br><span class="line">            indegressArr[nextCourseList.get(i)]--;</span><br><span class="line">            <span class="comment">// ä¸º0çš„è¯¾ç¨‹åŠ å…¥é˜Ÿåˆ—ï¼Œå‚åŠ åç»­åˆ é™¤</span></span><br><span class="line">            <span class="keyword">if</span> (indegressArr[nextCourseList.get(i)] == <span class="number">0</span>) &#123;</span><br><span class="line">                queue.addLast(nextCourseList.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; indegressArr.length; i++) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæœ‰å…¥åº¦ä¸ä¸º0çš„è¯¾ï¼Œé‚£ä¹ˆåˆ™ä¸èƒ½ä¿®å®Œæ‰€æœ‰è¯¾ç¨‹</span></span><br><span class="line">        <span class="keyword">if</span> (indegressArr[i] != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-çº¿æ®µæ ‘">6.çº¿æ®µæ ‘</h2>
<p>å•ç‚¹ä¿®æ”¹çº¿æ®µæ ‘æ¨¡æ¿ï¼šæš‚è®°ï¼Œéœ€è¦æ•´ç†</p>
<p>æ¨¡æ¿é¢˜ï¼š<a href="https://leetcode.cn/problems/range-sum-query-mutable/">307. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„å¯ä¿®æ”¹</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NumArray</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node[] tree;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] nums;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NumArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nums = nums;</span><br><span class="line">        <span class="built_in">this</span>.tree = <span class="keyword">new</span> <span class="title class_">Node</span>[nums.length  * <span class="number">4</span>];</span><br><span class="line">        <span class="comment">// å»ºæ ‘</span></span><br><span class="line">        buildTree(<span class="number">0</span>, nums.length - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        change(index, val, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumRange</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> query(left, right, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span> p)</span> &#123;</span><br><span class="line">        <span class="comment">// åŠ¨æ€å¼€ç‚¹</span></span><br><span class="line">        tree[p] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        tree[p].left = left;</span><br><span class="line">        tree[p].right = right;</span><br><span class="line">        <span class="keyword">if</span> (left == right) &#123;</span><br><span class="line">            tree[p].sum = nums[left];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) / <span class="number">2</span>;</span><br><span class="line">        buildTree(left, mid, p * <span class="number">2</span>);</span><br><span class="line">        buildTree(mid + <span class="number">1</span>, right, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        tree[p].sum = tree[p * <span class="number">2</span>].sum + tree[p * <span class="number">2</span> + <span class="number">1</span>].sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> val, <span class="type">int</span> p)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].left == tree[p].right) &#123;</span><br><span class="line">            tree[p].sum = val;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (tree[p].left + tree[p].right) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (index &lt;= mid) &#123;</span><br><span class="line">            change(index, val, p * <span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            change(index, val, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        tree[p].sum = tree[p * <span class="number">2</span>].sum + tree[p * <span class="number">2</span> + <span class="number">1</span>].sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">query</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span> p)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].left &gt;= left &amp;&amp; tree[p].right &lt;= right) &#123;</span><br><span class="line">            <span class="keyword">return</span> tree[p].sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (tree[p].left + tree[p].right) / <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (left &lt;= mid) &#123;</span><br><span class="line">            sum += query(left, right, p * <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right &gt; mid) &#123;</span><br><span class="line">            sum += query(left, right, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> left;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> right;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> sum;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</title>
    <url>/2022/07/05/%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<p>Springç»Ÿä¸€å¼‚å¸¸å¤„ç†ä¸jsr303åˆ†ç»„éªŒè¯</p>
<span id="more"></span>
<h2 id="ç»Ÿä¸€å¼‚å¸¸å¤„ç†ä¸jsr303">ç»Ÿä¸€å¼‚å¸¸å¤„ç†ä¸JSR303</h2>
<h3 id="1-è‡ªå®šä¹‰å…¨å±€ç»Ÿä¸€å¼‚å¸¸">1. è‡ªå®šä¹‰å…¨å±€ç»Ÿä¸€å¼‚å¸¸</h3>
<p>â€ƒâ€ƒåœ¨éœ€è¦ä½¿ç”¨ç»Ÿä¸€å¼‚å¸¸å¤„ç†çš„å¾®æœåŠ¡ä¸‹åˆ›å»ºexceptionåŒ…ï¼Œå¹¶åˆ›å»ºç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å…¨å±€ç»Ÿä¸€å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * RestControllerAdviceæ³¨è§£ï¼šè¡¨ç¤ºè¦æ•è·å¼‚å¸¸ï¼ŒåŒæ—¶è¿”å›ç»™å‰ç«¯json</span></span><br><span class="line"><span class="comment"> * 		basePackagesè¡¨ç¤ºè¦æ‹¦æˆªå¼‚å¸¸çš„åŒ…ï¼Œè¿™é‡ŒæŒ‡å®šæ‹¦æˆªcom.example.example.example.controlleråŒ…é‡Œçš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hcxx</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/07/05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestControllerAdvice(basePackages = &quot;com.example.example.example.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleExceptionControllerAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼©å°èŒƒå›´å¼‚å¸¸ï¼Œæ‰èƒ½æ‹¿åˆ°å…¶ä¸­çš„å¼‚å¸¸(æ‰æœ‰å…·ä½“çš„æ–¹æ³•), å¦‚æœèƒ½å¤Ÿç²¾ç¡®åŒ¹é…è¿™ä¸ªå¼‚å¸¸ï¼Œå°±åŒ¹é…ï¼Œå¦åˆ™å°±å»ä¸‹é¢çš„æœ€å¤§çš„å¼‚å¸¸</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„MethodArgumentNotValidExceptionæ˜¯å…¥å‚jsr303æ ¡éªŒå¼‚å¸¸ã€‚å°±æ˜¯åé¢è¯´çš„jsr303éªŒè¯ä¸åŒè¿‡æ—¶</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleValidException</span><span class="params">(MethodArgumentNotValidException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;æ•°æ®æ ¡éªŒå‡ºç°å¼‚å¸¸: &#123;&#125; , å¼‚å¸¸ç±»å‹ï¼š&#123;&#125;&quot;</span>, e.getMessage(), e.getClass());</span><br><span class="line">        <span class="type">BindingResult</span> <span class="variable">bindingResult</span> <span class="operator">=</span> e.getBindingResult();</span><br><span class="line"></span><br><span class="line">        HashMap&lt;String, String&gt; errorMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰å¼‚å¸¸ä¿¡æ¯å­˜å‚¨åˆ°mapä¸­ï¼Œè¿”å›ç»™å‰ç«¯</span></span><br><span class="line">        bindingResult.getFieldErrors().forEach(fieldError -&gt; &#123;</span><br><span class="line">            errorMap.put(fieldError.getField(), fieldError.getDefaultMessage());</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> R.error(BIzCodeEnum.VALID_EXCEPTION.getCode(), BIzCodeEnum.VALID_EXCEPTION.getMsg()).put(<span class="string">&quot;data&quot;</span>, errorMap);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ€å¤§çš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * æ³¨è§£<span class="doctag">@ExceptionHandler</span>è¡¨ç¤ºè¦æ•è·çš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> throwable å¯æŠ›å‡ºçš„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleException</span><span class="params">(Throwable throwable)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸ä¿¡æ¯ï¼š&#123;&#125;&quot;</span>, throwable.getMessage());</span><br><span class="line">        <span class="keyword">return</span> R.error(BIzCodeEnum.UNKNOWN_EXCEPTION.getCode(), BIzCodeEnum.UNKNOWN_EXCEPTION.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-è‡ªå®šä¹‰å¼‚å¸¸çŠ¶æ€">2.  è‡ªå®šä¹‰å¼‚å¸¸çŠ¶æ€</h3>
<p>è¿™é‡Œçš„å¼‚å¸¸çŠ¶æ€æ˜¯å¯ä»¥é€šç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥å†™å…¥commonæœåŠ¡ä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. é”™è¯¯ä»£ç å®šä¹‰ä¸º5ä½æ•°å­—</span></span><br><span class="line"><span class="comment"> * 2. å‰ä¸¤ä½è¡¨ç¤ºä¸šåŠ¡åœºæ™¯</span></span><br><span class="line"><span class="comment"> * 3. é”™è¯¯æè¿°ï¼Œå®šä¹‰ä¸ºæšä¸¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">BIzCodeEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸çŠ¶æ€æšä¸¾</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    UNKNOWN_EXCEPTION(<span class="number">10000</span>, <span class="string">&quot;ç³»ç»ŸæœªçŸ¥å¼‚å¸¸&quot;</span>),</span><br><span class="line">    VALID_EXCEPTION(<span class="number">10001</span>, <span class="string">&quot;å‚æ•°æ ¼å¼æ ¡éªŒå¤±è´¥&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    BIzCodeEnum(Integer code, String msg) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="jsr303æ ¡éªŒ">jsr303æ ¡éªŒ</h2>
<h3 id="1-é«˜ç‰ˆæœ¬springæ ¡éªŒä¾èµ–æ·»åŠ ">1. é«˜ç‰ˆæœ¬springæ ¡éªŒä¾èµ–æ·»åŠ </h3>
<p>â€ƒâ€ƒè€ƒè™‘åˆ°å¤§å¤šæ•°æœåŠ¡å¤šéœ€è¦æ ¡éªŒï¼Œå¯ä»¥ç›´æ¥æ·»åŠ åœ¨commonæœåŠ¡é‡Œã€‚è¿™é‡Œçš„ç‰ˆæœ¬æœ€å¥½å’Œsrping-bootç‰ˆæœ¬ä¸€è‡´ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Bean æ ¡éªŒæ³¨è§£ ï¼Œé«˜ç‰ˆæœ¬è¦ç”¨starterçš„ä¾èµ–--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-ç®€å•æ ¡éªŒå‚æ•°">2. ç®€å•æ ¡éªŒå‚æ•°</h3>
<p>â€ƒâ€ƒå¦‚æœè¦å¯¹controllerçš„å…¥å‚è¿›è¡Œæ ¡éªŒï¼Œåˆ™éœ€è¦ä½¿ç”¨æ³¨è§£æ˜¾ç¤ºçš„å¼€å¯æ ¡éªŒã€‚ä½¿ç”¨@Validatedï¼Œç”±springæä¾›ï¼Œ(å¦æœ‰@Validç”±javaxæä¾›)ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * ä¿å­˜</span></span><br><span class="line"><span class="comment">    * Validated(AddGroup.class) æ³¨è§£ï¼Œæ ‡è¯†ä¸ºåªæ ¡éªŒæ·»åŠ ç»„çš„è§„åˆ™</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Validated</span> æ³¨è§£è¡¨æ˜è¦è¿›è¡Œæ ¡éªŒï¼›åé¢çš„(AddGroup.class) è¡¨ç¤ºè¦è¿›è¡Œç¬¬3æ­¥çš„åˆ†ç»„æ ¡éªŒï¼Œè¿™é‡Œæ˜¯æ›´æ–°æ ‡è®°ç±»ï¼Œ </span></span><br><span class="line"><span class="comment">    *            æ³¨æ„ï¼Œè¿™ä¸ªç±»æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ä¸€ä¸ªç©ºç±»ï¼Œä»…ç”¨æ¥æ ‡è®°ï¼Œæˆ‘ä»¬ä¸šåŠ¡ä¸Šçº¦å®šï¼Œæœ‰è¿™ä¸ªç±»çš„å±äºæ›´æ–°ã€‚</span></span><br><span class="line"><span class="comment">    * AddGroup.class å¯ä»¥ä¸å†™ï¼Œåˆ™ä¸ºä¸å¼€å¯åˆ†ç»„æ ¡éªŒï¼Œåˆ™å®ä½“ç±»ä¸Šä¹Ÿä¸è¦å†™groups=?ã€‚åˆ™ä¸ºæ ¡éªŒæ‰€æœ‰ç±»å‹ï¼Œä¸åˆ†ç»„</span></span><br><span class="line"><span class="comment">    * BindingResult result æ˜¯åœ¨æ²¡æœ‰å¼€å¯ç»Ÿä¸€å¼‚å¸¸å‰ï¼Œæ‰€æœ‰æ ¡éªŒå¼‚å¸¸éƒ½ä¼šåœ¨è¿™é‡Œï¼Œç”¨äºè·å–å¼‚å¸¸ï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç†åä¸å†éœ€è¦</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> R <span class="title function_">save</span><span class="params">(<span class="meta">@Validated(AddGroup.class)</span> <span class="meta">@RequestBody</span> BrandEntity brand  <span class="comment">/*, BindingResult result*/</span> )</span> &#123;</span><br><span class="line">       brandService.save(brand);</span><br><span class="line">       <span class="keyword">return</span> R.ok();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-åˆ†ç»„å¼‚å¸¸æ ¡éªŒ">3.åˆ†ç»„å¼‚å¸¸æ ¡éªŒ</h3>
<p>â€ƒâ€ƒæœ‰æ—¶å€™ï¼ŒæŸä¸ªå­—æ®µï¼Œä¾‹å¦‚Idï¼Œå†æ–°å¢çš„æ—¶å€™å¿…é¡»ä¸ºnullï¼Œåœ¨æ›´æ–°çš„æ—¶å€™å¿…é¡»æ˜¯ä¸ä¸ºnullï¼Œå®ä½“ç±»ä¸Šçš„æ ¡éªŒæ³¨è§£æ— æ³•ç›´æ¥åŒºåˆ†ï¼Œè¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œåˆ†ç»„æ ¡éªŒäº†ã€‚åˆ†ç»„æ ¡éªŒå°±æ˜¯åœ¨å®ä½“ç±»ä¸Šçš„æ ¡éªŒæ³¨è§£åŠ ä¸Š<code>groups</code>æ•°ç»„çš„å±æ€§ï¼Œæ•°ç»„ä¸­çš„ç±»æ˜¯ç©ºæ ‡è®°ç±»ï¼Œç”¨æ¥æ ‡è®°åˆ†ç»„ã€‚åŒæ—¶controlleræ–¹æ³•ä¸ŠæŒ‡æ˜æ˜¯å“ªä¸€ä¸ªæ ‡è®°ã€‚è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•åªæ ¡éªŒæ‰€å±groupsçš„æ³¨è§£ã€‚<br>
â€ƒâ€ƒmessageæ˜¯å‡ºç°å¼‚å¸¸çš„æ—¶å€™è¿”å›çš„å¼‚å¸¸ä¿¡æ¯ï¼Œgroupsè¡¨ç¤ºè¿™ä¸ªå®ä½“ç±»è¢«æ ‡è®°ä¸ºå“ªäº›æ“ä½œä¸‹éœ€è¦æ ¡éªŒã€‚ä¾‹å¦‚<code>brandId</code>å­—æ®µæˆ‘ä»¬åŒæ—¶æŒ‡å®šNullä¸NotNullï¼Œåœ¨æ›´æ–°æ—¶å¿…é¡»ä¸èƒ½ä¸ºç©ºï¼Œæ–°å¢æ—¶å¿…é¡»ä¸ºç©ºã€‚<br>
â€ƒâ€ƒä¸šåŠ¡ä¸Šæˆ‘ä»¬è§„å®šï¼šAddGroupç±»ä¸ºæ–°å¢æ ‡è®°ç±»ï¼ŒUpdateGroupä¸ºæ›´æ–°æ ‡è®°ç±»ã€‚</p>
<p>â€ƒâ€ƒæ³¨æ„ï¼šä¸€æ—¦æ¥å£å¼€å¯äº†åˆ†ç»„æ ¡éªŒï¼Œåˆ™å®ä½“ç±»æ‰€æœ‰å­—æ®µå¿…é¡»æŒ‡æ˜åˆ†ç»„ï¼Œå¦åˆ™ä¸å†ç”Ÿæ•ˆï¼Œè¦ä¹ˆä¸æŒ‡æ˜åˆ†ç»„ï¼ˆå³ä¸åˆ†ç»„ï¼‰ï¼Œè¦ä¹ˆå…¨éƒ¨æŒ‡æ˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;pms_brand&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BrandEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å“ç‰Œid</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;ä¿®æ”¹å¿…é¡»æŒ‡å®šå“ç‰Œid&quot;, groups = &#123;UpdateGroup.class&#125;)</span></span><br><span class="line">    <span class="meta">@Null(message = &quot;æ–°å¢ä¸èƒ½æŒ‡å®šid&quot;, groups = &#123;AddGroup.class&#125;)</span></span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long brandId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å“ç‰Œå</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;å“ç‰Œåä¸èƒ½ä¸ºç©º&quot;, groups = &#123;AddGroup.class, UpdateGroup.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å“ç‰Œlogoåœ°å€, å¯ä»¥æœ‰å¤šä¸ªæ³¨è§£, å¦‚æœä¸æŒ‡å®šç»„ï¼Œåˆ™ä¸ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥å³ä½¿æ‰€æœ‰éƒ½ç”¨ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šç»„ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;logoä¸èƒ½ä¸ºç©º&quot;, groups = &#123;AddGroup.class&#125;)</span></span><br><span class="line">    <span class="meta">@URL(message = &quot;logoå¿…é¡»æ˜¯ä¸€ä¸ªåˆæ³•çš„urlåœ°å€&quot;, groups = &#123;AddGroup.class, UpdateGroup.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> String logo;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»‹ç»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String descript;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¾ç¤ºçŠ¶æ€[0-ä¸æ˜¾ç¤ºï¼›1-æ˜¾ç¤º]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotNull(groups = &#123;AddGroup.class, UpdateStatusGroup.class&#125;)</span></span><br><span class="line">    <span class="meta">@ListValue(vals = &#123;0, 1&#125;, groups = &#123;AddGroup.class, UpdateStatusGroup.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer showStatus;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€ç´¢é¦–å­—æ¯ï¼Œ A-Z,a-zï¼Œä½¿ç”¨æ­£åˆ™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotEmpty(message = &quot;æ£€ç´¢é¦–å­—æ¯ä¸èƒ½ä¸ºç©º&quot;, groups = &#123;AddGroup.class&#125;)</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^[a-zA-Z]$&quot;, message = &quot;æ£€ç´¢é¦–å­—æ¯å¿…é¡»æ˜¯ä¸€ä¸ªå­—æ¯&quot;, groups = &#123;AddGroup.class, UpdateGroup.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> String firstLetter;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’åº, æœ€å°ä¸º0, Integerä¸èƒ½ä½¿ç”¨emptyçº¦æŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;æ’åºä¸èƒ½ä¸ºç©º&quot;, groups = &#123;AddGroup.class&#125;)</span></span><br><span class="line">    <span class="meta">@Min(value = 0, message = &quot;æ’åºå¿…é¡»å¤§äºç­‰äº0&quot;, groups = &#123;AddGroup.class, UpdateGroup.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer sort;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£">4. è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£</h3>
<ol>
<li>æ­£åˆ™è¡¨è¾¾å¼ï¼šå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°è‡ªå®šä¹‰çš„ç›®çš„ã€‚@Pattern</li>
<li>ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£ï¼š@ListValue(value=(0,1))ã€‚è¯¥è‡ªå®šä¹‰æ³¨è§£è§„å®šåªèƒ½ä½¿ç”¨valueså€¼0å’Œ1</li>
<li>ç¼–å†™æ—¶å¯ä»¥å‚è€ƒå·²ç»å­˜åœ¨çš„å®˜æ–¹æ³¨è§£ï¼Œä¾‹å¦‚<code>@NotNull</code>ç­‰ã€‚è¯¥æ³¨è§£æœ‰ä¸‰ä¸ªå±æ€§<code>message</code>ã€<code>groups</code>ã€<code>payload</code>
<ol>
<li>messageï¼šåœ¨ä½¿ç”¨è€…ä¸æŒ‡å®š<code>message</code>çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤è¿”å›çš„æŠ¥é”™ä¿¡æ¯ã€‚</li>
<li>groupsï¼šæ”¯æŒåˆ†ç»„æ ¡éªŒï¼Œé»˜è®¤ä¸åˆ†ç»„</li>
<li>payloadï¼šä½¿ç”¨è€…å¯ä»¥é€šè¿‡æ­¤å±æ€§æ¥ç»™çº¦æŸæ¡ä»¶æŒ‡å®šä¸¥é‡çº§åˆ«. è¿™ä¸ªå±æ€§å¹¶ä¸è¢«APIè‡ªèº«æ‰€ä½¿ç”¨ã€‚</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE&#125;)</span> <span class="comment">// æ³¨è§£å¯ä»¥æ ‡æ³¨çš„ä½ç½®</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="comment">// æ ¡éªŒæ³¨è§£çš„æ—¶æœºï¼šè¿è¡Œæ—¶</span></span><br><span class="line"><span class="meta">@Repeatable(NotNull.List.class)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123;&#125;)</span> <span class="comment">// æŒ‡æ˜ä½¿ç”¨å“ªä¸ªæ ¡éªŒå™¨(ç±») å»æ ¡éªŒä½¿ç”¨äº†æ­¤æ ‡æ³¨çš„å…ƒç´ ã€‚ä¸æŒ‡å®šåˆ™å¿…é¡»åœ¨åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®šï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªæ ¡éªŒå™¨æ³¨è§£ï¼Œä½¿ç”¨æ—¶è‡ªåŠ¨é€‚é…</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> NotNull &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;javax.validation.constraints.NotNull.message&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Target(&#123;ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE&#125;)</span></span><br><span class="line">    <span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line">    <span class="meta">@Documented</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@interface</span> List &#123;</span><br><span class="line">        NotNull[] value();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>è‡ªå®šæ ¡éªŒæ³¨è§£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123;ListValueConstraintValidator.class&#125;)</span> <span class="comment">// æŒ‡å®šæ ¡éªŒå™¨ä¸ºListValueConstraintValidatorç±»ï¼Œç¬¬6ç‚¹</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ListValue &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;com.example.common.valid.ListValue.message&#125;&quot;</span>; <span class="comment">// åœ¨resourcesä¸‹çš„é…ç½®æ–‡ä»¶ValidationMessages.propertiesä¸­å–å‡ºè¯¥å€¼ã€‚ç¬¬5ç‚¹</span></span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‡ªå®šä¹‰çš„å±æ€§</span></span><br><span class="line"><span class="comment">     * valsé»˜è®¤ä¸ºç©º</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span>[] vals() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>resourcesä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶<code>ValidationMessages.properties</code></li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">com.example.common.valid.ListValue.message</span>=<span class="string">å¿…é¡»æäº¤æŒ‡å®šçš„å€¼</span></span><br></pre></td></tr></table></figure>
<ol start="6">
<li>ç¼–å†™è‡ªå®šä¹‰æ ¡éªŒå™¨ç±»
<ol>
<li>è¦å®ç°ConstraintValidatorç±»ï¼Œä¸¤ä¸ªèŒƒå½¢ï¼Œç¬¬ä¸€ä¸ªæ˜¯ListValueï¼Œè¡¨ç¤ºè¦æ ¡éªŒçš„æ³¨è§£ã€‚ç¬¬äºŒä¸ªæ˜¯Integerï¼Œæ˜¯è¯¥æ³¨è§£åªèƒ½ä½œç”¨äºIntegerå­—æ®µã€‚ç„¶åé‡å†™ä¸¤ä¸ªæ–¹æ³•</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListValueConstraintValidator</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;ListValue, Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥è·å–æ‰€æœ‰æ ¡éªŒè§„åˆ™ä¼ å…¥çš„å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span> 2022/7/10</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> constraintAnnotation:</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(ListValue constraintAnnotation)</span> &#123;</span><br><span class="line">        <span class="comment">// ç»™çš„çš„å€¼å¿…é¡»æ˜¯vals, æ³¨è§£ä¸Šçš„valã€‚ï¼ˆè·å–æ³¨è§£ä¸Šçš„valsè‡ªå®šä¹‰çš„å±æ€§çš„å€¼ï¼‰</span></span><br><span class="line">        <span class="type">int</span>[] vals = constraintAnnotation.vals();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> val : vals) &#123;</span><br><span class="line">            set.add(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¸€ä¸ªæ–¹æ³•è·å–æ‰€æœ‰çš„å€¼åï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ ¡éªŒæˆåŠŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span> 2022/7/10</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value: å‰ç«¯æäº¤è¿‡æ¥çš„å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> constraintValidatorContext: æ ¡éªŒçš„ä¸Šä¸‹æ–‡ç¯å¢ƒä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(Integer value, ConstraintValidatorContext constraintValidatorContext)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> set.contains(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ˜¾ç¤ºçŠ¶æ€[0-ä¸æ˜¾ç¤ºï¼›1-æ˜¾ç¤º]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@NotNull(groups = &#123;AddGroup.class, UpdateStatusGroup.class&#125;)</span></span><br><span class="line"><span class="meta">@ListValue(vals = &#123;0, 1&#125;, groups = &#123;AddGroup.class, UpdateStatusGroup.class&#125;)</span></span><br><span class="line"><span class="keyword">private</span> Integer showStatus;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2022/07/04/20220704/</url>
    <content><![CDATA[<p>æ„Ÿè§‰ä»Šå¹´çš„TODOåˆè¦é¸½äº†ã€‚ã€‚ã€‚<br>
<img src="/2022/07/04/20220704/image-20220704222949640.png" style="zoom:40%;"></p>
]]></content>
  </entry>
  <entry>
    <title>Spring-Cloud-alibabaé…ç½®ç¬”è®°</title>
    <url>/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>spring-cloud-alibabaé…ç½®ç¬”è®°</p>
<span id="more"></span>
<h2 id="ç®¡ç†ä¾èµ–">ç®¡ç†ä¾èµ–</h2>
<p>åœ¨commonå¾®æœåŠ¡å•ç‹¬æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼Œè¯¥ä¾èµ–ä¼šSpringCloud-alibabaçš„æ‰€æœ‰ç»„ä»¶è¿›è¡Œä¾èµ–ç®¡ç†ã€‚ç„¶åæ‰€æœ‰å¾®æœåŠ¡å¿…é¡»å¼•å…¥commonä¾èµ–ï¼Œ<br>
æ³¨æ„ï¼šcommonåˆ›å»ºæ˜¯ä½¿ç”¨ideaè‡ªå¸¦çš„mavenè„šæ‰‹æ¶åˆ›å»ºï¼Œè€Œä¸æ˜¯springBootï¼Œæ‰€ä»¥æ²¡æœ‰å¯åŠ¨ç±»</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>CommonæœåŠ¡</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>project<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example.project<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>project-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>æ¯ä¸€ä¸ªå¾®æœåŠ¡å…¬å…±çš„ä¾èµ–ï¼Œbeanï¼Œå·¥å…·ç±»ç­‰<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpcore<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--tomcatå­˜åœ¨æ‰“åŒ…çš„æ™‚å€™ä¸éœ€è¦--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- ç”±äºæ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦é…ç½®ä¸­å¿ƒï¼Œæ‰€ä»¥å†™è¿™é‡Œï¼Œç‰ˆæœ¬ç”±ä¸‹é¢çš„dependencyManagementç®¡ç† --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- ä½¿ç”¨openfeignçš„è´Ÿè½½å‡è¡¡ï¼Œéœ€è¦æ’é™¤è¿™ä¸ªè‡ªå¸¦çš„è´Ÿè½½å‡è¡¡ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”±äºæ¯ä¸€ä¸ªæœåŠ¡éƒ½éœ€è¦ä½¿ç”¨é…ç½®ä¸­å¿ƒï¼Œæ‰€ä»¥å†™è¿™é‡Œï¼Œç‰ˆæœ¬ç”±dependencyManagementç®¡ç† --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- springBootçš„2.4å³ä»¥ä¸Šç‰ˆæœ¬éœ€è¦æ·»åŠ ï¼Œä¹‹åå†ä½¿ç”¨ bootstrap.properties é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Bean æ ¡éªŒæ³¨è§£ ï¼Œé«˜ç‰ˆæœ¬è¦ç”¨starterçš„ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¾èµ–ç®¡ç†ï¼Œä¸Šé¢çš„éƒ¨åˆ†ä¾èµ–ç‰ˆæœ¬ç”±ä¸‹é¢çš„ç®¡ç†ï¼Œspring-cloud-alibabaçš„æ³¨å†Œä¸­å¿ƒã€é…ç½®ä¸­å¿ƒï¼Œç®¡ç†ä¾èµ–ç‰ˆæœ¬ï¼Œæ³¨æ„ä¸‹é¢çš„pomç¤ºä¾‹æ˜¯spring-cluod--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>æŸå•ç‹¬å¾®æœåŠ¡çš„pomå‚è€ƒ</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example.project<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>microServe1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>microServe1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>å¾®æœåŠ¡1<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šspring-cloudçš„ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>2021.0.3<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example.project<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>project-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment">&lt;!-- é˜¿é‡Œäº‘OSSæœåŠ¡å•ç‹¬æŠ½å‡ºåˆ°ç¬¬ä¸‰æ–¹å¾®æœåŠ¡åï¼Œä¸å†éœ€è¦ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯spring-cloud-starter-alicloud-ossçš„ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;3.10.2&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- spring-cloudçš„ä¾èµ–ç®¡ç†ï¼Œä¸Šé¢æ²¡æœ‰é…ç½®ç‰ˆæœ¬çš„éƒ½ç”±æ­¤ç®¡ç†ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- ç®¡ç†spring-cloudçš„ä¾èµ– --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h2 id="nacosæ³¨å†Œä¸­å¿ƒ">Nacosæ³¨å†Œä¸­å¿ƒ</h2>
<h3 id="1-ä¾èµ–å¼•å…¥-åªcommon">1. ä¾èµ–å¼•å…¥(åªcommon)</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç”±äºæ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦é…ç½®ä¸­å¿ƒï¼Œæ‰€ä»¥å†™commonï¼Œç‰ˆæœ¬ç”±ä¸Šé¢è¯´çš„dependencyManagementç®¡ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ’é™¤ribbonï¼Œå› ä¸ºfeignä¸å†ä½¿ç”¨ribbonï¼Œè€Œæ˜¯ä½¿ç”¨lodblance-starter, å› ä¸ºfeignæ˜¯å•ç‹¬å¼•ç”¨ï¼Œæ‰€ä»¥å»ºè®®lodblance-starterå’Œfeignå•ç‹¬å¼•ç”¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-å¯ç”¨æœåŠ¡æœåŠ¡å‘ç°">2. å¯ç”¨æœåŠ¡æœåŠ¡å‘ç°</h3>
<p>æ·»åŠ <code>@EnableDiscoveryClient</code>æ³¨è§£ï¼Œæ·»åŠ å®Œååº”è¯¥å¦‚ä¸‹ï¼Œæ‰€æœ‰å¾®æœåŠ¡éœ€è¦æ³¨å†Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">microServer1Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(microServer1Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-é…ç½®æ–‡ä»¶nacosç›¸å…³-yml">3. é…ç½®æ–‡ä»¶nacosç›¸å…³(yml)</h3>
<p>ä¹Ÿå¯ä»¥åç»­ç”¨å†™å…¥<code>bootstrap.yml</code>ä¸­ï¼Œå‚è€ƒNaocsé…ç½®ä¸­å¿ƒç« èŠ‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">microServer1</span></span><br></pre></td></tr></table></figure>
<h3 id="4-å¯åŠ¨nacos">4. å¯åŠ¨nacos</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">startup.cmd -m standalone</span><br></pre></td></tr></table></figure>
<h2 id="feign">Feign</h2>
<p>ç”³æ˜å¼çš„è¿œç¨‹è°ƒç”¨httpå®¢æˆ·ç«¯ï¼ˆç°åœ¨å·²ç»æ”¯æŒRPCè°ƒç”¨äº†ï¼‰</p>
<h3 id="1-ä¾èµ–å¼•å…¥-æ‰€æœ‰éœ€è¦ä½¿ç”¨feignçš„å¾®æœåŠ¡-é™¤common">1. ä¾èµ–å¼•å…¥(æ‰€æœ‰éœ€è¦ä½¿ç”¨Feignçš„å¾®æœåŠ¡ï¼Œé™¤common)</h3>
<p>æ³¨æ„ï¼šåœ¨ä½¿ç”¨ideaçš„springBootè„šæ‰‹æ¶åˆ›å»ºæ¯ä¸ªå¾®æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å·²ç»é€‰æ‹©feginçš„åˆå§‹åŒ–åˆ›å»º(åŒæ—¶ä¹Ÿé€‰æ‹©äº†web-starter)ã€‚æ‰€ä»¥ä¸å†éœ€è¦å¼•å…¥ä¾èµ–ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨æ–°ç‰ˆOpenFignä½¿ç”¨äº†RPCçš„è¿œç¨‹è°ƒç”¨ï¼Œéœ€è¦åŒæ—¶åŠ å…¥ä¸€ä¸ªæ–°çš„ä¾èµ–ï¼ŒåŠ å®Œåè¿™ä¸¤ä¸ªä¾èµ–å¦‚ä¸‹ã€‚ï¼ˆç‰ˆæœ¬å·²ç»äº¤ç»™<code>dependencyManagement</code>ç®¡ç†ï¼Œæ‰€ä»¥ä¸å†éœ€è¦é…ç½®ç‰ˆæœ¬ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ–°ç‰ˆæœ¬cloud-open-feignä¸å†ä½¿ç”¨ribbonåšè´Ÿè½½å‡è¡¡ï¼Œè€Œæ˜¯ä½¿ç”¨spring-cloud-starter-loadbalancer --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-ç”³æ˜feignåˆ›å»ºè°ƒç”¨">2. ç”³æ˜feignåˆ›å»ºè°ƒç”¨</h3>
<p>åœ¨Applicationå¯åŠ¨ç±»åŒçº§ç›®å½•ä¸‹åˆ›å»ºfeignæ–‡ä»¶å¤¹ï¼Œåé¢çš„çš„è¿œç¨‹è°ƒç”¨å†™åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨è§£`<span class="doctag">@FeignClient</span>(&quot;microServer2&quot;)`ç”³æ˜ä¸ºfeginå®¢æˆ·ç«¯,è¦è¿œç¨‹è°ƒç”¨ microServer2 çš„æœåŠ¡</span></span><br><span class="line"><span class="comment"> * è°ƒç”¨è¿‡ç¨‹ï¼Œé¦–å…ˆå»æ³¨å†Œä¸­å¿ƒnacosæ‰¾åˆ° microServer2 æœåŠ¡ï¼Œç„¶åå†æ ¹å…·ä¸‹é¢çš„å…·ä½“è·¯å¾„åœ°å€è°ƒç”¨å…¶æœåŠ¡</span></span><br><span class="line"><span class="comment"> * microServer2 æ˜¯è¢«è°ƒç”¨çš„å¾®æœåŠ¡çš„æ³¨å†Œåœ¨nacosçš„åç§° (spring.application.name çš„å€¼)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¦è°ƒç”¨çš„ç›´æ¥è°ƒç”¨è‡ªå·±åŒ…ä¸‹çš„ exampleFeignService </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;microServer2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">exampleFeignService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»è¿œç¨‹æ¥å£å¤åˆ¶è¿‡æ¥çš„æ–¹æ³•(è¢«è°ƒç”¨çš„æ–¹æ³•)</span></span><br><span class="line"><span class="comment">     * åŒæ—¶è¿œç¨‹çš„æ¥å£çš„åœ°å€ä¹Ÿå†™å…¨</span></span><br><span class="line"><span class="comment">     * SpuBoundDto ä¸å¿…ä¸è¿œç¨‹æ¥å£æ˜¯åŒä¸€ä¸ªå®ä½“ç±»ï¼Œåªè¦é€šè¿‡jsonèƒ½å®Œå…¨è½¬è¿‡å»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;example/example/example/list&quot;)</span> <span class="comment">// è¿œç¨‹æ¥å£çš„åœ°å€ï¼Œä»controllerä¸Šå¼€å§‹</span></span><br><span class="line">    R <span class="title function_">saveSpuBonds</span><span class="params">(<span class="meta">@RequestBody</span> SpuBoundDto spuBoundDto)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-ç”³æ˜å¯ç”¨feignè°ƒç”¨">3. ç”³æ˜å¯ç”¨feignè°ƒç”¨</h3>
<p>å¼€å¯feignçš„æ³¨è§£, æŒ‡å®šfeignè¦æ‰«æçš„æŒ‡å®šåœ°å€ä¸‹çš„æ‰€æœ‰æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. æƒ³è¦è¿œç¨‹è°ƒç”¨ï¼Œéœ€è¦å¼€å¯æœåŠ¡å‘ç°</span></span><br><span class="line"><span class="comment"> *  1ï¼‰ å¼•å…¥ä¾èµ–ï¼šopen-feign</span></span><br><span class="line"><span class="comment"> *  2) ç¼–å†™ä¸€ä¸ªæ¥å£ï¼Œå‘Šè¯‰springCloudè¿™ä¸ªæ¥å£éœ€è¦è°ƒç”¨è¿œç¨‹æœåŠ¡</span></span><br><span class="line"><span class="comment"> *      ï¼ˆåˆ›å»ºfeignæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºæ¥å£ï¼Œç”³æ˜feignå®¢æˆ·ç«¯ï¼Œè°ƒç”¨ï¼Œè¯¦ç»†è§feignæ³¨é‡Šï¼‰</span></span><br><span class="line"><span class="comment"> *      1. ç”³æ˜æ¥å£çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯è°ƒç”¨çš„å“ªä¸€ä¸ªè¿œç¨‹æœåŠ¡</span></span><br><span class="line"><span class="comment"> *  3ï¼‰ å¼€å¯feignçš„æ³¨è§£, å¹¶æŒ‡å®šfeignè¦æ‰«æçš„æŒ‡å®šåœ°å€ä¸‹çš„æ‰€æœ‰æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;com.example.example.example.fegin&quot;)</span> <span class="comment">// å¯ç”¨feignå¹¶è¯´æ˜feignåœ¨é‚£ä¸ªåŒ…</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerMemberApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(ServerMemberApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="nacosé…ç½®ä¸­å¿ƒ">Nacosé…ç½®ä¸­å¿ƒ</h2>
<h3 id="1-ä¾èµ–å¼•å…¥-åªcommon">1. ä¾èµ–å¼•å…¥ï¼ˆåªcommonï¼‰</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- springBootçš„2.4å³ä»¥ä¸Šç‰ˆæœ¬éœ€è¦æ·»åŠ ï¼Œä¹‹åå†ä½¿ç”¨ bootstrap.properties é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-é…ç½®æ–‡ä»¶">2. é…ç½®æ–‡ä»¶</h3>
<p>resourcesç›®å½•ä¸‹è¾–åˆ›å»º<code>bootstrap.properties</code>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¼šå…ˆäº<code>application.properties</code>æ–‡ä»¶åŠ è½½ã€‚å¿…é¡»è¦å…ˆäºåŠ è½½ï¼ŒåŠ è½½åå»é…ç½®ä¸­å¿ƒè¯»å–é…ç½®æ–‡ä»¶ã€‚å¦‚ä¸‹é…ç½®æ–‡ä»¶çš†æ˜¯ä¿®æ”¹bootstrapæ–‡ä»¶ã€‚å¦‚æœåªçœ‹ç»“æœï¼Œç¿»åˆ°æœ€åä¸€ç‚¹å³å¯ã€‚</p>
<p>è¯»å–æµç¨‹ï¼š</p>
<ol>
<li>å…ˆé€šè¿‡é…ç½®åœ°å€server-addræŸ¥æ‰¾åˆ°nacosï¼Œ</li>
<li>å†é€šè¿‡å‘½åç©ºé—´ï¼ŒæŸ¥æ‰¾åˆ°uuidä¸ºâ€˜361a2167-5594-4440-ac8e-ea927be56c67â€™çš„å‘½åç©ºé—´ï¼ˆå¦‚æ— åˆ™ä¸ºpublicï¼‰</li>
<li>å†æŸ¥æ‰¾ç»„åã€‚ï¼ˆå¦‚æ— åˆ™ä¸ºDEFAULT_GROUPï¼‰</li>
<li>å†æŸ¥æ‰¾åº”ç”¨å<code>server1</code>ã€‚æ‰¾åˆ°<code>server1.åç¼€</code>çš„ä½œä¸ºé…ç½®æ–‡ä»¶ã€‚</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">server1 # æ¨¡å—åç§°ï¼ˆæ¯ä¸ªå¾®æœåŠ¡çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶å¤¹åï¼Œå»ºè®®å’ŒartifactIdä¿æŒä¸€è‡´ï¼‰</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment"># è¦å…ˆåˆ›å»ºå‘½åç©ºé—´ï¼Œæ‰èƒ½æœ‰uuidï¼Œæ‰èƒ½è®¾ç½®ã€‚</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">361a2167-5594-4440-ac8e-ea927be56c67 # æŒ‡å®šè¦ä½¿ç”¨çš„å‘½åç©ºé—´çš„é…ç½®uuid</span></span><br><span class="line"><span class="comment"># å¦‚æœé…ç½®ä¸­å¿ƒä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯yamlï¼Œéœ€è¦æŒ‡å®šï¼Œå¦åˆ™é»˜è®¤ä¸ºserver1.propertiesï¼ˆåˆ†ç»„æ‹†åˆ†çš„æ—¶å€™å·²ç»æŒ‡æ˜æ–‡ä»¶ä¸ºxxx.yamlæ—¶å¯ä»¥ä¸ç”¨ï¼‰</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.file-extension</span>=<span class="string">yaml</span></span><br><span class="line"><span class="comment"># è¦å…ˆåˆ›å»ºç»„åï¼Œæ‰æœ‰ï¼Œå¯ä»¥å…ˆä¸ç®¡ï¼Œåé¢æœ‰è¯´æ˜</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">events # æŒ‡å®šç»„åä¸ºevents</span></span><br></pre></td></tr></table></figure>
<h3 id="nacosç½‘é¡µé…ç½®åˆ—è¡¨æ·»åŠ ">Nacosç½‘é¡µé…ç½®åˆ—è¡¨æ·»åŠ </h3>
<p>æ‰“å¼€å·¦ä¾§<code>é…ç½®ç®¡ç†/é…ç½®åˆ—è¡¨</code>ï¼Œç‚¹å‡»åŠ å·ï¼ŒData IDæ˜¯åº”ç”¨åç§°ï¼Œå°±æ˜¯ä¸Šé¢ä¸€ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„<code>spring.application.name=microServer</code>çš„microServerï¼Œä¸€èˆ¬å–åä¸ºå¾®åˆ†æœåŠ¡çš„æœ€å¤–å±‚æ–‡ä»¶å¤¹åã€‚ä¾‹å¦‚ï¼šÂ·/father/example/src/mainâ€¦Â·ï¼Œå…¶ä¸­fatherä¸ºèšåˆæœåŠ¡ï¼Œexampleä¸ºå¾®æœåŠ¡åº”ç”¨åã€‚<img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220603232925834-16555631121241.png" alt="æ·»åŠ é…ç½®å®ç°çƒ­æ›´æ–°"></p>
<h3 id="å¼•å…¥é…ç½®å‚æ•°ç±»åŠ æ³¨è§£">å¼•å…¥é…ç½®å‚æ•°ç±»åŠ æ³¨è§£</h3>
<p>å¼•ç”¨äº†application.propertiesçš„æ–‡ä»¶ï¼Œéœ€è¦åŠ ä¸Šæ³¨è§£<code>@RefreshScope</code>ï¼Œæ‰èƒ½å®æ—¶æ›´æ–°ï¼ŒåŠ¨æ€è·å–é…ç½®å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RefreshScope</span> <span class="comment">// ç”¨äºå®æ—¶ä»Nacosçš„é…ç½®ä¸­å¿ƒè·å–å‚æ•°</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;server1/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¼•ç”¨é…ç½®ä¸­å¿ƒçš„å‚æ•°</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;user.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">	<span class="comment">// å¼•ç”¨é…ç½®ä¸­å¿ƒçš„å‚æ•°</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;user.age&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœé…ç½®ä¸­å¿ƒå’Œé…ç½®æ–‡ä»¶éƒ½ä½¿ç”¨äº†ç›¸åŒçš„é…ç½®é¡¹ï¼Œä¼˜å…ˆä½¿ç”¨é…ç½®ä¸­å¿ƒçš„é…ç½®ã€‚</p>
<h3 id="3-ä»¥å¼€å‘æµ‹è¯•ç”Ÿäº§å‘½åç©ºé—´-ä¸å¤ªæ¨è">3. ä»¥å¼€å‘æµ‹è¯•ç”Ÿäº§å‘½åç©ºé—´(ä¸å¤ªæ¨è)</h3>
<p>å‘½åç©ºé—´ä¸»è¦æ˜¯ç”¨æ¥åŒºåˆ†ï¼Œå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§çš„ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ã€‚é»˜è®¤æœ‰ä¸€ä¸ªpublicï¼Œåˆ©ç”¨å‘½åç©ºé—´åšç¯å¢ƒéš”ç¦»ï¼Œéœ€è¦åœ¨bootstrap.propertiesé…ç½®ä¸Šï¼Œéœ€è¦ä½¿ç”¨å“ªä¸€ä¸ªå‘½åç©ºé—´ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>å¦‚æœå¾®æœåŠ¡ä¼—å¤šï¼Œå¯ä»¥æ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½åˆ›å»ºè‡ªå·±çš„å‘½åç©ºé—´ã€‚åªåŠ è½½è‡ªå·±å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰é…ç½®ã€‚</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604105154618-16555631121252.png" alt="Nacoså‘½åç©ºé—´"></p>
<p>åˆ›å»ºå®Œæˆåï¼Œé…ç½®åˆ—è¡¨ä¼šå¤šå¦‚ä¸‹çš„å¯é€‰æ‹©é¡¹ã€‚</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604105405954-16555631121253.png" alt="Nacosé…ç½®åˆ—è¡¨é€‰æ‹©é¡¹"></p>
<p>ç„¶åæ ¹æ®éœ€è¦ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¦ä½¿ç”¨çš„å‘½åç©ºé—´çš„uuidã€‚</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604110442433-16555631121254.png" alt="é€‰æ‹©å‘½åç©ºé—´"></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">microServer # åº”ç”¨åç§°</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">5fb79757-32f8-49d1-a94d-8a198f602d52 # æŒ‡å®šè¦ä½¿ç”¨çš„å‘½åç©ºé—´çš„é…ç½®uuid</span></span><br></pre></td></tr></table></figure>
<h3 id="4-ä»¥æ¯ä¸ªå¾®æœåŠ¡ä½œä¸ºå‘½åç©ºé—´">4. ä»¥æ¯ä¸ªå¾®æœåŠ¡ä½œä¸ºå‘½åç©ºé—´</h3>
<p>é…ç½®åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©å…‹éš†ï¼Œå¯ä»¥ä»å…¶ä»–å‘½åç©ºé—´å¤åˆ¶é…ç½®æ–‡ä»¶ã€‚</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604111125500-16555631121256.png" alt="å¾®æœåŠ¡ä½œä¸ºå‘½åç©ºé—´"></p>
<h3 id="5-é…ç½®åˆ†ç»„">5. é…ç½®åˆ†ç»„</h3>
<p>å›¾ä¸­åŒä¸€å‘½åç©ºé—´ä¸‹æœ‰ç›¸åŒçš„Data_IDçš„ã€‚ä½†æ˜¯åˆ†ç»„ä¸åŒï¼Œå¯äºé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†ç»„ã€‚</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604112235042-16555631121255.png" alt="é…ç½®åˆ†ç»„"></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">server1</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">5fb79757-32f8-49d1-a94d-8a198f602d52 # æŒ‡å®šå‘½åç©ºé—´</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">events # æŒ‡å®šç»„åä¸ºevents</span></span><br></pre></td></tr></table></figure>
<h3 id="6-é€šè¿‡åˆ†ç»„éš”ç¦»ç¯å¢ƒ">6. é€šè¿‡åˆ†ç»„éš”ç¦»ç¯å¢ƒ</h3>
<p>åˆ†devç»„å’Œprodç»„</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604113850760-16555631121257.png" alt="åˆ†ç»„éš”ç¦»ç¯å¢ƒ"></p>
<h3 id="7-ä½¿ç”¨é…ç½®é›†">7. ä½¿ç”¨é…ç½®é›†</h3>
<p>yamlä¸­çš„é…ç½®å¯ä»¥è¿›ä¸€æ­¥çš„æ‹†åˆ†ï¼Œå¦‚ä¸‹å°†åŸæœ¬çš„é…ç½®application.ymlé…ç½®æ–‡ä»¶æ‹†åˆ†æˆdatasourceã€mybatisã€otheræ¨¡å—ã€‚åœ¨é…ç½®é›†ä¸­æ²¡æœ‰çš„å‚æ•°ï¼Œä¼šå»æŒ‡å®šçš„ç©ºé—´ä¸ç»„åä¸­å°è¯•å»æŸ¥æ‰¾ã€‚</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604142556772-16555631121258.png" alt="é…ç½®é›†çš„ä½¿ç”¨"></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">server1</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment"># æŒ‡å®šå‘½åç©ºé—´ï¼Œ</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">5fb79757-32f8-49d1-a94d-8a198f602d52</span></span><br><span class="line"><span class="comment"># æŒ‡å®šç»„åä¸ºdevï¼Œå½“åœ¨ä¸‹åˆ—é…ç½®é›†ä¸­æ‰¾ä¸åˆ°çš„æ—¶å€™ï¼Œä¼šå°è¯•æ¥æ­¤ç»„ä¸­æŸ¥æ‰¾</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">dev</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># ä½¿ç”¨é…ç½®é›†ï¼Œæ˜¯ä¸ªé›†åˆã€‚æ­¤é…ç½®æœ‰ä¸‰ä¸ªç»„æˆï¼Œè¿™é‡Œå·²ç»æŒ‡å®šä¸ºé…ç½®å.yamlï¼Œæ‰€ä»¥ä¸å†éœ€è¦é…ç½®æ–‡ä»¶ç±»å‹ä¸ºyaml</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[0].data-id</span>=<span class="string">datasource.yaml # Data_ID</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[0].group</span>=<span class="string">dev # ç»„å</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[0].refresh</span>=<span class="string">true # åŠ¨æ€æ›´æ–°</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[1].data-id</span>=<span class="string">mybatis.yaml</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[1].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[1].refresh</span>=<span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[2].data-id</span>=<span class="string">other.yaml</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[2].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.extension-configs[2].refresh</span>=<span class="string">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="gatewayç½‘å…³">Gatewayç½‘å…³</h2>
<p>gatewayç”¨æ¥åšç½‘å…³ã€‚ä½¿ç”¨ideaçš„springè„šæ‰‹æ¶åˆå§‹åŒ–é¡¹ç›®ï¼Œ</p>
<h3 id="1-ä¾èµ–å¼•å…¥">1. ä¾èµ–å¼•å…¥</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>2021.0.3<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥commonå·¥ç¨‹ä¾èµ–ï¼Œå› ä¸ºè¯¥å¾®æœåŠ¡ä¹Ÿéœ€è¦ä½¿ç”¨Nacos --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ·»åŠ gatewayä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ·»åŠ  loadbalancerä¾èµ–è§£å†³gatewayè·¯å¾„é‡å†™503é—®é¢˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¸Šé¢çš„ç‰ˆæœ¬ç”±cloudæ§åˆ¶ï¼Œcloudç‰ˆæœ¬ç”±cloud.versionæ§åˆ¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>bootstrap.properties æ·»åŠ é…ç½®</code></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">microServer2-gatewa</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848 # é…ç½®ä¸­å¿ƒNacosåœ°å€</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">d6d7433c-c339-4381-9138-661749338b2a</span></span><br></pre></td></tr></table></figure>
<p><code>application.properties </code>æ·»åŠ é…ç½®</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848	# æ³¨å†Œä¸­å¿ƒNacosåœ°å€</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">microServer2-gateway	# æ³¨å†ŒæœåŠ¡å</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">88 # gatewwayçš„ç«¯å£å·</span></span><br></pre></td></tr></table></figure>
<h3 id="2-æ³¨è§£é…ç½®">2. æ³¨è§£é…ç½®</h3>
<p>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ å¯ç”¨Nacosæ³¨è§£ï¼ŒåŒæ—¶æ’é™¤myabtisè‡ªåŠ¨é…ç½®çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="comment">// æ’é™¤æ•°æ®åº“è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="meta">@SpringBootApplication(exclude = &#123;DataSourceAutoConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerGatewayApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(ServerGatewayApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="nacosæ³¨å†Œ">Nacosæ³¨å†Œ</h3>
<p>åœ¨Nacosä¸­ç»™gatewayåˆ›å»ºå‘½åç©ºé—´ã€‚å¹¶åˆ›å»ºData_IDçš„yamlé…ç½®æ–‡ä»¶ã€‚åŒæ—¶åˆ›å»º<code>bootstrap.properties</code>æ–‡ä»¶ã€‚</p>
<p><img src="/2022/06/18/Spring-Cloud-alibaba%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/image-20220604153644447-16555631121259.png" alt="gatewayçš„Nacosä¸­çš„é…ç½®æ–‡ä»¶"></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">microServer2</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">d6d7433c-c339-4381-9138-661749338b2a</span></span><br></pre></td></tr></table></figure>
<h3 id="è·¯ç”±è§„åˆ™">è·¯ç”±è§„åˆ™</h3>
<p>gateå¯ä»¥åˆ›å»ºè·¯ç”±è§„åˆ™ï¼Œåœ¨æ»¡è¶³æ–­è¨€çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è·¯ç”±åˆ°æŒ‡å®šçš„åœ°å€ï¼Œåˆ›å»º<code>application.yml</code>æ–‡ä»¶ï¼Œåˆ›å»ºå¦‚ä¸‹è·¯ç”±è§„åˆ™ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      	<span class="comment"># `-`è¡¨ç¤ºæ•°ç»„ï¼Œå¯ä»¥å¹³çº§é…ç½®å¤šä¸ª</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">test_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.baidu.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">          	<span class="comment"># æŸ¥è¯¢å‚æ•°åŒ…å«url=baiduï¼Œåˆ™è·¯ç”±åˆ°ä¸Šé¢çš„åœ°å€</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,baidu</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">qq_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.qq.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,qq</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">product_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://micro-serverName</span> <span class="comment"># Nacosä¸Šæ³¨å†Œçš„æœåŠ¡åï¼ˆè¦è·¯ç”±åˆ°å“ªä¸ªå¾®æœåŠ¡ï¼‰</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/product/**</span>   <span class="comment"># æ–­è¨€è¯¥è·¯å¾„ä¸‹çš„æ‰€æœ‰è¯·æ±‚(å†™åœ¨å‰é¢çš„å…ˆæ–­è¨€ï¼Œæ‰€ä»¥è¯¦ç»†çš„è·¯å¾„åº”è¯¥å†™å‰é¢)</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="comment"># apiä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œ æŠŠapiå‰ç¼€å»æ‰ï¼Œå‰©ä¸‹çš„ç•™ç€ï¼Œå†è°ƒç”¨ï¼ˆè°ƒç”¨ä¸Šé¢æŒ‡å®šçš„å¾®æœåŠ¡çš„æ¥å£è·¯å¾„ï¼‰</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/$\&#123;segment&#125;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">admin_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://micro-serverName2</span> <span class="comment"># Nacosä¸Šæ³¨å†Œçš„æœåŠ¡åï¼ˆè¦è·¯ç”±åˆ°å“ªä¸ªå¾®æœåŠ¡ï¼‰</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span> <span class="comment">#(å®½æ³›çš„è·¯å¾„å†™åé¢)</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">RewritePath=/api/?(?&lt;segment&gt;.*),</span> <span class="string">/renren-fast/$\&#123;segment&#125;</span></span><br><span class="line"><span class="comment">## å‰ç«¯é¡¹ç›®ï¼Œ å‘é€è¯·æ±‚éƒ½å¸¦apiå‰ç¼€ï¼Œ å¦‚ä¸‹è¯·æ±‚è·¯å¾„ä¼šè¢«è·¯ç”±åˆ°åé¢çš„å®é™…åœ°å€</span></span><br><span class="line"><span class="comment">## product: http://localhost:88/api/product/category/list/tree  http://localhost:10000/product/category/list/tree</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2022/06/02/%E9%BB%91%E6%B3%A51/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="9b36372608564fa4ddb5ca245b884907425ad8b810431212d90af8eba780995a">86daf2dd9f98eea2571c3fce34d1e7adf8c6f0caba96db9f885791bfddfd9e13cc6352411bbae3995b93ccb7bfc42fd5a7184de460fdd8522a114f937646ff6c56555eb97418a0ba59fe4068db6e9d98d3e3e2904d59492f1fa291f3ee26e1a4b352e6172628f576dde9b3c87ee33a83317388418a5a89a3177f11e5d9e8e26f</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
  </entry>
  <entry>
    <title>ä¸ä½¿ç”¨é“¾è¡¨çš„æ•£åˆ—</title>
    <url>/2022/04/17/%E4%B8%8D%E4%BD%BF%E7%94%A8%E9%93%BE%E8%A1%A8%E7%9A%84%E6%95%A3%E5%88%97/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬äº”ç« 5.4èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<p>â€ƒâ€ƒåˆ†ç¦»é“¾æ¥æ³•çš„ç¼ºç‚¹æ˜¯ä½¿ç”¨äº†æ•£åˆ—è¡¨ï¼Œç»™è¿™äº›æ–°å•å…ƒåˆ†é…åœ°å€éœ€è¦æ—¶é—´ï¼Œå¯¼è‡´ç®—æ³•é€Ÿåº¦æœ‰äº›å‡æ…¢ã€‚å¦ä¸€ç§ä¸ä½¿ç”¨é“¾è¡¨çš„è§£å†³æ–¹æ³•æ˜¯å°è¯•å¦å¤–ä¸€äº›å•å…ƒï¼Œç›´åˆ°æ‰¾å‡ºå•å…ƒä¸ºæ­¢ã€‚å¸¸è§çš„æ˜¯å•å…ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>0</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">h_0(x),h_1(x),h_2(x),...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span></span>ç›¸ç»§è¢«è¯•é€‰ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mspace width="1em"><mi>m</mi><mi>o</mi><mi>d</mi><mspace width="1em"><mi>T</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi></mspace></mspace></mrow><annotation encoding="application/x-tex">h_i(x) = (hash(x) + f(i)) \quad mod \quad TableSize</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span></span></span></span>ï¼Œä¸”f(0) =  0ã€‚å‡½æ•°fæ˜¯å†²çªè§£å†³æ–¹æ³•ã€‚ä¸€èˆ¬æ¥è¯´å…¶è£…å¡«å› å­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi><mo>=</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">\lambda = 0.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">Î»</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span></span></span></span>ã€‚è¿™æ ·çš„è¡¨å«åš<strong>æ¢æµ‹æ•£åˆ—è¡¨</strong>ã€‚</p>
<h3 id="5-4-1-çº¿æ€§æ¢æµ‹æ³•">5.4.1 çº¿æ€§æ¢æµ‹æ³•</h3>
<p>â€ƒâ€ƒçº¿æ€§æ¢æµ‹æ³•ä¸­ï¼Œå†²çªè§£å†³å‡½æ•°fæ˜¯içš„çº¿æ€§å‡½æ•°ï¼Œå…¸å‹çš„æ˜¯f(i) = i (i &gt;= 0, i++)ã€‚è¿™ç›¸å½“äºå†²çªæ—¶ï¼Œä»å†²çªçš„åœ°å€+iï¼Œiä»0é€’å¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºçš„ä½ç½®æ’å…¥ã€‚å¦‚ä¸‹æ˜¯å¯¹äºä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•£åˆ—è¡¨æ’å…¥[89, 18, 49, 58, 69]æ—¶çš„æƒ…å†µã€‚è§£å†³å†²çªçš„å‡½æ•°æ˜¯f(i) = iã€‚</p>
<img src="/2022/04/17/%E4%B8%8D%E4%BD%BF%E7%94%A8%E9%93%BE%E8%A1%A8%E7%9A%84%E6%95%A3%E5%88%97/ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•æ’å…¥æ•£åˆ—è¡¨.png" alt="ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•æ’å…¥æ•£åˆ—è¡¨" style="zoom: 67%;">
<p>â€ƒâ€ƒç¬¬ä¸€æ¬¡å†²çªæ˜¯åœ¨æ’å…¥49æ—¶å‡ºç°å†²çª(hash(x) = x)ï¼Œæ ¹æ®å†²çªè§£å†³å…¬å¼,h(49)=(hash(49) + 1) mod 10æ—¶ã€‚å†²çªè§£å†³ï¼Œç»“æŸï¼Œ49æ”¾å…¥è¯¥ä½ç½®ã€‚ç¬¬äºŒæ¬¡æ˜¯æ’å…¥58æ—¶å‡ºç°å†²çªï¼Œh(58) = (hash(58) + 3) mod 10æ—¶ã€‚å†²çªè§£å†³ã€‚ç”±ä¸Šå¯çŸ¥ï¼Œæ¯æ¬¡å†²çªå‡ºç°æ—¶ï¼Œåªéœ€è¦æ²¿ç€å†²çªçš„ä½ç½®ç»§ç»­å‘ä¸‹å¯»æ‰¾å¯ç”¨ä½ç½®ï¼Œç›´åˆ°è§£å†³å†²çªå³å¯ã€‚åªè¦è¡¨è¶³å¤Ÿå¤§ï¼Œæ€»å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç©ºä½ç½®ã€‚ä½†æ˜¯å¯èƒ½èŠ±è´¹è¾ƒå¤šçš„æ—¶é—´ã€‚å¦å¤–ï¼Œå æ®çš„å•å…ƒä¼šå¼€å§‹å½¢æˆä¸€äº›åŒºå—ï¼Œå…¶ç»“æœç§°ä¸º<strong>ä¸€æ¬¡èšé›†</strong>ã€‚å½“å‡ºç°å†²çªåï¼Œå¯èƒ½ä¼šéœ€è¦å¤šæ¬¡è¯•é€‰æ‰èƒ½è§£å†³å†²çªã€‚<br>
â€ƒâ€ƒå¯ä»¥å¾—åˆ°è¯æ˜ï¼Œï¼ˆè¯æ˜è¾ƒä¸ºå¤æ‚ï¼‰ã€‚ä½¿ç”¨çº¿æ€§æ¢æµ‹ï¼Œé¢„æœŸæ¢æµ‹æ¬¡æ•°å¯¹äºæ’å…¥å’Œä¸æˆåŠŸæŸ¥æ‰¾çº¦ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mn>1</mn><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mi>Î»</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{1}{2} (1 + \frac{1}{(1- \lambda)^2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.365108em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">âˆ’</span><span class="mord mathdefault mtight">Î»</span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>ï¼Œè€ŒæˆåŠŸçš„æŸ¥æ‰¾æ¥è¯´åˆ™æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>âˆ’</mo><mi>Î»</mi></mrow></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{1}{2} (1 + \frac{1}{1- \lambda})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">âˆ’</span><span class="mord mathdefault mtight">Î»</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>ã€‚åˆ™æ’å…¥ä¸ä¸æˆåŠŸæŸ¥æ‰¾çš„éœ€è¦ç›¸åŒçš„æ¬¡æ•°ï¼ŒæˆåŠŸæŸ¥æ‰¾çš„æ¬¡æ•°æ¯”ä¸æˆåŠŸæŸ¥æ‰¾çš„å¹³å‡èŠ±è´¹æ—¶é—´è¾ƒå°‘ã€‚<br>
â€ƒâ€ƒå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi><mo>=</mo><mn>0.75</mn></mrow><annotation encoding="application/x-tex">\lambda = 0.75</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">Î»</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">7</span><span class="mord">5</span></span></span></span>ï¼Œåˆ™ä¸Šè¿°å…¬å¼é¢„è®¡çº¿æ€§ä¸€æ¬¡æ’å…¥éœ€8.5æ¬¡æ¢æµ‹ï¼Œå¦‚è¿‡0.9ï¼Œåˆ™éœ€è¦50æ¬¡æ¢æµ‹ã€‚ç”±æ­¤å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœè¡¨æœ‰è¶…è¿‡ä¸€åŠè¢«è£…å¡«æ»¡çš„æ—¶å€™ï¼Œçº¿æ€§æ¢æµ‹æ³•ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ³•ã€‚</p>
<h3 id="5-4-2-å¹³æ–¹æ¢æµ‹æ³•">5.4.2 å¹³æ–¹æ¢æµ‹æ³•</h3>
<p>â€ƒâ€ƒå¹³æ–¹æ¢æµ‹æ³•æ˜¯ä¸ºäº†è§£å†³çº¿æ€§æ¢æµ‹æ³•çš„<strong>ä¸€æ¬¡èšé›†</strong>é—®é¢˜ã€‚è¾ƒä¸ºæµè¡Œçš„é€‰æ‹©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>i</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">f(i) = i^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>ï¼Œè¿™ç›¸å½“äºå†²çªæ—¶ï¼ŒåŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>i</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">i^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>ï¼Œiä»0å¼€å§‹é€’å¢ï¼Œå¦‚ä¸‹å›¾ï¼Œå½“49ä¸89å†²çªæ—¶ï¼Œæ”¾å…¥0ä½ç½®ã€‚ä¸‹æ¬¡58æ”¾å…¥æ—¶ï¼Œåˆ™æŒ‰å…¬å¼ä¾æ¬¡é€‰æ‹©åï¼Œæ”¾å…¥2ä½ç½®ã€‚</p>
<img src="/2022/04/17/%E4%B8%8D%E4%BD%BF%E7%94%A8%E9%93%BE%E8%A1%A8%E7%9A%84%E6%95%A3%E5%88%97/ä½¿ç”¨å¹³æ–¹æ¢æµ‹æ³•æ’å…¥æ•£åˆ—è¡¨.png" alt="ä½¿ç”¨å¹³æ–¹æ¢æµ‹æ³•æ’å…¥æ•£åˆ—è¡¨" style="zoom:67%;">
<p>â€ƒâ€ƒå¯¹äºå¹³æ–¹æ¢æµ‹æ³•ï¼Œä¸€æ—¦è¡¨çš„å¡«å……è¶…è¿‡ä¸€åŠï¼Œåˆ™ä¸å¤Ÿå¥½ã€‚ç‰¹åˆ«çš„ï¼Œå¦‚æœè¡¨çš„å¤§å°ä¸æ˜¯ç´ æ•°ï¼Œåœ¨è¢«å¡«å……ä¸€åŠä¹‹å‰ï¼Œå°±ä¸èƒ½ä¸€æ¬¡æ‰¾åˆ°ç©ºçš„å•å…ƒäº†ï¼Œè¯æ˜å¦‚ä¸‹ã€‚</p>
<blockquote>
<p>å®šç†5.1ï¼šå¦‚æœä½¿ç”¨å¹³æ–¹æ¢æµ‹æ³•ï¼Œä¸”è¡¨çš„å¤§å°æ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆå½“è¡¨å°äºä¸€åŠçš„æ—¶å€™ï¼Œæ€»èƒ½å¤Ÿæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚</p>
</blockquote>
<p>è¯æ˜ï¼šé‡‡ç”¨åè¯æ³•</p>
<p>â€ƒâ€ƒä»¤è¡¨çš„å¤§å°TableSizeæ˜¯ä¸€ä¸ªå¤§äº3çš„ç´ æ•°ï¼Œè¯æ˜å‰TableSize/2ä¸ªå¤‡é€‰ä½ç½®æ˜¯äº’å¼‚çš„ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>i</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mspace width="1em"><mi>T</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">)</mo></mspace></mrow><annotation encoding="application/x-tex">h(x) + i^2(mod \quad TableSize)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mspace width="1em"><mi>T</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">)</mo></mspace></mrow><annotation encoding="application/x-tex">h(x) + j^2(mod \quad TableSize)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span>æ˜¯è¿™äº›ä½ç½®çš„å…¶ä¸­ä¸¤ä¸ªï¼Œå…¶ä¸­0 &lt;= , j &lt;= TableSize/2 (æ³¨æ„ä¼šå‘ä¸‹å–æ•´ï¼Œä¸”tableSizeæ˜¯ç´ æ•°)ã€‚ä¸ºæ¨å‡ºçŸ›ç›¾ï¼Œæˆ‘ä»¬å‡è®¾å‰ä¸¤ä¸ªä½ç½®ç›¸åŒï¼Œä½†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo mathvariant="normal">â‰ </mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i \ne j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel">î€ </span></span><span class="fix"></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>ï¼Œäºæ˜¯æœ‰</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>i</mi><mn>2</mn></msup><mo>=</mo><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mspace width="2em"><mo stretchy="false">(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mspace width="1em"><mi>T</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">)</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">h(x) + i^2 = h(x) + j ^2 \qquad (mod \quad TableSize)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:2em;"></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>i</mi><mn>2</mn></msup><mo>=</mo><msup><mi>j</mi><mn>2</mn></msup><mspace width="2em"><mspace width="2em"><mspace width="2em"><mspace width="2em"><mo stretchy="false">(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mspace width="1em"><mi>T</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">)</mo></mspace></mspace></mspace></mspace></mspace></mrow><annotation encoding="application/x-tex">i^2 = j^2 \qquad \qquad \qquad \qquad (mod \quad TableSize)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo>âˆ’</mo><mi>j</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mspace width="2em"><mo stretchy="false">(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mspace width="1em"><mi>T</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">)</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">(i-j) + (i + j) = 0 \qquad (mod \quad TableSize)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:2em;"></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span></span></p>
<p>ç”±äºTableSizeæ˜¯ç´ æ•°ï¼Œè¦ä¹ˆi - j = 0ï¼Œè¦ä¹ˆi+j=0ã€‚ç”±äºiï¼Œjäº’å¼‚ï¼Œåˆ™ç¬¬ä¸€ä¸ªé€‰æ‹©ä¸å¯èƒ½ï¼Œåˆå› ä¸º0 &lt;= iï¼Œj &lt;= tableSIze/2ï¼Œåˆ™ç¬¬äºŒä¸ªé€‰æ‹©ä¸å¯èƒ½ã€‚ä»è€Œï¼Œå‰tableSize/2ä¸ªå¤‡é€‰ä½ç½®éƒ½æ˜¯äº’å¼‚çš„ã€‚åˆ™æ¨å‡ºå¦‚ä¸Šå®šç†5.1ã€‚</p>
<p>â€ƒâ€ƒå³ä½¿è¡¨çš„å¡«å……ä½ç½®åªæ¯”ä¸€åŠå¤šä¸€ä¸ªï¼Œåˆ™ä¹Ÿå¯èƒ½æ’å…¥å¤±è´¥ã€‚åŒæ—¶åˆ é™¤æ“ä½œä¸èƒ½æ‰§è¡Œï¼Œå› ä¸ºç›¸åº”çš„å•å…ƒå¯èƒ½å·²ç»å¼•èµ·å†²çªï¼Œå…ƒç´ ç»•è¿‡å®ƒå­˜åœ¨äº†åˆ«å¤„ï¼Œé‚£ä¹ˆæ‰€æœ‰å‰©ä¸‹çš„containsæ“ä½œéƒ½ä¼šå¤±è´¥ï¼Œå› æ­¤æ¢æµ‹è¡¨æ•£åˆ—éœ€è¦æƒ°æ€§åˆ é™¤ï¼Œ<br>
â€ƒâ€ƒæ¢æµ‹è¡¨æ•£åˆ—çš„å¤§éƒ¨åˆ†å®ç°å¦‚ä¸‹ï¼Œæ­¤å¤„ä¸ä½¿ç”¨é“¾è¡¨æ•°ç»„ï¼Œä½¿ç”¨å•å…ƒæ•°ç»„HashEntryï¼Œå…¶æ¯ä¸€é¡¹æœ‰ä¸‹åˆ—ä¸‰ç§æƒ…å½¢ï¼š</p>
<ol>
<li>null</li>
<li>énullï¼Œä¸”è¯¥é¡¹æ˜¯æ´»åŠ¨çš„ï¼ˆisActive ä¸ºtrueï¼‰</li>
<li>énullï¼Œä¸”è¯¥é¡¹å·²è¢«æ ‡è®°åˆ é™¤ï¼ˆisActive ä¸ºfalseï¼‰</li>
</ol>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>å¹³æ–¹æ¢æµ‹æ³•çš„å®ç°ï¼ˆå±•å¼€ï¼‰</span></div>
    <div class="xContent"><div class="inner">
        <p>ps: åˆ¤æ–­æ˜¯å¦æ—¶ç´ æ•°<code>isPrime()</code>æ–¹æ³•ï¼Œå¹³æ–¹æ¢æµ‹<code>findPos()</code>å…·ä½“åç§»åŠ¨å¹³æ–¹çš„å®ç°æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç»å…¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuadraticProbingHashTable</span>&lt;AnyType&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_TABLE_SIZE</span> <span class="operator">=</span> <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">private</span> HashEntry&lt;AnyType&gt;[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuadraticProbingHashTable</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œéœ€è¦ä¼ å‚æ•°çš„é‚£ä¸ªæ„é€ æ–¹æ³•ã€‚</span></span><br><span class="line">        <span class="built_in">this</span>(DEFAULT_TABLE_SIZE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuadraticProbingHashTable</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        allocateArray(size);</span><br><span class="line">        makeEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰å…ƒç´ ç½®null</span></span><br><span class="line">        Arrays.fill(array, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–HashEntryæ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arraySize ç»™å®šçš„HashEntryæ•°ç»„çš„å¤§å°ï¼Œä¼šè‡ªåŠ¨è°ƒæ•´ä¸ºç´ æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">allocateArray</span><span class="params">(<span class="type">int</span> arraySize)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = <span class="keyword">new</span> <span class="title class_">HashEntry</span>[nextPrime(arraySize)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">currentPos</span> <span class="operator">=</span> findPos(x);</span><br><span class="line">        <span class="keyword">return</span> isActive(currentPos);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> currentSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">capacity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x æ’å…¥çš„å…ƒç´ x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æ’å…¥æˆåŠŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">insert</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="comment">// findPosä¼šæŒ‰å¹³æ–¹æ¢æµ‹æ³•æ‰¾åˆ°ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">currentPos</span> <span class="operator">=</span> findPos(x);</span><br><span class="line">        <span class="keyword">if</span> (isActive(currentPos)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ’å…¥ï¼ˆæ•°ç»„ï¼‰</span></span><br><span class="line">        array[currentPos] = <span class="keyword">new</span> <span class="title class_">HashEntry</span>&lt;&gt;(x, <span class="literal">true</span>);</span><br><span class="line">        currentSize++;</span><br><span class="line">        <span class="comment">// å¹³æ–¹æ¢æµ‹æ³•è¶…è¿‡ä¸€åŠéœ€è¦æ‰©å®¹å¹¶rehash</span></span><br><span class="line">        <span class="keyword">if</span> (currentPos &gt; array.length / <span class="number">2</span>) &#123;</span><br><span class="line">            rehash();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¢«åˆ é™¤çš„å…ƒç´ x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦åˆ é™¤æˆåŠŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="comment">// æŸ¥æ‰¾åˆ°å…ƒç´ çš„ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">currentPos</span> <span class="operator">=</span> findPos(x);</span><br><span class="line">        <span class="keyword">if</span> (isActive(currentPos)) &#123;</span><br><span class="line">            <span class="comment">// æ ‡è®°ä¸ºè¢«åˆ é™¤</span></span><br><span class="line">            array[currentPos].isActive = <span class="literal">false</span>;</span><br><span class="line">            currentSize--;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰©å®¹å¹¶æ‹·è´åˆ°æ–°æ•°ç»„ï¼Œæ³¨æ„æ­¤å¤„æƒ°æ€§åˆ é™¤çš„å…ƒç´ ä¼šè¢«çœŸæ­£çš„åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">rehash</span><span class="params">()</span> &#123;</span><br><span class="line">        HashEntry&lt;AnyType&gt;[] oldArray = array;</span><br><span class="line">        allocateArray(<span class="number">2</span> * oldArray.length);</span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (HashEntry&lt;AnyType&gt; entry : oldArray) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry != <span class="literal">null</span> &amp;&amp; entry.isActive) &#123;</span><br><span class="line">                insert(entry.element);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…ƒç´ çš„èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x å…ƒç´ x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å…ƒç´ æ‰€åœ¨ä½ç½®çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">findPos</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// é€šè¿‡hashè®¡ç®—å‡ºèŠ‚ç‚¹çš„ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">currentPos</span> <span class="operator">=</span> myHash(x);</span><br><span class="line">        <span class="comment">// å¦‚æœèŠ‚ç‚¹ä¸ä¸ºç©ºä¸”ä¸ç›¸ç­‰ï¼Œåˆ™éœ€è¦ç»§ç»­å¾€åæ‰¾</span></span><br><span class="line">        <span class="keyword">while</span> (array[currentPos] != <span class="literal">null</span> &amp;&amp; !array[currentPos].element.equals(x)) &#123;</span><br><span class="line">            <span class="comment">// è¿™é‡Œå®ç°äº†å¹³æ–¹æ¢æµ‹æŸ¥æ‰¾ï¼Œé¦–å…ˆcurrentPos + 1, currentPos + 1 + 3; currentPos + 1 + 3 + 5...</span></span><br><span class="line">            currentPos += offset;</span><br><span class="line">            offset += <span class="number">2</span>;</span><br><span class="line">            <span class="comment">// å®ç°ç¯è¡ŒæŸ¥æ‰¾</span></span><br><span class="line">            <span class="keyword">if</span> (currentPos &gt;= array.length) &#123;</span><br><span class="line">                currentPos -= array.length;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> currentPos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èŠ‚ç‚¹æ˜¯å¦æ¿€æ´»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> currentPos èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœèŠ‚ç‚¹è¢«æ¿€æ´»ï¼ˆæ²¡æœ‰è¢«æƒ°æ€§åˆ é™¤ï¼‰è¿”å›true, å¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isActive</span><span class="params">(<span class="type">int</span> currentPos)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> array[currentPos] != <span class="literal">null</span> &amp;&amp; array[currentPos].isActive;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">myHash</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">hashVal</span> <span class="operator">=</span> x.hashCode();</span><br><span class="line">        hashVal %= array.length;</span><br><span class="line">        <span class="keyword">if</span> (hashVal &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            hashVal += array.length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hashVal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ä¼ è¯´çš„æ•°è·å–ç´ æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arraySize ç´ æ•°çš„å¤§å°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ–°çš„ç´ æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">nextPrime</span><span class="params">(<span class="type">int</span> arraySize)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (arraySize % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            arraySize++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!isPrime(arraySize)) &#123;</span><br><span class="line">            arraySize += <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> arraySize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯å¦æ˜¯ç´ æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n  æ•°n</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç´ æ•°ï¼štrue;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">( <span class="type">int</span> n )</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>( n == <span class="number">2</span> || n == <span class="number">3</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( n == <span class="number">1</span> || n % <span class="number">2</span> == <span class="number">0</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i * i &lt;= n; i += <span class="number">2</span> ) &#123;</span><br><span class="line">            <span class="keyword">if</span>( n % i == <span class="number">0</span> ) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashEntryå†…éƒ¨å†…ï¼Œç”¨æ¥å­˜å‚¨HashTableçš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;AnyType&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">HashEntry</span>&lt;AnyType&gt; &#123;</span><br><span class="line">        <span class="keyword">public</span> AnyType element;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å¦‚æœè¢«æƒ°æ€§åˆ é™¤åˆ™ä¸ºfalse</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> isActive;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">HashEntry</span><span class="params">(AnyType element)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.element = element;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">HashEntry</span><span class="params">(AnyType element, <span class="type">boolean</span> isActive)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.element = element;</span><br><span class="line">            <span class="built_in">this</span>.isActive = isActive;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<p>â€ƒâ€ƒå¹³æ–¹æ¢æµ‹æ³•è§£å†³äº†<strong>ä¸€æ¬¡èšé›†</strong>ï¼Œä½†æ˜¯æ•£åˆ—(è®¡ç®—åˆ°æ’å…¥åŒä¸€ä½ç½®)åˆ°åŒä¸€ä½ç½®æ—¶ï¼Œå°†ç»§ç»­å¾€åæ¢ç´¢ç›¸åŒçš„å¤‡é€‰å•å…ƒã€‚è¿™ç§°ä¸ºäºŒæ¬¡èšé›†ã€‚ä¸‹é¢çš„åŒæ•£åˆ—å°†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»£ä»·æ˜¯è¦è®¡ç®—ä¸€ä¸ªé™„åŠ çš„æ•£åˆ—å‡½æ•°ã€‚</p>
<h3 id="5-4-3-åŒæ•£åˆ—">5.4.3 åŒæ•£åˆ—</h3>
<p>â€ƒâ€ƒåŒæ•£åˆ—ç®€å•æ¥è¯´å°±æ˜¯é‡‡å–ä¸¤ä¸ªæ•£åˆ—å‡½æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªæ•£åˆ—è®¡ç®—å…·ä½“çš„è½å…¥çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªæ•£åˆ—æ˜¯åœ¨å†²çªåï¼Œè¦ä»å†²çªçš„ä½ç½®ç§»åŠ¨çš„æ­¥é•¿ã€‚ä¾‹å¦‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mtext>Â Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â Â </mtext><mi>t</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">hash_1(x) = x \ \ mod \ \ tableSize</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span></span></span></span>ï¼ˆtableSizeå¿…é¡»ä¸ºç´ æ•°ï¼‰ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>R</mi><mo>âˆ’</mo><mo stretchy="false">(</mo><mi>x</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">hash_2(x) = R - (x \ mod \ R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span>ï¼Œï¼ˆRå¿…é¡»ä¸ºç´ æ•°ï¼‰ã€‚</p>
<p>â€ƒâ€ƒè¿™é‡Œå–tableSize = 10ï¼ˆè®¡ç®—æ–¹ä¾¿ï¼‰ï¼ŒR = 7ï¼ˆå°äºtableSize çš„ç´ æ•°ï¼‰ã€‚é¦–å…ˆ89å­˜å…¥ï¼Œä¸‹æ ‡9çš„ä½ç½®æ²¡æœ‰å†²çªï¼Œç›´æ¥å­˜å…¥ï¼Œä¸è®¡ç®—æ•£åˆ—å‡½æ•°2ã€‚å‡è®¾å†49æ’å…¥æ—¶è®¡ç®—æ•£åˆ—å‡½æ•°1ï¼Œå‘ç°æ’å…¥ä½ç½®9å‘ç”Ÿå†²çªï¼Œéœ€è¦è®¡ç®—æ•£åˆ—å‡½æ•°2ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>49</mn><mo stretchy="false">)</mo><mo>=</mo><mn>7</mn><mo>âˆ’</mo><mo stretchy="false">(</mo><mn>49</mn><mtext>Â </mtext><mi mathvariant="normal">%</mi><mtext>Â </mtext><mn>7</mn><mo stretchy="false">)</mo><mo>=</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">hash_2(49) = 7 - (49 \ \% \ 7) = 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">4</span><span class="mord">9</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">4</span><span class="mord">9</span><span class="mspace">Â </span><span class="mord">%</span><span class="mspace">Â </span><span class="mord">7</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span>ã€‚ä»9å¼€å§‹ï¼Œç§»åŠ¨7ä¸ªæ­¥é•¿ï¼Œæ‰€ä»¥ç§»åŠ¨åˆ°6çš„ä½ç½®ã€‚</p>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•£åˆ—å‡½æ•°ä¸åˆ†ç¦»é“¾æ¥æ³•</title>
    <url>/2022/04/10/%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0%E4%B8%8E%E5%88%86%E7%A6%BB%E9%93%BE%E6%8E%A5%E6%B3%95/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬äº”ç« 5.2ä¸5.3èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="5-1-æ•£åˆ—">5.1 æ•£åˆ—</h2>
<ol>
<li>
<p>ç†æƒ³çš„æ•£åˆ—æ˜¯åªåŒ…å«å›ºå®šå¤§å°çš„æ•°ç»„ï¼Œ</p>
</li>
<li>
<p>é€šå¸¸æŸ¥æ‰¾æ˜¯å¯¹æŸä¸ªæ•°æ®åŸŸè¿›è¡Œçš„ï¼Œè¿™éƒ¨åˆ†å«åšå…³é”®å­—(key)</p>
</li>
<li>
<p>æ¯ä¸ªå…³é”®å­—æŒ‰ç…§ä¸€å®šè§„åˆ™ï¼Œå‡åŒ€çš„æ˜ å°„åˆ°æ•´ä¸ªæ•°ç»„ä¸­ã€‚è¿™ä¸ªæ˜ å°„å«åšæ•£åˆ—å‡½æ•°</p>
</li>
</ol>
<div class="alert alert-info"><div class="icon"><i class="fa fa-info"></i></div><div class="text"><p>ä¼˜ç§€çš„æ•£åˆ—å‡½æ•°ï¼Œèƒ½å¤Ÿå°†æ˜ å°„å†²çªçš„å¯èƒ½æ€§é™ä½åˆ°æœ€å°</p>
</div></div>
<h2 id="5-2-æ•£åˆ—å‡½æ•°">5.2 æ•£åˆ—å‡½æ•°</h2>
<p>â€ƒâ€ƒå¦‚æœè¾“å…¥çš„å…³é”®å­—éƒ½æ˜¯æ•´æ•°ï¼Œåˆ™ä¸€èˆ¬çš„ç®€å•æ˜ å°„å‡½æ•°å°±æ˜¯ä½¿ç”¨<code>key % tableSize</code>ï¼Œç›´æ¥å–æ¨¡ã€‚åŒæ—¶ä¿è¯è¡¨çš„å¤§å°ä¸ºç´ æ•°ï¼Œæ˜¯ä¸€ä¸ªå¥½å¾—åšæ³•ã€‚ä½†æ˜¯é€šå¸¸å¾—å…³é”®å­—éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚åˆ™æ•£åˆ—å‡½æ•°æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥è€ƒè™‘ã€‚</p>
<h3 id="5-2-1-æ•£åˆ—å‡½æ•°å®ç°æ–¹æ¡ˆä¸€">5.2.1 æ•£åˆ—å‡½æ•°å®ç°æ–¹æ¡ˆä¸€</h3>
<blockquote>
<p>æŠŠå­—ç¬¦ä¸²å¾—ASCIIç æˆ–è€…Unicodeç çš„å€¼ç›¸åŠ ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(String key, <span class="type">int</span> tableSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">hashVal</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; key.length(); i++) &#123;</span><br><span class="line">        hashVal += key.charAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hashVal % tableSize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒä»¥ä¸Šå‡½æ•°ï¼Œå®ç°ç®€å•ï¼Œè®¡ç®—æ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœè¡¨å¾ˆå¤§ï¼Œåˆ™è¡¨çš„çš„é«˜ä½åˆ©ç”¨ç‡è¾ƒä½ï¼Œå¯¼è‡´å†²çªç‡å¢å¤§ã€‚<br>
å‡è®¾è¡¨çš„å¤§å°æ˜¯ä¸€ä¸ªç´ æ•°ï¼štableSize = 10007ï¼Œå¹¶å‡è®¾æ‰€æœ‰å…³é”®å­—è‡³å¤š8ä¸ªå­—ç¬¦(ASCIIå­—ç¬¦)ï¼Œåˆ™è¯¥æ•£åˆ—å‡½æ•°åªèƒ½è®¡ç®—å¾—åˆ° 0~1016ï¼ˆ127*8ï¼‰èŒƒå›´å†…çš„å€¼ã€‚ä¹‹åå¯¹tableSize è¿›è¡Œå–ä½™æ“ä½œï¼Œå¯¼è‡´1017ä¹‹åçš„æ•°æ˜¯ä¸€å®šå–ä¸åˆ°çš„ã€‚ä»è€Œåˆ†é…ä¸åˆ°é«˜ä½çš„æ•°ç»„ä¸Šå»ã€‚</p>
<div class="alert alert-info"><div class="icon"><i class="fa fa-info"></i></div><div class="text"><p>Javaçš„æ•£åˆ—è¡¨å¦‚HashMapç­‰åªä¼šè¿›è¡Œæ‰©å®¹ï¼Œå¹¶ä¸ä¼šç¼©å°æ•°ç»„ï¼Œå¦‚æœé‡‡ç”¨ASCIIç æ–¹æ¡ˆï¼ŒHashMapçš„æ•°ç»„æ‰©å®¹åï¼Œä½¿ç”¨ä¸æ»¡ï¼Œå¯èƒ½å¯¼è‡´ä¸Šè¿°çš„æƒ…å†µå‘ç”Ÿã€‚</p>
</div></div>
<h3 id="5-2-2-æ•£åˆ—å‡½æ•°å®ç°æ–¹æ¡ˆäºŒ">5.2.2 æ•£åˆ—å‡½æ•°å®ç°æ–¹æ¡ˆäºŒ</h3>
<blockquote>
<p>å‡è®¾keyè‡³å°‘æœ‰ä¸‰ä¸ªå­—ç¬¦ï¼Œåªè€ƒå¯Ÿå‰ä¸‰ä¸ªå­—ç¬¦ï¼Œå°†ASCIIç ä¹˜èµ·æ¥å¾—åˆ°ä¸€ä¸ªæ•´æ•°</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hash2</span><span class="params">(String key, <span class="type">int</span> tableSize)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (key.charAt(<span class="number">0</span>) + <span class="number">27</span> * key.charAt(<span class="number">1</span>) + <span class="number">27</span> * <span class="number">27</span> * key.charAt(<span class="number">2</span>)) % tableSize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒå€¼27è¡¨ç¤ºASCIIå­—ç¬¦åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦å°±æ˜¯æœ¬æ¥çš„å€¼ï¼Œç¬¬äºŒä¸ªå­—ç¬¦æ˜¯27 * åŸå€¼ï¼Œç¬¬ä¸‰ä¸ªå­—ç¬¦æ˜¯27*27*åŸå€¼ã€‚å‡è®¾åœ¨å®Œå…¨éšæœºçš„æƒ…å†µä¸‹ï¼Œåˆ™3ä¸ªå­—ç¬¦çš„ç»„åˆæœ‰19683ç§ç»„åˆçš„å¯èƒ½ã€‚å¤§äºtableSize = 10007ï¼Œåˆ™å¯ä»¥å‡åŒ€åˆ†å¸ƒã€‚ä½†æ˜¯å•è¯æ˜¯æœ‰ä¸€å®šè§„å¾‹çš„ï¼Œå¹¶ä¸æ˜¯å‡åŒ€åˆ†å¸ƒçš„ã€‚æ ¹æ®ç»Ÿè®¡å•è¯çš„å‰ä¸‰ä¸ªå­—æ¯åªæœ‰2851ç§ç»„åˆï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•è¿˜æ˜¯ä¸é€‚åˆã€‚</p>
<div class="alert alert-info"><div class="icon"><i class="fa fa-info"></i></div><div class="text"><p>Javaçš„HashMapçš„æ•°ç»„æœ€å¤§ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>30</mn></msup></mrow><annotation encoding="application/x-tex">2^{30}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå¦‚æœé‡‡ç”¨è¿™ç§æ–¹æ¡ˆï¼Œæœ€å¤§å¯èƒ½éœ€è¦æ‰€æœ‰è®¡ç®—å’Œå¤§äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>30</mn></msup></mrow><annotation encoding="application/x-tex">2^{30}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>çš„æƒ…å†µï¼Œéœ€è¦7ä½çš„æƒ…å†µã€‚</p>
</div></div>
<h3 id="5-2-3-æ•£åˆ—å‡½æ•°å®ç°æ–¹æ¡ˆä¸‰">5.2.3 æ•£åˆ—å‡½æ•°å®ç°æ–¹æ¡ˆä¸‰</h3>
<blockquote>
<p>æ‰€æœ‰å­—ç¬¦å‚ä¸è®¡ç®—ï¼Œè®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>k</mi><mi>e</mi><mi>y</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mi>K</mi><mi>e</mi><mi>y</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>âˆ—</mo><mn>3</mn><msup><mn>7</mn><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">\sum_{i=0}^{keySize - 1} Key[i]* 37^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2887179999999998em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9890079999999999em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029000000000005em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mathdefault mtight">e</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.824664em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord"><span class="mord">7</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span>ï¼Œä½¿ç”¨horneræ³•åˆ™ è®¡ç®—ä¸€ä¸ª37çš„næ¬¡å¤šé¡¹å¼,37æ˜¯ä¸€ä¸ªè´¨æ•°ã€‚</p>
</blockquote>
<p>â€ƒâ€ƒæ ¹æ®horneræ³•åˆ™è®¡ç®—ä¸€ä¸ª37çš„å¤šé¡¹å¼ï¼šä¾‹å¦‚ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>k</mi></msub><mo>=</mo><msub><mi>k</mi><mn>0</mn></msub><mo>+</mo><mn>37</mn><msub><mi>k</mi><mn>1</mn></msub><mo>+</mo><mn>3</mn><msup><mn>7</mn><mn>2</mn></msup><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">h_k = k_0 + 37k_1 + 37^{2}k_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord">3</span><span class="mord">7</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.964108em;vertical-align:-0.15em;"></span><span class="mord">3</span><span class="mord"><span class="mord">7</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œåˆ™æ ¹æ®horneræ³•åˆ™å¯ä»¥è½¬ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>k</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>âˆ—</mo><mn>37</mn><mo>+</mo><msub><mi>k</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>âˆ—</mo><mn>37</mn><mo>+</mo><msub><mi>k</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">h_k = ((k_2) * 37 + k_1)*37 + k_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå¯ä»¥ç®€åŒ–è®¡ç®—å¤æ‚åº¦ã€‚å°†å…¶æ‰©å±•åˆ°né¡¹å¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hash3</span><span class="params">(String key, <span class="type">int</span> tableSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">hashVal</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; key.length(); i++) &#123;</span><br><span class="line">        hashVal += <span class="number">37</span> * hashVal + key.charAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    hashVal %= tableSize;</span><br><span class="line">    <span class="comment">// hashValå¯èƒ½ä¼šå­˜åœ¨intæº¢å‡ºçš„é—®é¢˜ï¼Œå¯¼è‡´ä¸ºè´Ÿæ•°ï¼Œå› ä¸ºå–ä½™tableSizeåï¼Œåˆ™hashValç»å¯¹å€¼ä¸€å®šå°äºtableSizeï¼Œç›¸åŠ å°†å…¶å˜æ­£å³å¯</span></span><br><span class="line">    <span class="keyword">if</span> (hashVal &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">        hashVal += tableSize;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hashVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒæ”¹æ•£åˆ—å‡½æ•°åŸºæœ¬å¯ç”¨ï¼Œä¸”å®ç°ç®€å•ã€‚ä½†æ˜¯å¦‚æœå…³é”®å­—ç‰¹åˆ«é•¿ï¼Œåˆ™è®¡ç®—è€—æ—¶ç‰¹åˆ«å¤šï¼Œä¸€ä¸ªè¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•æ˜¯åªå–å¥‡æ•°ä½ç½®çš„å­—ç¬¦ä¸²è¿›è¡Œè®¡ç®—ã€‚ä¸èƒ½åªå–éƒ¨åˆ†çš„åŸå› æ˜¯ï¼Œä¾‹å¦‚åœ°å€ä¹‹ç±»çš„ï¼Œå‰åŠéƒ¨åˆ†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<h2 id="5-3-å“ˆå¸Œå†²çªä¹‹åˆ†ç¦»é“¾æ¥æ³•">5.3 å“ˆå¸Œå†²çªä¹‹åˆ†ç¦»é“¾æ¥æ³•</h2>
<blockquote>
<p>å°†æ•£åˆ—åˆ°æ•°ç»„åŒä¸€ä¸ªä½ç½®ä¸Šçš„æ‰€æœ‰å…ƒç´ éƒ½ä¿ç•™åˆ°åŒä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚å¹¶è¿æ¥åˆ°æ•°ç»„å¯¹åº”ä¸‹æ ‡ä¸Šçš„ä½ç½®(æ•°ç»„ä¸­å¹¶ä¸å­˜å‚¨å…ƒç´ ï¼Œåªå­˜å‚¨äºåˆ—è¡¨)</p>
</blockquote>
<h3 id="5-3-1-å…·ä½“æ“ä½œ">5.3.1 å…·ä½“æ“ä½œ</h3>
<p>â€ƒâ€ƒä¸ºç®€åŒ–æ“ä½œï¼Œè¿™é‡Œå‡è®¾å…³é”®å­—æ˜¯å‰10ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼Œå¹¶å‡è®¾æ•£åˆ—å‡½æ•°æ˜¯hash(x) = x mod 10ï¼ˆè¡¨çš„å¤§å°ä¸æ˜¯ç´ æ•°(æ˜¯10)ï¼Œè¿™é‡Œæ˜¯ä¸ºç®€åŒ–æ“ä½œï¼‰ã€‚<br>
<img src="/2022/04/10/%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0%E4%B8%8E%E5%88%86%E7%A6%BB%E9%93%BE%E6%8E%A5%E6%B3%95/åˆ†ç¦»é“¾æ¥æ•£åˆ—è¡¨.png" alt="åˆ†ç¦»é“¾æ¥æ•£åˆ—è¡¨" style="zoom:80%;"><br>
â€ƒâ€ƒå…ˆè®¡ç®—å‡ºhashï¼Œç¡®å®šåº”è¯¥æ˜¯æ•°ç»„çš„å“ªä¸ªä¸‹æ ‡çš„ä½ç½®ï¼Œç„¶åéå†è¯¥ä¸‹æ ‡çš„é“¾è¡¨ã€‚å¦‚æœæ‰§è¡Œæ’å…¥ï¼Œåˆ™æŸ¥çœ‹å½“å‰æ’å…¥çš„å…ƒç´ æ˜¯å¦å·²ç»åœ¨é“¾è¡¨ä¸Šï¼Œä¸åœ¨åˆ™å°†å€¼æ’å…¥åˆ°é“¾è¡¨å¤´(æœ€è¿‘æ“ä½œçš„å€¼ï¼Œåœ¨æœªæ¥çš„ä½¿ç”¨æ¦‚ç‡è¶Šå¤§ï¼Œå¯ä»¥åŠ å¿«æŸ¥æ‰¾)ã€‚</p>
<div class="alert alert-info"><div class="icon"><i class="fa fa-info"></i></div><div class="text"><p>Jdk8çš„hashMapä»ä¹‹å‰çš„å¤´æ’æ³•æ”¹ä¸ºå°¾æ’æ³•ï¼Œæ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸‹ï¼ŒhashMapæ‰©å®¹æ—¶rehashæ—¶å¯¼è‡´çš„é“¾è¡¨æˆç¯çš„é—®é¢˜(å¹¶å‘è¯·ç”¨correntHashMap)ã€‚jdk8åŠä¹‹åæ”¹ä¸ºäº†å°¾æ’æ³•ã€‚</p>
</div></div>
<p>â€ƒâ€ƒæœ¬æ¬¡å®ç°çš„å¯¹è±¡ï¼Œå¿…é¡»å®ç°equalsæ–¹æ³•äºhashCodeæ–¹æ³•ã€‚hashCodeç”¨æ¥è®¡ç®—åˆ¤æ–­åº”è¯¥é“¾åœ¨å“ªæ¡é“¾è¡¨ä¸‹ï¼Œequalsç”¨äºåœ¨hsahå†²çªååˆ¤æ–­æ˜¯å¦æ—¶åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªå®ç°ã€‚</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>é“¾æ¥æ³•çš„å¤§éƒ¨åˆ†å®ç°</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SeparateChainingHashTable</span>&lt;AnyType&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_TABLE_SIZE</span> <span class="operator">=</span> <span class="number">101</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Listæ•°ç»„,æ•°ç»„çš„æ¯ä¸ªä½ç½®å‡†å‡ºList(é“¾è¡¨)ï¼Œå°±æ˜¯ä¹‹å‰è¯´çš„hashè¡¨çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     * ä½ç½®ä¸Šçš„é“¾è¡¨ï¼Œå°±æ˜¯é“¾æ¥ä¸Šå»çš„é“¾è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;AnyType&gt;[] theLists;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ— å‚æ„é€ è°ƒç”¨æœ‰å‚æ„é€ ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SeparateChainingHashTable</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// thisæŒ‡ä»£æœ¬ç±»ï¼Œç±»å()å°±æ˜¯æ„é€ æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>(DEFAULT_TABLE_SIZE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°ç»„é“¾è¡¨çš„æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SeparateChainingHashTable</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æŒ‡å®šé•¿åº¦çš„é“¾è¡¨æ•°ç»„</span></span><br><span class="line">        theLists = <span class="keyword">new</span> <span class="title class_">LinkedList</span>[nextPrime(size)];</span><br><span class="line">        <span class="comment">// ç»™æ•°ç»„ä¸Šçš„æ¯ä¸€ä¸ªä½ç½®åˆ›å»ºé“¾è¡¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; theLists.length; i++) &#123;</span><br><span class="line">            theLists[i] = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡ç®—hashå€¼ï¼Œå¹¶è®¡ç®—å‡ºåº”è¯¥æ’å…¥æ•°ç»„ä¸Šçš„å“ªä¸ªä¸‹æ ‡çš„é“¾è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦è®¡ç®—æ’å…¥ä½ç½®çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¦æ’å…¥ä½ç½®çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">myHash</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">hashVal</span> <span class="operator">=</span> x.hashCode();</span><br><span class="line">        hashVal %= theLists.length;</span><br><span class="line">        <span class="keyword">if</span> (hashVal &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            hashVal += theLists.length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hashVal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰©å®¹å¹¶è¿›è¡ŒreHash</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">reHash</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;AnyType&gt;[] oldLists = theLists;</span><br><span class="line">        <span class="comment">// newåˆ›å»ºçš„æ–°çš„list</span></span><br><span class="line">        theLists = <span class="keyword">new</span> <span class="title class_">List</span>[nextPrime(<span class="number">2</span> * theLists.length)];</span><br><span class="line">        <span class="comment">// åˆ›å»ºé“¾è¡¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; theLists.length; j++) &#123;</span><br><span class="line">            theLists[j] = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰oldListä¸­çš„å…ƒç´ æ’å…¥æ–°çš„List</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; oldLists.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (AnyType item : oldLists[i]) &#123;</span><br><span class="line">                insert(item);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x å¾…æ’å…¥çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–xåº”è¯¥æ’å…¥çš„é‚£ä¸ªé“¾è¡¨</span></span><br><span class="line">        List&lt;AnyType&gt; whichList = theLists[myHash(x)];</span><br><span class="line">        <span class="keyword">if</span> (!whichList.contains(x)) &#123;</span><br><span class="line">            whichList.add(x);</span><br><span class="line">            <span class="comment">// æ¯æ’å…¥ä¸€ä¸ªå…ƒç´ currentSizeå°±ä¼šåŠ 1ï¼Œå½“currentSizeå¤§äºæ•°ç»„é•¿åº¦åï¼Œå°±ä¼šrehashæ‰©å®¹</span></span><br><span class="line">            currentSize += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (currentSize &gt; theLists.length) &#123;</span><br><span class="line">                reHash();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ•´ä¸ªæ•°ç»„é“¾è¡¨æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦æŸ¥è¯¢çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueå¦‚æœåŒ…å«</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="comment">// è®¡ç®—åœ¨é‚£æ¡é“¾è¡¨</span></span><br><span class="line">        List&lt;AnyType&gt; whichList = theLists[myHash(x)];</span><br><span class="line">        <span class="keyword">return</span> whichList.contains(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å…ƒç´ x</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x å¾…åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        List&lt;AnyType&gt; whichList = theLists[myHash(x)];</span><br><span class="line">        <span class="keyword">if</span> (whichList.contains(x)) &#123;</span><br><span class="line">            whichList.remove(x);</span><br><span class="line">            currentSize--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; theLists.length; i++) &#123;</span><br><span class="line">            theLists[i].clear();</span><br><span class="line">        &#125;</span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<blockquote>
<p>è£…å¡«å› å­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">Î»</span></span></span></span>ï¼šæ•£åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ä¸æ•°ç»„å¤§å°çš„æ¯”å€¼</p>
</blockquote>
<p>â€ƒâ€ƒä¸Šä¾‹çš„è£…å¡«å› å­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">Î»</span></span></span></span>=1.0ï¼Œé“¾è¡¨çš„å¹³å‡é•¿åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">Î»</span></span></span></span>(è®¡ç®—æ–¹æ³•å¦‚ä¸Šå®šä¹‰ï¼Œå¹³å‡æ¯ä¸ªåˆ—è¡¨æœ‰å¤šå°‘ä¸ªå…ƒç´ )ï¼Œä¸€æ¬¡å¹³å‡æŸ¥æ‰¾éœ€è¦1+<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">\lambda / 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">Î»</span><span class="mord">/</span><span class="mord">2</span></span></span></span>ã€‚ç”±æ­¤å¯ä»¥å¾—å‡ºï¼Œè¡¨å¤§å°å¯¹æŸ¥æ‰¾æ•ˆç‡åŸºæœ¬æ— å½±å“ï¼Œå½±å“è¾ƒå¤§çš„æ˜¯è£…å¡«å› å­ã€‚åˆ†ç¦»æ•£åˆ—çš„ä¸€èˆ¬åšæ³•æ˜¯è®©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">Î»</span></span></span></span> = 1ï¼Œ</p>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Debian11å®‰è£…playwrightä¾èµ–ç¼ºå¤±é—®é¢˜è§£å†³</title>
    <url>/2022/04/10/Debian11%E5%AE%89%E8%A3%85playwright%E4%BE%9D%E8%B5%96%E7%BC%BA%E5%A4%B1%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<p>æœ€è¿‘çš„åœ¨Debian11ç³»ç»Ÿä¸Šå®‰è£…playwrightæ—¶å‡ºç°å®‰è£…é—®é¢˜ï¼Œç½‘ä¸Šçš„è§£å†³æ–¹æ¡ˆè¾ƒå°‘(å‡ ä¹æ²¡æœ‰)ï¼Œæœ¬ç¯‡æ–‡ç« æ˜¯è®°å½•æˆ‘è§£å†³æ–¹æ¡ˆçš„æ­¥éª¤ã€‚</p>
<span id="more"></span>
<p>æœ¬ç¯‡æ–‡ç« å†™äº2022å¹´04æœˆï¼Œä»¥ä¸‹åªé’ˆå¯¹å½“æ—¶æƒ…å†µã€‚</p>
<p>â€ƒâ€ƒå¼€å§‹æŒ‰ç…§æç¤ºï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…playwrightï¼ˆpythonç¯å¢ƒä¸‹ï¼Œpy3 &gt; 3.7ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install playwright</span><br></pre></td></tr></table></figure>
<p><img src="/2022/04/10/Debian11%E5%AE%89%E8%A3%85playwright%E4%BE%9D%E8%B5%96%E7%BC%BA%E5%A4%B1%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/161674660-f07c3c5c-e1dd-43fa-a673-39508f8da4dc.png" alt></p>
<p>åœ¨å®‰è£…åå¯åŠ¨ç¨‹åºï¼ŒæŠ¥å‡ºinstall-depså‡ºç°é—®é¢˜ï¼Œäºæ˜¯è·Ÿç€æç¤ºæ‰§è¡Œå®‰è£…install-depsã€‚<br>
<img src="/2022/04/10/Debian11%E5%AE%89%E8%A3%85playwright%E4%BE%9D%E8%B5%96%E7%BC%BA%E5%A4%B1%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/161674718-b2a6d99f-3aa3-4bcd-8d06-6c74f849ae15.png" style="zoom:80%;"></p>
<p>å¦‚å›¾æ¥ç€æŠ¥å‡ºä¾èµ–ç¼ºå¤±é—®é¢˜ï¼Œåœ¨ä»“åº“æ— æ³•å®šä½åˆ°å‡ ä¸ªåŒ…ã€‚æ¥ç€æŸ¥é˜…å®˜æ–¹èµ„æ–™ï¼Œå‘ç°å®˜æ–¹å¯¹äºlinuxç³»ç»Ÿï¼Œåªä¸»åŠ¨æ”¯æŒäº†Ubuntu 18.04 and Ubuntu 20.04ã€‚<a href="https://playwright.dev/docs/library#system-requirements">Playwrightç³»ç»Ÿè¦æ±‚å®˜æ–¹æ–‡æ¡£</a><br>
â€ƒâ€ƒæ¥ç€åœ¨å¦ä¸€ä¸ªä»“åº“ä¸‹çš„issueä¸‹æ‰¾åˆ°å¦‚ä¸‹issueï¼š<a href="https://github.com/brillout/vite-plugin-ssr/issues/283">Debian not supported by playwright Â· Issue #283</a>ï¼ŒæŒ‰ç…§å…¶è§£å†³æ–¹æ¡ˆï¼Œ<code>libjpeg-turbo8</code> å’Œ <code>libicu66</code>è¿™ä¸¤ä¸ªè½¯ä»¶åŒ…ä¸å­˜åœ¨debianå®˜æ–¹ä»“åº“ä¸­ï¼Œéœ€è¦å»ä¸‹è½½ubuntuçš„è½¯ä»¶åŒ…ï¼Œç„¶åæ‰‹åŠ¨å®‰è£…ã€‚å³å¯è§£å†³ï¼Œå…·ä½“è§£å†³æ­¥éª¤å¦‚ä¸‹ï¼š<br>
æœ¬äººä½¿ç”¨çš„æ˜¯Debian11ï¼Œä¸‹è½½çš„æ˜¯ubuntu20çš„è½¯ä»¶å®‰è£…åŒ…ã€‚</p>
<ol>
<li>åœ¨pkgs.orgä¸‹è½½<a href="https://pkgs.org/download/libjpeg-turbo8">libjpeg-turbo8_2.0.3-0ubuntu1_amd64.deb</a></li>
<li>åœ¨pkgs.orgä¸‹è½½<a href="https://pkgs.org/download/libicu66">libicu66_66.1-2ubuntu2_amd64.deb</a></li>
<li>æ‰‹åŠ¨æ‰§è¡Œ<code>dpkg -i &lt;package&gt;.deb</code>å‘½ä»¤å®‰è£…</li>
<li>å†é‡æ–°å®‰è£…<code>playwright install-deps</code>å³å¯å®‰è£…æˆåŠŸ</li>
</ol>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>debian</tag>
      </tags>
  </entry>
  <entry>
    <title>floydåˆ¤åœˆç®—æ³•</title>
    <url>/2022/03/26/floyd%E5%88%A4%E5%9C%88%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>floydåˆ¤åœˆç®—æ³•ï¼ˆé¾Ÿå…”èµ›è·‘ç®—æ³•ï¼‰ç®€ä»‹</p>
<span id="more"></span>
<blockquote>
<p>floydç®—æ³•åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯<br>
floydç®—æ³•è®¡ç®—ç¯çš„é•¿åº¦<br>
floydç®—æ³•å¯»æ‰¾ç¯çš„èµ·ç‚¹</p>
</blockquote>
<p>â€ƒâ€ƒfloydç®—æ³•ä¸»è¦åŸºäºä¸¤ä¸ªå¿«æ…¢æŒ‡é’ˆï¼Œä¸€ä¸ªæ…¢æŒ‡é’ˆslowï¼Œå¿«æŒ‡é’ˆfastã€‚æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨1ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨2ã€‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)</p>
<h2 id="1-åˆ¤æ–­æ˜¯å¦æœ‰ç¯">1 åˆ¤æ–­æ˜¯å¦æœ‰ç¯</h2>
<p>â€ƒâ€ƒæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼Œè‹¥fastæŒ‡å‘çš„å¯¹è±¡ä¸slowæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¯´æ˜æœ‰ç¯ã€‚<br>
è¯æ˜ï¼šåè¯æ³•:<br>
â€ƒâ€ƒå¦‚æœæ²¡æœ‰ç¯ï¼Œåˆ™slowæŒ‡é’ˆæ°¸è¿œä¸å¯èƒ½è¿½ä¸ŠfastæŒ‡é’ˆï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚(æ­¤è¶³ä»¥è¯æ˜æœ‰ç¯)</p>
<p>é—®é¢˜2ï¼šfastæŒ‡é’ˆä¼šè¶Šè¿‡slowæŒ‡é’ˆä¸ç›¸é‡å—ï¼Ÿä»è€Œå¢åŠ æ—¶é—´å¤æ‚åº¦ï¼Ÿ<br>
â€ƒâ€ƒä¸å¯èƒ½ã€‚å‡è®¾fastè¶Šè¿‡slowï¼Œåˆ™slow = k + 1ï¼Œ fast = k + 2, ä»è€Œé”™è¿‡ï¼Œå¾€å‰æ¨ä¸€æ­¥å¯çŸ¥ï¼Œä»–ä»¬å¿…å®šåœ¨kçš„ä½ç½®ç›¸é‡ã€‚</p>
<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(N)ï¼Œåœ¨æ…¢æŒ‡é’ˆæœªèµ°å®Œä¸€åœˆçš„æ—¶å€™ï¼Œå¿«æ…¢æŒ‡é’ˆå¿…å®šèƒ½ç›¸é‡ã€‚(å¦‚æœæ— ç¯ï¼Œåˆ™O(N)ä¸å¿…è¯æ˜)<br>
è¯æ˜ï¼š</p>
<ol>
<li>å¿«æŒ‡é’ˆquickå…¥ç¯ã€‚ä¹‹åï¼Œç»è¿‡ä¸€æ®µæ­¥éª¤ï¼Œæ…¢æŒ‡é’ˆåˆ°è¾¾ç¯çš„èµ·ç‚¹ï¼Œå‡†å¤‡å…¥ç¯ã€‚</li>
<li>æ­¤æ—¶ï¼Œå‡è®¾å¿«æŒ‡é’ˆè·ç¦»æ…¢æŒ‡é’ˆxï¼Œå¦‚æœåœ¨èµ·ç‚¹ç›¸é‡ï¼Œåˆ™x=0</li>
<li>è®¾ç¯çš„å‘¨é•¿ä¸ºLï¼Œé‚£ä¹ˆä¹‹åå°±æ˜¯å¿«æŒ‡é’ˆè¿½èµ¶æ…¢æŒ‡é’ˆï¼Œè¿½èµ¶è·ç¦»ä¸ºL-x</li>
<li>å¿«æŒ‡é’ˆçš„é€Ÿåº¦ä¸ºæ¯æ¬¡2ä¸ªè·ç¦»ï¼Œæ…¢æŒ‡é’ˆä¸ºæ¯æ¬¡ä¸€ä¸ªè·ç¦»ï¼Œåˆ™å¿«æŒ‡é’ˆæ¯æ¬¡è¿½èµ¶2-1ä¸ªè·ç¦»ï¼Œé‚£ä¹ˆéœ€è¦è¿½èµ¶(2-1) * (L-x) = L-xæ­¥ã€‚</li>
<li>åœ¨è¿½èµ¶L-xæ­¥çš„æ—¶é—´é‡Œï¼Œæ…¢æŒ‡é’ˆèµ°äº†L-xçš„è·ç¦»ï¼Œç”±äºx&gt;=0ï¼Œæ‰€ä»¥åœ¨æ…¢æŒ‡é’ˆæœ€å¤šèµ°å®Œä¸€åœˆ(L)çš„è·ç¦»æ—¶ï¼Œå¿…å®šå·²ç»ç›¸é‡ã€‚</li>
</ol>
<p><a href="https://leetcode-cn.com/problems/happy-number/">202. å¿«ä¹æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>ã€(<a href="https://leetcode-cn.com/problems/find-the-duplicate-number/">287. å¯»æ‰¾é‡å¤æ•° - åŠ›æ‰£ï¼ˆLeetCode)</a>)<br>
â€ƒâ€ƒå¦‚æœæ˜¯å¿«ä¹æ•°ï¼Œåˆ™æœ€åä¼šå˜ä¸º1ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¼šè¿›å…¥å‡ ä¸ªæ•°çš„å¾ªç¯ã€‚å› æ­¤ä¸ä¸º1æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰ç¯å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isHappy</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">slowNum</span> <span class="operator">=</span> n;</span><br><span class="line">        <span class="type">int</span> <span class="variable">quickNum</span> <span class="operator">=</span> getNextValue(n);</span><br><span class="line">        <span class="comment">// è¿™é‡Œç”¨quickNum != slowNum ä½œä¸ºå‡ºå¾ªç¯æ¡ä»¶ï¼Œæ— è®ºæ˜¯éƒ½ä¸º1ï¼Œè¿˜æ˜¯æœ‰ç¯éƒ½å¯ä»¥è·³å‡ºå¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (quickNum != slowNum) &#123;</span><br><span class="line">            slowNum = getNextValue(slowNum);</span><br><span class="line">            quickNum = getNextValue(getNextValue(quickNum));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">return</span> <span class="variable">quickNum</span> <span class="operator">=</span>= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNextValue</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            res += (num % <span class="number">10</span>) * (num % <span class="number">10</span>);</span><br><span class="line">            num = num / <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-æ±‚ç¯çš„é•¿åº¦">2 æ±‚ç¯çš„é•¿åº¦</h2>
<p>â€ƒâ€ƒå½“slowå’Œfastç›¸é‡åï¼Œslowå’Œfastå¿…å®šåœ¨ç¯ä¸Šï¼Œåªè¦è®©å…¶ä¸­ä¸€ä¸ªä¸åŠ¨ï¼Œå¦ä¸€ä¸ªç»§ç»­èµ°ï¼Œå¹¶è®¡æ•°ï¼Œç›´åˆ°ä¸¤è€…å†æ¬¡ç›¸é‡ï¼Œåˆ™å¯ä»¥å¾—åˆ°ç¯çš„é•¿åº¦</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">circleLen</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">slowNum</span> <span class="operator">=</span> n;</span><br><span class="line">        <span class="type">int</span> <span class="variable">quickNum</span> <span class="operator">=</span> getNextValue(n);</span><br><span class="line">        <span class="comment">// è¿™é‡Œç”¨quickNum != slowNum ä½œä¸ºå‡ºå¾ªç¯æ¡ä»¶ï¼Œæ— è®ºæ˜¯éƒ½ä¸º1ï¼Œè¿˜æ˜¯æœ‰ç¯éƒ½å¯ä»¥è·³å‡ºå¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (quickNum != slowNum) &#123;</span><br><span class="line">            slowNum = getNextValue(slowNum);</span><br><span class="line">            quickNum = getNextValue(getNextValue(quickNum));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å‡ºå¾ªç¯åˆ™ quickNum == slowNum</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        slowNum = getNextValue(slowNum);</span><br><span class="line">        <span class="keyword">while</span> (slowNum != quickNum) &#123;</span><br><span class="line">           	slowNum = getNextValue(slowNum);</span><br><span class="line">            len++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNextValue</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            res += (num % <span class="number">10</span>) * (num % <span class="number">10</span>);</span><br><span class="line">            num = num / <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-æ±‚ç¯çš„èµ·ç‚¹">3. æ±‚ç¯çš„èµ·ç‚¹</h2>
<img src="/2022/03/26/floyd%E5%88%A4%E5%9C%88%E7%AE%97%E6%B3%95/æœ‰ç¯é“¾è¡¨.png" alt="æœ‰ç¯é“¾è¡¨" style="zoom:80%;">
<p>å¦‚å›¾ä¸ºä¸€ä¸ªæœ‰ç¯é“¾è¡¨ï¼Œå¯¹äºè¯¥é“¾è¡¨æœ‰å¦‚ä¸‹å®šä¹‰ï¼š</p>
<ul>
<li>Aä¸ºç¯çš„èµ·ç‚¹ï¼ŒSä¸ºé“¾è¡¨çš„èµ·ç‚¹ï¼ŒBä¸ºslowä¸quickæŒ‡é’ˆç›¸é‡çš„ç‚¹ã€‚mä¸ºSåˆ°Açš„è·ç¦»ï¼Œnä¸ºAåˆ°Bçš„è·ç¦»</li>
<li>slowæŒ‡é’ˆèµ°è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹ä¸ºiï¼Œåˆ™quickæŒ‡é’ˆå¿…å®šèµ°è¿‡èŠ‚ç‚¹2iã€‚å› ä¸ºquickçš„é€Ÿåº¦æ˜¯slowçš„2å€ã€‚</li>
</ul>
<p>åˆ™æœ‰ï¼š</p>
<ol>
<li>å¯¹äºslowæŒ‡é’ˆï¼ši = m + n + aL   (aä¸ºslowèµ°è¿‡ç¯çš„åœˆæ•°ï¼ŒLä¸ºç¯çš„èŠ‚ç‚¹æ€»æ•°)</li>
<li>å¯¹äºquickæŒ‡é’ˆï¼š2i = m + n + bL   (bä¸ºquickèµ°è¿‡çš„åœˆæ•°ï¼ŒLåŒä¸Š)</li>
<li>ç¬¬2ç‚¹ - ç¬¬1ç‚¹åˆ™æœ‰ï¼ši = (b-a)Lï¼Œ åˆ™i å¿…å®šä¸ºLçš„æ•´æ•°å€ã€‚</li>
<li>å¸¦å…¥ç¬¬1ç‚¹åˆ™æœ‰ï¼šm + n = (b - 2a) Lï¼Œåˆ™m + n å¿…å®šä¸ºLçš„æ•´æ•°å€(b, aä¸ºæ•´æ•°ï¼Œä¸”m+n &gt; 0, æ‰€ä»¥æœ‰ b-2a &gt; 0)ï¼Œ<strong>m+næ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¯</strong>ã€‚</li>
<li>æ‰€ä»¥å½“ä»Bç‚¹ç»§ç»­èµ°mæ­¥ï¼Œåˆ™å¿…å®šåœåœ¨Aç‚¹ï¼ˆå› ä¸º4ï¼Œm+næ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¯ï¼‰ã€‚</li>
<li>ä½†æ˜¯mæ˜¯å¤šå¤§ï¼Œä¸æ¸…æ¥šã€‚æ­¤æ—¶ï¼Œåªéœ€è¦ä¸€ä¸ªæŒ‡é’ˆä»Sç‚¹å‡ºå‘ï¼Œå¦ä¸€ä¸ªä»Bå‡ºå‘ã€‚å¦‚æœèµ°äº†mï¼ŒSå¿…å®šåˆ°è¾¾Aç‚¹ï¼ŒBä¹Ÿå¿…å®šåˆ°è¾¾Aç‚¹ï¼Œåˆ™å½“ä¸¤ä¸ªæŒ‡é’ˆç¬¬ä¸€æ¬¡ç›¸é‡çš„æ—¶å€™ï¼Œå°±æ˜¯èµ·ç‚¹Aã€‚æˆ‘ä»¬å°±ä¸éœ€è¦å¤„ç†mçš„é—®é¢˜äº†ã€‚</li>
</ol>
<p><a href="https://leetcode-cn.com/problems/linked-list-cycle-ii/">142. ç¯å½¢é“¾è¡¨ II(LeetCode)</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123;</span></span><br><span class="line"><span class="comment"> *         val = x;</span></span><br><span class="line"><span class="comment"> *         next = null;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">detectCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="comment">// å½“æ²¡æœ‰èŠ‚ç‚¹æˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¿…å®šæ²¡æœ‰ç¯</span></span><br><span class="line">        <span class="keyword">if</span> (head== <span class="literal">null</span> || getNext(head) == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ…¢æŒ‡é’ˆ</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">slowNode</span> <span class="operator">=</span> getNext(head);</span><br><span class="line">        <span class="comment">// å¿«æŒ‡é’ˆ</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">quickNode</span> <span class="operator">=</span> getNext(getNext(head));</span><br><span class="line">        <span class="comment">// å¦‚æœæœ‰èŠ‚ç‚¹ä¸ºnullï¼Œåˆ™è¯´æ˜èƒ½èµ°åˆ°æœ«å°¾ï¼Œåˆ™å¿…å®šæ— ç¯ï¼Œæ­¤æ—¶ç›´æ¥è·³å‡ºå¾ªç¯ï¼Œæˆ–è€…åœ¨ç¯å†…ç›¸é‡ï¼Œä¹Ÿè·³å‡ºå¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (slowNode != <span class="literal">null</span> &amp;&amp; quickNode != <span class="literal">null</span> &amp;&amp; getNext(quickNode) != <span class="literal">null</span> &amp;&amp; getNext(getNext(quickNode)) != <span class="literal">null</span> &amp;&amp; slowNode != quickNode) &#123;</span><br><span class="line">            slowNode = getNext(slowNode);</span><br><span class="line">            quickNode = getNext(getNext(quickNode));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ‰èŠ‚ç‚¹èµ°åˆ°æœ«å°¾ï¼Œåˆ™è¯´æ˜æ— ç¯ï¼Œ</span></span><br><span class="line">        <span class="keyword">if</span> (quickNode == <span class="literal">null</span> || getNext(quickNode) == <span class="literal">null</span> || getNext(getNext(quickNode)) == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†æ…¢æŒ‡é’ˆç½®äºé“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œå†æ¬¡ç›¸é‡ï¼Œåˆ™ä¸ºèµ·ç‚¹</span></span><br><span class="line">        slowNode = head;</span><br><span class="line">        <span class="keyword">while</span> (slowNode != quickNode) &#123;</span><br><span class="line">            slowNode = getNext(slowNode);</span><br><span class="line">            quickNode = getNext(quickNode);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> quickNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">getNext</span><span class="params">(ListNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> node.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šæ­¤é¢˜ä¹Ÿå¯ä»¥ç”¨å“ˆå¸Œè¡¨åšï¼Œç”¨ä¸€ä¸ªæŒ‡é’ˆéå†ï¼Œå°†èµ°è¿‡çš„èŠ‚ç‚¹å­˜å‚¨èµ·æ¥ï¼Œå¦‚æœæœ‰ç¯ï¼Œåˆ™å“ˆå¸Œè¡¨ä¸­å¿…å®šèƒ½æ‰¾åˆ°è¿™ä¸ªç‚¹ï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡æ‰¾åˆ°çš„ç‚¹å°±ä¸ºèµ·ç‚¹ï¼ˆå› ä¸ºç¯çš„èµ·ç‚¹åœ¨å‰é¢ï¼‰ã€‚å¦‚æœåˆ°è¾¾èŠ‚ç‚¹æœ«å°¾ï¼Œåˆ™è¯´æ˜æ— ç¯ã€‚<br>
å“ˆå¸Œè¡¨çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(N)ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦ä¸ºO(N)ï¼Œfloydåˆ¤åœˆçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>B-Tree</title>
    <url>/2022/03/19/B-Tree/</url>
    <content><![CDATA[<p>Bæ ‘æ¦‚å¿µç®€ä»‹ï¼Œæ— ä»£ç å®ç°</p>
<span id="more"></span>
<p>â€ƒâ€ƒä¹‹å‰çš„å„ç§äºŒå‰æ ‘éƒ½æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œè€Œå¦‚æœæ•°æ®é‡è¿‡å¤§ï¼Œåˆ™éœ€è¦å°†æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸­ã€‚ç„¶è€Œç£ç›˜çš„è¯»å–(I/O)é€Ÿç‡ç›¸æ¯”å†…å­˜è€Œè¨€è¾ƒä¸ºä½ä¸‹ã€‚å³ä½¿æ˜¯AVLæ ‘ï¼Œå¹³å‡æŸ¥æ‰¾ä¸ºæ—¶é—´ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">logN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span>ï¼Œå¯¹äº1åƒä¸‡çš„æ•°æ®ï¼Œåˆ™å¤§çº¦éœ€è¦24æ¬¡å¯¹ç£ç›˜çš„è®¿é—®ã€‚</p>
<h2 id="4-7-b-tree">4.7 B-Tree</h2>
<p>â€ƒâ€ƒBæ ‘æ˜¯ä¸€æ£µè‡ªå¹³è¡¡çš„å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼Œä¸€æ£µçš„Må‰Bæ ‘çš„æœ€åæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mfrac><mi>M</mi><mn>2</mn></mfrac></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">log_{\frac{M}{2}}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.200905em;vertical-align:-0.5064649999999999em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.734335em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8720928571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5064649999999999em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></span>ã€‚M(å‰)é˜¶Bæ ‘å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨æ ‘å¶ä¸Šï¼Œ(å…¶ä»–èŠ‚ç‚¹åªæ‰¿æ‹…ç´¢å¼•çš„ä½œç”¨)ã€‚</li>
<li>éå¶å­èŠ‚ç‚¹ï¼Œå­˜å‚¨æœ€å¤šM-1ä¸ªå…³é”®å­—(ç´¢å¼•)</li>
<li>å¦‚æœæ ¹ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™æ ¹çš„å­èŠ‚ç‚¹ä¸º[2, M]ä¸ª</li>
<li>æ¯ä¸ªéå¶å­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°åœ¨[M/2, M]ä¸ªï¼Œå‘ä¸Šå–æ•´ã€‚</li>
<li>æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€é«˜åº¦ã€‚</li>
<li>æ‰€æœ‰å¶å­èŠ‚ç‚¹å…·æœ‰[L, L/2]ä¸ªæ•°æ®é¡¹(Lä¸ä¸€å®š=M )</li>
</ol>
<img src="/2022/03/19/B-Tree/5é˜¶Bæ ‘.png" alt="5é˜¶Bæ ‘,å¹¶ä¸”L=5" style="zoom:80%;">
<h3 id="4-5-1-bæ ‘çš„æ’å…¥">4.5.1 Bæ ‘çš„æ’å…¥</h3>
<p>â€ƒâ€ƒè‹¥æ ‘å¶æ²¡æœ‰æ»¡çš„æƒ…å†µä¸‹ï¼Œç›´æ¥æ’å…¥å³å¯ã€‚è¾ƒä¸ºå¤æ‚çš„æ’å…¥æƒ…å†µï¼š</p>
<img src="/2022/03/19/B-Tree/å°†57æ’å…¥åˆ°5é˜¶Bæ ‘å.png" alt="å°†57æ’å…¥åˆ°5é˜¶Bæ ‘å" style="zoom:80%;">
<h4 id="1-å¶å­æ»¡ä½†èƒ½å¤Ÿåˆ†è£‚">1ã€å¶å­æ»¡ä½†èƒ½å¤Ÿåˆ†è£‚</h4>
<p>â€ƒâ€ƒå€¼55æƒ³è¦æ’å…¥ä¸‹å›¾ï¼Œè¯¥æ ‘å¶å·²æ»¡ï¼Œæ­¤æ—¶åœ¨æ»¡è¶³æ ‘å¶å…·æœ‰[L, L/2]çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†æ ‘å¶å¹³å‡åˆ†è£‚æˆä¸¤ä¸ªæ ‘å¶åæ’å…¥ã€‚è¿™ç§æ’å…¥å˜åŒ–æƒ…å†µæ˜¯è¾ƒå°‘çš„ã€‚å› ä¸ºä¸€æ¬¡æ’å…¥ï¼Œå°±èƒ½ä¿è¯ä¸‹L/2æ¬¡ä¸ä¼šåˆ†è£‚ã€‚</p>
<img src="/2022/03/19/B-Tree/å°†55æ’å…¥åˆ°5é˜¶Bæ ‘åå¼•èµ·åˆ†è£‚.png" alt="å°†55æ’å…¥åˆ°5é˜¶Bæ ‘åå¼•èµ·åˆ†è£‚" style="zoom:80%;">
<h4 id="2-å¶å­æ»¡ä¸èƒ½åˆ†è£‚çˆ¶åˆ†è£‚">2. å¶å­æ»¡ä¸èƒ½åˆ†è£‚çˆ¶åˆ†è£‚</h4>
<p>â€ƒâ€ƒå€¼40æƒ³è¦æ’å…¥æ—¶ï¼Œæ’å…¥ä½ç½®æ ‘å¶å·²æ»¡ï¼ŒåŒæ—¶çˆ¶èŠ‚ç‚¹ä¹Ÿå·²æ»¡ï¼ˆèŠ‚ç‚¹ä¸Šæœ€å¤šå…·æœ‰M-1ä¸ªä¸ªç´¢å¼•ï¼‰ï¼Œå¯ä»¥å°†çˆ¶èŠ‚ç‚¹åˆ†è£‚ã€‚ï¼ˆå¦‚æœåˆ†è£‚åï¼Œçˆ¶çˆ¶èŠ‚ç‚¹æ»¡ï¼Œåˆ™åŒæ—¶ç»§ç»­å‘ä¸Šåˆ†è£‚ï¼‰ï¼Œå¦‚æœç»§ç»­åˆ†è£‚åˆ°æ ‘æ ¹ï¼Œå¦‚æœç»§ç»­åˆ†è£‚ï¼Œåˆ™ä¼šçš„åˆ°ä¸¤ä¸ªæ ‘æ ¹ï¼Œæ­¤æ—¶åªèƒ½å°†æ ‘æ ¹åˆ†è£‚ï¼Œå¹¶ç»™ä»–ä»¬å»ºç«‹ä¸€ä¸ªæ–°çš„æ ‘æ ¹ï¼ˆè¿™æ˜¯å…è®¸æ ‘æ ¹åªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„åŸå› ï¼‰ã€‚<br>
â€ƒâ€ƒè¿™æ˜¯Bæ ‘å¢åŠ é«˜åº¦çš„å”¯ä¸€æ–¹å¼ã€‚</p>
<img src="/2022/03/19/B-Tree/å°†40æ’å…¥åˆ°5é˜¶Bæ ‘åå¼•èµ·çˆ¶èŠ‚ç‚¹åˆ†è£‚.png" alt="å°†40æ’å…¥åˆ°5é˜¶Bæ ‘åå¼•èµ·çˆ¶èŠ‚ç‚¹åˆ†è£‚" style="zoom:80%;">
<h3 id="4-5-2-bæ ‘çš„åˆ é™¤">4.5.2 Bæ ‘çš„åˆ é™¤</h3>
<h4 id="1-åˆ é™¤åå¯ä»¥ä»å…„å¼ŸèŠ‚ç‚¹å€Ÿ">1. åˆ é™¤åå¯ä»¥ä»å…„å¼ŸèŠ‚ç‚¹å€Ÿ</h4>
<p>â€ƒâ€ƒå¦‚æœå¶å­èŠ‚ç‚¹çš„å€¼åˆ é™¤åï¼ŒèŠ‚ç‚¹æ•°é‡å€¼å°äºL/2ï¼Œä½†æ˜¯ç›¸é‚»å…„å¼ŸèŠ‚ç‚¹å¤§äºL/2ï¼Œåˆ™å¯ä»¥ä»å…„å¼ŸèŠ‚ç‚¹å€Ÿã€‚</p>
<h4 id="2-åˆ é™¤åä¸å…„å¼ŸèŠ‚ç‚¹åˆå¹¶">2. åˆ é™¤åä¸å…„å¼ŸèŠ‚ç‚¹åˆå¹¶</h4>
<p>â€ƒâ€ƒå…„å¼ŸèŠ‚ç‚¹ä¹Ÿåªæœ‰L/2ï¼Œé‚£ä¹ˆå¯ä»¥å’Œå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ï¼ŒåŒæ—¶çˆ¶èŠ‚ç‚¹ä¼šå¤±å»ä¸€ä¸ªå„¿å­ã€‚å¦‚æœçˆ¶èŠ‚ç‚¹å¤±å»å­èŠ‚ç‚¹åä¹Ÿå°‘äºï¼Œåˆ™å‘å…„å¼ŸèŠ‚ç‚¹å€Ÿï¼Œå¦‚æœä¸è¡Œï¼Œåˆ™ç»§ç»­ä¸å…„å¼ŸèŠ‚ç‚¹åˆå¹¶ã€‚ã€‚ã€‚ï¼Œå¦‚æœè¿™ä¸ªæ“ä½œè¿›ä¸€æ­¥å¯¼è‡´æ ¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåˆ é™¤æ ¹ï¼Œå¹¶è®©è¿™ä¸ªå­èŠ‚ç‚¹ä½œä¸ºæ ¹ã€‚<br>
â€ƒâ€ƒè¿™æ˜¯Bæ ‘é™ä½é«˜åº¦çš„å”¯ä¸€æ–¹å¼ã€‚</p>
<img src="/2022/03/19/B-Tree/ç»§40ååˆ é™¤99èŠ‚ç‚¹å¼•èµ·çš„åˆå¹¶.png" alt="ç»§ä¸Šå›¾ååˆ é™¤99èŠ‚ç‚¹å¼•èµ·çš„åˆå¹¶" style="zoom:80%;">
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¼¸å±•æ ‘(Splay)</title>
    <url>/2022/02/27/%E4%BC%B8%E5%B1%95%E6%A0%91Splay/</url>
    <content><![CDATA[<p>ä¼¸å±•æ ‘ç®€ä»‹</p>
<span id="more"></span>
<h2 id="4-5-ä¼¸å±•æ ‘">4.5 ä¼¸å±•æ ‘</h2>
<blockquote>
<p>æœ¬è´¨æ˜¯ä¸€é¢—äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œåœ¨æŸ¥æ‰¾åï¼Œé€šè¿‡AVLçš„æ—‹è½¬æ“ä½œï¼Œå°†æŸ¥æ‰¾çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œæ—‹è½¬åˆ°rootèŠ‚ç‚¹ä½ç½®ï¼Œè¾¾åˆ°å°†<code>ç»å¸¸æŸ¥æ‰¾çš„èŠ‚ç‚¹</code>ç½®äºrootèŠ‚ç‚¹é™„è¿‘çš„ç›®çš„ï¼Œå‡å°‘æŸ¥è¯¢æ¬¡æ•°ã€‚</p>
</blockquote>
<p>â€ƒâ€ƒä¼¸å±•æ ‘ä¿è¯ä»ç©ºæ ‘å¼€å§‹è¿ç»­Mæ¬¡å¯¹æ ‘çš„æ“ä½œæœ€å¤šèŠ±è´¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>M</mi><mi>log</mi><mo>â¡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(M \log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œä½†æ˜¯ä¸ä¿è¯æœ€åçš„æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>â¡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œmæ¬¡ä¼¸å±•æ“ä½œçš„å‡æ‘Šæ—¶é—´æ•ˆç‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>M</mi><mi>log</mi><mo>â¡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(M \log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ã€‚<br>
â€ƒâ€ƒå³ä½¿åªè¯»è®¿é—®ï¼Œæ¯æ¬¡è®¿é—®åï¼Œå…¶ç»“æ„ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤åœ¨å¤šçº¿ç¨‹ä¸‹ï¼Œå…¶éœ€è¦é¢å¤–çš„ç»´æŠ¤ã€‚</p>
<h3 id="4-5-1-ä¸€ä¸ªç®€å•çš„ä¼¸å±•æƒ³æ³•">4.5.1 ä¸€ä¸ªç®€å•çš„ä¼¸å±•æƒ³æ³•</h3>
<p>â€ƒâ€ƒå‡è®¾æˆ‘ä»¬æƒ³æŸ¥æ‰¾çš„æ˜¯k1ï¼Œåˆ™ä»k1å¼€å§‹ï¼Œè‡ªåº•å‘ä¸Šçš„å»æ“ä½œï¼Œæ¯æ¬¡å’Œ<code>ä»–çš„çˆ¶èŠ‚ç‚¹è¿›è¡Œå•æ—‹è½¬</code>ï¼Œå°†k1æ—‹è½¬ä¸Šå»(è¿™ä¸ªæ“ä½œä¼šå°†k1çš„çˆ¶èŠ‚ç‚¹æ—‹è½¬ä¸‹æ¥ï¼Œk1æ—‹è½¬ä¸Šå»)ï¼Œç›´åˆ°å°†k1æ—‹è½¬åˆ°rootèŠ‚ç‚¹ã€‚è¿™æ ·çš„æ“ä½œè™½ç„¶å¯ä»¥å°†k1æ—‹è½¬ä¸Šå»ï¼Œä½†æ˜¯å…¶ä¼šå°†ä»¥å‰æ¯”k1é è¿‘rootçš„èŠ‚ç‚¹æ¨åˆ°k1ä¹‹å‰é‚£ä¹ˆæ·±ï¼Œè¿èƒŒäº†æœ€è¿‘æŸ¥æ‰¾èŠ‚ç‚¹ç½®äºé¡¶éƒ¨çš„é€»è¾‘ã€‚</p>
<h3 id="4-5-2-æ­£ç¡®çš„ä¼¸å±•">4.5.2 æ­£ç¡®çš„ä¼¸å±•</h3>
<p>â€ƒ â€ƒæ­£ç¡®çš„æ—‹è½¬ï¼Œæ˜¯æ¯æ¬¡æ—‹è½¬éƒ½åŸºäºAVLçš„æ—‹è½¬æ“ä½œï¼Œå°†æŸ¥æ‰¾èŠ‚ç‚¹K1æ—‹è½¬åˆ°rootèŠ‚ç‚¹ã€‚ä¸»è¦åŸºäºä»¥ä¸‹ä¸¤ç§æ“ä½œ</p>
<ol>
<li>
<p>zig-zag(ä¹‹å­—å½¢)<br>
<img src="/2022/02/27/%E4%BC%B8%E5%B1%95%E6%A0%91Splay/Zigzag.png" alt="zig-zagï¼ˆå›¾æºwikipediaï¼‰"><br>
è¦å°†xæ—‹è½¬ä¸Šå»ï¼Œgã€pã€xç»„æˆä¹‹å­—å½¢ï¼Œå…ˆå°†xæ—‹è½¬åˆ°pä¸Šï¼Œå†å°†xæ—‹è½¬åˆ°æ ¹èŠ‚ç‚¹å³å¯ã€‚</p>
</li>
<li>
<p>zig-zig(ä¸€å­—å‹)<br>
<img src="/2022/02/27/%E4%BC%B8%E5%B1%95%E6%A0%91Splay/Zigzig.png" alt="zig-zig(å›¾æºwikipedia)"><br>
gã€pã€xç»„æˆä¸€å­—å‹ï¼Œå…ˆå°†pæ—‹è½¬ä¸Šå»ï¼Œå†å°†xæ—‹è½¬ä¸Šå»å³å¯ã€‚</p>
</li>
<li>
<p>å®ä¾‹ï¼š<br>
ä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹ï¼Œå¯¹k1è¿›è¡Œæ“ä½œï¼š<br>
ç¤ºä¾‹åŸå›¾ï¼š<br>
<img src="/2022/02/27/%E4%BC%B8%E5%B1%95%E6%A0%91Splay/ä¼¸å±•æ ‘ç¤ºä¾‹(åŸå›¾).png" alt="ä¼¸å±•æ ‘ç¤ºä¾‹(åŸå›¾)" style="zoom:75%;"></p>
<p>è¿›è¡Œä¸€æ¬¡zig-zagæ—‹è½¬ï¼š</p>
<img src="/2022/02/27/%E4%BC%B8%E5%B1%95%E6%A0%91Splay/ä¼¸å±•æ ‘ç¤ºä¾‹æ—‹è½¬1.png" alt="ä¼¸å±•æ ‘ç¤ºä¾‹(zig-zagæ—‹è½¬å)" style="zoom:80%;">
<p>è¿›è¡Œä¸€æ¬¡zig-zigæ—‹è½¬ï¼š<br>
<img src="/2022/02/27/%E4%BC%B8%E5%B1%95%E6%A0%91Splay/ä¼¸å±•æ ‘ç¤ºä¾‹(zig-zig).png" alt="ä¼¸å±•æ ‘ç¤ºä¾‹(zig-zigæ—‹è½¬å)" style="zoom:85%;"></p>
<h3 id="4-5-3-è‡ªé¡¶å‘ä¸‹çš„ä¼¸å±•æ ‘">4.5.3 è‡ªé¡¶å‘ä¸‹çš„ä¼¸å±•æ ‘</h3>
<p>â€ƒâ€ƒ åœ¨è‡ªåº•å‘ä¸Šçš„ä¼¸å±•æ ‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ±‚ä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å’Œç¥–çˆ¶èŠ‚ç‚¹ï¼Œåœ¨å®ç°çš„è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨æ ˆæ¥ä¿å­˜è®¿é—®è·¯å¾„è¿›è¡Œå›æº¯ï¼Œè¿™ç§ä¼¸å±•æ ‘éš¾ä»¥å®ç°ï¼Œè‡ªé¡¶å‘ä¸‹å¯ä»¥åªä½¿ç”¨O(1)çš„å­˜å‚¨æ–¹å¼ï¼Œå®ç°ä¸€æ ·çš„æ•ˆæœã€‚</p>
<p>TODO : è¯¥ç« èŠ‚ä¸ºä¹¦æœ¬ç¬¬åäºŒç« å®ç°ï¼Œæš‚å®šä¹‹åå®ç°</p>
</li>
</ol>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå°è®°</title>
    <url>/2022/02/26/Java%E5%B0%8F%E8%AE%B0/</url>
    <content><![CDATA[<p>ä¸»è¦è®°å½•ä¸å¸¸ç”¨çš„ java ç”¨æ³•</p>
<span id="more"></span>
<h3 id="1-æ•°ç»„è½¬list">1 æ•°ç»„è½¬List</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¸¸ç”¨ï¼Œä½†æ˜¯è½¬ä¸ºListåä¸èƒ½ä¿®æ”¹List</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œå¦‚æœæ˜¯intæ•°ç»„ï¼Œåˆ™ç»“æœä¸ºList&lt;int[]&gt;</span></span><br><span class="line">String[]  strArr = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line">List&lt;String&gt; aList = Arrays.asList(strArr);</span><br><span class="line">Integer[]  integerArr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">List&lt;Integer&gt; bList = Arrays.asList(integerArr);</span><br><span class="line"><span class="type">int</span>[]  intArr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">List&lt;<span class="type">int</span>[]&gt; cList = Arrays.asList(intArr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬ä¸ºListåå¯ä»¥ä¿®æ”¹</span></span><br><span class="line"><span class="comment">// åŸºæœ¬ç±»å‹(intç­‰)éœ€è¦å…ˆboxed()è½¬åŒ…è£…ç±»</span></span><br><span class="line">List&lt;Integer&gt; intList = Arrays.stream(arr).boxed().collect(Collectors.toList());</span><br><span class="line">List&lt;String&gt; strList = Arrays.stream(strArr).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èæ–¹å¼ å¯ä»¥ä¿®æ”¹</span></span><br><span class="line">String[] strArray = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line">List&lt; String&gt; arrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;(strArray.length);</span><br><span class="line">Collections.addAll(arrayList, strArray);</span><br></pre></td></tr></table></figure>
<h3 id="2-listè½¬æ•°ç»„">2 Listè½¬æ•°ç»„</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è½¬åŒ…è£…ç±»æ•°ç»„</span></span><br><span class="line">List&lt;Integer&gt; alist = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Integer[] integers1 = alist.toArray(<span class="keyword">new</span> <span class="title class_">Integer</span>[collect.size()]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬åŸºæœ¬ç±»æ•°ç»„</span></span><br><span class="line"><span class="type">int</span>[] ints1 = alist.stream().mapToInt(i -&gt; i).toArray();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>javaåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>å†™äºåšå®¢ä¸€å‘¨å¹´ä¹‹é™…</title>
    <url>/2022/02/01/%E5%86%99%E4%BA%8E%E5%8D%9A%E5%AE%A2%E4%B8%80%E5%91%A8%E5%B9%B4%E4%B9%8B%E9%99%85/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="40e032806c54b6fddb1404fb7654c35eb2bf74e78fbe01ccacb536bbcaa31fde">86daf2dd9f98eea2571c3fce34d1e7ad96c1370e83194598f6c978065ed8904c5cbc44ea630774e40ec20a8e7d5333a96a60945abf4ad35d69a90784d88590e9e579eb9090d92d01fa86400dad40342825591275fb4ae7041f36aec2b0f4f0ef6883623908b1ae46b97eb77a7516f9121ae064ade59a1add00b6f5cad55d29183b5a20bf29fe32f6abe631ab6755b264dcd1e206f49fd318df61159da9cab4cdc84d38d69a66bf2fc8a5261d6aa2050c146886952b639fd8c5d5a2908687c044d8947d0eab69a1a9384d1de07684e6edca06a50dbb8b0c3f45c3e5d01b6b41d134465e7d8013608274358d6a69dccef08fefad51c352ea5a3e432e824034ea2e2f19a999a0bf4d33639565dd79a1f5bac8614ccd1b8c2ddeb717ab04a6f667e29a53d231a2c805c286cc0319dbec8cf9a1985f385d4125d6c7e76f2668a87035911f10e454b7ec756b06b3e562410e5805f1ee2549ad81d74eec68579822f0076fb959b280f25db640586c69a75e9027d967ae092887ec56214dbcec85cbec6ba4bbee21889b2db935990d50eba55ab1edf311ee3160154a995edcd060f37d31d22a4d5cc74dff7876676fe43085ebc55e355d624fb4fe00f336e81ccfc38651ed4ceb59da8dfb6b3046722af1f559adae34a8989280c211ee17efec9f862a6d65717b05ec36a51e0f8c13071b2c9a99dfc39f30106ad0da598f6fe4e91c13a7599aa1caeba3930ec57c74aec01e3a00ca9eaaa283e9567a9ffea1bbda9a26d4da01f4d3df6f4f88c284568575c3f64cf2a91f8ba967510d4170a1057965bf486d8c9cfa5918dea9a54ebdf6b5e9de68567b536fd2b0a5dfc63c9db4e0aa3fb6124b66dcd49ca341516c5e980429abb9eece4da859f8d5cd9768a59f8391ef74d319bc876d3761d6ceb3c2ca4300e0d16f0a0c1c0be2198a358b3f2998a7cc606916fc624ca67fb181a2408194abad43a057006a8cac968d2f8722a4e117fdac3ce6bb8a26b409cec1cd78f7083f3ec6bf5a1649537cc933e6ade51d2f68186d08603896c9e96baba0cf08d642683058ce62e86ed42d9caf89e06018219f8ac99c5363fc271580fd4fcadec258751255ddae774372bc753ec9333b494cdef980b36febab376d66fe147a9d363f06490787968529683ddd3fa749b5a36d51d5cb4dc5861c1cbba8683394be7f69f3d2bc9138ce859593eb8368be8ca68495555f361d3b885c0eaaf112e333e0f3c5ad53e4ad982b97bb986160716d795aee06be7d065af7838251d87df1d91c15a1b2098656ab846d3dfa2a55d289ebaabcd388006008a65b1fff9a8d4afb0df931ed0dce8493534205bc9ce59453202b953a65b010ace3abf83cec2b2db5011988090e4187da57ff964040fcf61cc00862f4a0f0d073c90eccd6bc6f2ce61633e247cc9c9a0a31256ade4f462c715fef14308be787fb66f42cd31231a3653df2134c0c87a453325712cf3c6490ceafb0cc487b09134408fef4ddcaafa7b64efa0942d5ba97344d54d17eb2dfd8adff68d3a97e5cd1134f3bf3b22a334950636c66e1c7afcfb4ecf95a0e20eaa6d0e76a2e0b7957c240bb84831ef9b205f79561d2f90156275b60ae1728bae3b4916b20734e8a2b1654d134e06329979e57480efdf07afa92a5dd43353518bab9a4a9428e4b0c6aa7c12c8f391fd3887ff1153a026e3b12703e0dfc6fb5a6ea9faa13abd830b22a9914384950b646ca6e29a3626b43ec03d984c6ba589199222333519fa0ee5fee4cd2c4f7c54e1d8f89d93d1cf957bc457d0427fa82198a2cd23b93b2444b724ab451518244960cd9bc0af7be6211a2d0eeabc90984ab1958c06d74bd9d87f1fae0a1e069455423be21795d3720c8b9f231582f41d64bfe0b8ff0213ec0fbbbe0fa8abf86e51688a372a27f9b07b665550bf356662194360fa360925e1e4652bc62f6f9ffdb0a45df18e6f72759d5c8aeae770a030d1b2f7cba7870568ebc4ba61fcf45bacb5e64fcc98c3031dd240dc5f359a4f9838947e589548bf4d6e2ba10e12f5486cf45309ae99532e1053f9c28d0ffcf8fbf6500b3db2bc9f3dd1e4c6c8fc095fed404a0eacb9182591fc13c091c730c6652ddf73da21c6fb5b7650660cdc27075a544e110c745b381561217e9f4226e128ec578d8e18ce84835fd69896c9ba93611eb6c9915b3e61596c6c17cd7283f878dfd510ab82d4333d7a78faf679f7284dc518d2ba8858a3991dd1ae7e4cf164db4805da03cc0709571d3d59cc368e2e48388180bcf3e049688e616eebefc095319b4a78d0883408cb0bfbed45798920f273be20ec6afc0586d9798e1bfaaf9eaf2ebe5396aae4bbde8fa0d3439a8fac42b3e677e08abed13e75e4ecf4f237345c7af059f41b25aac95647f9e4e7d5875baf27befb47bca9f94197fd4a153f25fb6a0d8890cee569acdc941531c78b9733dc632ced36c81e2ec2b2881fdd942dce169d0a81a4c557f44fccf9fa4a1dc88bd618952584297479bf81ce4e7a155ebf3a31d5c88a88df4baf0b9e0b1e973cf0479d6388ae0a43b8d83103753b1ca14bbac17e3c843d24b200a19255b21ff9d84ca1b6a1f40215123f2b4f4fd02c66f7399de445a2be773a4f856207a6267c307f3e93a2810509be0ee41f967707c02c0475666e808b3fd9340756d6b3175b9e4fbe32d5d1e843e3932e862d24090c880fbc66a538743bcb03504753066b0712f3744b2b9c902066b745dd97cc54a8d59a8fbae0fdc6e03218d2865b501dfa4423a15fbc52d53b61d96aca3b1eda1854835b6595d949fa68832659cbc2ae0ba8cfb845d00e28ba6d38dbeb5483bf3d6a49301a5dd58eaca0cbec460b5dc02d21b921fbf0810a9860cf4fa5b1c724bf58ed98930a2bee1135943c410f584a49185d2285223c63ae3250c0425f95e264857d3940bc3c21300657e42bd813b32b8925cb26e5aca158dc0ace4e44553f4fb71e01fecc2d2b7762e7cd7b49bcfb1bbac091a748834a6e53a6c52d1596d426ee62973603705744c68261ea8d26f4a577c8cdadb1ea4d5910b5335ffefee4c0deb9363d4f1c42b266691884c2134b5d83a478bc05f807b52312764f4ba1aae2feb56306365e600219b97495bcc78fd223ecb774299ce504f103699491ba211d2a35dedf2fd44605f7b4311afba0e916fc0e38f76cf80a5175e41020e3f9cb76d36e80073558f46735d4b5d3268f656c4547472e9c0ba19072955f0879936e61530572ba9012b5bf529d7d0a35c6727743499d58a4be1a84efbf5f27a6a08df179052709ed6854952539853dac9c93ee7f79c81d3191092ddcec2435e5c8af212f019e1a52b9b93d8e2c5a2995f213dc756837a57067ea50ec4b1d6b708a6d358bd1fd2f9b870d9eabe0f3a2f01ba28d83816e8ed0fc9fa5497fb83c587b2a99187763be6d49555edd182ead3227f7bd4afce0b06dfb7d6c6cb12673d97749cbfecc3a7720635bccda4d9f9d60234e475475006a037fe15a47e6a13751aab69d09b0b596f55f46058e9cc1a263d78f0ffac502068776f3905682f8a33cdb73ccf015aacedc67def58abade86ceffdc5f99ef5bc115d401a54821993aa0d7fa78b65bfc98be4e73173354eaeab3889515149dc1606a986a7bb209546e69ae51e9ae7541abf00bd712cf65114f19494b07ab8f3ca2b84c7c6a8bf9db2a7aa3b821f73558a4a8b13a440d7690cfee687b6c692314d3d5bb1c4f98a93b657546677ebf8d76edd2944c0790ab9799bb94bcde4552a93e254dd0f49458d49d2c340ba93b9766851a8d21ebfa2f7f76e0513968ebd89c8bb2c8422bc35c1cc3636469e58ce34efe77e4d4b69badf9de2396a5d1dd6dddef4b7b6737c97c9baee164f08190c1779ea8a483cfbfd0093f5f04bcc560f264a69cd4e7493174d9eb930846bdf26c212af4a8bab91c889d61238b08413fdca74bb3defa637f49852a29956a297d00d4b3b69e2ebeb0b88f5a5b3d6bdcaa4848612b559c06872f065a64b64e57ffbde7026627cb036e30b4ef0bffeea38701b143d8cb9c9c03473ef8406e0aef97c9476c069ec36b544ff6e1a701ada84d33ad8f9678292570bc4787438d7a9b41909f85ac346f9ac8cf4dff2f9ab84cdd96ed26793e5cc03a3bd368c9bdd3f21b5abed51ff8c59b23ff272639c35ee0987c9e474dc76e7dc124c617ea84c7def9ba410f86d28308105427c16ee08c28057bad0451b4ca4fc4ed3390a47b2e69f686c59c90fe0ca7495c5c8fd06cf3f5b44a210cfe7c9935ee1f63a1d0c7e62f01647ed92977859bed7ff06bbf01d897e94d7f77c1e4e3dcb734e1b41fef0f364e8a6fcc5f2e2c8f836ad75dbd06ef0d9e3922996648996365664a5fe744a881950826eb20dd281ce71bb41fc79a3d61e35e7df86635b747b56302c44c2e2c505ee5f67c9819717801314e4b98cdf1ae8de9f4685383bc9df18c6d7003fcec354d1e8a053fd127294a950c02ffa9c85d650e8fe4dfd3018efc32d75793ba9fd66c1cce980b36b093a85636d5f292874026de66db6a3b8d897f4a7cc12ddf4fefaefb9f2895f067b6af262a2730d5986490e1a792537633d42157f7899e4c872789aba577609e765a1afd5067ce31a490f59d4169f0dd58fc03cefbc6978a824c37c468d7e167d4307484afb20d7da0b39f5a0008f06c714d816fbd1ec79756c59a6eda61ac6d5fd6b7b87254b036ac52cb66d4b4b327a892bc801229efd5f2f9c23be39460b0e6dc8125b17995f334043bbdb5dcee227f283ccc1c18b5db795cce7e0cb0827583ea59acf7526ef8916e88248867f18affe02add493baadc1b4da2cf7b53f8f2420d8bb50e8e1346ed036121ecad08f3d288e1b8d10a5eb6b1d4462b29b715301d354ced144c5af7492d0e2e10685199b81310c6d9e1af656160d30494776a72d6459ddfefd571a5b290bc299a95763881db48f48b385fe95b0d5241383285e2a964e1c9db5dd9965acfeeef389a124e3a33d0a00dffc149fa5235208bb307d6e820aa61c9ad4d260e351e7917f47e3441434a0290dc676de3c036b8f216457bf3ccee2c6f773084aacd9318e5ffe362e86ca1100341bdbe4ca466b252604518db1845a5ae1aed0018e0e59c047edae97764e71e2acbe922b6e38040d34e648bd553840a2538f9049cb1446b2418a7d737f69a1ab50597e24ff109adb0733f87117193b491e328001ae9f5c685dd02d69b92ef68d4daf5f81ed179aa9175394bb00195761d3171a96648fac8ce281f577dd0998f3603d6266fe605dadd77a0ced19732fca154f7e70e4260c48a5b5517c7c8eea73dba15253b115a41e34c55ca1417f4950df678dc2a3d378e263abd8853f098e936fa4fb75f4bbf2b832965597b5ea86f91c5b11203fe3e62332cc1676432dfbd63a2e0afe790c68aec686597e41a4ac67b12d5241fba101d07b8a19b62902cb076bc7064cf845abd88c8c7f2f6ff2dd18692792e6fe72cfe6d47b242322320d1cf33ee04e778c3e8e1cac1370182b4aecd1c576c7aa4ccea277f6b47b750fbe66d4ccbd20e09cd4cf857a4a5aabcf1857af83549c55cec6fdf8c80e40f2ce3c959a13f0be72c909b309cb6cb5209a80290df3e42b5906fecee74aebc4e3c5abf671cd13631d25d3df66dfe53265e35021516f948afd3e28b4aca747b4628a5772df6d0ec5a15e1aa986ed537fc32b89d81127f9bab08f72d8f78d5b4040b6899c14f59eb3f8d179c58492d07b2dbac8e2ad282ff97b417746e23b4fc66f032f75169b188c2688ac908223ac5348d6ad4493d24602786795c070dfc9d43ba5605c98e93b4d45555eb9a6dec68c244ebae257315ff87f580001ef9a15128275a74acd0e576fa537d3f44c0996e36e93838cd44c3a05ada00a75277bba38405b916336cb0d6e2d3c99b4f0bd4fa565c3a181e0b06836bc7bfca5fa7283053748b110cbf60b8e5c8b452da9818911e786c65b7bd85fc2ede3ed745247a9fde0c45bad9669e398b124bb98db74f8a7f4c4aeb1807cef26d392d764b90229eb766f572cc109c6d5c29ea3579022c1ab77c4c5b2f4ff74e6c3b43daa934eb9765faffbe2e7676a39cd64f4771777feebc07b3f9f37e0913ae93647c777bf3de2b827f7d3ec6dcca7c872dff947d9905fff7be330da752902630a427fe8963de5e1b8cecd151a5c1a5d23cb98fce8c3fcda5203d4c01de283982e499c6bc424f193ce11597c14f134e55265babf52f30eb0bc8ee56dc8eddb83c1e05cf99ba719699f31f39beee2d52679b4ea4ec2b1caff9057162f824460506274a6755483638c600ede6d9e6e9fc080407bd215ddc65b9333b2b8a83f8f429b73518f32dfe7860fd4d08e6655284422521dc7828790e552a2476be05e72a54ac0b5b7506293aea60304984f5458b24ce1b10941732714cd06e8011ae91c19951b28eb30e13597c01100babbe17fb61822227fb2f5ee87b2a417624fd5131c8fd2246bd7a58226a2756e327d70be5f66d67d5264cc9d6936396bff0f3bee410e69db4221cbd908381c8d7df31c8079273c3bb5a85b709e67c5b182bbff4eea32b50477d1e344dffb1cc41a44ddd1c0226a76f7a91bf8bba0df9f6c1133440d7716f4a121d18236ae0d8451a0e5980a0f7905e406d40bc95ade56648d41ff620ba370ec07691b69536d4e852a195ea22cf2352cea0676719c13168dd8595addebad37b4b75f4737a342998ffea4d03eb926d879b4a4f392cabd09c911a2044f64d04b98241f3c65bc43df3891c07728cf7599ad6920b2004984a541f8750e53b8d8f170a589435f50dc4f66e3fd48b70c3429fa231a74570f4ed2a10dc57e8e83f2c68754b9cf2d0675ba81ae5486dd31a6adb88e1e0e7506c2a144906fe3bedb3be5477721e531af405495c19360320d33fb44bd713ddbe782ac387b1b3a8cf917206788af62f707f8b2c283355e991859b5a0033aded2e9b7bce65798d35b9b99e4140098eff99d693b2793634e65172a4ecda8cbb7c2d84da9a9c424a95115801c163e817de8e175bbafad834d5051020a78dc7fb3ceb0de81ae873f67a269d262e3b71a32669cc887d80487c7d10c085b4922da4606711fda8eae399ea23e75b008deeea18528af6d1c31445dbee9f432675c49b09ddf3777ff2262b962d44f8e8315c8648aef90825ec11239e2fec39c1b41ae798d18fc05f8df357bb936c5b2c5b577c1e94b844cdf66def3c244259074e8818b78a4faf789266ca807bf1961183a598eff1028840a1303e8d34ed07e682066d8336bc1586fa5cff694e621e485ceaa455b9e7c51871f12b675b7bd6c00fc38cbbb18be72b3d59ba78b05bd7483c444ee55192a823e651e49621afdef2d051bf537e63f1c3cc3a8fc3a37523e704447b4987d524bfc7ba3c21bb50e7d722ef838634d344b59bb6b889910778a0ef95b8c5e08005f6608eb8a70e304f7c3081906426727deaa99a85637c62f2f520cac96e4236b50c5d068d8f376c32b0af8475ebc4b8762b1ad268ada9193000420ded7cde7ff0177079461e8f8cfd852f5169ea5924a0eea43afc9f85e9354062ea23e37ddd991c7683ffa1f5117780f036bf76b6104b5b687c84faf43c9a22731954d3ea68cd3a0a34e3cb6dca8117272ae410feaea1f483816e3a222e346139556db6176e5c3ebe30385739b50536947410ac7faf0e78da1481e76370a2c85da17c38473b26059efd07952e21cf3d347de119fa6b7a8ff3dbefce08f9839a7bc75cb8ddd7ffcbf5de9be43cac8cfbc7189108b1626bd6a4b5e6e695f424644dd25b8151fd73973391df39ab80442300ddfca808f8782b428ceb2edf46e970c2bac89540be7cfa58fe93b5eaf6acd96abf6558b77bc90871ac596da36ea76442fefa12e823cc9f88d79aeb200d520dbaf3e41bd117cde45d586e6b09cc2cdef8a4bda5b4ae218f063ff511317f34a260dbf334421b7e79b1028b4e215d227d6ca032b41297d5f53a8980245f3cdd46e19ef99630f6857893b221b5d0e4792b0014be7bd65a2040b9856f3d0456a494e70ca9b1ca67766112d4c633183460b837fdedc7dd96af32c84f3a47f4c0fa9c1d8bb49e4f3a975277d11f41fc1c3fdee5183ff690a08d157db6e89a80a0fd6399fa574c94a9ba429a28126be3924a4389ca031d32f24c56e791031658032cde50f44b5df05e1f55edda68fdb21943ba8bce20388e7668215c3c7f49a2620eabc2cd50158e866acde2aa7f029e20f841df7c3645aab242557b864bb3fe41d41d3514fb85f6b241a0204456a56404a24b51f49a32564fc4e409cce2d14f4f785d05332f37e8c75e9d977a2eec748da99ebf7c0598d7239457092b02edb41b471fed8e28e46724fa508dbadfe74c178f696490efab77e8c48c3e844f798f5c89ea1c9d70197091ceb1d059c582637a91e95898f6cec6934509f75c8a23ff5d17ac98c4c86949bef57aec294c94a1b3e12a3539cc7b79d078da0f7f950521bf877735dafa69427cf31c9a5abbcbe03645d34f50040af089a5364ae4bf1d47ba816882ea8c6bd67f1ca4db202dd3ddf6f4ffe248b136d20b27eeab9df8076b7e883638584fe49624d0196db07e16f18b4294d1d9f3c107c2eae99d1099509c2e10bc70200a8b450dbb1e4b85ff20eca8df2ddf368af7ec173bd7356f98b92caa5dcdd10c3326d6ace004f3d30ecba8724513ada453554e30eac8305912b3e05b292bbb675ee4bb2e6d0845c34d91bf7c8acecdd5e2bf8b53cb19f0047af2b476766e0f4b3242f0053b0dc70f1d428ca6828b2ce803f8335696baa7a2d781799218e9f8abb554147c6a4427d1963ab994c55d04ef57020a6a56e0341e10b5fbedbce9ac187a73c7e8912e22fbe400fa6bcb58a81ef60aa1122ec8ca383c4251c12849f674a8e0f84825522694b7bc505eb8c0666fcf8204d2e97dc38c520d2b24bdd6916285bdc2df0b86a54082be8f72f03d438e25995a5f6190bb68bb401c2f04a8634d02d80e98416f518c6f5fa1fbfd941cf502e1bac0dec6c94fe2eaa7814638b0aa3e8beb498662fc64097e2ee3e5b7e5850eea48302a7d5868f3bca0e0d3190de2af2eff6b4f0dd906a2dbc0831c3af0059266efb971690f46d3829a6ac0566d5ed92c4e5a50b4934f16091fe3373a768b4214ae65838a2bfe5eed84ccbb5f1bec3114927879d9c7d1b0069b4ed7c57ca8bc40aaa5ffcb00b25f36ff062b003a9361d7777a9ae47dab7af4c5254dc4af07ccb0cd5e0bb3e86bd551ced7e7e6380f086a7348ec2a5431c4a489cc2f813da919361205092440fc41e39324093b689002f7b470433ed4d9bbde8c834a7eccb1db83ea4f202d41a8e77aa8306f88d7b7cda2815a61589ec7c37150182ee34e19808a153d5bb316de40dd0f180ebc7deeed0c5d115be1d716110fa28b84b380faa0dc4da97c488dc96a17b94803bfad6e36833f214fd55f8e66e2bba2daa2fc9507d4f29ad0a4d06da065db35c785de1cb8bd08b272dda189a3aced2cb1e5f39918274e7cf05eb2ee747a92fcd85731ca5a1d19b2bae20503843da1eb8e490d01ba3fd42060c8585d3f121cc3110c7739957393eb96616aa783fae094ddd7fc0162fa19908172dc3b43febe1db1214166cbae28277a8d7ace2093522a7ca463b2e149bf8afc75f70a12fdec86f0f48183e6bb99c4540a94eeb49456b24759c4a84e95b476698efdd20880d4e81713207654b5a132456d18a1c0cbf583fedb6f89912101c228cdac2c6168f0b9231be987ca0361bd2b26b91704b658e036870efedba99b6e6fd01e6fb43899a761a2843a2f2ff562b9ed83e8442ade06fbe1781ad60b14b2073730ba3df75d04510ef1515af6a45e6f0f70287ff885cd53e6ede10ce581f62d6e03409debdf623a66b83ddf82af072173eac64453708cde9cc203ab5b46e08e743445d3f1a4b9bb3b48bf29ed4f39a88998c287631eaae0e9db5002a0cc9d965573cf9e8fa40207a37f74a726c69a62180953446a3b76ec3befd3b8683f740620f601b98fa269a0e8f6d1346d0bf33fe49f5cfbc8c62494b7d983d87325272f768</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>ç«™ç‚¹ç›¸å…³</category>
        <category>åšå®¢ç›¸å…³</category>
      </categories>
  </entry>
  <entry>
    <title>å›æº¯ç®—æ³•</title>
    <url>/2021/11/14/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>å›æº¯(backtrack)ç®€ä»‹</p>
<span id="more"></span>
<h2 id="1-ä»€ä¹ˆæ˜¯å›æº¯æ³•">1. ä»€ä¹ˆæ˜¯å›æº¯æ³•</h2>
<p>â€ƒâ€ƒå›æº¯(backtrack)æ˜¯æŒ‰æ¡ä»¶æ²¿ç€æ ‘çš„æ·±åº¦å»æœç´¢ï¼Œç›´åˆ°è¾¾åˆ°æ»¡è¶³ç›®æ ‡æ¡ä»¶æˆ–ä¸å†å¯èƒ½è¾¾åˆ°ç›®æ ‡ï¼Œå°±å›é€€ä¸€æ­¥æ ‘çš„æ·±åº¦ï¼Œé€‰æ‹©æ ‘çš„å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œè¿™ç§èµ°ä¸é€šå°±é€€å›çš„æ¢åˆ†æ”¯æŠ€æœ¯ä¸ºå›æº¯ã€‚<br>
â€ƒâ€ƒå›æº¯çš„æœ¬è´¨æ˜¯ä¸€ä¸ªç©·ä¸¾çš„æ·±åº¦ä¼˜å…ˆæœç´¢(DFS)ï¼Œæ¯ä¸€ç§æ·±æœéƒ½ä¼šå¯¹åº”ä¸€æ£µæ ‘ï¼Œå…¶æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼Œä¸ç©·ä¸¾çš„åŒºåˆ«åœ¨äºæ»¡è¶³æ¡ä»¶æˆ–è€…çŸ¥é“åé¢ä¸å¯èƒ½æ»¡è¶³æ¡ä»¶åï¼Œå°±è¿›è¡Œå›é€€ï¼Œå¯»æ‰¾å¦ä¸€ç§å¯èƒ½çš„è§£ã€‚å…¶é™ä½äº†é‡å¤çš„ç©·ä¸¾çš„æ­¥éª¤ï¼Œæ—¶é—´å¤æ‚åº¦æ¯”ç©·ä¸¾ä½ã€‚</p>
<h2 id="2-ä»€ä¹ˆæƒ…å†µéœ€è¦å›æº¯">2. ä»€ä¹ˆæƒ…å†µéœ€è¦å›æº¯</h2>
<p>â€ƒâ€ƒå½“åªéœ€è¦æœ€ä¼˜è§£æ—¶ä¸æœ€ç»ˆè§£æ—¶ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°è´ªå¿ƒä¸åŠ¨æ€è§„åˆ’ï¼Œä½†æ˜¯ä¸€æ—¦è¦ç»™å‡ºæ‰€æœ‰å¯èƒ½çš„è§£ï¼Œè¿™æ—¶å°±åº”è¯¥ä½¿ç”¨å›æº¯äº†ã€‚</p>
<h2 id="3-å›æº¯æ¨¡æ¿-java">3. å›æº¯æ¨¡æ¿(java)</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¹¶ä¸æ˜¯å›æº¯ï¼Œæ ¹æ®é¢˜ç›®ä¸åŒï¼Œä¼šæœ‰ä¸åŒ</span></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">getResult</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="comment">// å­˜å‚¨ç»“æœçš„List</span></span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; resList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// å­˜å‚¨ä¸´æ—¶ç»“æœã€å¹¶ç”¨æ¥å›æº¯çš„List,è¿™é‡Œä½¿ç”¨äº†ArrayDeque(æ•°ç»„å®ç°çš„é˜Ÿåˆ—),ä¾¿äºå¼¹å‡ºæœ€åä¸€ä¸ªå…ƒç´ ã€‚</span></span><br><span class="line">    Deque&lt;Integer&gt; tempDeque = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>;</span><br><span class="line">    <span class="comment">// ? ä»£è¡¨å¯èƒ½æœ‰æˆ–æ²¡æœ‰</span></span><br><span class="line">    <span class="comment">// ?1 : è¿™é‡ŒæŒ‡ è®°å½•å…ƒç´ æ˜¯å¦è¢«ä½¿ç”¨ï¼Œå¯èƒ½æ˜¯æ•°ç»„æˆ–è€…setï¼Œè¿™ä¸ªå¯èƒ½ç”±è¯¥æ–¹æ³•ä¼ å…¥ï¼Œä¹Ÿå¯èƒ½æ–¹æ³•å†…éƒ¨åˆ›å»º(å¦‚æœæ­¤æƒ…å†µï¼Œæ¯ä¸€æ¬¡é€’å½’æ·±æœéƒ½ä¼šåˆ›å»º)ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µç¡®å®šã€‚</span></span><br><span class="line">    <span class="comment">// ?2 : è¿™é‡ŒæŒ‡ éœ€è¦è¾¾æˆçš„ç›®æ ‡ï¼Œæœ‰æ—¶ç›®æ ‡éœ€è¦ä¼ å…¥ï¼Œå¦‚ï¼šæ‰€æœ‰å¯èƒ½çš„targetå’Œã€‚</span></span><br><span class="line">    backTrack(nums, <span class="number">0</span>, resList, tempDeque, ?<span class="number">1</span>ï¼Œ ?<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> resList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">backTrack</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> deepth, List&lt;List&lt;Integer&gt;&gt; resList, Deque&lt;Integer&gt; tempDeque)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (åˆ°è¾¾ç»ˆç‚¹/è¾¾åˆ°æ¡ä»¶) &#123;</span><br><span class="line">        <span class="comment">// æŒ‰æ¡ä»¶å­˜æ”¾ç»“æœ</span></span><br><span class="line">        resList.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;(temList));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (è¶Šç•Œæˆ–è€…ä¸åˆæ³•çŠ¶æ€) &#123; <span class="comment">// ä¾‹å¦‚ deepth == nums.length;</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‰ªæ(é™ä½éå†çš„æ—¶é—´å¤æ‚åº¦ï¼Œå†™æ›´å¥½ï¼Œå¯ä»¥ä¸å†™)</span></span><br><span class="line">    <span class="keyword">if</span> (ç‰¹æ®ŠçŠ¶æ€) &#123;	<span class="comment">// ä¾‹å¦‚ï¼Œä¾‹å¦‚è¦æ‰¾å’Œä¸º5çš„ï¼Œæ­¤æ—¶ç»“æœå·²ç»å¤§äº5äº†</span></span><br><span class="line">        <span class="comment">// æ­¤æ—¶returnï¼Œè§¦å‘é€’å½’çˆ¶çº§çš„å›æº¯ã€‚</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// çœŸæ­£çš„æ·±åº¦é€’å½’ä¸å›æº¯</span></span><br><span class="line">    <span class="keyword">for</span> (æ‰©å±•æ–¹å¼) &#123; <span class="comment">// æ‰©å±•æ–¹å¼å¯èƒ½å¤šç§ï¼Œç›®å‰æœ‰ int i = 0; ä¹Ÿæœ‰int i = deepthçš„ã€‚ã€‚ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (æ‰©å±•æ–¹å¼è¾¾åˆ°åˆæ³•çŠ¶æ€) &#123; <span class="comment">// æœ‰æ—¶å›æº¯é€’å½’ä¹Ÿå¯èƒ½åœ¨ifåˆ¤æ–­ä¹‹å¤–</span></span><br><span class="line">            ä¿®æ”¹æ“ä½œ; <span class="comment">// æ ¹æ®é¢˜æ„</span></span><br><span class="line">            æ ‡è®°ä½¿ç”¨; </span><br><span class="line">            backTrack(nums, deepth + <span class="number">1</span>, resList, tempDeque, ?<span class="number">1</span>ï¼Œ ?<span class="number">2</span>); <span class="comment">// æ·±åº¦éœ€è¦+1</span></span><br><span class="line">            è¿˜åŸæ ‡è®°;</span><br><span class="line">            tempList.pollLast(); <span class="comment">// å›æº¯ï¼Œå°†ç»“æœçš„æœ€åä¸€ä¸ªå…ƒç´ å¼¹å‡º</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-åè¯é‡Šä¹‰">4. åè¯é‡Šä¹‰</h2>
<ol>
<li>å›æº¯ï¼šæœç´¢åˆ°ç»“æœåï¼Œæ’¤é”€ä¸Šä¸€æ­¥çš„æœç´¢ï¼Œè¿›è¡Œå¦ä¸€ä¸ªå¯èƒ½ç»“æœçš„ä¸‹ä¸€æ­¥æœç´¢</li>
<li>å‰ªæï¼šåœ¨ä¸å¯ç»§ç»­æœç´¢çš„æƒ…å†µä¸‹ï¼Œç»å¯¹ä¸å¯èƒ½æ»¡è¶³ç›®æ ‡æƒ…å†µä¸‹ï¼Œæå‰returnï¼Œè§¦å‘é€’å½’çˆ¶çº§çš„å›æº¯ï¼Œä»è€Œæå‰å›æº¯ã€‚</li>
<li>è®°å¿†é›†ï¼šæœ‰æ—¶ç»“æœä¸éœ€è¦é‡å¤çš„ï¼Œè¿™æ—¶å¯ä»¥ç”¨setå­˜å‚¨ç»“æœï¼Œæˆ–è€…booleanæ•°ç»„æ ‡è®°å¯¹åº”çš„ä¸‹æ ‡æ˜¯å¦è¢«ä½¿ç”¨ï¼Œé¿å…é‡å¤ä½¿ç”¨ã€‚</li>
<li>æ’åºï¼šç”±äºå›æº¯æœ¬è´¨æ˜¯ä¸€ä¸ªä¼˜åŒ–è¿‡åçš„ç©·ä¸¾ï¼Œå…¶æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼Œå› æ­¤åœ¨å¤„ç†ä¹‹å‰ï¼Œå¯ä»¥è€ƒè™‘å¯¹å…¶è¿›è¡Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(NlogN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>æ—¶é—´å¤æ‚åº¦æ’åºï¼Œç”±äºæ—¶é—´å¤æ‚åº¦åªå–æœ€é«˜çš„ï¼Œå› æ­¤è¯¥æ—¶é—´å¤æ‚åº¦å¯ä»¥å¿½ç•¥ä¸è®°ã€‚</li>
</ol>
<h2 id="5-ä¾‹å­">5. ä¾‹å­</h2>
<h3 id="5-1-leetcode40-ç»„åˆæ€»å’Œ-ii">5.1 <a href="https://leetcode-cn.com/problems/combination-sum-ii/">LeetCode40 ç»„åˆæ€»å’Œ II</a></h3>
<blockquote>
<p>ç»™å®šä¸€ä¸ªæ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° target ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚<br>
æ³¨æ„ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚</p>
<p>ä¾‹ï¼šè¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,<br>
è¾“å‡º: [ [1,1,6], [1,2,5], [1,7], [2,6] ]</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">combinationSum2</span><span class="params">(<span class="type">int</span>[] candidates, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; tempList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; resList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Arrays.sort(candidates);</span><br><span class="line">        backTrack(candidates, tempList, resList, target, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> resList;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> candidates: ç»™å®šçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idx: æ­¤æ—¶å¤„äºæ ‘åœ°æ·±åº¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resList: å­˜å‚¨åœ°æœ€ç»ˆç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> temList: å­˜å‚¨åœ°å•ä¸ªç»“æœï¼Œç”¨æ¥å›æº¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target: è¦è¾¾åˆ°çš„ç›®æ ‡ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">backTrack</span><span class="params">(<span class="type">int</span>[] candidates, List&lt;Integer&gt; tempList, List&lt;List&lt;Integer&gt;&gt; resList, <span class="type">int</span> target, <span class="type">int</span> idx)</span> &#123;</span><br><span class="line">        <span class="comment">// target == 0æ—¶ï¼Œè¾¾åˆ°ç»“æœäº†ï¼Œæ·»åŠ ç»“æœï¼Œreturnè§¦å‘çˆ¶çº§çš„å›æº¯</span></span><br><span class="line">        <span class="keyword">if</span> (target == <span class="number">0</span>) &#123;</span><br><span class="line">            resList.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;(tempList));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœåˆ°è¾¾æ ‘çš„æœ€æ·±å¤„ï¼Œreturnè§¦å‘çˆ¶çº§çš„å›æº¯</span></span><br><span class="line">        <span class="keyword">if</span> (idx == candidates.length) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// setå»ºç«‹åœ¨å›æº¯æ–¹æ³•å†…éƒ¨ï¼Œå› æ­¤æ¯ä¸€æ¬¡newéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡é€’å½’éƒ½ä¸ä¸€æ ·</span></span><br><span class="line">        <span class="comment">// åªæœ‰åœ¨å‡ºé€’å½’åï¼Œåœ¨åŒä¸€çº§é€’å½’é‡Œï¼ŒåŒä¸€ä¸ªforå¾ªç¯é‡Œæ‰æ˜¯ä¸€æ ·çš„ã€‚(åŒä¸€ä¸ªé€’å½’å±‚çº§é‡Œæœ‰å¤šæ¬¡forå¾ªç¯ï¼Œè¿™ä¸ªå¤šæ¬¡çš„forå¾ªç¯ç”¨çš„æ˜¯åŒä¸€ä¸ªsetï¼Œä½†æ˜¯é€’å½’åç”¨çš„å°±æ˜¯æ–°çš„äº†)</span></span><br><span class="line">        Set&lt;Integer&gt; tempSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> idx; i &lt; candidates.length; i++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ¥ä¸‹æ¥è¦è¿›è¡Œæ¯”è¾ƒçš„numæ¯”ç›®æ ‡å¤§ï¼Œåˆ™ä¹‹åçš„æ·±åº¦éå†æ°¸è¿œä¸å¯èƒ½è¾¾åˆ°ç›®æ ‡ï¼Œè¿›è¡Œreturnå‰ªæï¼Œè§¦å‘çˆ¶çº§å›æº¯</span></span><br><span class="line">            <span class="keyword">if</span> (candidates[i] &gt; target) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœåŒ…å«å·²ç»ä½¿ç”¨çš„numsï¼Œåˆ™è·³è¿‡è¯¥æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (tempSet.contains(candidates[i])) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            tempList.add(candidates[i]);</span><br><span class="line">            <span class="comment">// å°†è¯¥æ•°æ¥å…¥ç»“æœ</span></span><br><span class="line">            tempSet.add(candidates[i]);</span><br><span class="line">            <span class="comment">// æ·±åº¦é€’å½’ï¼Œtarget - numï¼ŒåŒæ—¶æ·±åº¦ + 1</span></span><br><span class="line">            backTrack(candidates, tempList, resList, target - candidates[i], i + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// å›æº¯</span></span><br><span class="line">            tempList.remove(tempList.size()-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-leetcode46-å…¨æ’åˆ—">5.2 <a href="https://leetcode-cn.com/problems/permutations/">LeetCode46 å…¨æ’åˆ—</a></h3>
<blockquote>
<p>ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ <code>nums</code> ï¼Œè¿”å›å…¶ <strong>æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—</strong> ã€‚ä½ å¯ä»¥ <strong>æŒ‰ä»»æ„é¡ºåº</strong> è¿”å›ç­”æ¡ˆã€‚</p>
<p>ä¾‹ï¼šè¾“å…¥ï¼šnums = [1,2,3]<br>
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">permute</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; resList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Deque&lt;Integer&gt; tempList = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">        <span class="type">boolean</span>[] used = <span class="keyword">new</span> <span class="title class_">boolean</span>[nums.length];</span><br><span class="line">        <span class="keyword">if</span> (nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> resList;</span><br><span class="line">        &#125;</span><br><span class="line">        backTrack(nums, <span class="number">0</span>, resList, tempList, used);</span><br><span class="line">        <span class="keyword">return</span> resList;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums: ç»™å®šçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idx: æ­¤æ—¶å¤„äºæ ‘åœ°æ·±åº¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resList: å­˜å‚¨åœ°æœ€ç»ˆç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> temList: å­˜å‚¨åœ°å•ä¸ªç»“æœï¼Œç”¨æ¥å›æº¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> used: boolean æ•°ç»„ï¼Œç”¨æ¥æ ‡è®°å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ æ˜¯å¦è¢«ä½¿ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">backTrack</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> idx, List&lt;List&lt;Integer&gt;&gt; resList, Deque&lt;Integer&gt; tempList, <span class="type">boolean</span>[] used)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœåˆ°è¾¾æœ€åï¼Œæ·»åŠ ç»“æœå¹¶returnï¼Œè§¦å‘çˆ¶çº§çš„å›æº¯ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (idx == nums.length) &#123;</span><br><span class="line">            resList.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;(tempList));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!used[i]) &#123;</span><br><span class="line">                <span class="comment">// å°†è¯¥ä¸‹ä¸‹æ ‡çš„å…ƒç´ æ ‡è®°ä¸ºä½¿ç”¨</span></span><br><span class="line">                tempList.addLast(nums[i]);</span><br><span class="line">                used[i] = <span class="literal">true</span>;</span><br><span class="line">                <span class="comment">// æ·±åº¦é€’å½’</span></span><br><span class="line">                backTrack(nums, idx + <span class="number">1</span>, resList, tempList, used);</span><br><span class="line">                <span class="comment">// å°†è¯¥ä¸‹æ ‡çš„å…ƒç´ æ ‡è®°ä¸ºæœªä½¿ç”¨</span></span><br><span class="line">                used[i] = <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">// å¼¹å‡ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œå›æº¯</span></span><br><span class="line">                tempList.pollLast();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒåˆ†æŸ¥æ‰¾çš„ç»†èŠ‚å®ç°</title>
    <url>/2021/10/31/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%9A%84%E7%BB%86%E8%8A%82%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p>äºŒåˆ†æŸ¥æ‰¾çš„ä¸€äº›ç»†èŠ‚</p>
<span id="more"></span>
<h2 id="1-ä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾">1. ä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾</h2>
<blockquote>
<p>å¯¹äºå·²ç»æ’åºçš„è¡¨(å‡è®¾è¯¥è¡¨æ˜¯å‡åº)ï¼Œï¼Œå‡è®¾ç›®æ ‡å€¼åœ¨é—­åŒºé—´<code>[l, r]</code>ä¸­ï¼Œ æ¯æ¬¡å°†åŒºé—´é•¿åº¦ç¼©å°ä¸€åŠï¼Œå½“<code>l = r</code>æ—¶ï¼Œæˆ‘ä»¬å°±æ‰¾åˆ°äº†ç›®æ ‡å€¼ã€‚</p>
</blockquote>
<h2 id="2-äºŒåˆ†æŸ¥æ‰¾å®¹æ˜“é‡åˆ°çš„é—®é¢˜">2. äºŒåˆ†æŸ¥æ‰¾å®¹æ˜“é‡åˆ°çš„é—®é¢˜</h2>
<p>â€ƒâ€ƒäºŒåˆ†æŸ¥æ‰¾åŸç†ç®€å•ï¼Œä½†æ˜¯å¦‚æœç»†èŠ‚å¤„ç†ä¸å¥½ï¼Œå®¹æ˜“å‡ºç°é”™è¯¯ç­”æ¡ˆï¼Œç”šè‡³æ˜¯æ­»å¾ªç¯çš„ç»“æœã€‚ç½‘ä¸Šç»™å‡ºçš„æ¨¡æ¿ç”šå¤šï¼Œè¿™é‡Œåªç»™å‡ºYå¤§çš„æ¨¡æ¿ã€‚å¦‚ä¸‹</p>
<h2 id="3-æ¨¡æ¿">3. æ¨¡æ¿</h2>
<p>â€ƒâ€ƒåŸæ¨¡æ¿æ˜¯C++ç‰ˆï¼Œå¦‚ä¸‹å·²æ”¹ä¸ºjavaç‰ˆã€‚</p>
<h3 id="3-1-ç»™å‡ºè¦æŸ¥æ‰¾æ•°çš„å·¦è¾¹ç•Œ">3.1 ç»™å‡ºè¦æŸ¥æ‰¾æ•°çš„å·¦è¾¹ç•Œ</h3>
<blockquote>
<p>å¦‚è¦æŸ¥æ‰¾å‡åºæ•°ç»„ä¸­æ•°4ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼š[3, 3 , 4, 4, 4, 4, 4, 6, 8, 9]ï¼Œç»“æœåº”è¯¥ä¸º2ï¼›<br>
å¦‚æŸ¥æ‰¾å‡åºæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äº4(å¤§äº4çš„æ•°ä¸­çš„å·¦è¾¹ç•Œ)çš„æ•°ï¼š[3, 3 , 4, 4, 4, 4, 4, 6, 6, 8, 9 ]ï¼Œç»“æœåº”è¯¥ä¸º7;<br>
æ³¨æ„ç¬¬äºŒç§æƒ…å†µï¼Œå¹¶ä¸æ˜¯æ‰¾4ï¼Œæ‰¾å¤§äº4çš„æ•°ï¼Œæ‰€ä»¥æ˜¯å¤§äº4çš„æ•°å·¦è¾¹ç•Œã€‚</p>
</blockquote>
<p>â€ƒâ€ƒå½“æˆ‘ä»¬å°†åŒºé—´<code>[l, r]</code>åˆ’åˆ†æˆ<code>[l, mid]</code>å’Œ<code>[mid + 1, r]</code>æ—¶ï¼Œå…¶æ›´æ–°æ“ä½œæ˜¯<code>r = mid</code>(å–è¢«åˆ’åˆ†çš„å·¦åŒºé—´)ï¼Œæˆ–è€…<code>l = mid + 1</code>(å–è¢«åˆ’åˆ†çš„å³åŒºé—´)ï¼Œè®¡ç®—<code>mid</code>æ—¶ä¸éœ€è¦åŠ 1ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœæ»¡è¶³åœ¨å·¦å­è¡¨çš„æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (check(mid)) &#123;</span><br><span class="line">            r = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å–å³å­åˆ—è¡¨</span></span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è·³å‡ºå¾ªç¯æ—¶l=r,è¿”å›å“ªä¸ªéƒ½ä¸€æ ·</span></span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-ç»™å‡ºè¦æŸ¥æ‰¾æ•°çš„å³è¾¹ç•Œ">3.2 ç»™å‡ºè¦æŸ¥æ‰¾æ•°çš„å³è¾¹ç•Œ</h3>
<blockquote>
<p>å¦‚è¦æŸ¥æ‰¾å‡åºæ•°ç»„ä¸­æ•°4ç¬¬æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼š[3, 3 , 4, 4, 4, 4, 4, 6, 8, 9]ï¼Œç»“æœåº”è¯¥ä¸º6ï¼›<br>
å¦‚æŸ¥æ‰¾å‡åºæ•°ç»„ä¸­æœ€åä¸€ä¸ªå°äº4(å°äº4çš„æ•°å½“ä¸­çš„å³è¾¹ç•Œ)çš„æ•°ï¼š[3, 3 , 4, 4, 4, 4, 4, 6, 6, 8, 9 ]ï¼Œç»“æœåº”è¯¥ä¸º1;<br>
æ³¨æ„ç¬¬äºŒç§æƒ…å†µï¼Œå¹¶ä¸æ˜¯æ‰¾4ï¼Œæ‰¾å°äº4çš„æ•°ï¼Œæ‰€ä»¥æ˜¯å°äº4çš„å³è¾¹ç•Œã€‚</p>
</blockquote>
<p>â€ƒâ€ƒå½“æˆ‘ä»¬å°†åŒºé—´<code>[l, r]</code>åˆ’åˆ†æˆ<code>[l, mid - 1]</code>å’Œ<code>[mid, r]</code>æ—¶ï¼Œå…¶æ›´æ–°æ“ä½œæ˜¯<code>r = mid - 1</code>æˆ–è€…<code>l = mid</code>ï¼Œæ­¤æ—¶ä¸ºäº†é˜²æ­¢æ­»å¾ªç¯ï¼Œè®¡ç®—midæ—¶éœ€è¦åŠ 1ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">binarySearch2</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (l + r + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœæ»¡è¶³åœ¨å³å­è¡¨çš„æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (check(mid)) &#123;</span><br><span class="line">            l = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å–å·¦å­è¡¨</span></span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è·³å‡ºå¾ªç¯æ—¶l=r,è¿”å›å“ªä¸ªéƒ½ä¸€æ ·</span></span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-æ€»ç»“">4. æ€»ç»“</h2>
<h3 id="4-1-å¦‚ä½•é€‰æ‹©æ¨¡æ¿">4.1 å¦‚ä½•é€‰æ‹©æ¨¡æ¿</h3>
<p>â€ƒâ€ƒå‡è®¾ç­”æ¡ˆä¸ºN, æ»¡è¶³æ¡ä»¶çš„æ•°ä¸ºoï¼Œä¸æ»¡è¶³æ¡ä»¶çš„æ•°ä¸ºxï¼Œ<br>
å½“æ•°ç»„ä¸º<code>xxxxNoooo</code>ï¼Œè¿™æ—¶ç­”æ¡ˆä¸ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼çš„æœ€å·¦è¾¹ï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨ç¬¬ä¸€ç§å·¦è¾¹ç•Œçš„æ¨¡æ¿ã€‚<br>
å½“æ•°ç»„ä¸º<code>oo0oNxxxx</code>ï¼Œè¿™æ—¶ç­”æ¡ˆä¸ºæ‰€æœ‰ç¬¦å’Œæ¡ä»¶çš„å€¼çš„æœ€å³è¾¹ï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨ç¬¬äºŒç§å³è¾¹ç•Œçš„æ¨¡æ¿ã€‚</p>
<h3 id="4-2-è®°å¿†">4.2 è®°å¿†</h3>
<p>ç¡®å®šå·¦è¾¹ç•Œæ¨¡æ¿ï¼š</p>
<ol>
<li>å·¦è¾¹ç•Œï¼šmid = (l + r) &gt;&gt; 1</li>
<li>æ»¡è¶³æ¡ä»¶é€‰å·¦å­è¡¨ï¼Œif(check(mid)) { r = mid } ; checkæ»¡è¶³çš„æ¡ä»¶ä¸‹ï¼Œç›´æ¥=midï¼Œä¸éœ€è¦+1ã€‚</li>
<li>ä¸æ»¡è¶³æ¡ä»¶ï¼Œl = mid + 1ï¼›(å¦‚æœæ˜¯è¦å³åŒºé—´ï¼Œl = mid + 1ï¼›å¦‚æœè¦å·¦åŒºé—´ï¼Œr = mid - 1)ã€‚</li>
</ol>
<p>ç¡®å®šå³è¾¹ç•Œæ¨¡æ¿ï¼š</p>
<ol>
<li>å·¦è¾¹ç•Œï¼šmid = (l + r + 1) &gt;&gt; 1</li>
<li>æ»¡è¶³æ¡ä»¶é€‰å³å­è¡¨ï¼Œif(check(mid)) { l = mid } ; checkæ»¡è¶³çš„æ¡ä»¶ä¸‹ï¼Œç›´æ¥=midï¼Œä¸éœ€è¦+1ã€‚</li>
<li>ä¸æ»¡è¶³æ¡ä»¶ï¼Œr = mid - 1ï¼›(å¦‚æœæ˜¯è¦å³åŒºé—´ï¼Œl = mid + 1ï¼›å¦‚æœè¦å·¦åŒºé—´ï¼Œr = mid - 1)ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æŸ¥æ‰¾æ ‘ä¸AVLæ ‘</title>
    <url>/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬äºŒç« 4.3ä¸4.4èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="4-3-äºŒå‰æŸ¥æ‰¾æ ‘">4.3 äºŒå‰æŸ¥æ‰¾æ ‘</h2>
<blockquote>
<p>æ ‘çš„èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œä¸€æ£µéç©ºæ ‘è¦æˆä¸ºæŸ¥æ‰¾æ ‘ï¼Œåˆ™å¯¹äºä»»æ„èŠ‚ç‚¹xæœ‰ï¼šxçš„å·¦å­æ ‘éƒ½å°äºå®ƒï¼Œå³å­æ ‘èŠ‚ç‚¹éƒ½å¤§äºå®ƒã€‚<br>
äºŒå‰æŸ¥æ‰¾æ ‘çš„å¹³å‡æ·±åº¦æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œè¯æ˜å¯ç½‘ä¸ŠæŸ¥è¯¢ã€‚å¯ä»¥ä½¿ç”¨é€’å½’å®ç°ï¼Œä¸å¿…æ‹…å¿ƒæ ˆæº¢å‡ºã€‚æˆ–è§4.3.5å°èŠ‚</p>
</blockquote>
<p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªäºŒå‰æŸ¥æ‰¾æ ‘çš„å®ç°ï¼Œå…¶ä¸­BinaryNodeæ˜¯ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œç”¨æ¥å®ç°èŠ‚ç‚¹ã€‚</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>äºŒå‰æŸ¥æ‰¾æ ‘ä¸»ä»£ç å®ç°(ç‚¹å‡»å±•å¼€)</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºä¸€æ£µäºŒå‰æŸ¥æ‰¾æ ‘</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/10/23</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearchTree</span>&lt;AnyType&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> BinaryNode&lt;AnyType&gt; root;</span><br><span class="line">    <span class="comment">// æ¯”è¾ƒå™¨</span></span><br><span class="line">    <span class="keyword">private</span> Comparator cmp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinarySearchTree</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¸¦æ¯”è¾ƒå™¨çš„æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> c æ„é€ å™¨ä¼ å…¥çš„æ¯”è¾ƒå™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinarySearchTree</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> AnyType&gt; c)</span> &#123;</span><br><span class="line">        root = <span class="literal">null</span>;</span><br><span class="line">        cmp = c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">myCompare</span><span class="params">(AnyType lhs, AnyType rhs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœä¼ å…¥äº†æ¯”è¾ƒå™¨ï¼Œåˆ™ä½¿ç”¨ä¼ å…¥çš„æ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">return</span> cmp.compare(lhs, rhs);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡ç”¨ï¼Œåˆ™å¼ºåˆ¶è½¬ä¸ºCompareable, å¦‚æœæŠ¥é”™ï¼Œè¯´æ˜ä¸å¯è½¬ï¼Œåˆ™ä¹Ÿåº”è¯¥ç›´æ¥æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">return</span> ((Comparable) lhs).compareTo(rhs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.root == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> contains(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">findMax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BufferUnderflowException</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> findMax(root).element;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">findMin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BufferUnderflowException</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> findMin(root).element;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        root = insert(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        root = remove(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printTree</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// todo</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å½’åˆ¤æ–­æ ‘ä¸­æ˜¯å¦åŒ…å«é¡¹ä¸ºxèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x éœ€è¦æŸ¥æ‰¾çš„æ•°æ®x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœæ ‘å­˜åœ¨å…ƒç´ xè¿”å›trueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(AnyType x, BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœèŠ‚ç‚¹ä¸ºnullï¼Œç»ˆæ­¢é€’å½’ï¼Œè¯¥é€’å½’æ˜¯å°¾é€’å½’(å¯ä»¥ä½¿ç”¨å°¾é€’å½’çš„åŸå› æ˜¯è¯¥é€’å½’å¾ˆæ˜æ˜¾æ ˆæ·±ä¸ºO(logN))</span></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æŸ¥æ‰¾çš„å…ƒç´ ä¸æ ¹èŠ‚ç‚¹æ¯”è¾ƒ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> myCompare(x, t.element);</span><br><span class="line">        <span class="comment">// å¦‚æœxæ¯”æ ¹èŠ‚ç‚¹å°ï¼Œåˆ™ç»§ç»­æ‰¾å·¦å­æ ‘</span></span><br><span class="line">        <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> contains(x, t.left);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœxæ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œåˆ™ç»§ç»­æ‰¾å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">return</span> contains(x, t.right);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// xç­‰äºæ ¹èŠ‚ç‚¹ï¼Œè¿”å›trueï¼Œè·³å‡ºé€’å½’</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€’å½’æŸ¥è¯¢äºŒå‰æŸ¥æ‰¾æ ‘çš„æœ€å°çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">findMin</span><span class="params">(BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t.left == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å°¾é€’å½’çš„å‡ºå£ï¼Œæœ€æ·±çš„å·¦å­èŠ‚ç‚¹å³ä¸ºæœ€å°å…ƒç´ ï¼Œå°¾é€’å½’å¯ä»¥æ”¹ä¸ºå¦‚ä¸‹whileå¾ªç¯</span></span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> findMin(t.left);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éé€’å½’æŸ¥è¯¢äºŒå‰æŸ¥æ‰¾æ ‘çš„æœ€å¤§çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">findMax</span><span class="params">(BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (t.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                t = t.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å…ƒç´ æ’å…¥äºŒå‰æŸ¥æ‰¾æ ‘ ï¼ˆæ³¨æ„ï¼Œè¯¥äºŒå‰æŸ¥æ‰¾æ ‘ä¸æ˜¯å¹³è¡¡çš„ï¼Œè¯¥ä¾‹éƒ½æ˜¯æ’å…¥åˆ°å¶å­ç»“ç‚¹å(ä¸éœ€è¦å¹³è¡¡)ï¼‰ï¼Œå»ºè®®æ‰‹ç”»ç†è§£</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦æ’å…¥çš„å…ƒç´ x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t è¯¥äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œç”¨æ¥ç¡®å®šæ˜¯å“ªä¸€æ£µæ ‘</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> tï¼šæ’å…¥çš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">insert</span><span class="params">(AnyType x, BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="comment">// é€’å½’å‡ºæ ˆæ¡ä»¶ï¼šå¦‚æœé€’å½’ç»“æœçš„æ ¹èŠ‚ç‚¹ä¸ºnullï¼Œåˆ™è¯´æ˜å¯ä»¥æ­¤å¤„æ’å…¥</span></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BinaryNode</span>&lt;&gt;(x, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> myCompare(x, t.element);</span><br><span class="line">        <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ­¤å¤„è¯´æ˜é€’å½’ï¼šå¦‚æœxæ¯”rootå°ï¼Œåˆ™root.left ä½œä¸ºæ–°çš„rootè¿›è¡Œé€’å½’è°ƒç”¨ï¼Œè®°ä½œrootLï¼Œè¿›å…¥é€’å½’åï¼Œå¦‚æœä¸ºnull</span></span><br><span class="line">            <span class="comment">// åˆ™è¯´æ˜æ­¤å¤„ä¸ºæ’å…¥ç‚¹ï¼Œè¿”å›ä¸€ä¸ªnew BinaryNode(å‡ºæ ˆæ¡ä»¶)ï¼Œè·³å‡ºåº•å±‚é€’å½’ï¼Œæ­¤æ—¶t.leftè¿›è¡Œæ¥æ”¶ï¼Œä»è€Œå®ç°æ’å…¥</span></span><br><span class="line">            <span class="comment">// æ³¨æ„æ­¤å¤„çš„å·¦ä¾§çš„t.leftçš„tï¼Œæ˜¯ç”±inserté€’å½’ä¼ å…¥çš„ï¼Œå¯ä»¥æ˜¯ä¸Šé¢è¯´çš„rootLï¼Œt.leftå®é™…ä¸Šç¡®å®šäº†ã€‚tçš„leftæŒ‡é’ˆæŒ‡å‘å“ªä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            t.left = insert(x, t.left);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            t.right = insert(x, t.right);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè¦æ’å…¥çš„å…ƒç´ ä¸äºŒå‰æŸ¥æ‰¾æ ‘çš„æŸä¸ªå…ƒç´ ç›¸åŒ(å¯ä»¥å°†ç›¸åŒçš„å…ƒç´ ä¿ç•™åœ¨å¦ä¸€ä¸ªç»“æœå½“ä¸­)</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ­¤å¤„çš„æƒ…å†µæ˜¯ï¼Œå½“t != nullæ‰èƒ½èµ°åˆ°è¿™é‡Œï¼Œæ¯ä¸€å±‚é€’å½’ï¼Œè¿”å›çš„æ˜¯root,ç”¨äºä¸Šè¿°çš„t.leftæˆ–t.right</span></span><br><span class="line">        <span class="comment">// é€’å½’åˆ°æœ€åè¿”å›åˆ°ç¬¬ä¸€æ¬¡çš„æ—¶å€™ï¼Œåˆ™ä¸ºåˆå§‹ä¼ å…¥çš„tçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»äºŒå‰æŸ¥æ‰¾æ ‘ä¸­åˆ é™¤å…ƒç´ x(æ³¨æ„ï¼šè¯¥äºŒå‰æŸ¥æ‰¾æ ‘ä¸æ˜¯å¹³è¡¡çš„ï¼Œå¯¹äºåˆ é™¤çš„èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªï¼Œåˆ™ç›´æ¥ç§»åŠ¨è¿™å”¯ä¸€çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå»)</span></span><br><span class="line"><span class="comment">     * å¯¹äºæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„ï¼Œè¯¥ä¾‹xèŠ‚ç‚¹åˆ é™¤åï¼Œç§»åŠ¨ä¸Šå»çš„éƒ½æ˜¯xèŠ‚ç‚¹çš„å³å­æ ‘çš„æœ€å°çš„èŠ‚ç‚¹(è¯¥èŠ‚ç‚¹ä¸å¯èƒ½æœ‰å·¦å­æ ‘))ï¼Œç„¶åé€’å½’çš„åˆ é™¤ç§»åŠ¨ä¸Šå»çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦åˆ é™¤çš„èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> t äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">remove</span><span class="params">(AnyType x, BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> myCompare(x, t.element);</span><br><span class="line">        <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            t.left = remove(x, t.left);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            t.right = remove(x, t.right);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t.left != <span class="literal">null</span> &amp;&amp; t.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°äº†è¦åˆ é™¤çš„å…ƒç´ ï¼Œè¦åˆ é™¤çš„å…ƒç´ æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="comment">// æ‰¾åˆ°è¯¥èŠ‚ç‚¹ä½œä¸ºrootçš„å­æ ‘çš„æœ€å°çš„èŠ‚ç‚¹çš„å€¼ï¼Œèµ‹ç»™è¯¥èŠ‚ç‚¹(ç”¨æœ€å°çš„å…ƒç´ æ›¿æ¢åˆ é™¤çš„èŠ‚ç‚¹)</span></span><br><span class="line">            t.element = findMin(t.right).element;</span><br><span class="line">            <span class="comment">// è¯¥èŠ‚ç‚¹çš„å³å­æ ‘ä¹Ÿè¦åˆ é™¤åˆšåˆšæœ€å°çš„å…ƒç´ (åˆšåˆšæ›¿æ¢ä¸Šå»çš„å…ƒç´ )</span></span><br><span class="line">            t.right = remove(t.element, t.right);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹æˆ–æ²¡æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µï¼Œç›´æ¥å°†å­èŠ‚ç‚¹ç§»åŠ¨åˆ°åˆ é™¤çš„èŠ‚ç‚¹ä¸Šå»(ä¸¤ä¸ªå­èŠ‚ç‚¹ä¸ºnullåˆ™ä¸ºnull)</span></span><br><span class="line">            t = t.left != <span class="literal">null</span> ? t.left : t.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’æœ€ç»ˆä¼šè¿”å›ä¼ å…¥çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">BinaryNode</span>&lt;AnyType&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> AnyType element;</span><br><span class="line">        <span class="keyword">public</span> BinaryNode&lt;AnyType&gt; left;</span><br><span class="line">        <span class="keyword">public</span> BinaryNode&lt;AnyType&gt; right;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ„é€ ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒåŒæ—¶çŸ¥åå·¦å­èŠ‚ç‚¹ä¸å³å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> element å½“å‰èŠ‚ç‚¹å­˜å‚¨çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> left    å·¦å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> right   å³å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">BinaryNode</span><span class="params">(AnyType element, BinaryNode&lt;AnyType&gt; left, BinaryNode&lt;AnyType&gt; right)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.element = element;</span><br><span class="line">            <span class="built_in">this</span>.left = left;</span><br><span class="line">            <span class="built_in">this</span>.right = right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ„é€ ä¸€ä¸ªåªæœ‰èŠ‚ç‚¹ï¼Œæ— å·¦å­èŠ‚ç‚¹çš„ï¼Œæ— å³å­èŠ‚ç‚¹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> element å½“å‰èŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">BinaryNode</span><span class="params">(AnyType element)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.element = element;</span><br><span class="line">            <span class="built_in">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">            <span class="built_in">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="4-3-0-èŠ‚ç‚¹å…ƒç´ çš„æ¯”è¾ƒå®ç°">4.3.0 èŠ‚ç‚¹å…ƒç´ çš„æ¯”è¾ƒå®ç°</h3>
<p>â€ƒâ€ƒäºŒå‰æŸ¥æ‰¾æ ‘æ˜¯æœ‰åºçš„ï¼Œå› æ­¤å¿…é¡»ä½¿å­˜å‚¨çš„å…ƒç´ æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œè¦ä½¿ä¸€ä¸ªç±»æ˜¯å¯ä»¥æ¯”çš„ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œ1ç§æ˜¯å®ç°Comparableæ¥å£ï¼Œå¦ä¸€ç§æ˜¯ä»¤å…¶ä¼ å…¥Comparatoræ¯”è¾ƒå™¨ã€‚è¿™é‡Œé€‰æ‹©äº†ç¬¬äºŒç§ï¼Œé€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥æ¯”è¾ƒå™¨ã€‚å¦‚æœæ²¡æœ‰ä¼ å…¥æ¯”è¾ƒå™¨ï¼Œåˆ™å†…éƒ¨å°†ç±»å¼ºè½¬ä¸ºComparableçš„ï¼Œå¦‚æœæ˜¯ä¸å¯æ¯”çš„ï¼Œè¿™æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚(å› ä¸ºæŸ¥æ‰¾æ ‘æ˜¯å¿…é¡»æœ‰åºçš„ï¼Œæ‰€ä»¥ä¸å¯æ¯”ä¹Ÿåº”è¯¥æŠ›å‡ºå¼‚å¸¸)ã€‚</p>
<h3 id="4-3-1-containsæ–¹æ³•">4.3.1 containsæ–¹æ³•</h3>
<p>â€ƒâ€ƒè¯¥æ–¹æ³•è¿”å›æ˜¯å¦åŒ…å«æŸä¸ªxå…ƒç´ ï¼Œè¿”å›trueæˆ–falseï¼Œå¦‚æœæ ‘tæ˜¯ç©ºé›†ï¼Œåˆ™è¿”å›falseï¼Œå¦‚æœxæ¯”tå°ï¼Œåˆ™ç»§ç»­æŸ¥æ‰¾å·¦å­æ ‘ï¼Œå¦åˆ™ç»§ç»­æŸ¥æ‰¾å³å­æ ‘ï¼Œç›´åˆ°æŸ¥æ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸ºnullçš„ç‚¹ï¼Œè¯´æ˜æ²¡æœ‰ã€‚è¿™ä½¿ç”¨é€’å½’å®ç°ã€‚å®Œæ•´å®ä¾‹77-101è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å½’åˆ¤æ–­æ ‘ä¸­æ˜¯å¦åŒ…å«é¡¹ä¸ºxèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x éœ€è¦æŸ¥æ‰¾çš„æ•°æ®x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœæ ‘å­˜åœ¨å…ƒç´ xè¿”å›trueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(AnyType x, BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœèŠ‚ç‚¹ä¸ºnullï¼Œç»ˆæ­¢é€’å½’ï¼Œè¯¥é€’å½’æ˜¯å°¾é€’å½’(å¯ä»¥ä½¿ç”¨å°¾é€’å½’çš„åŸå› æ˜¯è¯¥é€’å½’å¾ˆæ˜æ˜¾æ ˆæ·±ä¸ºO(logN))</span></span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾çš„å…ƒç´ ä¸æ ¹èŠ‚ç‚¹æ¯”è¾ƒ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> myCompare(x, t.element);</span><br><span class="line">    <span class="comment">// å¦‚æœxæ¯”æ ¹èŠ‚ç‚¹å°ï¼Œåˆ™ç»§ç»­æ‰¾å·¦å­æ ‘</span></span><br><span class="line">    <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> contains(x, t.left);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœxæ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œåˆ™ç»§ç»­æ‰¾å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> contains(x, t.right);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// xç­‰äºæ ¹èŠ‚ç‚¹ï¼Œè¿”å›trueï¼Œè·³å‡ºé€’å½’</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-2-findminä¸findmaxæ–¹æ³•">4.3.2 findMinä¸findMaxæ–¹æ³•</h3>
<p>â€ƒâ€ƒæ­¤ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«è¿”å›æ ‘ç§çš„æœ€å°çš„èŠ‚ç‚¹ä¸æœ€å¤§çš„èŠ‚ç‚¹ã€‚å¯¹äºæœ€å°èŠ‚ç‚¹ï¼Œä»rootèŠ‚ç‚¹å¼€å§‹ï¼Œå‘å·¦å­æ ‘æŸ¥æ‰¾ï¼Œåªè¦æœ‰å·¦å„¿å­å°±å‘å·¦è¿›è¡Œï¼Œå¦‚æœå·¦å„¿å­èŠ‚ç‚¹ä¸ºnullï¼Œè¯´æ˜è¯¥èŠ‚ç‚¹æœ€å°å…ƒç´ ã€‚å¯¹äºæœ€å¤§èŠ‚ç‚¹ï¼Œä»rootèŠ‚ç‚¹å¼€å§‹ï¼Œå‘å³å­æ ‘æŸ¥æ‰¾ï¼Œåªè¦æœ‰å³å„¿å­å°±å‘å³è¿›è¡Œï¼Œå…¶ä½™åŒæŸ¥æ‰¾æœ€å°èŠ‚ç‚¹ã€‚å®Œæ•´å®ä¾‹103-122è¡Œã€‚<br>
â€ƒâ€ƒfindMInçš„å®ç°ä½¿ç”¨çš„å°¾é€’å½’ï¼Œå³åœ¨å°¾éƒ¨åªå®ç°å¯¹è‡ªèº«çš„é€’å½’è°ƒç”¨ï¼Œè€Œä¸”æ— å…¶ä»–å¤„ç†ï¼Œå°¾é€’å½’ä¸€æŠŠä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œä½†æ˜¯å»ºè®®å†™æˆfindMaxçš„å¾ªç¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€’å½’æŸ¥è¯¢äºŒå‰æŸ¥æ‰¾æ ‘çš„æœ€å°çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">findMin</span><span class="params">(BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t.left == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// å°¾é€’å½’çš„å‡ºå£ï¼Œæœ€æ·±çš„å·¦å­èŠ‚ç‚¹å³ä¸ºæœ€å°å…ƒç´ ï¼Œå°¾é€’å½’å¯ä»¥æ”¹ä¸ºå¦‚ä¸‹whileå¾ªç¯</span></span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> findMin(t.left);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éé€’å½’æŸ¥è¯¢äºŒå‰æŸ¥æ‰¾æ ‘çš„æœ€å¤§çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">findMax</span><span class="params">(BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (t != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (t.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            t = t.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-3-insertæ–¹æ³•">4.3.3 insertæ–¹æ³•</h3>
<p>â€ƒâ€ƒè¯¥æ–¹æ³•å®ç°äº†åœ¨æ ‘ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åè¿”å›è¯¥æ ‘çš„rootèŠ‚ç‚¹(é€šè¿‡è¯¥èŠ‚ç‚¹å¯ä»¥è·å–åˆ°æ•´æ£µæ ‘)ã€‚ç”±äºè¯¥æ ‘ä¸æ˜¯å¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨äº†ç®€å•çš„å°†å°†å…ƒç´ æ’å…¥åˆ°å¶å­èŠ‚ç‚¹æœ«ç«¯ã€‚å¦‚æœæ’å…¥çš„èŠ‚ç‚¹æ¯”rootèŠ‚ç‚¹å°ï¼Œåˆ™ç»§ç»­ä¸å·¦å­æ ‘çš„rootèŠ‚ç‚¹æ¯”è¾ƒï¼Œé‡å¤è¯¥æ­¥éª¤ï¼Œç›´åˆ°æŸä¸ªå¶å­èŠ‚ç‚¹ï¼Œä¸è¯¥å¶å­èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¦‚æœå°äºï¼Œè·å–è¯¥å¶å­èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹ä¸ºnullï¼Œåˆ™åœ¨nullçš„åœ°æ–¹æ’å…¥ï¼›å¦‚æœå¤§äºï¼Œè·å–è¯¥å¶å­èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹ä¸ºnullï¼Œåˆ™åœ¨nullçš„åœ°æ–¹æ’å…¥ã€‚å®Œæ•´å®ä¾‹124-151ã€‚<br>
â€ƒâ€ƒè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªé€’å½’å®ç°ï¼Œæ³¨æ„é€’å½’è¾ƒéš¾ç†è§£ï¼Œå»ºè®®æ‰‹åŠ¨æ¨å¯¼é€’å½’ç†è§£ï¼Œç†è§£æ¯ä¸€å±‚é€’å½’å‡ºæ ˆçš„æ•°æ®ï¼Œåç»­æ€ä¹ˆæ¥æ”¶ã€‚ä»¥åŠæœ€ç»ˆç»“æœè¿”å›çš„tçš„æ•°æ®çš„å…·ä½“å«ä¹‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å…ƒç´ æ’å…¥äºŒå‰æŸ¥æ‰¾æ ‘ ï¼ˆæ³¨æ„ï¼Œè¯¥äºŒå‰æŸ¥æ‰¾æ ‘ä¸æ˜¯å¹³è¡¡çš„ï¼Œè¯¥ä¾‹éƒ½æ˜¯æ’å…¥åˆ°å¶å­ç»“ç‚¹å(ä¸éœ€è¦å¹³è¡¡)ï¼‰ï¼Œå»ºè®®æ‰‹ç”»ç†è§£</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦æ’å…¥çš„å…ƒç´ x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t è¯¥äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œç”¨æ¥ç¡®å®šæ˜¯å“ªä¸€æ£µæ ‘</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> tï¼šæ’å…¥çš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">insert</span><span class="params">(AnyType x, BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">    <span class="comment">// é€’å½’å‡ºæ ˆæ¡ä»¶ï¼šå¦‚æœé€’å½’ç»“æœçš„æ ¹èŠ‚ç‚¹ä¸ºnullï¼Œåˆ™è¯´æ˜å¯ä»¥æ­¤å¤„æ’å…¥</span></span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BinaryNode</span>&lt;&gt;(x, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> myCompare(x, t.element);</span><br><span class="line">    <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ­¤å¤„è¯´æ˜é€’å½’ï¼šå¦‚æœxæ¯”rootå°ï¼Œåˆ™root.left ä½œä¸ºæ–°çš„rootè¿›è¡Œé€’å½’è°ƒç”¨ï¼Œè®°ä½œrootLï¼Œè¿›å…¥é€’å½’åï¼Œå¦‚æœä¸ºnull</span></span><br><span class="line">        <span class="comment">// åˆ™è¯´æ˜æ­¤å¤„ä¸ºæ’å…¥ç‚¹ï¼Œè¿”å›ä¸€ä¸ªnew BinaryNode(å‡ºæ ˆæ¡ä»¶)ï¼Œè·³å‡ºåº•å±‚é€’å½’ï¼Œæ­¤æ—¶t.leftè¿›è¡Œæ¥æ”¶ï¼Œä»è€Œå®ç°æ’å…¥</span></span><br><span class="line">        <span class="comment">// æ³¨æ„æ­¤å¤„çš„å·¦ä¾§çš„t.leftçš„tï¼Œæ˜¯ç”±inserté€’å½’ä¼ å…¥çš„ï¼Œå¯ä»¥æ˜¯ä¸Šé¢è¯´çš„rootLï¼Œt.leftå®é™…ä¸Šç¡®å®šäº†ã€‚tçš„leftæŒ‡é’ˆæŒ‡å‘å“ªä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        t.left = insert(x, t.left);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        t.right = insert(x, t.right);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè¦æ’å…¥çš„å…ƒç´ ä¸äºŒå‰æŸ¥æ‰¾æ ‘çš„æŸä¸ªå…ƒç´ ç›¸åŒ(å¯ä»¥å°†ç›¸åŒçš„å…ƒç´ ä¿ç•™åœ¨å¦ä¸€ä¸ªç»“æœå½“ä¸­ï¼Œæˆ–è€…ä»€ä¹ˆä¹Ÿä¸åš)</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ­¤å¤„çš„æƒ…å†µæ˜¯ï¼Œå½“t != nullæ‰èƒ½èµ°åˆ°è¿™é‡Œï¼Œæ¯ä¸€å±‚é€’å½’ï¼Œè¿”å›çš„æ˜¯root,ç”¨äºä¸Šè¿°çš„t.leftæˆ–t.right</span></span><br><span class="line">    <span class="comment">// é€’å½’åˆ°æœ€åè¿”å›åˆ°ç¬¬ä¸€æ¬¡çš„æ—¶å€™ï¼Œåˆ™ä¸ºåˆå§‹ä¼ å…¥çš„tçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-4-removeæ–¹æ³•">4.3.4 removeæ–¹æ³•</h3>
<p>â€ƒâ€ƒå¦‚æœè¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹xï¼Œåˆ™ç›´æ¥åˆ é™¤ï¼Œå¦‚æœxåªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥å°†xçš„å­èŠ‚ç‚¹ç§»åŠ¨åˆ°åˆ é™¤çš„èŠ‚ç‚¹xå³å¯ã€‚å¦‚æœxæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œåˆ™å°†å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹ç§»åŠ¨ä¸Šå»ï¼Œç„¶åå¯¹äºå³å­æ ‘ï¼Œç»§ç»­å°†ç§»åŠ¨ä¸Šå»çš„å…ƒç´ åˆ é™¤ï¼Œç›´åˆ°èŠ‚ç‚¹ä¸ºnullï¼Œåˆ™ä»£è¡¨å­æ ‘è¦åˆ é™¤çš„å…ƒç´ ä¸ºnullï¼Œæ­¤æ—¶è·³å‡ºé€’å½’ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»äºŒå‰æŸ¥æ‰¾æ ‘ä¸­åˆ é™¤å…ƒç´ x(æ³¨æ„ï¼šè¯¥äºŒå‰æŸ¥æ‰¾æ ‘ä¸æ˜¯å¹³è¡¡çš„ï¼Œå¯¹äºåˆ é™¤çš„èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªï¼Œåˆ™ç›´æ¥ç§»åŠ¨è¿™å”¯ä¸€çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå»)</span></span><br><span class="line"><span class="comment">     * å¯¹äºæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„ï¼Œè¯¥ä¾‹xèŠ‚ç‚¹åˆ é™¤åï¼Œç§»åŠ¨ä¸Šå»çš„éƒ½æ˜¯xèŠ‚ç‚¹çš„å³å­æ ‘çš„æœ€å°çš„èŠ‚ç‚¹(è¯¥èŠ‚ç‚¹ä¸å¯èƒ½æœ‰å·¦å­æ ‘))ï¼Œç„¶åé€’å½’çš„åˆ é™¤ç§»åŠ¨ä¸Šå»çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦åˆ é™¤çš„èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> t äºŒå‰æŸ¥æ‰¾æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">private</span> BinaryNode&lt;AnyType&gt; <span class="title function_">remove</span><span class="params">(AnyType x, BinaryNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> myCompare(x, t.element);</span><br><span class="line">    <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        t.left = remove(x, t.left);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        t.right = remove(x, t.right);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t.left != <span class="literal">null</span> &amp;&amp; t.right != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°äº†è¦åˆ é™¤çš„å…ƒç´ ï¼Œè¦åˆ é™¤çš„å…ƒç´ æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// æ‰¾åˆ°è¯¥èŠ‚ç‚¹ä½œä¸ºrootçš„å­æ ‘çš„æœ€å°çš„èŠ‚ç‚¹çš„å€¼ï¼Œèµ‹ç»™è¯¥èŠ‚ç‚¹(ç”¨æœ€å°çš„å…ƒç´ æ›¿æ¢åˆ é™¤çš„èŠ‚ç‚¹)</span></span><br><span class="line">        t.element = findMin(t.right).element;</span><br><span class="line">        <span class="comment">// è¯¥èŠ‚ç‚¹çš„å³å­æ ‘ä¹Ÿè¦åˆ é™¤åˆšåˆšæœ€å°çš„å…ƒç´ (åˆšåˆšæ›¿æ¢ä¸Šå»çš„å…ƒç´ )</span></span><br><span class="line">        t.right = remove(t.element, t.right);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹æˆ–æ²¡æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µï¼Œç›´æ¥å°†å­èŠ‚ç‚¹ç§»åŠ¨åˆ°åˆ é™¤çš„èŠ‚ç‚¹ä¸Šå»(ä¸¤ä¸ªå­èŠ‚ç‚¹ä¸ºnullåˆ™ä¸ºnull)</span></span><br><span class="line">        t = t.left != <span class="literal">null</span> ? t.left : t.right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€’å½’æœ€ç»ˆä¼šè¿”å›ä¼ å…¥çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/remove%E4%B8%80%E4%B8%AA%E5%AD%90%E8%8A%82%E7%82%B9%E4%B8%8E%E4%B8%A4%E4%B8%AA%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E6%83%85%E5%86%B5.webp" alt="removeä¸€ä¸ªå­èŠ‚ç‚¹ä¸ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æƒ…å†µ"></p>
<ul>
<li>åˆ é™¤çš„èŠ‚ç‚¹4åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼šç›´æ¥å°†å­èŠ‚ç‚¹3ç§»åŠ¨åˆ°åˆ é™¤çš„èŠ‚ç‚¹å³å¯ã€‚(å°†èŠ‚ç‚¹2çš„æŒ‡é’ˆæŒ‡å‘å­èŠ‚ç‚¹)</li>
<li>åˆ é™¤çš„èŠ‚ç‚¹2ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼šå°†2çš„å€¼æ”¹ä¸ºå³å­æ ‘çš„æœ€å°çš„å…ƒç´ 3ï¼Œ(æ³¨æ„ï¼Œæ­¤æ—¶çš„åŸæœ¬çš„3çš„å…ƒç´ èŠ‚ç‚¹å¹¶æ²¡æœ‰åˆ é™¤)ï¼Œç„¶åå°†å³å­æ ‘ä¸­çš„3çš„èŠ‚ç‚¹æŒ‰ç…§æ­¤é€»è¾‘é€’å½’åˆ é™¤ã€‚</li>
<li>å¦‚æœåˆ é™¤çš„æ¬¡æ•°ä¸å¤šï¼Œåˆ™ä½¿ç”¨æƒ°æ€§åˆ é™¤ï¼Œå½“å…ƒç´ è¢«åˆ é™¤æ—¶ï¼Œåªæ˜¯è¢«æ ‡è®°åˆ é™¤ï¼Œä»ç„¶ç•™åœ¨æ ‘ä¸­ã€‚</li>
</ul>
<h3 id="4-3-5-å¹³å‡æŸ¥æ‰¾æ·±åº¦">4.3.5 å¹³å‡æŸ¥æ‰¾æ·±åº¦</h3>
<blockquote>
<p>æ ‘çš„èŠ‚ç‚¹å¹³å‡æ·±åº¦ä¸ºO(logN)ã€‚ä¸€æ£µæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹çš„æ·±åº¦çš„å’Œä¸º<strong>å†…éƒ¨è·¯å¾„é•¿</strong>ã€‚<br>
(å¦‚ä¸Šå›¾4-23ï¼š(6-&gt;2) + ((6-&gt;2) + (2-&gt;1)) + ((6-&gt;2) + (2-&gt;4)) + ((6-&gt;2) + (2-&gt;4) + (4-&gt;3)) + (6-&gt;8) = 9è·¯å¾„é•¿<br>
æ·±åº¦è®¡ç®—ï¼š1 + (1 + 1) + (1+1) + (1+1+1) + 1 = 9è·¯å¾„é•¿</p>
</blockquote>
<p>ä»¤D(N)æ˜¯å…·æœ‰Nä¸ªèŠ‚ç‚¹çš„æ ‘Tçš„å†…éƒ¨è·¯å¾„é•¿ï¼Œåˆ™D(1) = 0ã€‚ä¸€æ£µNèŠ‚ç‚¹çš„æ ‘ç”±ä¸€æ£µièŠ‚ç‚¹çš„å·¦å­æ ‘å’Œä¸€æ£µï¼ˆN-i-1ï¼‰èŠ‚ç‚¹çš„å³å­æ ‘ç»„æˆã€‚åˆ™D(N) = D(i) + D(N-i-1)ï¼Œä½†æ˜¯å› ä¸ºåœ¨åŸæ ‘ä¸­ï¼Œå·¦å³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹æ·±åº¦ä¼šè¢«åŠ ä¸€ï¼Œå› æ­¤éœ€è¦åŠ  N - 1ã€‚åˆ™é€’æ¨å…¬å¼ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>D</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>+</mo><mi>D</mi><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">D(N) = D(i) + D(N-i-1) + N - 1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p>
<p>å¯¹äºäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ‰€æœ‰å­æ ‘å¤§å°éƒ½ç­‰å¯èƒ½å‡ºç°ï¼Œåˆ™æœ‰D(i)ä¸D(N-i-1)çš„å¹³å‡å€¼æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><mo stretchy="false">)</mo><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mi>D</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\frac{1}{N}) \sum_{j=0}^{N-1}D(j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.417049em;vertical-align:-0.43581800000000004em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>ã€‚äºæ˜¯æœ‰</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>2</mn><mi>N</mi></mfrac><mo stretchy="false">[</mo><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mi>D</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>+</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">D(N) = \frac{2}{N}[\sum_{j=0}^{N-1}D(j)] + N - 1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.2421130000000007em;vertical-align:-1.4137769999999998em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">[</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000006em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p>
<p>è¯¥å€¼çš„è§£ï¼Œå¯ä»¥çš„åˆ°å¹³å‡å€¼D(N) = O(NlogN)</p>
<h2 id="4-4-avlæ ‘">4.4 AVLæ ‘</h2>
<blockquote>
<p>AVLæ˜¯ä¸€æ£µè‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ã€‚<br>
å¹³è¡¡ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘ä¸å³å­æ ‘<strong>é«˜åº¦</strong>æœ€å¤§å·®ä¸º1ã€‚å³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><msub><mi>H</mi><mtext>æœ€é«˜</mtext></msub><mo>âˆ’</mo><msub><mi>H</mi><mtext>æœ€ä½</mtext></msub><mi mathvariant="normal">âˆ£</mi><mo>&lt;</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">|H_{æœ€é«˜}-H_{æœ€ä½}| &lt;= 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">æœ€</span><span class="mord cjk_fallback mtight">é«˜</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">æœ€</span><span class="mord cjk_fallback mtight">ä½</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œå¯¹äºç©ºæ ‘ï¼Œé«˜åº¦å®šä¹‰ä¸º0</p>
</blockquote>
<p>â€ƒå¯ä»¥ç²—ç•¥è¯æ˜ï¼Œä¸€æ£µAVLæ ‘çš„é«˜åº¦æœ€å¤šä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.44</mn><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>2</mn><mo stretchy="false">)</mo><mo>âˆ’</mo><mn>1.328</mn></mrow><annotation encoding="application/x-tex">1.44log(N+2) - 1.328</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">4</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">3</span><span class="mord">2</span><span class="mord">8</span></span></span></span>ã€‚ä½†å®é™…é«˜åº¦åªç•¥å¤§äºlog(N)ã€‚å¯¹äºæœ€å°‘èŠ‚ç‚¹ä¸€æ£µé«˜åº¦ä¸º9çš„æ ‘ï¼Œå…¶å·¦å­æ ‘é«˜åº¦ä¸º7ï¼Œå³å­æ ‘é«˜åº¦ä¸º8ã€‚åœ¨é«˜åº¦hçš„æ ‘ä¸­ã€‚æœ€å°‘èŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo><mo>=</mo><mi>S</mi><mo stretchy="false">(</mo><mi>h</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>S</mi><mo stretchy="false">(</mo><mi>h</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S(h) = S(h-1) + S(h-2) + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ã€‚å¯¹äºh=0ï¼ŒS(h) = 1ï¼›h=1,S(h) = 2ï¼Œå‡½æ•°S(h)ä¸æ–æ³¢é‚£å¥‘æ•°åˆ—ç›¸å…³ã€‚å› æ­¤æ¨å¯¼å‡ºä¸Šé¢çš„é«˜åº¦ã€‚<br>
<img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/äºŒå‰æŸ¥æ‰¾æ ‘ä¸AVLæ ‘.webp" alt="å›¾4-29 äºŒå‰æŸ¥æ‰¾æ ‘ä¸AVLæ ‘" style="zoom: 67%;"></p>
<p>å¦‚ä¸Šå›¾ï¼Œå·¦å›¾çš„å·¦å­æ ‘çš„é«˜åº¦ä¸º3(3-&gt;4-&gt;2ï¼Œå¶å­èŠ‚ç‚¹3é«˜1ï¼Œ4é«˜2ï¼Œ2é«˜3)ï¼Œå³å­æ ‘çš„é«˜åº¦ä¸º2(7-&gt;8)ï¼Œå·®ä¸º1ã€‚å³å›¾çš„å·¦å­æ ‘é«˜åº¦ä¸º3ï¼Œå³å­æ ‘çš„é«˜åº¦ä¸º1ï¼Œç›¸å·®ä¸º2ï¼Œä¸æ˜¯AVLæ ‘(å¶å­èŠ‚ç‚¹çš„é«˜åº¦ä¸º0ï¼Œæ³¨æ„ä¸æ·±åº¦çš„åŒºåˆ«)ã€‚â€˜å¯ä»¥ç®€å•çš„çœ‹ä½œæ˜¯ä¸¤æ£µå­æ ‘çš„æœ€å¤§æ·±åº¦ç›¸å·®ä¸ºå¤§äº1â€™ã€‚<br>
â€ƒâ€ƒé™¤å»æ’å…¥æ“ä½œå¤–(åˆ é™¤æ“ä½œæ˜¯æƒ°æ€§åˆ é™¤ï¼Œä¸åˆ é™¤ï¼Œåªæ ‡è®°åˆ é™¤)ï¼Œæ‰€æœ‰çš„å¯¹æ ‘çš„æ“ä½œæ—¶é—´å¤æ‚åº¦çš†ä¸ºO(logN)ï¼Œå› ä¸ºæ’å…¥æ“ä½œä¼šç ´åæ ‘çš„å¹³è¡¡ï¼Œè¿™æ—¶éœ€è¦è¿›è¡Œæ—‹è½¬æ“ä½œæ¥ç»´æŒæ ‘çš„å¹³è¡¡ã€‚<br>
â€ƒâ€ƒå½“ä¸€ä¸ªèŠ‚ç‚¹æ’å…¥åï¼Œä»»æ„ä¸¤æ£µå­æ ‘çš„é«˜åº¦å·®ä¸º2ï¼Œåªæœ‰æ’å…¥ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„å¹³è¡¡ä¼šè¢«æ‰“ç ´ï¼Œå› ä¸ºåªæœ‰è¿™äº›èŠ‚ç‚¹çš„å­æ ‘å‘ç”Ÿäº†å˜åŒ–ã€‚æŠŠå¿…é¡»å¹³è¡¡çš„èŠ‚ç‚¹è®°ä¸ºaï¼Œå¤±å»å¹³è¡¡çš„æƒ…å†µå¯èƒ½ä¼šæœ‰ä»¥ä¸‹å››ç§ï¼š</p>
<ol>
<li>å¯¹açš„å·¦å„¿å­çš„çš„å·¦å­æ ‘è¿›è¡Œä¸€æ¬¡æ’å…¥ï¼Œå¤±å»å¹³è¡¡ï¼Œå·¦å·¦ï¼ˆLLï¼‰ã€‚</li>
<li>å¯¹açš„å·¦å„¿å­çš„çš„å³å­æ ‘è¿›è¡Œä¸€æ¬¡æ’å…¥ï¼Œå¤±å»å¹³è¡¡ï¼Œå·¦å³ï¼ˆLRï¼‰ã€‚</li>
<li>å¯¹açš„å³å„¿å­çš„çš„å·¦å­æ ‘è¿›è¡Œä¸€æ¬¡æ’å…¥ï¼Œå¤±å»å¹³è¡¡ï¼Œå·¦å·¦ï¼ˆRLï¼‰ã€‚</li>
<li>å¯¹açš„å³å„¿å­çš„çš„å³å­æ ‘è¿›è¡Œä¸€æ¬¡æ’å…¥ï¼Œå¤±å»å¹³è¡¡ï¼Œå·¦å·¦ï¼ˆRRï¼‰ã€‚</li>
</ol>
<p>â€ƒâ€ƒæƒ…å†µ1æ˜¯æƒ…å†µ4çš„é•œåƒå¯¹ç§°ï¼Œè¯¥æƒ…å†µå¯ä»¥é€šè¿‡<strong>å•æ¬¡æ—‹è½¬</strong>å®Œæˆã€‚æƒ…å†µ2æ˜¯æƒ…å†µ3çš„é•œåƒå¯¹ç§°ï¼Œè¯¥æ“ä½œå‘ç”Ÿåœ¨â€˜å†…éƒ¨â€™çš„æƒ…å½¢ï¼Œéœ€è¦é€šè¿‡<strong>åŒæ—‹è½¬</strong>å¹³è¡¡ã€‚</p>
<h3 id="4-4-1-å•æ—‹è½¬">4.4.1 å•æ—‹è½¬</h3>
<h4 id="4-4-1-1-å·¦å·¦æƒ…å†µ-å³æ—‹">4.4.1.1 å·¦å·¦æƒ…å†µ(å³æ—‹)</h4>
<p><img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/%E8%B0%83%E6%95%B4%E6%83%85%E5%86%B51%E7%9A%84%E5%8D%95%E6%97%8B%E8%BD%AC.webp" alt="å›¾4-31 è°ƒæ•´æƒ…å†µ1çš„å•æ—‹è½¬"></p>
<p>â€ƒâ€ƒå¦‚ä¸Šå›¾ï¼Œå¯¹äºå•æ—‹è½¬çš„æƒ…å†µ1ï¼ŒèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">k_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸æ»¡è¶³AVLå¹³è¡¡çš„æ€§è´¨ã€‚ä¸ºä½¿æ ‘å¹³è¡¡ï¼Œæˆ‘ä»¬éœ€è¦æŠŠèŠ‚ç‚¹Xå‘ä¸Šç§»åŠ¨ä¸€å±‚ï¼ŒèŠ‚ç‚¹Zå‘ä¸‹ç§»åŠ¨ä¸€å±‚ã€‚å°†æ ‘æƒ³è±¡ä¸ºçµæ´»æœ‰é‡é‡çš„ï¼Œç°åœ¨æ‹¿ä½<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>èŠ‚ç‚¹()ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æˆä¸ºæ ¹ï¼Œå› ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub><mo>&gt;</mo><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_2 &gt; K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæ‰€ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">K_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å˜æˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å³å­©å­ã€‚å­æ ‘Yä¸­çš„å…ƒç´ éƒ½å¤§äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå°äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">K_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶æ”¾ç½®åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">K_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å·¦å­©çº¸çš„ä½ç½®ã€‚<br>
å¦‚ä¸‹å›¾æ˜¯ä¸€ç§å®é™…æƒ…å†µçš„å¤„ç†ï¼šå·¦å·¦</p>
<img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/å•æ—‹è½¬å®ä¾‹.webp" alt="å›¾4-32 å·¦å·¦å•æ—‹è½¬å®ä¾‹" style="zoom:70%;">
<p>â€ƒâ€ƒè¯¥å¹³è¡¡äºŒå‰æ ‘æ’å…¥6åï¼Œå¯¹8è€Œè¨€ï¼Œå·¦å­æ ‘é«˜åº¦ä¸º2ï¼Œå³å­æ ‘é«˜åº¦ä¸º0(ä¸å­˜åœ¨)ï¼Œç›¸å·®ä¸º2ï¼Œåªå¯¹6ã€7ã€8è€Œè¨€ï¼Œæ‹¿ä½7ï¼Œè¿›è¡Œä¸€æ¬¡å³æ—‹ã€‚(æ ‘åŸæœ¬æ˜¯å¹³è¡¡çš„ï¼Œè¢«ç ´åå¹³è¡¡åï¼Œå…ˆå¤„ç†è¾ƒå°å­æ ‘çš„ä¸å¹³è¡¡æƒ…å†µï¼Œæ‰€ä»¥è¿™é‡Œåªå¤„ç†8å­æ ‘çš„æƒ…å†µ)ã€‚</p>
<h4 id="4-4-1-12å³å³æƒ…å†µ-å·¦æ—‹">4.4.1.12å³å³æƒ…å†µ(å·¦æ—‹)</h4>
<p>â€ƒâ€ƒæƒ…å†µ4æ˜¯æƒ…å†µ1çš„ä¸€ç§é•œåƒå¯¹ç§°(ä¼˜å…ˆå¤„ç†å­æ ‘çš„ä¸å¹³è¡¡ï¼Œè¿™é‡Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">K_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å­æ ‘æ˜¯å¹³è¡¡çš„ï¼Œæ˜¯å¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸å¹³è¡¡ï¼Œå¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯å³å³æƒ…å†µ)ã€‚å®ä¾‹ç•¥ã€‚</p>
<img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/è°ƒæ•´æƒ…å†µ4çš„å•æ—‹è½¬.webp" alt="å›¾4-33 è°ƒæ•´æƒ…å†µ4çš„å•æ—‹è½¬" style="zoom:80%;">
<h3 id="4-4-2-åŒæ—‹è½¬">4.4.2 åŒæ—‹è½¬</h3>
<p>4.4.2.1 å·¦å³å•æ—‹è½¬</p>
<p>å·¦å³çš„æƒ…å†µï¼š</p>
<p><img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/%E5%B7%A6%E5%8F%B3%E5%8F%8C%E6%97%8B%E8%BD%AC.webp" alt="å·¦å³åŒæ—‹è½¬"></p>
<p>â€ƒâ€ƒå¦‚ä¸Šå›¾ï¼Œå­æ ‘Yæ¯”å­æ ‘Zé«˜2å±‚ï¼Œå°†å…¶æŠ½è±¡æˆå¦‚å³å›¾æ‰€ç¤ºåœ°3ä¸ªè¿æ¥ç‚¹ä¸4æ£µå­æ ‘ï¼ŒBã€Cåªæ¯”Dæ·±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">1\frac 12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord">1</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> ï¼ŒæŠŠ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">K_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>é‡æ–°ä½œä¸ºæ ¹ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">K_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ¯”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">K_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å°ï¼Œå› æ­¤ä½œä¸ºå­èŠ‚ç‚¹ï¼ŒåŒæ ·<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">K_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä½œä¸ºå³èŠ‚ç‚¹ã€‚<br>
â€ƒâ€ƒPSï¼šå¯¹äºå·¦å³çš„æƒ…å†µï¼Œå¯ä»¥å…ˆå·¦æ—‹ï¼Œå†å³æ—‹(æ“ä½œæ¬¡æ•°ä¼šå¢åŠ )ï¼Œå¦‚ä¸‹å›¾(è¿™é‡Œå‡è®¾æ’å…¥åˆ°B)ï¼š<br>
ä¸‹å›¾æœ‰è¯¯ï¼Œæ˜¯åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">K_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„èŠ‚ç‚¹ä¸‹æ’å…¥ï¼Œåº”è¯¥åªæœ‰Bæˆ–è€…Cï¼Œä¸”æ’å…¥çš„é«˜åº¦ä¸º1ï¼Œä½†æ˜¯å¯¹æ—‹è½¬é€»è¾‘æ— å½±å“ã€‚</p>
<img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/è°ƒæ•´æƒ…å†µ2çš„å·¦å³.webp" alt="è°ƒæ•´æƒ…å†µ2çš„å·¦-å³" style="zoom:80%;">
<p>åŒæ ·çš„å¯¹äºå³å·¦çš„æƒ…å†µï¼š<br>
<img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/å³-å·¦åŒæ—‹è½¬ä¿®å¤æƒ…å†µ.webp" alt="å³-å·¦åŒæ—‹è½¬ä¿®å¤æƒ…å†µ" style="zoom:80%;"></p>
<p>å³-å·¦ åŒæ—‹è½¬å®ä¾‹<br>
<img src="/2021/10/23/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8EAVL%E6%A0%91/å³å·¦åŒæ—‹è½¬å®ä¾‹.webp" alt="å³-å·¦åŒæ—‹è½¬å®ä¾‹" style="zoom:80%;"></p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>Avlæ ‘ä¸»ä»£ç å®ç°(ç‚¹å‡»å±•å¼€)</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AvlTree</span>&lt;AnyType <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;AnyType&gt;&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…è®¸çš„æœ€å¤§é«˜åº¦å·®(è¶…è¿‡è¯¥è¯¥é«˜åº¦ï¼Œæ ‘ä¼šå¤±å»å¹³è¡¡)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ALLOWED_IMBALANCE</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AvlNode&lt;AnyType&gt; <span class="title function_">getRoot</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AvlTree</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        root = insert(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        root = remove(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦ï¼Œç©ºæ ‘çš„é«˜åº¦å®šä¹‰ä¸º-1ï¼Œå¶å­èŠ‚ç‚¹çš„é«˜åº¦å®šä¹‰ä¸º0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> èŠ‚ç‚¹çš„é«˜åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">height</span><span class="params">(AvlNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">t</span> <span class="operator">=</span>= <span class="literal">null</span> ? -<span class="number">1</span> : t.height;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¾›å¤–éƒ¨è°ƒç”¨è·å–é«˜åº¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">height</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> height(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦æ’å…¥çš„å€¼x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t æ’å…¥çš„treeï¼Œè¿™é‡Œä¸€èˆ¬æ˜¯rootèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; <span class="title function_">insert</span><span class="params">(AnyType x, AvlNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AvlNode</span>&lt;&gt;(x, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> x.compareTo(t.element);</span><br><span class="line">        <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// </span></span><br><span class="line">            t.left = insert(x, t.left);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            t.right = insert(x, t.right);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// æ·»åŠ çš„èŠ‚ç‚¹å·²ç»å­˜åœ¨</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> balance(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¹³è¡¡Avlæ ‘</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t æ ‘çš„æ ¹èŠ‚ç‚¹t</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¹³è¡¡åçš„è·ŸèŠ‚ç‚¹t</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; <span class="title function_">balance</span><span class="params">(AvlNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœå·¦å­æ ‘çš„é«˜åº¦å¤§äºå³å­æ ‘è¶…è¿‡1ï¼Œåˆ™è¯´æ˜å·¦è¾¹å¤±å»å¹³å’Œï¼Œéœ€è¦å³æ—‹</span></span><br><span class="line">        <span class="keyword">if</span> (height(t.left) - height(t.right) &gt; ALLOWED_IMBALANCE) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå·¦å­æ ‘çš„å·¦å­æ ‘çš„é«˜åº¦ å¤§äºç­‰äº å·¦å­æ ‘å³å­æ ‘çš„é«˜åº¦ï¼ˆå·¦å·¦æƒ…å†µï¼Œå•å³æ—‹å³å¯ï¼‰</span></span><br><span class="line">            <span class="keyword">if</span> (height(t.left.left) &gt;= height(t.left.right)) &#123;</span><br><span class="line">                t = rotateWithLeftChild(t);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦åˆ™ï¼Œä¸ºå·¦å³æƒ…å†µ(rootçš„å·¦å­æ ‘ - å³å­æ ‘&gt; 1ï¼Œ å¹¶ä¸”root.left.left &lt; root.left.right)ã€‚</span></span><br><span class="line">                <span class="comment">// éœ€è¦(å·¦)å³åŒæ—‹è½¬</span></span><br><span class="line">                t = doubleWithLeftChild(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸ä¸Šé¢ç›¸å</span></span><br><span class="line">            <span class="keyword">if</span> (height(t.right) - height(t.left) &gt; ALLOWED_IMBALANCE) &#123;</span><br><span class="line">                <span class="keyword">if</span> (height(t.right.right) &gt;= height(t.right.left)) &#123;</span><br><span class="line">                    t = rotateWithRightChild(t);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    t = doubleWithRightChild(t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        t.height = Math.max(height(t.left), height(t.right)) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å³å•æ—‹è½¬ ï¼ˆå·¦å¼€å¼“(&lt;) å˜ä¸ºå³å¼€å¼“å½¢(&gt;)ï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> k2 æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¹³è¡¡åçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; <span class="title function_">rotateWithLeftChild</span><span class="params">(AvlNode&lt;AnyType&gt; k2)</span> &#123;</span><br><span class="line">        <span class="comment">// è®°å½•k2çš„å·¦èŠ‚ç‚¹ k1</span></span><br><span class="line">        AvlNode&lt;AnyType&gt; k1 = k2.left;</span><br><span class="line">        <span class="comment">// å°†k2çš„å·¦èŠ‚ç‚¹è®¾ç½®ä¸ºk1çš„å³èŠ‚ç‚¹(åŸæœ¬k2çš„å·¦èŠ‚ç‚¹çš„å³èŠ‚ç‚¹)</span></span><br><span class="line">        k2.left = k1.right;</span><br><span class="line">        <span class="comment">// k2å˜ä¸ºk1çš„å³èŠ‚ç‚¹</span></span><br><span class="line">        k1.right = k2;</span><br><span class="line">        <span class="comment">// k2çš„é«˜åº¦ä¸k1çš„é«˜åº¦å˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—</span></span><br><span class="line">        k2.height = Math.max(height(k2.left), height(k2.right)) + <span class="number">1</span>;</span><br><span class="line">        k1.height = Math.max(height(k1.left), k2.height) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> k1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘(å·¦)å³åŒæ—‹è½¬(å…ˆå·¦æ—‹rootçš„å·¦å­æ ‘ï¼Œå†å³æ—‹root)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¹³è¡¡åçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; <span class="title function_">doubleWithLeftChild</span><span class="params">(AvlNode&lt;AnyType&gt; root)</span> &#123;</span><br><span class="line">        root.left = rotateWithRightChild(root.left);</span><br><span class="line">        <span class="keyword">return</span> rotateWithLeftChild(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å·¦å•æ—‹(ä¸å‘å·¦æ—‹è½¬ç›¸å)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¹³è¡¡åçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; <span class="title function_">rotateWithRightChild</span><span class="params">(AvlNode&lt;AnyType&gt; root)</span> &#123;</span><br><span class="line">        AvlNode&lt;AnyType&gt; k1 = root.right;</span><br><span class="line">        root.right = k1.left;</span><br><span class="line">        k1.left = root;</span><br><span class="line">        root.height = Math.max(height(root.left), height(root.right)) + <span class="number">1</span>;</span><br><span class="line">        k1.height = Math.max(height(k1.left), height(k1.right)) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> k1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»Avlæ ‘ä¸­åˆ é™¤èŠ‚ç‚¹t</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x è¦åˆ é™¤çš„èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t æ ¹èŠ‚ç‚¹t</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ é™¤èŠ‚ç‚¹åxçš„æ ¹èŠ‚ç‚¹(åˆ é™¤åéœ€è¦é‡æ–°å¹³è¡¡ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; <span class="title function_">remove</span><span class="params">(AnyType x, AvlNode&lt;AnyType&gt; t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> x.compareTo(t.element);</span><br><span class="line">        <span class="keyword">if</span> (compareResult &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            t.left = remove(x, t.left);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (compareResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            t.right = remove(x, t.right);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t.left != <span class="literal">null</span> &amp;&amp; t.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// x=t å¹¶ä¸”tçš„å·¦å³å­èŠ‚ç‚¹ä¸ä¸ºç©º</span></span><br><span class="line">            <span class="comment">// å°†rootèŠ‚ç‚¹çš„å€¼è®¾ç½®ä¸ºå³å­æ ‘æœ€å°å€¼ï¼Œç„¶ååˆ é™¤å³å­æ ‘çš„æœ€å°å€¼</span></span><br><span class="line">            t.element = findMin(t.right).element;</span><br><span class="line">            t.right = remove(t.element, t.right);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// x=t å¹¶ä¸”tçš„å·¦å³å­èŠ‚ç‚¹ è‡³å°‘å³ä¸€ä¸ªä¸ºç©º</span></span><br><span class="line">            t = t.left != <span class="literal">null</span> ? t.left : t.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> balance(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨rootèŠ‚ç‚¹çš„æ‰€æœ‰å­æ ‘ä¸­æŸ¥æ‰¾æœ€å°çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ‰¾åˆ°çš„æœ€å°çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> AvlNode&lt;AnyType&gt; <span class="title function_">findMin</span><span class="params">(AvlNode&lt;AnyType&gt; root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (root.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘(å³)å·¦åŒæ—‹è½¬(å…ˆå³æ—‹rootçš„å³å­æ ‘ï¼Œå†å·¦æ—‹root)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¹³è¡¡åçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AvlNode&lt;AnyType&gt; <span class="title function_">doubleWithRightChild</span><span class="params">(AvlNode&lt;AnyType&gt; root)</span> &#123;</span><br><span class="line">        root.right = rotateWithLeftChild(root.right);</span><br><span class="line">        <span class="keyword">return</span> rotateWithRightChild(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AvlNode</span>&lt;AnyType&gt; &#123;</span><br><span class="line">        <span class="comment">// èŠ‚ç‚¹å­˜å‚¨çš„å€¼</span></span><br><span class="line">        <span class="keyword">public</span> AnyType element;</span><br><span class="line">        <span class="comment">// å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">public</span> AvlNode&lt;AnyType&gt; left;</span><br><span class="line">        <span class="comment">// å³å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">public</span> AvlNode&lt;AnyType&gt; right;</span><br><span class="line">        <span class="comment">// AVLæ ‘çš„é«˜åº¦</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> height;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AvlNode</span><span class="params">(AnyType theElement)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.element = theElement;</span><br><span class="line">            <span class="built_in">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">            <span class="built_in">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AvlNode</span><span class="params">(AnyType theElement, AvlNode&lt;AnyType&gt; lt, AvlNode&lt;AnyType&gt; rt)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.element = theElement;</span><br><span class="line">            <span class="built_in">this</span>.left = lt;</span><br><span class="line">            <span class="built_in">this</span>.right = rt;</span><br><span class="line">            <span class="comment">// å¶å­èŠ‚ç‚¹çš„é«˜åº¦ä¸º0ï¼Œç©ºæ ‘çš„é«˜åº¦ä¸º-1</span></span><br><span class="line">            <span class="built_in">this</span>.height = <span class="number">0</span>;</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>æ‰“å°æ ‘ä¸­çš„å…ƒç´ ï¼Œæµ‹è¯•ç”¨(ç‚¹å‡»å±•å¼€)</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‰åºéå†(æ ¹ï¼Œå·¦å³)ï¼Œæµ‹è¯•ç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrderPrint</span><span class="params">(AvlNode&lt;AnyType&gt; node)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.print(node.element + <span class="string">&quot;-&gt;&quot;</span>);</span><br><span class="line">            preOrderPrint(node.left);</span><br><span class="line">            preOrderPrint(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸­åºéå†(å·¦æ ¹å³)ï¼Œæµ‹è¯•ç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrderPrint</span><span class="params">(AvlNode&lt;AnyType&gt; node)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node != <span class="literal">null</span>) &#123;</span><br><span class="line">            inOrderPrint(node.left);</span><br><span class="line">            System.out.println(root.element + <span class="string">&quot;-&gt;&quot;</span>);</span><br><span class="line">            inOrderPrint(root.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ååºéå†(å·¦å³æ ¹)ï¼Œæµ‹è¯•ç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrderPrint</span><span class="params">(AvlNode&lt;AnyType&gt; node)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node != <span class="literal">null</span>) &#123;</span><br><span class="line">            postOrderPrint(node.left);</span><br><span class="line">            postOrderPrint(root.right);</span><br><span class="line">            System.out.println(root.element + <span class="string">&quot;-&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè¯†åŠ¨æ€è§„åˆ’</title>
    <url>/2021/10/17/%E5%88%9D%E8%AF%86%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
    <content><![CDATA[<p>åŠ¨æ€è§„åˆ’ç®€ä»‹</p>
<span id="more"></span>
<h2 id="1-ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’">1.ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’</h2>
<blockquote>
<p>åŠ¨æ€è§„åˆ’ä¸€èˆ¬ç®€ç§°dpï¼ŒåŠ¨æ€è§„åˆ’æ±‚è§£çš„é—®é¢˜ä¸€èˆ¬å¯ä»¥æŠŠå¤æ‚çš„é—®é¢˜æ‹†åˆ†ä¸€ä¸ªä¸ªå­é—®é¢˜ï¼Œæœ€ç»ˆé€šè¿‡æ±‚è§£æœ€ä¼˜å­ç»“æ„ï¼Œæ¥å¾—åˆ°é—®é¢˜çš„è§£ã€‚</p>
</blockquote>
<h2 id="2-å¦‚ä½•è¯†åˆ«åŠ¨æ€è§„åˆ’é¢˜ç›®">2. å¦‚ä½•è¯†åˆ«åŠ¨æ€è§„åˆ’é¢˜ç›®</h2>
<p>â€ƒâ€ƒé—®é¢˜ä¸€èˆ¬åªä¼šè¦æ±‚æ±‚å‡ºæœ€ç»ˆè§£æˆ–æœ€ä¼˜è§£ï¼Œä½†æ˜¯å¯ä»¥ç©·ä¸¾å‡ºæ‰€æœ‰å¯èƒ½çš„ç»“æœé›†ï¼Œå¹¶ä¸”ç©·ä¸¾çš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¤§é‡çš„é‡å¤å­è®¡ç®—(å°†åœ¨ä¾‹é¢˜ä¸­è¯´æ˜)ï¼Œã€‚å¦‚<strong>æœ€é•¿é€’å¢å­åºåˆ—ã€æœ€å°ç¼–è¾‘è·ç¦»ã€èƒŒåŒ…é—®é¢˜ã€å‡‘é›¶é’±é—®é¢˜</strong>ç­‰ç­‰ï¼Œéƒ½æ˜¯åŠ¨æ€è§„åˆ’çš„ç»å…¸åº”ç”¨åœºæ™¯ã€‚<br>
â€ƒâ€ƒåŠ¨æ€è§„åˆ’å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºç”¨é€’å½’å®ç°ï¼Œä½†æ˜¯é€’å½’çš„å­˜åœ¨é‡å¤çš„é€’å½’ï¼Œä½¿å¾—æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ï¼Œè¿™æ—¶é€’å½’ä¸è¢«å…è®¸ä½¿ç”¨ï¼Œ(å¯ä»¥ä½¿ç”¨è®°å¿†é›†(Listæˆ–map)ï¼Œå°†ä¹‹å‰è®¡ç®—è¿‡çš„ç­”æ¡ˆè®°ä¸‹æ¥å†ç›´æ¥ä½¿ç”¨ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦ï¼Œæ³¨æ„ï¼Œæ‹¬å·å†…çš„ç±»å®¹ä¸æ˜¯åŠ¨æ€è§„åˆ’)ã€‚</p>
<h2 id="3-åŠ¨æ€è§„åˆ’è§£é¢˜æ­¥éª¤">3. åŠ¨æ€è§„åˆ’è§£é¢˜æ­¥éª¤</h2>
<ol>
<li>å½“è¯†åˆ«å‡ºå¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’åï¼Œå…ˆå°è¯•å»å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚</li>
<li>æœ€ç»ˆè§£ï¼šç”»å‡ºé€’å½’æ ‘ï¼ŒrootèŠ‚ç‚¹å³ä¸ºè¦æ±‚å‡ºçš„æœ€ç»ˆè§£ï¼Œæ‰¾åˆ°æœ€ä¼˜è§£/æœ€ç»ˆè§£å¯ä»¥å¦‚ä½•ç”±å­é—®é¢˜å¾—å‡ºï¼Œä»¥æ­¤ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚(æœ€ç®€å•çš„æ˜¯ä¸€ç»´æ•°ç»„ï¼Œæœ‰äºŒç»´ç”šè‡³å¤šç»´æ•°ç»„)ã€‚</li>
<li>æœ€ä¼˜è§£ï¼šå‡è®¾i-1å¤„çš„æœ€ä¼˜è§£ä¸ºdp[i-1]ï¼Œæ¨å‡ºdp[i]å¤„çš„æœ€ä¼˜è§£çš„æ‰€æœ‰å¯èƒ½ï¼Œä¸€èˆ¬ä½¿ç”¨Math.maxæˆ–Math.minçš„åˆ°æ‰€æœ‰å¯èƒ½è§£çš„æœ€ä¼˜ï¼Œä¸dp[i]å¤„çš„è§£æ¯”è¾ƒï¼Œå¾—å‡ºæœ€ä¼˜è§£ã€‚</li>
</ol>
<h2 id="4-åŠ¨æ€è§„åˆ’ä¾‹é¢˜">4.åŠ¨æ€è§„åˆ’ä¾‹é¢˜</h2>
<h3 id="4-1-é’è›™è·³å°é˜¶é—®é¢˜-æ–æ³¢é‚£å¥‘æ•°åˆ—">4.1  é’è›™è·³å°é˜¶é—®é¢˜ï¼ˆæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰</h3>
<blockquote>
<p>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§å°é˜¶ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ª <code>n</code> çº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ã€‚</p>
</blockquote>
<p>åˆ†æ(é€’å½’æ ‘ç•¥)ï¼š</p>
<ol>
<li>å°é˜¶æ•°ä¸º1ï¼šè·³æ³•ï¼š1ç§ã€‚è·³ï¼š1ã€‚</li>
<li>å°é˜¶æ•°ä¸º2ï¼šè·³æ³•ï¼š2ç§ã€‚è·³ï¼š1 + 1ã€2ã€‚</li>
<li>å°é˜¶æ•°ä¸º3ï¼šè·³æ³•ï¼š3ç§ã€‚è·³ï¼š1+1+1ã€1+2ã€2+1ã€‚</li>
<li>å°é˜¶æ•°ä¸º4ï¼šè·³æ³•ï¼š5ç§ã€‚è·³ï¼š1+1+1+1ã€1+2+1ã€1+1+2ã€2+1+1ã€2+2ã€‚</li>
</ol>
<p>â€ƒå¯ä»¥çœ‹å‡ºï¼Œåœ¨æ‰¾è·³æ³•æ—¶ï¼Œæ˜¯å­˜åœ¨é‡å¤è®¡ç®—çš„ã€‚ä¾‹å¦‚ï¼Œå°é˜¶ä¸º3æ—¶ï¼Œè·³äº†1+1+1æ—¶ï¼Œè®¡ç®—äº†è·³åˆ°1çš„æƒ…å†µï¼Œè¿™æ—¶1+2ï¼Œåˆè¦è®¡ç®—ä¸€éè·³åˆ°1çš„æƒ…å†µ(æ¯æ¬¡éƒ½è¦ä»å°é˜¶1è·³)ã€‚<br>
â€ƒå°è¯•å†™å‡ºè½¬ç§»æ–¹ç¨‹ï¼šæœ€ç»ˆç­”æ¡ˆä¸ºnçº§å°é˜¶ï¼Œé‚£ä¹ˆnçº§å°é˜¶å¯ä»¥ç”±n-1çº§å°é˜¶è·³ä¸€çº§è¿‡æ¥ï¼Œä¹Ÿå¯ä»¥ç”±n-2çº§å°é˜¶è·³ä¸¤çº§è¿‡æ¥ï¼ˆå¦‚è·³3çº§å°é˜¶ï¼Œåˆ™å¯ä»¥ä»1çº§è·³è¿‡æ¥ï¼šè¿™æ—¶è·³æ³•æ˜¯1+2(å¦‚æœè·³1+1+1ï¼Œåˆ™å®é™…ä¸Šä»2çº§è·³è¿‡æ¥çš„ï¼Œæ˜¯é‡å¤è®¡ç®—ï¼Œä¸åº”è€ƒè™‘ï¼Œæ‰€ä»¥åº”ä»1ç›´æ¥è·³åˆ°3ï¼Œåªèƒ½è·³2çº§ï¼ŒåŸæœ¬åªæœ‰ä¸€ç§è·³æ³•)ï¼Œæ‰€ä»¥åªæœ‰ä¸€ç§è·³æ³•ï¼›ä»2çº§è·³è¿‡æ¥ï¼šè¿™æ—¶è·³æ³•æ˜¯ï¼š1+1+1 (1+1  +1ï¼Œå‰é¢çš„1+1æ˜¯æœ¬æ¥åˆ°2çº§å°é˜¶çš„æ–¹æ³•ï¼Œæ‰€ä»¥è¿™æ˜¯ç›´æ¥ä»2çº§å°é˜¶è·³)ä¸2+1ã€‚å¯ä»¥çœ‹åˆ°æ€»è·³æ³•ä¸ºä¸¤ä¸ªå­é—®é¢˜çš„å’Œï¼‰ã€‚<strong>æ­¤é¢˜ä¸ºæ±‚æœ€ç»ˆé—®é¢˜</strong>ï¼Œæ‰€ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[n] = dp[n-1] + dp[n-2]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span></span></p>
<p>â€ƒå¦å¤–æ­¤é¢˜çš„é€’å½’æ–¹ç¨‹ä¹Ÿæ˜¯è¯¥æ–¹ç¨‹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n) = f(n-1) + f(n-2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span>ã€‚å¯ä»¥å¾ˆå®¹æ˜“çš„å†™å‡ºé€’å½’æ±‚è§£ï¼Œä½†æ˜¯è¯¥é€’å½’çš„å¤æ‚åº¦å¾ˆé«˜ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>ï¼Œå› ä¸ºå­˜åœ¨é‡å¤çš„é€’å½’è®¡ç®—ã€‚ä¾‹å¦‚æ±‚f[n]æ—¶éœ€è¦æ±‚è§£f(n-2)ï¼Œå†æ±‚è§£f(n-1)æ—¶ï¼Œä¹Ÿéœ€è¦æ±‚è§£f(n-2)ã€‚å¯¼è‡´æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ã€‚(å¯ä»¥è€ƒè™‘ä½¿ç”¨è®°å¿†é›†å­˜å‚¨)ã€‚å› æ­¤ä¸è€ƒè™‘ï¼Œä»¥ä¸‹ä¸ºåŠ¨æ€è§„åˆ’è§£ç­”ã€‚æ—¶é—´å¤æ‚åº¦åˆ†æï¼šO(N)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// åŸºçº¿æ¡ä»¶</span></span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="comment">// çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span></span><br><span class="line">        dp[i] = dp[i-<span class="number">1</span>] + dp[i-<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-æœ€å¤§è¿ç»­å­åºåˆ—å’Œ">4.2 æœ€å¤§è¿ç»­å­åºåˆ—å’Œ</h3>
<blockquote>
<p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ±‚è¯¥æ•°ç»„çš„æœ€å¤§è¿ç»­çš„å­åºåˆ—çš„å’Œã€‚ä¾‹å¦‚[-1,-2,5-3,8,-1]ï¼Œåˆ™æœ€å¤§å­åºåˆ—ä¹‹å’Œä¸º10 ï¼š5+(-3)+8</p>
</blockquote>
<p>åˆ†æï¼š</p>
<ol>
<li>ä»ç´¢å¼•0å¼€å§‹ç©·ä¸¾ï¼Œä¸€ä¸ªä¸ªåŠ ï¼Œå¾—åˆ°ä»ç´¢å¼•0çš„æœ€å¤§å’Œä¸º7ï¼Œæ³¨æ„ï¼Œæ­¤æ—¶å·²ç»è®¡ç®—äº†ä¸€éè¿ç»­æ•°å­—çš„å’Œã€‚</li>
<li>ä»ç´¢å¼•1å¼€å§‹ç©·ä¸¾ï¼Œä¸€ä¸ªä¸ªåŠ ï¼Œå¾—åˆ°ä»ç´¢å¼•æœ€å¤§çš„å’Œä¸º8ï¼Œæ­¤æ—¶åˆè®¡ç®—äº†ä¸€éè¿ç»­æ•°å­—çš„å’Œã€‚</li>
</ol>
<p>â€ƒå‡è®¾å·²ç»æ±‚å‡ºå‰é¢çš„dp[n-1]å¤„çš„æœ€å¤§å­åºåˆ—å’Œï¼Œè¿™æ—¶å¦‚æœdp[n]æ˜¯æ­£æ•°ï¼Œdp[n] = dp[n-1] + nums[n]ï¼Œå¦‚æœdp[n]æ˜¯è´Ÿæ•°ï¼Œè‚¯å®šnums[n]å•ç‹¬æ›´å¤§ï¼Œæ‰€ä»¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼šæ—¶é—´å¤æ‚åº¦åˆ†æï¼šO(N)</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">dp[n] = max(dp[n-1] + nums[n], nums[n])
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></span></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxRes</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="comment">// çŠ¶æ€è½¬ç§»æ–¹ç¨‹(å½“dp[i-1] + nums[i] &lt; num[i],å³dp[i]ä¸ºè´Ÿæ•°æ—¶ï¼Œä»nums[i]é‡æ–°é€‰)</span></span><br><span class="line">        dp[i] = Math.max(dp[i-<span class="number">1</span>] + nums[i], nums[i]);</span><br><span class="line">        <span class="comment">// ä¿å­˜æœ€å¤§çš„è§£</span></span><br><span class="line">        maxRes = Math.max(maxRes, dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxRes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘ä¸äºŒå‰æ ‘</title>
    <url>/2021/10/09/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬äºŒç« 4.1ä¸4.2èŠ‚èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="4-1-æ ‘">4.1 æ ‘</h2>
<p>å®šä¹‰æ ‘çš„ä¸€ç§è‡ªç„¶æ–¹å¼æ˜¯é€’å½’ã€‚ä¸€æ£µæ ‘æ˜¯Nä¸ªèŠ‚ç‚¹å’ŒN-1æ¡è¾¹çš„é›†åˆã€‚</p>
<blockquote>
<p>ä¸€æ£µæ ‘æ˜¯ä¸€äº›èŠ‚ç‚¹çš„é›†åˆã€‚å¯ä»¥æ˜¯ç©ºé›†ã€‚è‹¥ä¸ä¸ºç©ºï¼Œåˆ™ç”±æ ¹èŠ‚ç‚¹rå’Œ0ä¸ªæˆ–å¤šä¸ªéç©ºçš„å­—æ ‘T1ï¼ŒT2ï¼ŒT3ï¼Œâ€¦ï¼ŒTkç»„æˆï¼Œå­æ ‘ä¸­æ¯ä¸€é¢—æ ¹éƒ½è¢«æ¥è‡ªrçš„ä¸€æ¡æœ‰å‘è¾¹è¿ç»“ã€‚</p>
</blockquote>
<p>æ ‘çš„æœ¯è¯­å®šä¹‰ï¼š</p>
<img src="/2021/10/09/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/æ ‘.png" alt="æ ‘" style="zoom:80%;">
<ul>
<li>å­èŠ‚ç‚¹ï¼šè‹¥èŠ‚ç‚¹Eæœ‰å­æ ‘ï¼Œåˆ™å­æ ‘çš„æ ¹èŠ‚ç‚¹(å¦‚J)ä¸ºEçš„å­èŠ‚ç‚¹ã€‚</li>
<li>çˆ¶èŠ‚ç‚¹ï¼šè‹¥èŠ‚ç‚¹Eæœ‰å­èŠ‚ç‚¹ï¼Œåˆ™Eä¸ºå­èŠ‚ç‚¹(å¦‚J)çš„çˆ¶èŠ‚ç‚¹ã€‚</li>
<li>èŠ‚ç‚¹çš„åº¦ï¼šèŠ‚ç‚¹æœ‰å­æ ‘æ£µæ ‘(å­èŠ‚ç‚¹ä¸ªæ•°)</li>
<li>å¶å­èŠ‚ç‚¹ï¼šæ²¡æœ‰å„¿å­èŠ‚ç‚¹çš„èŠ‚ç‚¹(åº¦ä¸º0çš„èŠ‚ç‚¹)ï¼Œå¦‚å›¾èŠ‚ç‚¹Pç­‰ã€‚</li>
<li>å…„å¼ŸèŠ‚ç‚¹ï¼šå…·æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹äº’ä¸ºå…„å¼ŸèŠ‚ç‚¹ã€‚å¦‚PèŠ‚ç‚¹ä¸QèŠ‚ç‚¹ã€‚</li>
<li>èŠ‚ç‚¹å±‚æ¬¡(level)ï¼šæœ¬ä¹¦ç§°èŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">n_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„æ·±åº¦ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">n_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„è·¯å¾„é•¿ï¼Œå› æ­¤æ ¹èŠ‚ç‚¹å±‚æ¬¡(æ·±åº¦)ä¸º0.</li>
<li>æ ‘çš„æ·±åº¦(æ³¨æ„æ˜¯æ ‘)ï¼šå…¶ä»–ä¹¦ç‰¹æŒ‡ï¼šæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„è·¯å¾„é•¿ã€‚æ ¹èŠ‚ç‚¹æ·±åº¦ä¸º0ã€‚</li>
<li>æ ‘çš„é«˜åº¦ï¼šæœ€æ·±çš„å¶å­èŠ‚ç‚¹é«˜åº¦ä¸º0ï¼Œä¸€æ£µæ ‘é«˜ç­‰äºæ ¹é«˜ã€‚å¦‚Eï¼šæ·±åº¦ä¸º1ï¼Œé«˜ä¸º2ã€‚(å…¶ä»–ä¹¦ç‰¹æŒ‡æœ€å¤§é«˜åº¦ã€‚å³é«˜åº¦=æ·±åº¦)ã€‚</li>
<li>ç¥–å…ˆä¸çœŸç¥–å…ˆã€åè£”ä¸çœŸåè£”ï¼šå¦‚æœå­˜åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ä¸€æ¡è·¯å¾„ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„ç¥–å…ˆï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„åè£”ï¼Œå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub><mo mathvariant="normal">â‰ </mo><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_1 \ne n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel">î€ </span></span><span class="fix"></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„çœŸç¥–å…ˆï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„çœŸåè£”ã€‚</li>
</ul>
<h3 id="4-1-1-æ ‘çš„å®ç°">4.1.1 æ ‘çš„å®ç°</h3>
<p>â€ƒâ€ƒèŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œå¦æœ‰ä¸€äº›é“¾ï¼Œè¯¥èŠ‚ç‚¹çš„æ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½æœ‰é“¾æŒ‡å‘å®ƒã€‚ç”±äºä¸ç¡®å®šæœ‰å¤šå°‘é“¾ï¼Œå› æ­¤é‡‡ç”¨å…¶ä»–è§£å†³æ–¹æ³•ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ”¾åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­ã€‚<br>
â€ƒâ€ƒå¦‚ä¸‹æ˜¯é’ˆå¯¹ä¸Šè¿°çš„ä¸€ç§å®ç°(å¯¹åº”å›¾4.2)ã€‚å‘ä¸‹çš„ç®­å¤´æŒ‡å‘firstChild(ç¬¬ä¸€å„¿å­)çš„é“¾ï¼Œæ°´å¹³ç®­å¤´æŒ‡å‘nextSibling(ä¸‹ä¸€å…„å¼Ÿ)çš„é“¾ã€‚nullé“¾æœªç”»å‡ºã€‚å¦‚èŠ‚ç‚¹Eæœ‰é“¾æŒ‡å‘å…„å¼ŸFï¼Œå¦ä¸€é“¾æŒ‡å‘å„¿å­Iã€‚<br>
<img src="/2021/10/09/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/%E6%A0%91%E7%9A%84%E5%AE%9E%E7%8E%B0.png" alt></p>
<table><br></table>
<h3 id="4-1-2-æ ‘çš„åº”ç”¨ä¸éå†">4.1.2 æ ‘çš„åº”ç”¨ä¸éå†</h3>
<blockquote>
<p>æ‰€è°“çš„åºæ˜¯æŒ‡éå†æ—¶æ ¹çš„ä½ç½®ï¼Œå¦‚å‰åºå°±æ˜¯<strong>æ ¹å·¦å³</strong>ï¼Œä¸­åºå°±æ˜¯<strong>å·¦æ ¹å³</strong>(é’ˆå¯¹äºŒå‰æ ‘)ï¼Œååºå°±æ˜¯<strong>å·¦å³æ ¹</strong></p>
</blockquote>
<p><strong>æ ‘çš„åº”ç”¨</strong><br>
â€ƒâ€ƒå¤šå‰æ ‘çš„ä¸€ç§ç”¨æ³•æ˜¯UNIXä¸DOSç³»ç»Ÿçš„ç›®å½•ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ˜¯UNIXæ–‡ä»¶çš„ä¸€ä¸ªå…¸å‹åº”ç”¨ã€‚<br>
<img src="/2021/10/09/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/UNIXç›®å½•.png" style="zoom:75%;"></p>
<p><strong>å…ˆåºéå†</strong>å±•ç¤ºæ‰€æœ‰ç›®å½•ï¼š<br>
â€ƒâ€ƒå…ˆåºéå†æŒ‰ç…§å…ˆæ ¹åå·¦(å­æ ‘)å†å³(å­æ ‘)ã€‚ä¾‹å¦‚ä¸Šå›¾æŸæ¬¡çš„éå†å®ç°ã€‚usr -&gt; mark -&gt; book - &gt; ch1.r -&gt; ch2.r -&gt; ch3.r -&gt; course(å³å­æ ‘) -&gt; cop3530 -&gt; fail -&gt; syl.r -&gt; spr -&gt; syl.r -&gt; sum -&gt; syl.r -&gt; junk(å³å­æ ‘) -&gt; alexâ€¦<br>
è¯¥ç®—æ³•éå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ˜¾ç„¶å…ˆåºéå†çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚<br>
â€ƒâ€ƒ<strong>è®°å¿†å£è¯€</strong>ï¼šæ ¹å·¦å³</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¼ªä»£ç å®ç°ï¼Œå…·ä½“å®ç°ä¼šåœ¨äºŒå‰æ ‘å®ç°</span></span><br><span class="line"><span class="comment">// depth ä»æ·±åº¦ä¸ºå‡ çš„ä½ç½®å¼€å§‹éå†ï¼Œå¦‚è¦éå†æ‰€æœ‰æ•°æ®ï¼Œä»depth = 0å¼€å§‹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">listAll</span><span class="params">(<span class="type">int</span> depth)</span> &#123;</span><br><span class="line">    print(depth); <span class="comment">// æ‰“å°æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åå­—</span></span><br><span class="line">    <span class="comment">// éå†è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶ç›®å½•ï¼Œå†é‡Œé¢é€’å½’éå†</span></span><br><span class="line">    <span class="keyword">for</span> each file c in <span class="built_in">this</span> <span class="title function_">directory</span> <span class="params">(<span class="keyword">for</span> each child)</span> &#123;</span><br><span class="line">        <span class="comment">// é€’å½’éå†æ‰€æœ‰å­ç›®å½•çš„ç»“æœ</span></span><br><span class="line">        c.listAll(depth + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ååºéå†</strong>è®¡ç®—æŸæ ‘ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤§å°ï¼šæ‹¬å·å†…ä»£è¡¨æ‰€å åŒºå—ä¸ªæ•°</p>
<img src="/2021/10/09/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/åç»­éå†å…·æœ‰å¤§å°çš„Unixç›®å½•.png" alt="åç»­éå†unixç›®å½•" style="zoom:75%;">
<p>â€ƒâ€ƒè¦è®¡ç®—usrç›®å½•ä¸‹çš„æ–‡ä»¶æ‰€å çš„å­˜å‚¨å¤§å°ï¼Œæ‰¾å‡ºå…¶æ‰€æœ‰å­ç›®å½•mark(30)ã€alex(9)ã€bill(32)çš„åŒºå—ä¸ªæ•°å’Œä¸º71ï¼ŒåŠ ä¸Šusrçš„åŒºå—ä¸ªæ•°å’Œä¸º1ï¼Œæœ€ç»ˆä¸º72ã€‚å¦‚æœå½“å‰å¯¹è±¡ä¸æ˜¯ç›®å½•ï¼Œsizeåªè¿”å›å½“å‰å¯¹è±¡çš„åŒºå—æ•°ï¼Œå¦åˆ™è¯¥ç›®å½•å ç”¨çš„åŒºå—æ•°è¢«åŠ åˆ°æ‰€æœ‰å­èŠ‚ç‚¹(é€’å½’)å‘ç°çš„åŒºå—æ•°ä¸­ã€‚usr:1(æš‚å­˜) -&gt; chl.r:(3+1) -&gt; ch2.r(4+2) -&gt; ch3.r(6+4) -&gt; book(10+1) -&gt; syl.r(11+1)â€¦<br>
<strong>æ³¨æ„</strong>ï¼šä»¥ä¸Šæš‚å­˜ä»£è¡¨å¹¶æœªå®ç°çœŸæ­£çš„éå†ï¼Œå› æ­¤éå†æ˜¯ä»ch1.rå¼€å§‹çš„ï¼Œch1.r -&gt; ch2.r -&gt; ch3.r -&gt; book -&gt; syl.r -&gt; fall -&gt; syl.r -&gt; spr -&gt; syl.r -&gt; sum -&gt; cop3530 -&gt; course -&gt; junk -&gt; mark -&gt; junk -&gt; alex -&gt;work -&gt; gradesâ€¦<br>
â€ƒâ€ƒ<strong>è®°å¿†å£è¯€</strong>ï¼šå·¦å³æ ¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åç»­éå†ä¼ªä»£ç å®ç° è®¡ç®—æ€»åŒºå—æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// å½“å‰ç›®å½•æ‰€å åŒºå—æ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">totalSize</span> <span class="operator">=</span> sizeOfThisFile();</span><br><span class="line">    <span class="keyword">if</span> (isDirectory) &#123;</span><br><span class="line">        <span class="keyword">for</span> each file c in <span class="built_in">this</span> <span class="title function_">directory</span> <span class="params">(<span class="keyword">for</span> each child)</span> &#123;</span><br><span class="line">            <span class="comment">// æ€»åŒºå—æ•°=å½“å‰å­æ ‘æ ¹ç›®å½•åŒºå—æ•°+å…¶ä¸‹æ‰€æœ‰åŒºå—æ•°æ€»å’Œ</span></span><br><span class="line">            totalSize += c.size();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> totalSize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table><br></table>
<h2 id="4-2-äºŒå‰æ ‘">4.2 äºŒå‰æ ‘</h2>
<blockquote>
<p>å¦‚æœä¸€æ£µæ ‘ï¼Œå…¶æ¯ä¸ªå­èŠ‚ç‚¹æœ€å¤šä¸è¶…è¿‡ä¸¤ä¸ªå„¿å­ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹äºŒå‰æ ‘å¯èƒ½ä¼šé€€åŒ–ä¸ºä¸€ä¸ªé“¾è¡¨</p>
</blockquote>
<h3 id="4-2-1-äºŒå‰æ ‘çš„å®ç°">4.2.1 äºŒå‰æ ‘çš„å®ç°</h3>
<p>â€ƒâ€ƒä¸€æ£µäºŒå‰æ ‘æœ€å¤šæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤åªéœ€è¦ä¸€ä¸ªå…ƒç´ çš„ä¿¡æ¯(element)å’Œåˆ°å…¶ä»–ä¸¤ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨(leftä¸right)ç»„æˆã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class BinaryNode &#123;</span><br><span class="line">    Object element;		<span class="comment">// å½“å‰èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line">    BinaryNode left;	<span class="comment">// å·¦å­©å­</span></span><br><span class="line">    BinaryNode right;	<span class="comment">// å³å­©å­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-2-ä¾‹å­ï¼šè¡¨è¾¾å¼å­æ ‘">4.2.2 ä¾‹å­ï¼šè¡¨è¾¾å¼å­æ ‘</h3>
<p>â€ƒâ€ƒå¦‚ä¸‹å›¾ä¸ºä¸€ä¸ªè¡¨è¾¾å¼å­æ ‘ï¼Œæ ‘å¶ä¸ºæ“ä½œæ•°ï¼Œå…¶ä»–èŠ‚ç‚¹ä¸ºæ“ä½œç¬¦ï¼Œå…¶æ“ä½œéƒ½æ˜¯äºŒå…ƒçš„ï¼Œ(å¦‚æœä¸æ˜¯ï¼Œå­©å­å¯èƒ½å‡ºç°å¤§äº2çš„æƒ…å†µ)ã€‚</p>
<img src="/2021/10/09/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/è¡¨è¾¾å¼æ ‘.png" style="zoom:75%;">
<p><strong>ä¸­åºéå†</strong>ï¼šå¦‚æ ‘çš„ä»‹ç»å·¦æ ¹å³ï¼Œé€’å½’äº§ç”Ÿå¸¦æ‹¬å·çš„å·¦è¡¨è¾¾å¼ï¼Œç„¶åæ‰“å°å‡ºå†æ ¹çš„è¿ç®—ç¬¦ï¼Œå†é€’å½’äº§ç”Ÿä¸€ä¸ªå¸¦æ‹¬å·çš„æœ‰è¡¨è¾¾å¼ï¼Œä»è€Œå¾—åˆ°å¸¦æ‹¬å·çš„ä¸­ç¼€è¡¨è¾¾å¼(ä¸€ä¸ªæ‹¬å·ä»£è¡¨ä¸€ä¸ªå­æ ‘)ã€‚å¾—åˆ°ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>âˆ—</mo><mi>c</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>d</mi><mo>âˆ—</mo><mi>e</mi><mo>+</mo><mi>f</mi><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a + b * c) + ((d * e + f) * g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span>ã€‚ä¸­ç¼€è¡¨è¾¾å¼ã€‚<br>
<strong>ååºéå†</strong>ï¼šå¦‚æ ‘ä»‹ç»çš„å·¦å³æ ¹ï¼Œå…ˆé€’å½’çš„æ‰“å°å‡ºå·¦å­æ ‘ï¼Œå³å­æ ‘ï¼Œå†æ‰“å°è¿ç®—ç¬¦ï¼Œå°†çš„åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext>Â </mtext><mi>b</mi><mtext>Â </mtext><mi>c</mi><mtext>Â </mtext><mo>âˆ—</mo><mtext>Â </mtext><mi>f</mi><mtext>Â </mtext><mo>+</mo><mtext>Â </mtext><mi>g</mi><mtext>Â </mtext><mo>âˆ—</mo><mtext>Â </mtext><mo>+</mo></mrow><annotation encoding="application/x-tex">a \  b \  c \  * \  f \  + \ g \ * \  +</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace">Â </span><span class="mord mathdefault">b</span><span class="mspace">Â </span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span></span><span class="base"><span class="strut" style="height:0.6597200000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span></span></span></span> ã€‚åç¼€è¡¨è¾¾å¼(é€†æ³¢å…°è¡¨è¾¾å¼)ã€‚<br>
<strong>å…ˆåºéå†</strong>ï¼šå¦‚æ ‘ä»‹ç»çš„æ ¹å·¦å³ï¼Œå…ˆæ‰“å°å‡ºè¿ç®—ç¬¦ï¼Œå†é€’å½’æ‰“å°å‡ºå·¦å­æ ‘å’Œå³å­æ ‘ã€‚å¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mo>+</mo><mi>a</mi><mo>âˆ—</mo><mi>b</mi><mi>c</mi><mo>âˆ—</mo><mo>+</mo><mo>âˆ—</mo><mi>d</mi><mi>e</mi><mi>f</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">++a*bc*+*defg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span> ã€‚å‰ç¼€è¡¨è¾¾å¼(æ³¢å…°è¡¨è¾¾å¼)ã€‚</p>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ˆä¸é˜Ÿåˆ—</title>
    <url>/2021/09/21/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬äºŒç« 3.6ä¸3.7èŠ‚èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="3-6-æ ˆadt">3.6 æ ˆADT</h2>
<h3 id="3-6-1-æ ˆæ¨¡å‹">3.6.1 æ ˆæ¨¡å‹</h3>
<blockquote>
<p>æ ˆæ˜¯æ’å…¥å’Œåˆ é™¤åªèƒ½åœ¨æœ«ç«¯çš„è¡¨ï¼Œè¯¥ä½ç½®å«æ ˆé¡¶(ç±»ä¼¼ä¸€ä¸ªæ¡¶)ã€‚å¯¹æ ˆçš„æ“ä½œåªæœ‰è¿›æ ˆ(push)ä¸å‡ºæ ˆ(pop)ã€‚</p>
</blockquote>
<p>â€ƒâ€ƒæ ˆæ˜¯ä¸€ä¸ªåè¿›å…ˆå‡º(LIFO)è¡¨ã€‚æˆ‘ä»¬å¯¹æ ˆèƒ½è¿›è¡Œçš„æ“ä½œåŸºæœ¬åªæœ‰pushå’Œpopæ“ä½œã€‚ä½äºæ ˆé¡¶çš„å…ƒç´ ï¼Œæ˜¯å”¯ä¸€ç›´æ¥å¯è§(å¯è®¿é—®)çš„å…ƒç´ ã€‚</p>
<h3 id="3-6-2-æ ˆçš„å®ç°">3.6.2 æ ˆçš„å®ç°</h3>
<p>â€ƒâ€ƒæ ˆæ˜¯ä¸€ä¸ªè¡¨ï¼Œä»»ä½•èƒ½å®ç°è¡¨çš„çš„æ–¹æ³•éƒ½èƒ½å®ç°æ ˆï¼Œç»™å‡ºä¸¤ç§æµè¡Œçš„å®ç°æ–¹æ³•ï¼šä¸€ç§ä½¿ç”¨é“¾å¼ç»“æ„ï¼Œä¸€ç§ä½¿ç”¨æ•°ç»„ï¼ŒäºŒè€…å‡ç®€åŒ–äº†åœ¨ArrayListå’ŒLinkedListçš„å®ç°ã€‚</p>
<p>â€ƒâ€ƒ<strong>æ ˆçš„é“¾è¡¨å®ç°</strong><br>
â€ƒâ€ƒä½¿ç”¨å•é“¾è¡¨ï¼Œåœ¨è¡¨çš„é¡¶ç«¯æ’å…¥å®ç°pushï¼Œåˆ é™¤è¡¨é¡¶ç«¯çš„å…ƒç´ å®ç°popï¼Œtopæ“ä½œè·å–è¡¨é¡¶ç«¯çš„å…ƒç´ å¹¶è¿”å›å€¼ï¼Œæœ‰æ—¶popä¸topåˆäºŒä¸ºä¸€ã€‚</p>
<p>â€ƒâ€ƒ<strong>æ ˆçš„æ•°ç»„å®ç°</strong><br>
â€ƒâ€ƒæ•°ç»„çš„å®ç°é¿å…äº†é“¾è€Œä¸”å¯èƒ½æ˜¯æœ€æµè¡Œçš„è§£å†³æ–¹æ¡ˆã€‚pushæ¨¡ä»¿ArrayListçš„addæ“ä½œï¼Œå®ç°ç®€å•ã€‚ä¸æ ˆç›¸å…³çš„æ“ä½œæ˜¯theArrayå’ŒtopOfStackï¼Œå¯¹ç©ºæ ˆï¼ŒtopOfStackä¸º-1(åˆå§‹åŒ–æ“ä½œ)ï¼Œå½“ç”±å…ƒç´ xå…¥æ ˆæ—¶ï¼ŒtopOfStack + 1ï¼ŒtheArray[topOfStack] = xã€‚ åŒç†å¼¹æ ˆçš„æ—¶å€™è¿”å›theArray[topOfStack] ï¼Œä¹‹åtopOfStack - 1ã€‚<br>
â€ƒâ€ƒä¸Šè¿°æ“ä½œçš†ä»¥å¸¸æ•°æ—¶é—´è¿è¡Œï¼Œå†æŸäº›æœºå™¨ä¸Špushä¸popéƒ½å¯ä»¥å†™ä½œä¸€æ¡æœºå™¨æŒ‡ä»¤ï¼Œç°ä»£åŒ–è®¡ç®—æœºå°†æ ˆæ“ä½œä½œä¸ºæŒ‡ä»¤ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="3-6-3-åº”ç”¨">3.6.3 åº”ç”¨</h3>
<p>â€ƒâ€ƒ<strong>å¹³è¡¡ç¬¦å·</strong><br>
â€ƒâ€ƒç¼–è¯‘å™¨æ£€æŸ¥å…·æœ‰æˆå¯¹çš„ç¬¦å·(å¦‚å¤§æ‹¬å·ã€æ‹¬å·)ç¼ºå¤±å¼•èµ·çš„ç¼–è¯‘é”™è¯¯ã€‚ä¾‹å¦‚[()]æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯[(])æ˜¯é”™è¯¯çš„ã€‚å¯¹è¯¥ç®—æ³•çš„ç®€å•å™è¿°å¦‚ä¸‹ï¼š<br>
â€ƒâ€ƒå°†æ‰€æœ‰å­—ç¬¦è¯»å…¥ï¼Œå¦‚æœå­—ç¬¦æ˜¯æ˜¯ä¸€ä¸ªå¼€æ”¾ç¬¦å·(æˆå¯¹ç¬¦å·å·¦è¾¹çš„)ï¼Œå°±å°†ç¬¦å·å…¥æ ˆ(æ³¨æ„æ˜¯åªå…¥æ ˆç¬¦å·)ã€‚å¦‚æœæ˜¯å°é—­ç¬¦å·ï¼Œå½“ç©ºæ ˆæ—¶æŠ¥é”™ï¼Œå¦åˆ™å°†æ ˆé¡¶çš„å…ƒç´ å¼¹å‡ºï¼Œå¦‚æœå¼¹å‡ºçš„ä¸æ˜¯å¯¹åº”çš„å¼€æ”¾ç¬¦å·ï¼Œåˆ™æŠ¥é”™ï¼Œå¦‚æœè¯»åˆ°æ–‡ä»¶å°¾ï¼Œæ ˆéç©ºï¼Œåˆ™æŠ¥é”™ã€‚è¯¥ç®—æ³•æ—¶çº¿æ€§çš„ï¼Œä¸”ä»–æ˜¯è”æœºç®—æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¹³è¡¡ç¬¦å·ç®€åŒ–ç‰ˆï¼ŒleetCode 20 æœ‰æ•ˆæ‹¬å·</span></span><br><span class="line"><span class="comment"> * æ ˆStackæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨éçº¿ç¨‹å®‰å…¨çš„Dequeï¼Œæˆ–è€…ä½¿ç”¨æ•°ç»„ã€é“¾è¡¨æ¨¡æ‹Ÿæ ˆ</span></span><br><span class="line"><span class="comment"> * Deque&lt;Character&gt; stack = new LinkedList&lt;&gt;();</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> str éœ€è¦æ£€æµ‹çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isBalanceChar</span><span class="params">(String str)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (str.length() &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span>[] chars = str.toCharArray();</span><br><span class="line">    Stack&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (chars[i] == <span class="string">&#x27;(&#x27;</span> || chars[i] == <span class="string">&#x27;[&#x27;</span> || chars[i] == <span class="string">&#x27;&#123;&#x27;</span>) &#123;</span><br><span class="line">            stack.push(chars[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// è¿”å›å¹¶å¼¹å‡ºæ ˆé¡¶çš„å…ƒç´ ï¼Œ(å¦‚æœä¸å¼¹å‡ºä½¿ç”¨peek)</span></span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="comment">// å¦‚æœå¼¹å‡ºçš„ç¬¦å·ä¸æ‰€æœ‰çš„ç¬¦å·éƒ½ä¸åŒ¹é…ï¼Œè¿”å›false</span></span><br><span class="line">            <span class="keyword">if</span> ((chars[i] == <span class="string">&#x27;)&#x27;</span> &amp;&amp; c != <span class="string">&#x27;(&#x27;</span>) || (chars[i] == <span class="string">&#x27;]&#x27;</span> &amp;&amp; c != <span class="string">&#x27;[&#x27;</span>) || (chars[i] == <span class="string">&#x27;&#125;&#x27;</span> &amp;&amp; c != <span class="string">&#x27;&#123;&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æœ€åå½“æ‰€æœ‰å…ƒç´ è¢«å¼¹å‡ºï¼Œåˆ™ä»£è¡¨true</span></span><br><span class="line">    <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table><br></table>
<p>â€ƒâ€ƒ<strong>åç¼€è¡¨è¾¾å¼</strong><br>
â€ƒâ€ƒåœ¨æˆ‘ä»¬ä½¿ç”¨çš„å››åˆ™è¿ç®—ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¹˜é™¤ä¼˜å…ˆï¼Œéœ€è¦æŒ‡å®šä¼˜å…ˆçº§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ‹¬å·ï¼Œä½†è¿™(ä¸­åºè¡¨è¾¾å¼)å¯¹äºè®¡ç®—æœºåˆ™éå¸¸ä¸å‹å¥½ï¼Œäºæ˜¯æœ‰äº†<strong>åç¼€è¡¨è¾¾</strong>å¼æˆ–ç§°<strong>é€†æ³¢å…°å¼</strong>ã€‚æ“ä½œç¬¦å·æ”¾åœ¨éœ€è¦å‚ä¸è¿ç®—çš„æ•°çš„åé¢ï¼Œå¹¶ä¸”ä¸ä»–å‰é¢çš„æ•°å‚ä¸è¿ç®—ã€‚ä»–çš„ä¸€ä¸ªæ˜¾è‘—çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦çŸ¥é“è¿ç®—çš„ä¼˜å…ˆè§„åˆ™ã€‚<br>
â€ƒâ€ƒä¾‹å¦‚è¡¨è¾¾å¼ <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mtext>Â </mtext><mn>5</mn><mtext>Â </mtext><mn>2</mn><mtext>Â </mtext><mn>3</mn><mtext>Â </mtext><mo>+</mo><mtext>Â </mtext><mn>8</mn><mtext>Â </mtext><mo>âˆ—</mo><mtext>Â </mtext><mo>+</mo><mtext>Â </mtext><mn>3</mn><mtext>Â </mtext><mo>+</mo><mtext>Â </mtext><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">6 \ 5 \ 2 \ 3\ + \ 8 \ * \ + \ 3 \ + \ *</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">6</span><span class="mspace">Â </span><span class="mord">5</span><span class="mspace">Â </span><span class="mord">2</span><span class="mspace">Â </span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mspace">Â </span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace">Â </span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord">âˆ—</span></span></span></span></strong>  çš„å«ä¹‰ï¼šå°†6ã€5ã€2ã€3å…¥æ ˆï¼Œé‡åˆ°+å·ï¼Œè¡¨ç¤º+å·å‰é¢çš„3+å‰é¢çš„2å¼¹æ ˆï¼Œå¹¶å°†å¾—åˆ°5å…¥æ ˆã€‚å†é‡åˆ°8ï¼Œ8å…¥æ ˆï¼Œæ¥ç€é‡åˆ°*å·ï¼Œåˆ™*å·å‰é¢çš„8ä¸5çš„å¼¹æ ˆï¼Œå¹¶å°†8*5çš„ç»“æœ40å…¥æ ˆã€‚ã€‚ã€‚(å³é‡åˆ°æ•°å­—å°±ç»§ç»­å…¥æ ˆï¼Œé‡åˆ°å››åˆ™ç¬¦å·å°±å°†å‰é¢çš„ä¸¤ä¸ªæ•°å¼¹æ ˆï¼Œå¹¶å°†è®¡ç®—çš„ç»“æœå…¥æ ˆ)ã€‚ä¸Šå¼çš„è®¡ç®—ç»“æœå¦‚ä¸‹ã€‚</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mn>3</mn><mo>+</mo><mn>2</mn><mo stretchy="false">)</mo><mo>âˆ—</mo><mn>8</mn><mo stretchy="false">)</mo><mo>+</mo><mn>5</mn><mo stretchy="false">)</mo><mo>+</mo><mn>3</mn><mo stretchy="false">)</mo><mo>âˆ—</mo><mn>6</mn><mo>=</mo><mn>288</mn></mrow><annotation encoding="application/x-tex">((((3+2) * 8) + 5)+3)*6 = 288
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mopen">(</span><span class="mopen">(</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">8</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">8</span><span class="mord">8</span></span></span></span></span></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€†æ³¢å…°è¡¨è¾¾å¼è®¡ç®— LeetCodeå‰‘æŒ‡Offer ç¬¬äºŒç‰ˆ 036 åç¼€è¡¨è¾¾å¼ (é™¤æ³•åªå–æ•´æ•°)</span></span><br><span class="line"><span class="comment"> * ç®€åŒ–ç‰ˆï¼Œå‰æï¼šè¯¥é€†æ³¢å…°è¡¨è¾¾å¼æ˜¯æ­£ç¡®çš„ï¼Œä¸”å·²ç»è½¬ä¸ºæ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EvalRPNTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] tokens = &#123;<span class="string">&quot;2&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;+&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;*&quot;</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> evalRPN(tokens);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String token : tokens) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (token) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;+&quot;</span> :</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;-&quot;</span> :</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;*&quot;</span> :</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;/&quot;</span> :</span><br><span class="line">                    <span class="comment">// å¦‚æœé‡åˆ°äº†è¿ç®—ç¬¦ï¼Œè·å–å¹¶å¼¹å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ </span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    <span class="comment">// è®¡ç®—ä¸¤ä¸ªå…ƒç´ å¹¶å°†ç»“æœå…¥æ ˆ</span></span><br><span class="line">                    stack.push(calc(num1, num2, token));</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    stack.push(Integer.parseInt(token));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.pop();</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡ç®—ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Integer <span class="title function_">calc</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2, String token)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (token) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> num1 + num2;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> num1 - num2;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> num1 * num2;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> num1 / num2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table><br></table>
<p>â€ƒâ€ƒ<strong>ä¸­ç¼€è½¬åç¼€è¡¨è¾¾å¼</strong><br>
â€ƒâ€ƒæ—¥å¸¸ä½¿ç”¨çš„ä¸­ç¼€è¡¨è¾¾å¼å¯ä»¥è½¬ä¸ºåç¼€è¡¨è¾¾å¼ï¼Œä¹‹åæ–¹ä¾¿è®¡ç®—æœºè¿›è¡Œè®¡ç®—ã€‚<br>
èŒƒä¾‹ï¼ša + b * c + (d * e + f) * g ====== a b c *+ d e * f + g *+<br>
é€»è¾‘ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ä¸€ä¸ªæ ˆï¼Œç”¨äºå­˜æ”¾è¿ç®—ç¬¦ï¼›åˆå§‹åŒ–ä¸€ä¸ªListç”¨äºå­˜æ”¾æ•°å­—ã€‚Listä¸ºæœ€ç»ˆç»“æœ</li>
<li>å¦‚æœé‡åˆ°æ•°å­—ï¼Œåˆ™ç›´æ¥å­˜å…¥List</li>
<li>å¦‚æœé‡åˆ°è¿ç®—ç¬¦ï¼Œåˆ™ä¸æ ˆé¡¶çš„è¿ç®—ç¬¦æ¯”è¾ƒï¼Œå¦‚æœä¼˜å…ˆçº§æ¯”æ ˆé¡¶çš„é«˜ï¼Œåˆ™å…¥æ ˆï¼Œå¦åˆ™(<strong>åŒä¼˜å…ˆçº§æˆ–è€…ä½</strong>)å°†<strong>æ ˆé¡¶çš„è¿ç®—ç¬¦</strong>å¼¹æ ˆå†å­˜å…¥é˜Ÿåˆ—ï¼Œä¹‹åå†å°†è¿ç®—ç¬¦ä¸æ ˆé¡¶çš„å…ƒç´ ç»§ç»­æ¯”è¾ƒï¼Œç›´åˆ°å…¥æ ˆã€‚(ä¼˜å…ˆçº§ â€˜*â€™ = â€˜/â€™ &gt; â€˜+â€˜ = â€˜-â€™)ã€‚æ³¨æ„è¿ç®—ç¬¦ä¸ä¸æ‹¬å·æ¯”è¾ƒï¼Œç›´æ¥å…¥æ ˆã€‚</li>
<li>å¦‚æœé‡åˆ°å·¦æ‹¬å·ï¼Œåˆ™ç›´æ¥å…¥æ ˆï¼Œå¦‚æœé‡åˆ°å³æ‹¬å·ï¼Œåˆ™å°†æ ˆé¡¶çš„è¿ç®—ç¬¦ä¾æ¬¡å¼¹å‡ºå­˜å…¥é˜Ÿåˆ—ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·(ä¸åˆ¤æ–­æ ˆç©ºçš„æƒ…å†µï¼šè¡¨è¾¾å¼é”™è¯¯)ï¼Œå¼¹å‡ºå·¦æ‹¬å·ã€‚(æ³¨æ„æ‹¬å·åªå¼¹å‡ºï¼Œä¸è¾“å‡º)</li>
<li>å¦‚æœä¼ å…¥æ•°ç»„éå†å®Œæ¯•ï¼Œåˆ™ä¾æ¬¡å¼¹å‡ºæ ˆé¡¶å…ƒç´ å­˜å…¥Listã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SuffixExpression</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">expression</span> <span class="operator">=</span> <span class="string">&quot;1+((23+3)*4)-5&quot;</span>;</span><br><span class="line">        List&lt;String&gt; expressionList = expressionToList(expression);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ç¼€è¡¨è¾¾å¼å­—ç¬¦ä¸²è½¬Listï¼š&quot;</span> + expressionList);</span><br><span class="line">        <span class="comment">//å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼</span></span><br><span class="line">        List&lt;String&gt; suffixList = parseToSuffixExpression(expressionList);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ç¼€è¡¨è¾¾å¼ï¼š&quot;</span> + suffixList);</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å‰é¢çš„è®¡ç®—ä¸­ç¼€è¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œ</span></span><br><span class="line">        <span class="comment">// å°†Listè½¬æ•°ç»„åŒ…æ‹¬æ³›å‹ï¼šsuffixList.toArray(new String[suffixList.size()])</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> EvalRPNTest.evalRPN(suffixList.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[suffixList.size()]));</span><br><span class="line">        System.out.println(<span class="string">&quot;åç¼€è¡¨è¾¾å¼è®¡ç®—ç»“æœï¼š&quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expressList éœ€è¦è½¬æ¢çš„Listï¼Œå‡è®¾Listçš„ä¸­ç¼€è¡¨è¾¾å¼æ˜¯æ­£ç¡®çš„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">parseToSuffixExpression</span><span class="params">(List&lt;String&gt; expressList)</span> &#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜è¿ç®—ç¬¦çš„æ ˆ</span></span><br><span class="line">        Stack&lt;String&gt; opStack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ä¿å­˜æ•°å­—çš„Listï¼Œæœ€ç»ˆç”¨æ¥ä¿å­˜ç»“æœçš„List</span></span><br><span class="line">        ArrayList&lt;String&gt; suffixList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String item : expressList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (item.matches(<span class="string">&quot;\\d+&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯æ•°å­—ï¼Œåˆ™ç›´æ¥å­˜å…¥List</span></span><br><span class="line">                suffixList.add(item);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;+&quot;</span>.equals(item) || <span class="string">&quot;-&quot;</span>.equals(item) || <span class="string">&quot;*&quot;</span>.equals(item) || <span class="string">&quot;/&quot;</span>.equals(item)) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯è¿ç®—ç¬¦</span></span><br><span class="line">                <span class="keyword">if</span> (opStack.isEmpty() || <span class="string">&quot;(&quot;</span>.equals(opStack.peek()) || MyPriority.getPriority(item) &gt; MyPriority.getPriority(opStack.peek())) &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœæ˜¯ç©ºæ ˆ(å…ˆåˆ¤æ–­é¿å…NPE)ï¼Œæˆ–è€…å¦‚æœæ ˆé¡¶æ˜¯å·¦æ‹¬å·ï¼Œæˆ–è€…å¦‚æœä¼˜å…ˆçº§æ¯”æ ˆé¡¶çš„è¿ç®—ç¬¦é«˜</span></span><br><span class="line">                    opStack.push(item);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// æ˜¯è¿ç®—ç¬¦ï¼Œä¸”ä¼˜å…ˆçº§å°äºæˆ–è€…ç­‰äº</span></span><br><span class="line">                    <span class="comment">// å°†è¿ç®—ç¬¦å¼¹æ ˆï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·æˆ–è€…ä¼˜å…ˆçº§æ›´ä½çš„æˆ–è€…ç©ºæ ˆ(è§ä¸‹é¢çš„whileè§£é‡Š)</span></span><br><span class="line">                    <span class="keyword">while</span> (!opStack.isEmpty() &amp;&amp; !<span class="string">&quot;(&quot;</span>.equals(opStack.peek())) &#123;</span><br><span class="line">                        <span class="comment">// å¦‚æœitemçš„ä¼˜å…ˆçº§å°äºç­‰äºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">                        <span class="keyword">if</span> (MyPriority.getPriority(item) &lt;= MyPriority.getPriority(opStack.peek())) &#123;</span><br><span class="line">                            suffixList.add(opStack.pop());</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// å½“å‰æ“ä½œç¬¦å…¥æ ˆ</span></span><br><span class="line">                    opStack.push(item);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;(&quot;</span>.equals(item)) &#123;</span><br><span class="line">                opStack.push(item);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;)&quot;</span>.equals(item)) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯å³æ‹¬å·ï¼Œåˆ™å¼¹å‡ºæ ˆä¸­å…ƒç´ ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·ï¼Œ</span></span><br><span class="line">                <span class="comment">// å‡è®¾ä¸­ç¼€è¡¨è¾¾å¼æ­£ç¡®ï¼Œæ•…ä¸å†åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º(ä¸ºç©ºä¹‹å‰ä¸€å®šä¼šé‡åˆ°å·¦æ‹¬å·)</span></span><br><span class="line">                <span class="keyword">while</span> (!<span class="string">&quot;(&quot;</span>.equals(opStack.peek())) &#123;</span><br><span class="line">                    suffixList.add(opStack.pop());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¼¹å‡ºå·¦æ‹¬å·</span></span><br><span class="line">                opStack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†å®Œæ¯•ï¼Œå°†æ ˆä¸­çš„æ‰€æœ‰è¿ç®—ç¬¦å¼¹å‡º</span></span><br><span class="line">        <span class="keyword">while</span> (!opStack.isEmpty()) &#123;</span><br><span class="line">            suffixList.add(opStack.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> suffixList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­—ç¬¦ä¸²è½¬Listï¼Œä¸ç”¨toCharArrayæ˜¯å› ä¸ºæœ‰å¤šä½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expression</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">expressionToList</span><span class="params">(String expression)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> expression.charAt(index);</span><br><span class="line">            <span class="keyword">if</span>(ch &lt; <span class="number">47</span> || ch &gt; <span class="number">58</span>)&#123;</span><br><span class="line">                <span class="comment">//æ˜¯æ“ä½œç¬¦ï¼Œç›´æ¥æ·»åŠ è‡³listä¸­</span></span><br><span class="line">                index ++ ;</span><br><span class="line">                list.add(ch+<span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch &gt;= <span class="number">47</span> &amp;&amp; ch &lt;= <span class="number">58</span>)&#123;</span><br><span class="line">                <span class="comment">//æ˜¯æ•°å­—,åˆ¤æ–­å¤šä½æ•°çš„æƒ…å†µ</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">while</span> (index &lt; expression.length() &amp;&amp; expression.charAt(index) &gt;=<span class="number">47</span> &amp;&amp; expression.charAt(index) &lt;= <span class="number">58</span>)&#123;</span><br><span class="line">                    str += expression.charAt(index);</span><br><span class="line">                    index ++;</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">while</span> (index &lt; expression.length());</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¼˜å…ˆçº§ï¼Œä¹Ÿå¯ä»¥å†™æˆæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyPriority</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">ADD</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SUB</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">MUL</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">DIV</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸éœ€è¦breakï¼Œå› ä¸ºå·²ç»return</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">getPriority</span><span class="params">(String opr)</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> (opr) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                    <span class="keyword">return</span> ADD;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                    <span class="keyword">return</span> SUB;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">                    <span class="keyword">return</span> MUL;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">                    <span class="keyword">return</span> DIV;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table><br></table>
<h2 id="3-7-é˜Ÿåˆ—adt">3.7 é˜Ÿåˆ—ADT</h2>
<h3 id="3-7-1-é˜Ÿåˆ—æ¨¡å‹">3.7.1  é˜Ÿåˆ—æ¨¡å‹</h3>
<blockquote>
<p>é˜Ÿåˆ—çš„å…¥é˜Ÿå‘ç”Ÿåœ¨é˜Ÿåˆ—å°¾ï¼Œå‡ºé˜Ÿå‡ºç°åœ¨é˜Ÿé¦–ã€‚ç±»ä¼¼æ’é˜Ÿï¼Œåªèƒ½åœ¨é˜Ÿå°¾å¢åŠ ï¼Œé˜Ÿé¦–åˆ é™¤ã€‚</p>
</blockquote>
<h3 id="3-7-2-é˜Ÿåˆ—çš„æ•°ç»„å®ç°">3.7.2 é˜Ÿåˆ—çš„æ•°ç»„å®ç°</h3>
<p>â€ƒâ€ƒé˜Ÿåˆ—çš„æ•°ç»„ä¸é“¾è¡¨éƒ½å¯ä»¥å®ç°ï¼Œéƒ½æ˜¯O(1)çš„æ—¶é—´è¿è¡Œã€‚å¦‚ä¸‹æ˜¯æ•°ç»„çš„å®ç°ã€‚<br>
<strong>é¡ºåºé˜Ÿåˆ—</strong>ï¼šåˆå§‹æ—¶ï¼Œheadä¸tailæŒ‡é’ˆåŒæ—¶æŒ‡å‘0ï¼Œæ¯å½“æ–°å¢å…ƒç´ ï¼Œtail++ï¼Œåˆ é™¤å…ƒç´ ï¼Œheadâ€“ã€‚ç›´åˆ°æ•°ç»„å°¾éƒ¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é¡ºåºé˜Ÿåˆ—ç®€å•å®ç°ï¼Œæ— æ‰©å®¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SeqArrayQueue</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—å­˜å‚¨å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tail;</span><br><span class="line">    <span class="keyword">private</span> T[] arr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SeqArrayQueue</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">        capacity = cap;</span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">        tail = <span class="number">0</span>;</span><br><span class="line">        arr = (T[]) <span class="keyword">new</span> <span class="title class_">Object</span>[cap];</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// å…¥é˜Ÿ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(T element)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(<span class="string">&quot;é˜Ÿåˆ—è¶Šç•Œ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[tail++] = element;</span><br><span class="line">            currentSize++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å‡ºé˜Ÿ</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">dequeue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        currentSize--;</span><br><span class="line">        <span class="keyword">return</span> arr[head++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getHeadElement</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> arr[head];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getTailElement</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> arr[tail];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œåˆ¤æ–­æ˜¯å¦æ»¡ï¼Œä¹‹åˆ¤æ–­æ˜¯å¦æ•°ç»„çš„æœ«å°¾æ˜¯å¦è¢«ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">tail</span> <span class="operator">=</span>= capacity-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">head</span> <span class="operator">=</span>= tail;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¾ªç¯é˜Ÿåˆ—</strong>ï¼šåˆå§‹æ—¶ï¼Œheadä¸tailæŒ‡é’ˆåŒæ—¶æŒ‡å‘0ï¼Œæ¯å½“æ–°å¢å…ƒç´ ï¼Œtail++ï¼Œåˆ é™¤å…ƒç´ ï¼Œheadâ€“ã€‚å¦‚æ•°ç»„è¶Šç•Œï¼Œåˆ™æ’å…¥å€’é˜Ÿé¦–å¯¹åº”çš„ä½ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoopArrayQueue</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—å­˜å‚¨å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tail;</span><br><span class="line">    <span class="keyword">private</span> T[] arr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LoopArrayQueue</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">        capacity = cap;</span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">        tail = <span class="number">0</span>;</span><br><span class="line">        arr = (T[]) <span class="keyword">new</span> <span class="title class_">Object</span>[cap];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾ªç¯é˜Ÿåˆ—æ”¹å˜ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(T element)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(<span class="string">&quot;é˜Ÿåˆ—è¶Šç•Œ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[tail] = element;</span><br><span class="line">            <span class="comment">// å°¾æŒ‡é’ˆè¿˜æ˜¯+1ï¼Œå¯¹å®¹é‡å–ä½™ï¼šå¦‚æœè¶Šç•Œï¼Œå°±ç§»åŠ¨åˆ°é˜Ÿé¦–å¯¹åº”çš„ä½ç½®</span></span><br><span class="line">            tail = (tail+<span class="number">1</span>) % capacity;</span><br><span class="line">            currentSize++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾ªç¯é˜Ÿåˆ—æ”¹å˜ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">dequeue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        currentSize--;</span><br><span class="line">        <span class="type">T</span> <span class="variable">deQueueElement</span> <span class="operator">=</span> arr[head];</span><br><span class="line">        <span class="comment">// å¤´æŒ‡é’ˆè¿˜æ˜¯+1ï¼Œå¯¹å®¹é‡å–ä½™ï¼šå¦‚æœè¶Šç•Œï¼Œå°±ç§»åŠ¨åˆ°é˜Ÿé¦–å¯¹åº”çš„ä½ç½®</span></span><br><span class="line">        head = (head + <span class="number">1</span>) % capacity;</span><br><span class="line">        <span class="keyword">return</span> deQueueElement;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getHeadElement</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> arr[head];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getTailElement</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> arr[tail];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾ªç¯é˜Ÿåˆ—æ”¹å˜ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¤´æŒ‡é’ˆ+1ç­‰äºå°¾æŒ‡é’ˆï¼Œå–ä½™æ˜¯ä¸ºäº†å¤„ç†è¶Šç•Œï¼Œæ”¾é“é˜Ÿé¦–å¯¹åº”çš„ä½ç½®</span></span><br><span class="line">        <span class="type">return</span> <span class="variable">tail</span> <span class="operator">=</span>= (head + <span class="number">1</span>) % capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">head</span> <span class="operator">=</span>= tail;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡¨ä¸javaä¸­è¡¨çš„å®ç°</title>
    <url>/2021/07/11/%E8%A1%A8%E4%B8%8Ejava%E4%B8%AD%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬äºŒç« 3.1åˆ°3.5èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="3-1-æŠ½è±¡æ•°æ®ç±»å‹">3.1 æŠ½è±¡æ•°æ®ç±»å‹</h2>
<blockquote>
<p>æŠ½è±¡æ•°æ®ç±»å‹(ADT)ï¼šæ˜¯å¸¦æœ‰ä¸€ç»„æ“ä½œçš„ä¸€äº›å¯¹è±¡çš„é›†åˆ</p>
</blockquote>
<p>â€ƒâ€ƒå¯¹äºé›†åˆADTï¼Œå¯ä»¥æœ‰åƒæ·»åŠ (add)ã€åˆ é™¤(remove)ã€ä¸åŒ…å«(contain)è¿™æ ·çš„ä¸€äº›æ“ä½œã€‚ä¹Ÿå¯ä»¥åªè¦ä¸¤ç§æ“ä½œï¼Œå¹¶(union)å’ŒæŸ¥æ‰¾(find)ã€‚<br>
ADTçš„å®ç°ä¸€èˆ¬å–å†³ä¸ç¨‹åºè®¾è®¡è€…ï¼Œå½“ADTè¢«ç¨‹åºè®¾è®¡è€…æ­£ç¡®çš„å®ç°åï¼Œä½¿ç”¨è¯¥è¯­è¨€å¯ä»¥ä¸å¿…è¦çŸ¥é“ä»–ä»¬å¦‚ä½•å®ç°ã€‚</p>
<table><br></table>
<h2 id="3-2è¡¨adt">3.2è¡¨ADT</h2>
<blockquote>
<p>å½¢å¦‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">A_0,A_1,A_2,\ldots, A_{N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¿™ä¸ªè¡¨çš„å¤§å°ä¸ºNï¼Œå¦‚æœè¯¥è¡¨çš„å¤§å°ä¸º0ï¼Œåˆ™è¯¥è¡¨ç§°ä¸º<strong>ç©ºè¡¨</strong>ï¼Œé™¤ç©ºè¡¨å¤–çš„ä»»ä½•è¡¨ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åç»§<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">A_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>(æˆ–ç»§<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">A_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ä¹‹åï¼Œi&lt;N)ï¼Œå¹¶ç§°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">A_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>å‰é©±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo>&gt;</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_i(i&gt;0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span>ã€‚</p>
</blockquote>
<p>â€ƒâ€ƒå¸¸ç”¨æ“ä½œ(ä¸åŒçš„è¯­è¨€æœ‰ä¸åŒçš„å®ç°)ï¼š</p>
<ol>
<li><strong>printList</strong>ï¼šjavaæ²¡æœ‰ç›´æ¥å®ç°ï¼Œå¦‚æœæ˜¯Listï¼Œå¯ä»¥ç›´æ¥æ‰“å°ï¼Œå› ä¸ºå…¶çˆ¶ç±»AbstractCollectioné‡å†™äº†toStringæ–¹æ³•ã€‚<br>
å¦‚æœæ˜¯æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡Arrays.toString(æ•°ç»„)ï¼Œæ–¹æ³•å®ç°æ‰“å°ã€‚</li>
<li><strong>makeEmpty</strong>ï¼šå¦‚æœæ˜¯Listï¼Œæœ‰clear()æ–¹æ³•ï¼Œå°†æ‰€æœ‰å…ƒç´ ç½®ä¸ºnullã€‚</li>
<li><strong>find</strong>ï¼šæ‰¾åˆ°æŸå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œjdkå¥½åƒæ²¡å®ç°</li>
<li><strong>insert</strong>ï¼šjdkå®ç°çš„æ˜¯addæ–¹æ³•ï¼Œæœ‰é‡è½½ï¼Œä¸æŒ‡å®šindexï¼Œåˆ™é»˜è®¤æœ€åï¼Œå¯ä»¥æŒ‡å®šindexã€‚</li>
<li><strong>findKth</strong>ï¼šæŸ¥æ‰¾æŸä¸ªindexä¸‹çš„å…ƒç´ ï¼Œå¦‚æœæ˜¯Listï¼Œæœ‰get(index)æ–¹æ³•ï¼Œæ•°ç»„åˆ™int[index]ã€‚</li>
<li><strong>remove</strong>ï¼šç§»é™¤æŸä¸ªindexçš„å…ƒç´ </li>
</ol>
<h3 id="3-2-1è¡¨çš„ç®€å•æ•°ç»„å®ç°">3.2.1è¡¨çš„ç®€å•æ•°ç»„å®ç°</h3>
<p>â€ƒâ€ƒæ•°ç»„çš„å®ç°ï¼Œä½¿printListå¯ä»¥ç”¨çº¿æ€§çš„æ—¶é—´O(N)æ‰§è¡Œï¼ŒfindKthåˆ™èŠ±è´¹å¸¸æ•°æ—¶é—´ã€‚æ’å…¥å’Œåˆ é™¤å¼€é”€æ˜‚è´µï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œåœ¨ç´¢å¼•ä¸º0çš„ä½ç½®æ’å…¥ï¼Œéœ€è¦å°†æ‰€æœ‰å…ƒç´ å‘åç§»åŠ¨ä¸€ä½ã€‚è€Œåˆ é™¤ä¸€ä¸ªä½ç½®åˆ™éœ€è¦å°†æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½ã€‚ä¸¤ç§æ“ä½œçš„æ—¶é—´éƒ½ä¸ºO(N)ã€‚ä½†æ˜¯å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½æ“ä½œåœ¨è¡¨çš„é«˜ç«¯(æœ«ç«¯ï¼Œæ•°ç»„æœ‰å®¹é‡çš„æƒ…å†µä¸‹ï¼Œå¦åˆ™éœ€è¦æ˜‚è´µçš„æ‰©å®¹)ã€‚æ·»åŠ å’Œåˆ é™¤åªéœ€è¦O(1)çš„æ—¶é—´ã€‚</p>
<h3 id="3-2-2ç®€å•é“¾è¡¨">3.2.2ç®€å•é“¾è¡¨</h3>
<p>â€ƒâ€ƒé“¾è¡¨ç”±ä¸€ç³»åˆ—èŠ‚ç‚¹ç»„æˆï¼Œè¿™äº›èŠ‚ç‚¹åœ¨å†…å­˜ä¸­å¯ä»¥ä¸ç›¸è¿ï¼Œæ¯ä¸ªèŠ‚ç‚¹å‡å«æœ‰è¡¨å…ƒç´ å’ŒåŒ…å«è¯¥å…ƒç´ åç»§èŠ‚ç‚¹çš„é“¾ link(æŒ‡é’ˆ)ï¼Œç§°ä¹‹ä¸ºnexté“¾ã€‚æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nexté“¾ä¸ºnullã€‚<br>
â€ƒâ€ƒæ‰§è¡ŒprintListä¸find(x)ï¼Œå¯ä»¥ä»è¡¨çš„å¤´çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ä½¿ç”¨åç»§çš„nextéå†è¯¥è¡¨å³å¯ï¼Œè¿™ç§æ“ä½œå’Œæ•°ç»„ä¸€æ ·ï¼Œæ˜¯çº¿æ€§çš„æ—¶é—´ã€‚<br>
â€ƒâ€ƒremoveæ–¹æ³•é€šè¿‡ä¿®æ”¹ä¸€ä¸ªnextæŒ‡é’ˆå®ç°ï¼Œinsertæ–¹æ³•ä½¿ç”¨newæ“ä½œç¬¦ä»ç³»ç»Ÿä¸­æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ­¤åæ‰§è¡Œä¸¤æ¬¡å¼•ç”¨è°ƒæ•´ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œé“¾è¡¨çš„æ’å…¥ä¸åˆ é™¤éƒ½åªéœ€è¦èŠ±è´¹å¸¸æ•°çš„æ—¶é—´ã€‚<br>
<img src="/2021/07/11/%E8%A1%A8%E4%B8%8Ejava%E4%B8%AD%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/%E9%93%BE%E8%A1%A8%E7%9A%84%E6%8F%92%E5%85%A5%E4%B8%8E%E5%88%A0%E9%99%A4.png" alt></p>
<p>â€ƒâ€ƒåŒå‘é“¾è¡¨ï¼šè®©æ¯ä¸€ä¸ªèŠ‚ç‚¹æŒæœ‰ä¸€ä¸ªæŒ‡å‘å®ƒåœ¨è¡¨ä¸­çš„å‰é©±èŠ‚ç‚¹çš„é“¾</p>
<table><br></table>
<h2 id="3-3-java-collections-apiä¸­çš„è¡¨">3.3 Java Collections APIä¸­çš„è¡¨</h2>
<blockquote>
<p>è¡¨ADTæ˜¯åœ¨Collections APIä¸­çš„å®ç°æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚</p>
</blockquote>
<h3 id="3-3-1-collectionsæ¥å£">3.3.1 Collectionsæ¥å£</h3>
<p>â€ƒâ€ƒCollectionæ¥å£æ‰©å±•Iterableæ¥å£(å¯è¿­ä»£)ï¼Œå®ç°è¯¥æ¥å£çš„ç±»å¯ä»¥æ‹¥æœ‰ç®€å•çš„forå¾ªç¯ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ­¤é™æ€æ–¹æ³•voidå‰é¢çš„&lt;AnyType&gt;æ˜¯å¼•ç”¨ç±»ä¸Šçš„&lt;AnyType&gt;æ³›å‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;AnyType&gt; <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(Collection&lt;AnyType&gt; coll)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (AnyType item : coll) &#123;</span><br><span class="line">        System.out.println(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-2-iteratoræ¥å£">3.3.2 Iteratoræ¥å£</h3>
<p>â€ƒâ€ƒå®ç°Iteratoræ¥å£çš„é›†åˆå¿…é¡»å®ç°iteratoræ¥å£æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªiteratorï¼Œè¯¥iteratorå°†å½“å‰ä½ç½®çš„æ¦‚å¿µåœ¨å¯¹è±¡å†…éƒ¨å­˜å‚¨ã€‚è¯¥iteratoræ˜¯java.utilåŒ…ä¸­å®šä¹‰ã€‚<br>
â€ƒâ€ƒæ¯æ¬¡å¯¹nextè°ƒç”¨ï¼Œéƒ½ç»™å‡ºè¯¥é›†åˆçš„ä¸‹ä¸€é¡¹ï¼ŒhasNext()ç”¨æ¥è¿”å›æ˜¯å¦å­˜åœ¨ä¸‹ä¸€é¡¹ã€‚å¯¹äºå®ç°Iterableæ¥å£çš„å¢å¼ºforå¾ªç¯ï¼Œç¼–è¯‘å™¨ä¼šé‡å†™ï¼Œå°†å…¶è½¬æ¢ä¸ºç”±è¿­ä»£å™¨iteratorè¿›è¡Œè¿­ä»£ã€‚æ‰€ä»¥å‰é¢çš„printè¢«ç¼–è¯‘å™¨æ”¹å†™ä¸ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;AnyType&gt; <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(Collection&lt;AnyType&gt; coll)</span> &#123;</span><br><span class="line">    Iterator&lt;AnyType&gt; iterator = coll.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        <span class="type">AnyType</span> <span class="variable">item</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">        System.out.println(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒiteratoræ¥å£è¿˜æœ‰ä¸€ä¸ªremoveæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ é™¤nextè¿”å›çš„é¡¹ï¼Œè™½ç„¶Collectionæ¥å£ä¹Ÿæœ‰removeæ–¹æ³•ï¼Œä½†æ˜¯Iteratoræ–¹æ³•æœ‰æ›´å¤šä¼˜ç‚¹ã€‚Collecctionçš„removeæ–¹æ³•ï¼Œå¿…é¡»è¦æŒ‡å®šåˆ é™¤é‚£ä¸€é¡¹ï¼Œè€ŒIteratorå¯ä»¥åœ¨éå†çš„è¿‡ç¨‹ä¸­åˆ é™¤ã€‚å¦‚æœç›´æ¥ä½¿ç”¨forå¾ªç¯removeé›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ—¶å°±åº”è¯¥ä½¿ç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•ã€‚</p>
<h3 id="3-3-3-listæ¥å£ä¸ç»§æ‰¿çš„ç±»">3.3.3 Listæ¥å£ä¸ç»§æ‰¿çš„ç±»</h3>
<p>â€ƒâ€ƒListæ¥å£ç»§æ‰¿äº†Collectionæ¥å£ï¼Œå¦‚ä¸‹åŒ…æ‹¬å…¶è‡ªå·±å®šä¹‰çš„ä¸€äº›é‡è¦çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyList</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;T&gt; &#123;</span><br><span class="line">    T <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line">    T <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, T newVal)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, T x)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line">    <span class="comment">// æ­¤æ–¹æ³•å°†äº§ç”Ÿæ›´åŠ å¤æ‚çš„è¿­ä»£å™¨</span></span><br><span class="line">    ListIterator&lt;T&gt; <span class="title function_">listIterator</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒList ADTæœ‰ä¸¤ç§æµè¡Œçš„å®ç°æ–¹å¼ï¼ŒArrayListæ˜¯å¯å˜æ•°ç»„çš„å…·ä½“å®ç°ï¼Œå…·æœ‰æ•°ç»„çš„ç‰¹ç‚¹ï¼Œgetä¸setèŠ±è´¹å¸¸æ•°çš„æ—¶é—´ï¼Œaddä¸removeçš„èŠ±è´¹çº¿æ€§O(N)çš„æ—¶é—´(ä¸åœ¨æœ«ç«¯çš„æƒ…å†µ)ã€‚LinkedListåˆ™å®ç°äº†ä¸€ç§åŒå‘é“¾è¡¨ã€‚å…·æœ‰ä¸€ç³»åˆ—æ“ä½œé¦–å°¾ä½ç½®çš„æ–¹æ³•ï¼Œå…¶å…·æœ‰é“¾è¡¨çš„ç‰¹ç‚¹ï¼Œgetçš„æ—¶é—´è¿‘ä¼¼çº¿æ€§ã€‚<br>
<strong>æ„é€ ä¸€ä¸ªæ–°çš„List</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">makeList1</span><span class="params">(List&lt;Integer&gt; lst, <span class="type">int</span> N)</span> &#123;</span><br><span class="line">    lst.clearn();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        lst.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒè¯¥æ„é€ ï¼Œæ— è®ºä¼ å…¥çš„æ˜¯ArrayListè¿˜æ˜¯LinkedListéƒ½æ˜¯O(N)ï¼Œæ¯æ¬¡éƒ½æ˜¯åœ¨æœ«å°¾æ·»åŠ ã€‚ä¸è€ƒè™‘ArrayListçš„æ‰©å®¹ã€‚</p>
<p><strong>åœ¨è¡¨çš„å‰ç«¯æ’å…¥å…ƒç´ </strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">makeList</span><span class="params">(List&lt;Integer&gt; lst, <span class="type">int</span> N)</span> &#123;</span><br><span class="line">    lst.clearn();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        lst.add(<span class="number">0</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒè¯¥æ„é€ ï¼Œå¯¹äºArrayListæ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå› ä¸ºå…¶æ¯æ¬¡æ’å…¥èŠ±è´¹æ—¶é—´O(N)ï¼Œå¯¹äºLinkedListåˆ™èŠ±è´¹æ—¶é—´O(N)</p>
<p><strong>æ±‚è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(List&lt;Integer&gt; lst &#123;</span></span><br><span class="line"><span class="params">    <span class="type">int</span> total = <span class="number">0</span>;</span></span><br><span class="line"><span class="params">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span> &#123;</span><br><span class="line">        total += lst.get(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒå¯¹äºArrayListå…¶æ—¶é—´ä¸ºO(N)ï¼ŒLinkedListæ—¶é—´ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå› ä¸ºå…¶æ¯æ¬¡è·å–å…ƒç´ éœ€è¦O(N)çš„æ—¶é—´ã€‚å¦‚æœä½¿ç”¨å¢å¼ºforå¾ªç¯ï¼Œåˆ™ä¸¤ä¸ªéƒ½æ˜¯O(N)ï¼Œå°†ä½¿ç”¨è¿­ä»£å™¨ä¸€ç›´è¿­ä»£ä¸‹å»ã€‚å¯¹æœç´¢è€Œè¨€ï¼Œä¸¤è€…éƒ½æ˜¯ä½æ•ˆçš„ï¼Œcontainsä¸removeæ–¹æ³•å‡èŠ±è´¹çº¿æ€§æ—¶é—´ã€‚</p>
<h3 id="3-3-4-likedlistä¸­çš„removeæ–¹æ³•">3.3.4 LikedListä¸­çš„removeæ–¹æ³•</h3>
<blockquote>
<p>è€ƒè™‘å¦‚ä¸‹ä¸€ä¸ªä¾‹å­ï¼Œåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰å¶æ•°ã€‚è¡¨[6,5,1,4,2]ï¼Œåˆ é™¤åè¡¨ä¸­ä»…æœ‰5ï¼Œ1ä¸¤ä¸ªå…ƒç´ ã€‚</p>
</blockquote>
<p>â€ƒâ€ƒå¯¹äºArrayListï¼Œå…¶åˆ é™¤çš„æ“ä½œæ˜¯O(N)ï¼Œä¸æ˜¯ï¼Œä¸€ä¸ªå¥½ç­–ç•¥ï¼Œå¯¹äºLinkedListï¼Œå¦‚æœä¸ä½¿ç”¨è¿­ä»£å™¨åˆ™æ˜¯O(N)(é¦–å…ˆéœ€è¦æ‰¾åˆ°è¯¥å…ƒç´ æ‰èƒ½åˆ é™¤)ï¼Œå¦‚æœä½¿ç”¨è¿­ä»£å™¨ï¼Œåˆ™ä¸€æ¬¡åˆ é™¤ä¸ºO(1)ã€‚   å¦‚æœä½¿ç”¨æ™®é€šçš„whileå¾ªç¯ï¼Œé‚£ä¹ˆå¯¹äºArrayListæ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„æ—¶é—´ï¼Œå¯¹äºLinkedListä¹Ÿæ˜¯O(N^2)çš„æ—¶é—´ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸é«˜æ•ˆ,å¹¶ä¸”åœ¨å¾ªç¯ä¸­ä½¿ç”¨collectionçš„removeæ–¹æ³•æ˜¯ä¸€ä¸ªéæ³•çš„æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">removeEvensVer1</span><span class="params">(List&lt;Integer&gt; lst)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; lst.size()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (lst.get(i) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            lst.remove(i);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡æœ‰removeï¼Œåˆ™i++,(removeéæ³•)</span></span><br><span class="line">            i ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒå¦‚ä¸‹ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨äº†å¢å¼ºforå¾ªç¯(å³ä½¿ç”¨äº†è¿­ä»£å™¨)ï¼Œä½†æ˜¯ä½¿ç”¨äº†collectionçš„removeæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¿…é¡»å†æ¬¡æœç´¢è¯¥é¡¹ï¼Œå› æ­¤removeæ‰§è¡Œæ—¶é—´ä»ç„¶ä¸ºO(N)ï¼Œæ€»ä½“æ—¶é—´ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå¹¶ä¸”åŒä¸Šï¼Œå¯¹å¢å¼ºforå¾ªç¯ä½¿ç”¨çš„åŸºç¡€è¿­ä»£å™¨ä¸­ï¼Œcollectionçš„removeå…ƒç´ ä¹Ÿæ˜¯éæ³•çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸é«˜æ•ˆ,å¹¶ä¸”åœ¨å¾ªç¯ä¸­ä½¿ç”¨collectionçš„removeæ–¹æ³•æ˜¯ä¸€ä¸ªéæ³•çš„æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">removeEvensVer1</span><span class="params">(List&lt;Integer&gt; lst)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Integer x : lst) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// collectionçš„removeéœ€è¦æ‰¾åˆ°è¯¥å…ƒç´ ï¼Œä¸ºO(N),ä¸”éæ³•</span></span><br><span class="line">            lst.remove(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒå¦‚ä¸‹ä½¿ç”¨è¿­ä»£å™¨ï¼Œå¯¹äºLinkedListæ˜¯O(N)çš„å¤æ‚åº¦ï¼Œå¯¹äºArrayListåˆ™ä¾æ—§æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å¤æ‚åº¦(removeåï¼Œæ•°ç»„å¿…é¡»æ•´ä½“å‘å‰ç§»åŠ¨)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">removeEvensVer3</span><span class="params">(List&lt;Integer&gt; lst)</span> &#123;</span><br><span class="line">    Iterator&lt;Integer&gt; itr = lst.iterator();</span><br><span class="line">        <span class="keyword">while</span> (itr.hasNext()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (itr.next() % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            itr.remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> lst;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-5-listiteratoræ¥å£">3.3.5 ListIteratoræ¥å£</h3>
<p>â€ƒâ€ƒè¯¥æ¥å£åªèƒ½è¢«Listä½¿ç”¨ï¼Œå…¶æ‰©å±•äº†Iterator</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ListIterator</span>&lt;AnyType&gt; <span class="keyword">extends</span> <span class="title class_">Iteerator</span>&lt;AnyType&gt; &#123;</span><br><span class="line">    <span class="comment">// å‰å‘éå†ï¼Œ æ˜¯å¦æœ‰å‰ä¸€é¡¹</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasPrevious</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// è·å–å‰ä¸€é¡¹</span></span><br><span class="line">    AnyType <span class="title function_">previous</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ­£å‘éå†ï¼Œæ˜¯å¦æœ‰åä¸€é¡¹</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// è·å–åä¸€é¡¹</span></span><br><span class="line">    AnyType <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åœ¨å½“å‰ä½ç½®æ’å…¥ï¼Œå³nexté¡¹åç§»ä¸€ä½</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(AnyType x)</span>;</span><br><span class="line">    <span class="comment">// è®¾ç½®å½“å‰é¡¹çš„å€¼</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(AnyType newVal)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table><br></table>
<h2 id="3-4-arraylistç±»çš„å®ç°">3.4 ArrayListç±»çš„å®ç°</h2>
<p>â€ƒâ€ƒæ­¤å¤„æ‰‹åŠ¨å®ç°ä¸€ä¸ªMyArrayListï¼Œè¯¥ç±»ç‹¬ç«‹å®ç°ã€‚å°†å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å°†ä¿æŒåŸºç¡€æ•°ç»„ï¼Œæ•°ç»„çš„å®¹é‡ï¼Œå­˜å‚¨å½“å‰é¡¹æ•°</li>
<li>å°†æä¾›æ–¹æ³•æ”¹å˜æ•°ç»„çš„å®¹é‡ï¼Œ(å°†æ”¹å˜å®¹é‡åçš„æ•°ç»„æ‹·è´åˆ°æ–°æ•°ç»„)</li>
<li>æä¾›getä¸setå®ç°</li>
<li>æä¾›åŸºæœ¬çš„ä¾‹ç¨‹ï¼Œsize()ä¸isEmpty()å®ç°ï¼Œclear()å®ç°ï¼Œæä¾›remove()ï¼Œadd()</li>
<li>å®ç°Iteratoræ¥å£ï¼Œæä¾›nextï¼ŒhasNextï¼Œremoveã€‚</li>
</ol>
<h3 id="3-4-1-åŸºæœ¬ç±»">3.4.1 åŸºæœ¬ç±»</h3>
<p>â€ƒâ€ƒè¯¥ç±»ä¸æ£€æµ‹éæ³•çš„è¿­ä»£å™¨removeæ–¹æ³•ã€‚ä¼šåœ¨ä¹‹åçš„3.5èŠ‚å®ç°ã€‚</p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>åŸºæœ¬ç±»ä¸»ä»£ç å®ç°(ç‚¹å‡»å±•å¼€)</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyArrayList</span>&lt;AnyType&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;AnyType&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é»˜è®¤å®¹é‡ä¸º10</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰size</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> theSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> AnyType[] theItems;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç©ºå‚æ„é€ æ–¹æ³•ï¼Œæ¸…ç©ºæ•°ç»„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">        doClear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        doClear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¸…ç©ºæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doClear</span><span class="params">()</span> &#123;</span><br><span class="line">        theSize = <span class="number">0</span>;</span><br><span class="line">        ensureCapacity(DEFAULT_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æ•°ç»„å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> theSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ•°ç»„çš„å…ƒç´ æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ•°ç»„çš„å®¹é‡æˆªå–åˆ°å…ƒç´ ä¸ªæ•°çš„é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trimToSize</span><span class="params">()</span> &#123;</span><br><span class="line">        ensureCapacity(size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æŒ‡å®šç´¢å¼•çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">get</span><span class="params">(<span class="type">int</span> idx)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (idx &lt; <span class="number">0</span> || idx &gt;= size()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> theItems[idx];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®æŒ‡å®šä½ç½®çš„å€¼,å¹¶è¿”å›æ—§çš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">set</span><span class="params">(<span class="type">int</span> idx, AnyType newVal)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (idx &lt; <span class="number">0</span> || idx &gt;= size()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">AnyType</span> <span class="variable">old</span> <span class="operator">=</span> theItems[idx];</span><br><span class="line">        theItems[idx] = newVal;</span><br><span class="line">        <span class="keyword">return</span> old;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹æ•°ç»„çš„å®¹é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ensureCapacity</span><span class="params">(<span class="type">int</span> newCapacity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity &lt; theSize) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        AnyType[] old = theItems;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæŒ‡å®šå¤§å°çš„ç©ºæ•°ç»„ï¼Œç”¨äºå­˜æ”¾æˆªå–åçš„æ•°ç»„</span></span><br><span class="line">        theItems = (AnyType[]) <span class="keyword">new</span> <span class="title class_">Object</span>[newCapacity];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size(); i++) &#123;</span><br><span class="line">            theItems[i] = old[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æ•°ç»„ä¸­æ·»åŠ æŒ‡å®šçš„å…ƒç´ , é»˜è®¤ä¸ºå·²æœ‰çš„å…ƒç´ çš„ä¸ªæ•°æœ€å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        add(size(), x);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æ•°ç»„çš„æŒ‡å®šçš„ä½ç½®æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> idx, AnyType x)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ•°ç»„çš„é•¿åº¦ç­‰äºå…ƒç´ ä¸ªæ•°é‡ï¼Œåˆ™æ•°ç»„éœ€è¦æ‰©å®¹</span></span><br><span class="line">        <span class="keyword">if</span> (theItems.length == size()) &#123;</span><br><span class="line">            ensureCapacity(size() * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†æŒ‡å®šä½ç½®ä¸æŒ‡å®šä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ åç§»ä¸€ä½</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> theSize; i &gt; idx; i--) &#123;</span><br><span class="line">            <span class="comment">// æœ€åï¼Œidx + 1 = idxï¼Œå³å°†idxä½ç½®çš„å…ƒç´ å‘åç§»åŠ¨ä¸€ä½</span></span><br><span class="line">            theItems[i] = theItems[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®¾ç½®æŒ‡å®šä½ç½®çš„å€¼</span></span><br><span class="line">        theItems[idx] = x;</span><br><span class="line">        theSize++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">remove</span><span class="params">(<span class="type">int</span> idx)</span> &#123;</span><br><span class="line">        <span class="type">AnyType</span> <span class="variable">removeItem</span> <span class="operator">=</span> theItems[idx];</span><br><span class="line">        <span class="comment">// å°†idxå¤„çš„æ‰€æœ‰å…ƒç´ å‰ç§»ä¸€ä½</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> idx; i &lt; size() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            theItems[i] = theItems[i + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        theSize--;</span><br><span class="line">        <span class="keyword">return</span> removeItem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;AnyType&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayListIterator</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†…éƒ¨ç±»ï¼Œç”¨äºåˆ›å»ºè¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">ArrayListIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;AnyType&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> <span class="variable">current</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> current &lt; size();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> AnyType <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> theItems[current++];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">            MyArrayList.<span class="built_in">this</span>.remove(current-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
<h3 id="3-4-2-åµŒå¥—ç±»ä¸å†…éƒ¨ç±»">3.4.2 åµŒå¥—ç±»ä¸å†…éƒ¨ç±»</h3>
<p><strong>è¿­ä»£å™¨-å†…éƒ¨ç±»</strong>ï¼šå¯ä»¥ä½¿ç”¨ï¼Œæ¨èè¿™ç§(å°±æ˜¯ä¸Šé¢çš„å®ç°)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyArrayList2</span>&lt;AnyType&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;AnyType&gt; &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ•°ç»„å¤§å°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> theSize;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> AnyType[] theItems;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;AnyType&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// thisæŒ‡ä»£è¿™ä¸ªç±»</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayListIterator</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡æ–°å®šä¹‰çš„privateå†…éƒ¨ç±»ï¼Œä¸èƒ½ä½¿ç”¨æ³›å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¤–éƒ¨ç±»å‚æ•°(ä¸å†²çªçš„æƒ…å†µ)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">ArrayListIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&#123;</span><br><span class="line">        <span class="comment">// å½“å‰ç´¢å¼•ä¸‹æ ‡ä½ç½®</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> <span class="variable">current</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> current &lt; size();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> AnyType <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="comment">// æ­¤å¤„å®é™…ä¸Šæ— æ³•ä½¿ç”¨theItemsæ•°ç»„å‚æ•°ï¼Œå› ä¸ºæ­¤å†…éƒ¨ç±»æ˜¯ä¸€ä¸ªé¡¶çº§å†…éƒ¨ç±»ï¼Œè€ŒtheItemsæ˜¯å¤–éƒ¨ç±»çš„ä¸€ä¸ªç§æœ‰å‚æ•°</span></span><br><span class="line">            <span class="comment">// ç°åœ¨ä¸ºåšå‡ºä¿®æ”¹åçš„ï¼Œå¯ä»¥ä½¿ç”¨ï¼Œä¸æ˜¯é¡¶çº§å†…éƒ¨ç±»ï¼Œåœ¨å¤–éƒ¨å‚æ•°ä¸å†…éƒ¨ç±»å†²çªçš„æƒ…å†µä¸‹å¯ä»¥ç›´æ¥ä½¿ç”¨å¤–éƒ¨ç±»å‚æ•°theItems</span></span><br><span class="line">            <span class="keyword">return</span> theItems[current++];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="comment">// ä½¿ç”¨å¤–éƒ¨ç±»çš„removeæ–¹æ³•ï¼Œä¸æ­¤å†…éƒ¨ç±»çš„remove(å°±æ˜¯æ­¤æ–¹æ³•)æ–¹æ³•å†²çªï¼Œéœ€è¦æŒ‡æ˜</span></span><br><span class="line">            MyArrayList2.<span class="built_in">this</span>.remove(--current);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿­ä»£å™¨-åµŒå¥—ç±»</strong>ï¼šå°±æ˜¯æŠŠå†…éƒ¨ç±»ç”³æ˜ä¸ºé™æ€çš„ï¼ŒåŒæ—¶æŒ‡å®šæ³›å‹ï¼Œæ„é€ å‡½æ•°ä¼ å…¥å¤–éƒ¨å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ï¼Œä½†ä¸æ¨èï¼Œä½¿ç”¨ä¸Šé¢çš„ã€‚æ•…ä¸å†åˆ—å‡ºã€‚</p>
<table><br></table>
<h2 id="3-5-linkedlistå®ç°">3.5 LinkedListå®ç°</h2>
<p>â€ƒâ€ƒåŒä¸Šï¼Œæ­¤å¤„å°†æ‰‹åŠ¨å®ç°ä¸€ä¸ªLinkedList</p>
<ol>
<li>MyLinkedListç±»æœ¬èº«ï¼ŒåŒ…å«åˆ°ä¸¤ç«¯çš„é“¾ã€è¡¨çš„å¤§å°å’Œä¸€äº›æ–¹æ³•</li>
<li>Nodeç±»ï¼Œç§æœ‰åµŒå¥—(é™æ€å†…éƒ¨)ç±»ï¼Œä¸€ä¸ªNodeèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªæ•°æ®ä»¥åŠåˆ°å‰ä¸€ä¸ªèŠ‚ç‚¹é“¾å’Œåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾ï¼Œè¿˜æœ‰æ„é€ æ–¹æ³•</li>
<li>LinkedListIteratorç±»ï¼ŒæŠ½è±¡äº†ä½ç½®çš„æ¦‚å¿µï¼Œç§æœ‰ç±»ï¼Œå®ç°Iteratorï¼Œæä¾›nextæ–¹æ³•ã€hasNextå’Œremoveå®ç°</li>
</ol>
<h3 id="3-5-1-åŸºæœ¬ç±»">3.5.1 åŸºæœ¬ç±»</h3>
<p>â€ƒâ€ƒè¯¥é“¾è¡¨ä¸»è¦ç”±NodeèŠ‚ç‚¹ç»„æˆï¼Œè¿­ä»£å™¨å»éå†å®ç°ï¼Œè¿­ä»£å™¨å­˜å‚¨å½“å‰èŠ‚ç‚¹çš„å¼•ç”¨ã€‚è¯¥å®ç°çœŸå®çš„é“¾è¡¨å‰ç«¯é¢å¤–åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œç§°ä¸ºå¤´èŠ‚ç‚¹ï¼Œæœ«ç«¯ä¹Ÿé¢å¤–åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œç§°ä¸º<strong>å°¾èŠ‚ç‚¹</strong>ã€‚ä½¿ç”¨è¿™äº›èŠ‚ç‚¹çš„å¥½å¤„åœ¨äºç®€åŒ–ç¼–ç ï¼Œåˆ é™¤å¤´èŠ‚ç‚¹ä¸å°¾èŠ‚ç‚¹éƒ½ä¸å†æ˜¯ç‰¹æ®Šæƒ…å†µ(åˆ é™¤ç®—æ³•ä¹Ÿéœ€è¦è®¿é—®è¢«åˆ é™¤çš„å‰ä¸€ä¸ªèŠ‚ç‚¹)ã€‚<br>
<img src="/2021/07/11/%E8%A1%A8%E4%B8%8Ejava%E4%B8%AD%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/%E9%A2%9D%E5%A4%96%E5%A4%B4%E5%B0%BE%E8%8A%82%E7%82%B9.png" alt></p>
<div class="xControl">
    <div class="xHeading"><div class="xIcon"><i class="fa fa-plus"></i></div><span>åŸºæœ¬ç±»ä¸»ä»£ç (ç‚¹å‡»å±•å¼€)</span></div>
    <div class="xContent"><div class="inner">
        <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLinkedList</span>&lt;AnyType&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;AnyType&gt; &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨äº†åµŒå¥—ç±»Nodeï¼Œç±»æ—¶ç§æœ‰çš„ï¼Œå…¶å±æ€§æ˜¯å¦ç§æœ‰æ— å…³ç´§è¦(åªæœ‰MyLinkedListç±»èƒ½è§åˆ°è¯¥ç±»ï¼Œå…¶ä»–å¤–éƒ¨ç±»æ— æ³•è®¿é—®)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;AnyType&gt; &#123;</span><br><span class="line">        <span class="keyword">public</span> AnyType data;            <span class="comment">// èŠ‚ç‚¹å†…çš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">public</span> Node&lt;AnyType&gt; prev;      <span class="comment">// èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">public</span> Node&lt;AnyType&gt; next;      <span class="comment">// èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// æ„é€ æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼›èŠ‚ç‚¹çš„æ•°æ®ï¼ŒèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹p,èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹n</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(AnyType d, Node&lt;AnyType&gt; p, Node&lt;AnyType&gt; n)</span> &#123;</span><br><span class="line">            data = d;</span><br><span class="line">            prev = p;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é“¾è¡¨é•¿åº¦</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> theSize;</span><br><span class="line">    <span class="comment">// è‡ªä»æ„é€ ä»¥æ¥ï¼Œå¯¹é“¾è¡¨æ‰€åšæ”¹å˜æ¬¡æ•°ï¼Œå½“è°ƒç”¨è¿­ä»£å™¨LinkedListIteratorçš„æ–¹æ³•æ—¶ï¼Œ</span></span><br><span class="line">    <span class="comment">// å’Œè¿­ä»£å™¨å­˜å‚¨çš„modCountæ–¹æ³•æ¯”è¾ƒï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™æŠ¥å¹¶å‘å¼‚å¸¸ConcurrentModificationException</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// é“¾è¡¨å¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> Node&lt;AnyType&gt; beginMaker;</span><br><span class="line">    <span class="comment">// é“¾è¡¨å°¾èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> Node&lt;AnyType&gt; endMarker;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ æ–¹æ³•ï¼Œåˆ›å»ºæ—¶æ¸…é™¤ç°æœ‰é“¾è¡¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyLinkedList</span><span class="params">()</span> &#123;</span><br><span class="line">        doClear();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¾›å¤–éƒ¨è°ƒç”¨çš„clearæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        doClear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœŸæ­£çš„doClearæ–¹æ³•ï¼Œ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doClear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œç”±äºæ­¤æ—¶è¿˜æ²¡æœ‰å°¾èŠ‚ç‚¹æ•…nèŠ‚ç‚¹ä¸ºnull</span></span><br><span class="line">        beginMaker = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºå°¾èŠ‚ç‚¹ï¼Œä¸Šä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘å¤´èŠ‚ç‚¹</span></span><br><span class="line">        endMarker = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, beginMaker, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// ç°åœ¨å¯ä»¥æŒ‡å®šä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå°¾èŠ‚ç‚¹</span></span><br><span class="line">        beginMaker.next = endMarker;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–é•¿åº¦ä¸º0</span></span><br><span class="line">        theSize = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å¯¹èŠ‚ç‚¹çš„ä¿®æ”¹æ¬¡æ•°åŠ 1</span></span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> theSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é“¾è¡¨ä¸­æ·»åŠ å…ƒç´ ï¼Œä¸æŒ‡å®šä½ç½®ï¼Œé»˜è®¤ä¸ºå°¾èŠ‚ç‚¹å‰(å³æœ€å)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(AnyType x)</span> &#123;</span><br><span class="line">        <span class="comment">// æ’å…¥èŠ‚ç‚¹ä¸ºåŸsize()ï¼Œå› ä¸ºç´¢å¼•ä¸‹æ ‡ä¸º0å¼€å§‹ï¼Œæ‰€ä»¥å®é™…æœ€å¤§ä¸ºsize()-1</span></span><br><span class="line">        add(size(), x);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é“¾è¡¨ä¸­æ·»åŠ å…ƒç´ ï¼ŒæŒ‡å®šæ’å…¥ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> idx, AnyType x)</span> &#123;</span><br><span class="line">        <span class="comment">// æ’å…¥ä¸‹æ ‡ä¸ºx,åˆ™æ˜¯æ’å…¥åŸä¸‹æ ‡ä¸ºxçš„å‰é¢</span></span><br><span class="line">        addBefore(getNode(idx, <span class="number">0</span>, size()), x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è·å–æŒ‡å®šç´¢å¼•å¤„çš„å€¼data</span></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">get</span><span class="params">(<span class="type">int</span> idx)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getNode(idx).data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¾ç½®æŒ‡å®šç´¢å¼•å¤„çš„å€¼</span></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">set</span><span class="params">(<span class="type">int</span> idx, AnyType newVal)</span> &#123;</span><br><span class="line">        Node&lt;AnyType&gt; p = getNode(idx);</span><br><span class="line">        <span class="type">AnyType</span> <span class="variable">oldVal</span> <span class="operator">=</span> p.data;</span><br><span class="line">        p.data = newVal;</span><br><span class="line">        <span class="keyword">return</span> oldVal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹å¤–å…¬å¼€çš„removeæ–¹æ³•ï¼Œåªéœ€è¦ä»æŒ‡å®šåˆ é™¤å¤„çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">public</span> AnyType <span class="title function_">remove</span><span class="params">(<span class="type">int</span> idx)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> remove(getNode(idx));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨æŒ‡å®šå…ƒç´ å‰æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addBefore</span><span class="params">(Node&lt;AnyType&gt; p, AnyType x)</span> &#123;</span><br><span class="line">        Node&lt;AnyType&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(x, p.prev, p);</span><br><span class="line">        newNode.prev.next = newNode;</span><br><span class="line">        p.prev = newNode;</span><br><span class="line">        theSize++;</span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//  çœŸæ­£çš„åˆ é™¤æ–¹æ³•ï¼Œå°†pä»é“¾è¡¨æ–­å¼€</span></span><br><span class="line">    <span class="keyword">private</span> AnyType <span class="title function_">remove</span><span class="params">(Node&lt;AnyType&gt; p)</span> &#123;</span><br><span class="line">        p.next.prev = p.prev;</span><br><span class="line">        p.prev.next = p.next;</span><br><span class="line">        theSize--;</span><br><span class="line">        <span class="keyword">return</span> p.data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node&lt;AnyType&gt; <span class="title function_">getNode</span><span class="params">(<span class="type">int</span> idx)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getNode(idx, <span class="number">0</span>, size() -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è·å–æŒ‡å®šç´¢å¼•å¤„çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> Node&lt;AnyType&gt; <span class="title function_">getNode</span><span class="params">(<span class="type">int</span> idx, <span class="type">int</span> lower, <span class="type">int</span> upper)</span> &#123;</span><br><span class="line">        Node&lt;AnyType&gt; p;</span><br><span class="line">        <span class="keyword">if</span> (idx &lt; lower || idx &gt; upper) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœèŠ‚ç‚¹åœ¨å‰åŠéƒ¨åˆ†ï¼Œä»å‰é¢éå†</span></span><br><span class="line">        <span class="keyword">if</span> (idx &lt; size() / <span class="number">2</span>) &#123;</span><br><span class="line">            p = beginMaker.next;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; idx; i++) &#123;</span><br><span class="line">                p = p.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœèŠ‚ç‚¹åœ¨ååŠéƒ¨åˆ†ï¼Œä»å‰é¢éå†</span></span><br><span class="line">            p = endMarker;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size(); i &gt; idx; i--) &#123;</span><br><span class="line">                p = p.prev;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;AnyType&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LinkedListIterator</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">LinkedListIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;AnyType&gt; &#123;</span><br><span class="line">        <span class="comment">// å°†currentèŠ‚ç‚¹åˆå§‹åŒ–ä¸ºå¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">private</span> MyLinkedList.Node&lt;AnyType&gt; current = beginMaker.next;</span><br><span class="line">        <span class="comment">// ä½¿æœŸæœ›çš„ä¿®æ”¹æ¬¡æ•°=å¤–éƒ¨ç±»çš„ä¿®æ”¹æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line">        <span class="comment">// æ˜¯å¦å¯ä»¥remove</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">okToRemove</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> current != endMarker;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> AnyType <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">AnyType</span> <span class="variable">nextItem</span> <span class="operator">=</span> current.data;</span><br><span class="line">            current = current.next;</span><br><span class="line">            okToRemove = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> nextItem;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!okToRemove) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// çœŸæ­£çš„remove,ä¸æ”¹å˜currentt(ArrayListéœ€è¦æ›´æ”¹)</span></span><br><span class="line">            MyLinkedList.<span class="built_in">this</span>.remove(current.prev);</span><br><span class="line">            expectedModCount++;</span><br><span class="line">            okToRemove = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
    </div></div>
    </div>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸç -åç -è¡¥ç </title>
    <url>/2021/06/06/%E5%8E%9F%E7%A0%81-%E5%8F%8D%E7%A0%81-%E8%A1%A5%E7%A0%81/</url>
    <content><![CDATA[<p>é—®é¢˜ï¼šbyteç±»å‹çš„127åŠ ä¸Š1ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯-128</p>
<span id="more"></span>
<h3 id="ä¸€-åŸç ">ä¸€ã€åŸç </h3>
<p>â€ƒâ€ƒè®¡ç®—æœºåªèƒ½å­˜å‚¨ã€è®¡ç®—äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸€ä¸ªbyteæœ‰8ä¸ªå­—èŠ‚ã€‚é‚£è¦è®¡ç®—ä¸¤ä¸ªåè¿›åˆ¶çš„æ•°æ®ï¼Œéœ€è¦å…ˆå°†åè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®ã€‚<br>
ä¾‹åè¿›åˆ¶ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">7+1=8
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span></span></p>
<p>è½¬æ¢ä¸ºäºŒè¿›åˆ¶è®¡ç®—ï¼š8å­—èŠ‚ï¼Œé«˜ä½è¡¥0</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>00000111</mn><mo>+</mo><mn>00000001</mn><mo>=</mo><mn>00001000</mn></mrow><annotation encoding="application/x-tex">0000 0111 + 0000 0001 = 0000 1000
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></span></p>
<p>â€ƒâ€ƒå¯¹äºæ­£æ•°çš„è®¡ç®—ï¼Œè¿™ä¸ªæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºè´Ÿæ•°å¦‚ä½•è¡¨ç¤ºï¼Ÿå†å»ç»´æŠ¤ä¸€ä¸ªç¬¦å·ç”¨äºè¡¨ç¤ºè´Ÿæ•°çš„ä»£ä»·è¿‡äºé«˜æ˜‚ï¼Œäºæ˜¯é‡‡ç”¨äº†åœ¨8å­—èŠ‚çš„æœ€é«˜ä½è¡¨ç¤ºä¸º1ç”¨äºè¡¨ç¤ºè´Ÿæ•°ï¼Œåªç”¨7ä½è¡¨ç¤ºè®¡æ•°ã€‚äºæ˜¯ -1 è¡¨ç¤ºä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000001</mn></mrow><annotation encoding="application/x-tex">1000 0001</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span></span></span></span>ã€‚å¯¹äºæ­£æ•°ï¼Œä¸éœ€è¦é¢å¤–çš„å¤„ç†ï¼Œåç å°±æ˜¯æºç æœ¬èº«ã€‚<br>
ä¾‹åè¿›åˆ¶ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>âˆ’</mo><mn>2</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">2-2=0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p>
<p>åç çš„å‡ºç°ä¸ä»…è¡¨ç¤ºäº†è´Ÿæ•°ï¼Œè€Œä¸”è¿˜æŠŠå‡æ³•å¯ä»¥è¡¨ç¤ºä¸ºåŠ ä¸Šä¸€ä¸ªè´Ÿæ•°ï¼Œä»è€Œä¸å†éœ€è¦è®¾è®¡å‡æ³•è®¡æ•°å™¨ç”µè·¯ã€‚ä½†æ˜¯è®¡ç®—ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>00000010</mn><mo>+</mo><mn>10000010</mn><mo>=</mo><mn>10000100</mn></mrow><annotation encoding="application/x-tex">0000 0010 + 1000 0010 = 1000 0100
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span></span></p>
<p>è½¬æ¢ä¸ºäºŒè¿›åˆ¶å¯çŸ¥ï¼Œè®¡ç®—çš„ç»“æœä¸º-4ï¼Œè®¡ç®—å‡ºç°äº†é—®é¢˜ã€‚</p>
<h3 id="äºŒ-åç ">äºŒã€åç </h3>
<p>â€ƒâ€ƒä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‡ºç°äº†åç ã€‚åŒæ ·ï¼Œ<span style="color:red">æ­£æ•°çš„åç æ˜¯å…¶æœ¬èº«</span>ï¼›å¯¹äºè´Ÿæ•°ï¼Œå°±æ˜¯æœ€é«˜ä½çš„ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½ç½®å–åï¼Œä¾‹å¦‚-2â€‹äºŒè¿›åˆ¶æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000010</mn></mrow><annotation encoding="application/x-tex">1000 0010</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span></span></span></span>ï¼Œåˆ™å…¶åç ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>11111101</mn></mrow><annotation encoding="application/x-tex">1111 1101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span></span></span></span>ï¼Œ<br>
ä¾‹åè¿›åˆ¶ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>âˆ’</mo><mn>2</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">2-2=0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p>
<p>åˆ™äºŒè¿›åˆ¶ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>0</mn><mtext>åŸç </mtext></msub><mo>+</mo><mn>1000001</mn><msub><mn>0</mn><mtext>åŸç </mtext></msub><mspace width="1em"></mspace></mrow><annotation encoding="application/x-tex">0000 0010_{åŸç  } + 1000 0010_{åŸç  } \quad 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>0</mn><mtext>åç </mtext></msub><mo>+</mo><mn>1111110</mn><msub><mn>1</mn><mtext>åç </mtext></msub><mo>=</mo><mn>1111111</mn><msub><mn>1</mn><mtext>åç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0010_{åç  } + 1111 1101_{åç  } = 1111 1111_{åç  } 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">å</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">å</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">å</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>å…ˆè½¬æ¢ä¸ºåç ï¼Œå†è®¡ç®—ï¼Œå¾—åˆ°çš„æ˜¯åç çš„ç»“æœï¼Œä½†æ˜¯è¦å¾—åˆ°çœŸæ­£çš„ç»“æœï¼Œè¿˜éœ€è¦å†è½¬ä¸ºåŸç ã€‚</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1111111</mn><msub><mn>1</mn><mtext>åç </mtext></msub><mo>âˆ’</mo><mo>âˆ’</mo><mo>&gt;</mo><mn>10000000</mn><mtext>åŸç </mtext></mrow><annotation encoding="application/x-tex">1111 1111_{åç  } --&gt; 1000 0000{åŸç  } 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">å</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord"><span class="mord cjk_fallback">åŸ</span><span class="mord cjk_fallback">ç </span></span></span></span></span></span></p>
<p>ç»“æœä¸º-0ï¼Œå¯è§ï¼Œç»“æœæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å‡ºç°-0çš„ç»“æœéœ€è¦å¤„ç†ã€‚</p>
<h3 id="ä¸‰-è¡¥ç ">ä¸‰ã€è¡¥ç </h3>
<p>â€ƒâ€ƒåŒæ ·ï¼Œä¸ºäº†è§£å†³å‡ºç°-0çš„æƒ…å†µï¼Œå‡ºç°äº†è¡¥ç ã€‚åŒæ ·,<span style="color:red">æ­£æ•°çš„è¡¥ç æ˜¯å…¶æœ¬èº«</span>ï¼›å¯¹äºè´Ÿæ•°ï¼Œè´Ÿæ•°çš„è¡¥ç æ˜¯å…¶åç +1ã€‚ä¾‹å¦‚ï¼Œ-2çš„äºŒè¿›åˆ¶æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000010</mn></mrow><annotation encoding="application/x-tex">1000 0010</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span></span></span></span>ï¼Œåˆ™å…¶åç ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>11111101</mn></mrow><annotation encoding="application/x-tex">1111 1101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span></span></span></span>ï¼Œåˆ™å…¶è¡¥ç ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>11111110</mn></mrow><annotation encoding="application/x-tex">1111 1110</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span></span></span></span>ã€‚<br>
ä¾‹åè¿›åˆ¶ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>âˆ’</mo><mn>2</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">2-2=0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p>
<p>åˆ™äºŒè¿›åˆ¶ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>0</mn><mtext>åŸç </mtext></msub><mo>+</mo><mn>1000001</mn><msub><mn>0</mn><mtext>åŸç </mtext></msub><mspace width="1em"></mspace></mrow><annotation encoding="application/x-tex">0000 0010_{åŸç  } + 1000 0010_{åŸç  } \quad 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>0</mn><mtext>åç </mtext></msub><mo>+</mo><mn>1111110</mn><msub><mn>1</mn><mtext>åç </mtext></msub><mo>=</mo><mn>1111111</mn><msub><mn>1</mn><mtext>åç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0010_{åç  } + 1111 1101_{åç  } = 1111 1111_{åç  } 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">å</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">å</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">å</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub><mo>+</mo><mn>1111111</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub><mo>=</mo><mn>0000000</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0010_{è¡¥ç  } + 1111 1110_{è¡¥ç  } = 0000 0000_{è¡¥ç  } 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>è®¡ç®—åè¿›åˆ¶ç»“æœï¼šç”±äºæœ€é«˜ä½æ˜¯0ï¼Œåˆ™è¡¨ç¤ºæ­£æ•°ï¼Œè¡¥ç æ˜¯åŸç æœ¬èº«ï¼Œæ‰€ä»¥åŸç ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>00000000</mn></mrow><annotation encoding="application/x-tex">0000 0000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>ï¼Œç»“æœä¸º0</p>
<h3 id="å››-å·²çŸ¥è¡¥ç æ±‚åŸç ">å››ã€å·²çŸ¥è¡¥ç æ±‚åŸç </h3>
<blockquote>
<p>å·²çŸ¥æŸè¡¥ç ä¸º 1111 1110ï¼Œæ±‚åŸç </p>
</blockquote>
<p>1.æ­£æ•°ï¼š<br>
â€ƒâ€ƒå¦‚æœä»¥0å¼€å¤´ï¼Œåˆ™è¯æ˜å…¶ä¸ºæ­£æ•°ï¼ŒåŸç å°±æ˜¯è¡¥ç æœ¬èº«ï¼Œå¦‚ 0000 0010çš„è¡¥ç å°±æ˜¯æœ¬èº«<br>
2.è´Ÿæ•°ï¼š<br>
â€ƒâ€ƒå¦‚æœä»¥1å¼€å¤´ï¼Œåˆ™è¯æ˜ä¸ºè´Ÿæ•°ï¼Œå…ˆ å°†æœ€é«˜ä½ä¸å˜ï¼Œå…¶ä½™7ä½å–åã€‚</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1111111</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub><mo>âˆ’</mo><mo>âˆ’</mo><mo>&gt;</mo><mtext>å–å</mtext><mn>10000001</mn></mrow><annotation encoding="application/x-tex">1111 1110_{è¡¥ç  } --&gt;å–å  1000 0001 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">å–</span><span class="mord cjk_fallback">å</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span></span></span></span></span></p>
<p>â€ƒâ€ƒå†+1ï¼Œå³å¯å¾—åˆ°åŸç (-2)ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000001</mn><mo>+</mo><mn>00000001</mn><mo>=</mo><mn>1000001</mn><msub><mn>0</mn><mtext>åŸç </mtext></msub></mrow><annotation encoding="application/x-tex">1000 0001 + 0000 0001 = 1000 0010_{åŸç }
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<h3 id="äº”-æ™®é€šç»“æœéªŒè¯">äº”ã€æ™®é€šç»“æœéªŒè¯</h3>
<blockquote>
<p>5-3ä¸3-5</p>
</blockquote>
<h4 id="1-è¿ç®—1ï¼š">1.è¿ç®—1ï¼š</h4>
<p>5+ (-3)  (çœç•¥äº†åç çš„è®¡ç®—æ­¥éª¤)</p>
<ol>
<li>åŸç ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000010</mn><msub><mn>1</mn><mtext>åŸç </mtext></msub><mo>+</mo><mn>1000001</mn><msub><mn>1</mn><mtext>åŸç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0101_{åŸç } + 1000 0011_{åŸç }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>è¡¥ç ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000010</mn><msub><mn>1</mn><mtext>è¡¥ç </mtext></msub><mo>+</mo><mn>1111110</mn><msub><mn>1</mn><mtext>è¡¥ç </mtext></msub><mo>=</mo><mn>0000001</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0101_{è¡¥ç } + 1111 1101_{è¡¥ç } = 0000 0010_{è¡¥ç }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>ç»“æœï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0010_{è¡¥ç }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯æ­£æ•°ï¼ŒåŸç ä¸ºæœ¬èº«ï¼Œæ‰€ä»¥åè¿›åˆ¶ä¸º2.</li>
</ol>
<h4 id="2-è¿ç®—2ï¼š">2.è¿ç®—2ï¼š</h4>
<p>3+(-5)  (çœç•¥äº†åç çš„è®¡ç®—æ­¥éª¤)</p>
<ol>
<li>åŸç ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>1</mn><mtext>åŸç </mtext></msub><mo>+</mo><mn>1000010</mn><msub><mn>1</mn><mtext>åŸç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0011_{åŸç } + 1000 0101_{åŸç }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">åŸ</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>è¡¥ç ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0000001</mn><msub><mn>1</mn><mtext>è¡¥ç </mtext></msub><mo>+</mo><mn>1111101</mn><msub><mn>1</mn><mtext>è¡¥ç </mtext></msub><mo>=</mo><mn>1111111</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub></mrow><annotation encoding="application/x-tex">0000 0011_{è¡¥ç } + 1111 1011_{è¡¥ç } = 1111 1110_{è¡¥ç }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>ç»“æœï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1111111</mn><msub><mn>0</mn><mtext>è¡¥ç </mtext></msub></mrow><annotation encoding="application/x-tex">1111 1110_{è¡¥ç }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">è¡¥</span><span class="mord cjk_fallback mtight">ç </span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯è´Ÿæ•°ï¼ŒåŸç ä¸ºæœ€é«˜ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åå†åŠ 1ï¼Œåˆ™ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000010</mn></mrow><annotation encoding="application/x-tex">1000 0010</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span></span></span></span>ï¼Œç»“æœä¸º-2ã€‚</li>
</ol>
<h3 id="å…­-128é—®é¢˜">å…­ã€-128é—®é¢˜</h3>
<blockquote>
<p>byteç±»å‹127+1 = -128</p>
</blockquote>
<ol>
<li>åŸç ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>01111111</mn><mo>+</mo><mn>00000001</mn></mrow><annotation encoding="application/x-tex">0111 1111 + 0000 0001</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span></span></span></span></li>
<li>è¡¥ç ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>01111111</mn><mo>+</mo><mn>00000001</mn><mo>=</mo><mn>10000000</mn></mrow><annotation encoding="application/x-tex">0111 1111 + 0000 0001 = 1000 0000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></li>
<li>ç»“æœï¼š-128æ²¡æœ‰åŸç ä¸åç ï¼Œåªæœ‰è¡¥ç ï¼ŒæŒ‰ç…§çº¦å®šï¼Œè¡¥ç ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000000</mn></mrow><annotation encoding="application/x-tex">1000 0000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>åˆ™ä¸º-128ã€‚</li>
</ol>
<h3 id="ä¸ƒ-å»¶ç”³ï¼š">ä¸ƒã€å»¶ç”³ï¼š</h3>
<p>â€ƒâ€ƒå®é™…ä¸Šï¼Œç°ä»£è®¡ç®—æœºä¸­çš„é€»è¾‘è®¡ç®—ç”µè·¯ï¼Œéƒ½æ˜¯æŒ‰ç…§è¡¥ç æ¥è¿›è¡Œå­˜å‚¨çš„ã€‚æ‰€ä»¥å®é™…çš„è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œç›´æ¥ä½¿ç”¨è¡¥ç ã€‚</p>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°å­¦åŸºç¡€ä¸è¦åˆ†æçš„é—®é¢˜</title>
    <url>/2021/04/05/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80%E4%B8%8E%E8%A6%81%E5%88%86%E6%9E%90%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬ä¸€ç« 2.1~2.3èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="1-æ•°å­¦åŸºç¡€">1. æ•°å­¦åŸºç¡€</h2>
<h3 id="1-1-å®šä¹‰">1.1 å®šä¹‰</h3>
<p>1 å®šä¹‰ï¼šå¦‚æœå­˜åœ¨æ­£å¸¸æ•°cå’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">n_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä½¿å¾—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>â‰¥</mo><msub><mi>n</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">N \ge n_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>â‰¤</mo><mi>c</mi><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) \le cf(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œåˆ™è®°ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=O(f(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ã€‚<br>
â€ƒâ€ƒé‡Šä¹‰ï¼šT(N)çš„å¢é•¿ç‡å°äºæˆ–ç­‰äºf(N)ã€‚</p>
<p>2 å®šä¹‰ï¼šå¦‚æœå­˜åœ¨æ­£å¸¸æ•°cå’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">n_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,ä½¿å¾—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>â‰¥</mo><msub><mi>n</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">N \ge n_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>â‰¥</mo><mi>c</mi><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) \ge cf(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œåˆ™è®°ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î©</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=\Omega(g(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î©</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ã€‚<br>
â€ƒâ€ƒé‡Šä¹‰ï¼šT(N)çš„å¢é•¿ç‡å¤§äºæˆ–ç­‰äºg(N)ã€‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span></span></span></span> è¯»ä½œ&quot;omega&quot;ã€‚</p>
<p>3 å®šä¹‰ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)= \Theta(h(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>å½“ä¸”ä»…å½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=O(h(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î©</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) = \Omega(h(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î©</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ï¼Œ<br>
â€ƒâ€ƒé‡Šä¹‰ï¼šT(N)çš„å¢é•¿ç‡ç­‰äºh(N)ã€‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span></span></span></span> è¯»ä½œ&quot;omega&quot;ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î˜</mi></mrow><annotation encoding="application/x-tex">\Theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î˜</span></span></span></span> è¯»ä½œ&quot;Theta&quot;ã€‚</p>
<p>4 å®šä¹‰ï¼šå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) = O(p(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ä¸”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo mathvariant="normal">â‰ </mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) \ne \Theta(p(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel">î€ </span></span><span class="fix"></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ï¼Œåˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>o</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) = o(p(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">o</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ã€‚<br>
â€ƒâ€ƒé‡Šä¹‰ï¼šT(N)çš„å¢é•¿ç‡å°äºp(N)ã€‚ è¯»ä½œ&quot;å°o&quot;ã€‚ä¸åŒäºå¤§Oï¼Œå¤§OåŒ…å«<strong>å¢é•¿ç‡ç›¸åŒ</strong>çš„å¯èƒ½æ€§ã€‚</p>
<h3 id="1-2-æ³•åˆ™">1.2 æ³•åˆ™</h3>
<p><strong>æ³•åˆ™1</strong>ï¼šå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_1(N) = O(f(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ä¸”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_2(N)=O(g(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>,é‚£ä¹ˆï¼š</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>T</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>+</mo><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_1(N) + T_2(N) = O(f(N) + g(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>âˆ—</mo><msub><mi>T</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_1(N) * T_2(N) = O(f(N) * g(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li>
</ul>
<p><strong>æ³•åˆ™2</strong>ï¼šå¦‚æœT(N)æ˜¯ä¸€ä¸ªkæ¬¡å¤šé¡¹å¼ï¼Œåˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>Î¸</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mi>k</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=\theta(N^k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> (T(N)çš„å¢é•¿ç‡ä¸<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">N^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span></span></span></span></span></span></span></span>ç›¸åŒ)</p>
<p><strong>æ³•åˆ™3</strong>ï¼šå¯¹ä»»æ„å¸¸æ•°kï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msup><mi>g</mi><mi>k</mi></msup><mi>N</mi><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">log^kN=O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬å¯¹æ•°çš„å¢é•¿éå¸¸ç¼“æ…¢ã€‚(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msup><mi>g</mi><mi>k</mi></msup><mi>N</mi></mrow><annotation encoding="application/x-tex">log^kN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> å¯¹æ•°çš„kæ¬¡æ–¹)</p>
<h3 id="1-3-å¤§oè¡¨ç¤ºæ³•">1.3 å¤§Oè¡¨ç¤ºæ³•</h3>
<blockquote>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=Of(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<p>ä¾‹å¦‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œ(Nå¹³æ–¹çº§)ï¼Œäººä»¬ä¸è¯´&quot;â€¦çº§çš„&quot;ï¼Œè€Œè¯´&quot;å¤§Oâ€¦&quot;</p>
<ol>
<li>ä¸Šç•Œï¼šå½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=Of(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>æ—¶ï¼Œä¿è¯å‡½æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>çš„å¢é€Ÿä¸å¿«äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œå› æ­¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>çš„ä¸€ä¸ªä¸Šç•Œã€‚</li>
<li>ä¸‹ç•Œï¼šåŒä¸Šï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>çš„ä¸€ä¸ªä¸‹ç•Œã€‚</li>
</ol>
<p>å¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>æˆç«‹ï¼Œåˆ™æ˜¾ç„¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æˆç«‹ï¼Œä½†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>æœ€ä½³ã€‚</p>
<p>åœ¨è¡¨ç¤ºå¤§Oæ—¶ï¼Œä½é˜¶é¡¹ä¸€èˆ¬å¯ä»¥å¿½ç•¥ï¼Œå¸¸æ•°é¡¹ä¹Ÿå¯ä»¥å¼ƒæ‰ã€‚</p>
<p>â€ƒâ€ƒä¾‹å¦‚ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>N</mi><mi mathvariant="normal">/</mi><mn>1.5</mn><mo>+</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">T(N) = N/1.5 + 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord">1</span><span class="mord">.</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¿æ€§å‡½æ•°ï¼Œç³»æ•°ä¸å¸¸æ•°é¡¹å¯ä»¥çœç•¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)=O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œ</p>
<h3 id="1-4-å¢é•¿ç‡çš„æ¯”è¾ƒ">1.4 å¢é•¿ç‡çš„æ¯”è¾ƒ</h3>
<p>é€šè¿‡è®¡ç®—æé™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>N</mi><mo>â†’</mo><mi mathvariant="normal">âˆ</mi></mrow></msub><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">lim_{N \rightarrow \infty} (f(N)/g(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mrel mtight">â†’</span><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>æ¥ç¡®å®šä¸¤ä¸ªå‡½æ•°f(N)ä¸g(N)çš„ç›¸å¯¹å¢é•¿ç‡ï¼Œå¿…è¦æ—¶å¯ä½¿ç”¨<strong>æ´›å¿…è¾¾æ³•åˆ™</strong></p>
<ul>
<li>æé™æ˜¯0ï¼šæ„å‘³ç€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(N) = O(g(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>ã€‚</li>
<li>æé™æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo stretchy="false">(</mo><mtext>å¸¸æ•°</mtext><mo stretchy="false">)</mo><mo mathvariant="normal">â‰ </mo><mn>0</mn></mrow><annotation encoding="application/x-tex">c(å¸¸æ•°)\ne0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mopen">(</span><span class="mord cjk_fallback">å¸¸</span><span class="mord cjk_fallback">æ•°</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel">î€ </span></span><span class="fix"></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>ï¼Œæ„å‘³ç€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(N) = \Theta(g(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li>
<li>æé™æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">âˆ</span></span></span></span>ï¼šæ„å‘³ç€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g(N)=O(f(N))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></li>
<li>æé™æ‘†åŠ¨ï¼šäºŒè€…æ— å…³(æœ¬ä¹¦ä¸­ä¸ä¼šå‡ºç°)</li>
</ul>
<p>æ´›å¿…è¾¾æ³•åˆ™ï¼šè‹¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>N</mi><mo>â†’</mo><mi mathvariant="normal">âˆ</mi></mrow></msub><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">lim_{N \rightarrow \infty} f(N) = \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mrel mtight">â†’</span><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">âˆ</span></span></span></span>ä¸”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>N</mi><mo>â†’</mo><mi mathvariant="normal">âˆ</mi></mrow></msub><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">lim_{N \rightarrow \infty} g(N)= \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mrel mtight">â†’</span><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">âˆ</span></span></span></span>ï¼Œåˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>N</mi><mo>â†’</mo><mi mathvariant="normal">âˆ</mi></mrow></msub><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>l</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>N</mi><mo>â†’</mo><mi mathvariant="normal">âˆ</mi></mrow></msub><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><msup><mi>g</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">lim_{N \rightarrow \infty} f(N)/g(N) = lim_{N \rightarrow \infty} f&#x27;(N)/g&#x27;(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mrel mtight">â†’</span><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mrel mtight">â†’</span><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ã€‚</p>
<table><br></table>
<h2 id="2-è¦åˆ†æçš„é—®é¢˜">2. è¦åˆ†æçš„é—®é¢˜</h2>
<blockquote>
<p>è¿è¡Œæ—¶é—´ï¼Œä¸€èˆ¬åˆ†ææœ€åçš„æƒ…å†µã€‚</p>
<p>è¿è¡Œç©ºé—´ï¼šç°ä»£è®¡ç®—æœºè€Œè¨€ï¼Œç©ºé—´ä¸€èˆ¬å¯ä»¥ä¸è€ƒè™‘</p>
</blockquote>
<h2 id="3-è¿è¡Œæ—¶é—´è®¡ç®—">3. è¿è¡Œæ—¶é—´è®¡ç®—</h2>
<blockquote>
<p>è®¡ç®—å¤§Oçš„è¿è¡Œæ—¶é—´ï¼Œå¤§Oæ˜¯ä¸€ä¸ªä¸Šç•Œã€‚åˆ†æçš„ç»“æœä¸ºç¨‹åºåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…èƒ½å¤Ÿç»ˆæ­¢è¿è¡Œæä¾›äº†ä¿è¯ã€‚ç¨‹åºå¯èƒ½æå‰ç»“æŸï¼Œä½†ç»ä¸å¯èƒ½é”™åã€‚</p>
</blockquote>
<h3 id="3-2-ä¸€èˆ¬æ³•åˆ™">3.2 ä¸€èˆ¬æ³•åˆ™</h3>
<p><strong>æ³•åˆ™1</strong>ï¼šforå¾ªç¯<br>
â€ƒâ€ƒä¸€ä¸ªforå¾ªç¯çš„çš„è¿è¡Œæ—¶é—´è‡³å¤šæ˜¯è¯¥forå¾ªç¯å†…éƒ¨è¯­å¥çš„è¿è¡Œæ—¶é—´ä¹˜ä»¥è¿­ä»£æ¬¡æ•°ã€‚</p>
<p><strong>æ³•åˆ™2</strong>ï¼šåµŒå¥—forå¾ªç¯<br>
â€ƒâ€ƒä¸€ç»„åµŒå¥—forå¾ªç¯å†…éƒ¨çš„ä¸€æ¡è¯­å¥è¿è¡Œçš„æ€»æ—¶é—´ï¼Œä¸ºè¯¥è¯­å¥è¿è¡Œæ—¶é—´ä¹˜ä»¥è¯¥ç»„æ‰€æœ‰forå¾ªç¯çš„å¤§å°çš„ä¹˜ç§¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;n ;j++;) &#123;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒå¦‚ä¸Šï¼šæ¯ä¸€ä¸ªforå¾ªç¯çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œä¸¤ä¸ªåµŒå¥—åˆ™ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p>
<p><strong>æ³•åˆ™3</strong>ï¼šé¡ºåºè¯­å¥<br>
â€ƒâ€ƒå°†å„ä¸ªè¯­å¥çš„è¿è¡Œæ—¶é—´æ±‚å’Œå³å¯ã€‚å…¶ä¸­æœ€å¤§å€¼å°±æ˜¯æ‰€å¾—çš„è¿è¡Œæ—¶é—´ã€‚å¦‚ä¸‹ç¨‹åºï¼Œé¦–å…ˆæ˜¯èŠ±è´¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ï¼Œæ¥ç€æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå› æ­¤æ€»é‡ä¹Ÿæ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">    a[i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;n; j++) &#123;</span><br><span class="line">        a[i] += a[j] + i + j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³•åˆ™4</strong>ï¼šif/elseè¯­å¥<br>
â€ƒâ€ƒä¸€ä¸ªif/elseè¯­å¥çš„è¿è¡Œæ—¶é—´ä»ä¸è¶…è¿‡åˆ¤æ–­çš„è¿è¡Œæ—¶é—´å†åŠ ä¸ŠS1å’ŒS2ä¸­è¿è¡Œæ—¶é—´é•¿è€…çš„æ€»è¿è¡Œæ—¶é—´ã€‚</p>
<h3 id="3-3-å…¶ä»–æƒ…å½¢">3.3 å…¶ä»–æƒ…å½¢</h3>
<p>â€ƒâ€ƒæ˜¾ç„¶ï¼Œåˆ†æçš„ç­–ç•¥æ˜¯ä»å†…éƒ¨å‘å¤–å¼€å±•ï¼Œå¦‚æœæœ‰æ–¹æ³•è°ƒç”¨ï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦åˆ†æè¿™äº›æ–¹æ³•è°ƒç”¨ã€‚å¦‚æœæœ‰é€’å½’è¿‡ç¨‹ï¼Œæœ‰ä»¥ä¸‹å‡ ç§å¯èƒ½ã€‚</p>
<ol>
<li>å®é™…æ˜¯forå¾ªç¯çš„é€’å½’ï¼šå¦‚ä¸‹ï¼Œåˆ†æå¾ˆç®€å•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªO(N)çš„å¤æ‚åº¦ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">factorial</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n * factorial(n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æ™®é€šæ­£å¸¸çš„é€’å½’ï¼šå®é™…ä¸Šæ­£å¸¸ä½¿ç”¨çš„é€’å½’ï¼Œè½¬æ¢æˆä¸€ä¸ªå¾ªç¯ç»“æ„æ˜¯éå¸¸å›°éš¾çš„ã€‚å¦‚ä¸‹ç¨‹åºï¼Œå®ƒé€’å½’çš„ä½¿ç”¨æ•ˆç‡éå¸¸ä½ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">fib</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fib(n-<span class="number">1</span>) + fib(n-<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒè¯¥ç¨‹åºçš„æ•ˆç‡å®é™…ä¸Šéå¸¸ä½ã€‚ä»¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ä¸ºè°ƒç”¨å‡½æ•°fib(n)çš„è¿è¡Œæ—¶é—´ã€‚ <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) = fib(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></strong><br>
åˆ†æï¼š</p>
<ol>
<li>
<p>å¦‚æœN=0æˆ–N=1ï¼Œåˆ™åœ¨ç¬¬2è¡Œå³å¯æ‰§è¡Œå®Œæ¯•ï¼Œåˆ™å¯ä»¥è¯´<strong>T(0)=T(1) =1</strong>ã€‚</p>
</li>
<li>
<p>è‹¥N&gt;2ï¼Œåˆ™æ‰§è¡Œè¯¥æ–¹æ³•çš„æ—¶é—´æ˜¯ç¬¬2è¡Œçš„å¸¸æ•°å·¥ä½œåŠ ä¸Šç¬¬5è¡Œçš„å·¥ä½œï¼Œç¬¬5è¡Œç”±ä¸€æ¬¡åŠ æ³•å’Œä¸¤æ¬¡æ–¹æ³•è°ƒç”¨ç»„æˆã€‚</p>
</li>
<li>
<p>æ–¹æ³•è°ƒç”¨å¿…é¡»ä½¿ç”¨ä»–ä»¬è‡ªå·±æ¥åˆ†æä»–ä»¬ï¼Œç¬¬ä¸€æ¬¡æ–¹æ³•è°ƒç”¨æ˜¯fib(n-1),æŒ‰ç…§Tçš„å®šä¹‰(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) = fib(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>)ï¼Œå®ƒéœ€è¦T(N-1)ä¸ªæ—¶é—´å•å…ƒã€‚ç±»ä¼¼ï¼Œç¬¬äºŒæ¬¡æ–¹æ³•è°ƒç”¨éœ€è¦T(N-2)ä¸ªæ—¶é—´å•å…ƒã€‚</p>
</li>
<li>
<p>æ­¤æ—¶æ€»çš„æ—¶é—´éœ€æ±‚ä¸ºT(N-1) + T(N-2) + 2ï¼Œå…¶ä¸­2æŒ‡ç¬¬äºŒè¡Œçš„å·¥ä½œåŠ ä¸Šç¬¬äº”è¡Œçš„åŠ æ³•ï¼Œäºæ˜¯å¯¹äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>â‰¥</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">N \ge  2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>ï¼Œæœ‰ä¸‹åˆ—è¿è¡Œæ—¶é—´å…¬å¼ã€‚</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">T(N) = T(N-1) + T(N-2) + 2
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></span></p>
<p>ä½†æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">fib(N) = fib(N-1) + fib(N-2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span> (ç”±ç¨‹åºçš„é€’å½’æ¡ä»¶å¯ä»¥ç¡®å®š)ï¼Œå› æ­¤ç”±å½’çº³æ³•å®¹æ˜“è¯æ˜ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>â‰¥</mo><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(N) \ge fib(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> ã€‚åœ¨1.2.5èŠ‚è¯æ˜è¿‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">fib(N) &lt; (5/3)^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span> (æ–æ³¢é‚£å¥‘æ•°åˆ—)ï¼Œç±»ä¼¼,å¯ä»¥è¯æ˜<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>â‰¥</mo><mo stretchy="false">(</mo><mn>3</mn><mi mathvariant="normal">/</mi><mn>2</mn><msup><mo stretchy="false">)</mo><mi>N</mi></msup><mspace width="1em"><mi>N</mi><mo>&gt;</mo><mn>4</mn></mspace></mrow><annotation encoding="application/x-tex">fib(N) \ge (3/2)^N \quad N&gt;4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mord">/</span><span class="mord">2</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>ï¼›ä»è€Œè¯æ˜è¿™ä¸ªçš„è¿è¡Œæ—¶é—´ä»¥æŒ‡æ•°é€Ÿåº¦å¢é•¿ã€‚</p>
<p>è¯¥é€’å½’è€—æ—¶é•¿çš„åŸå› æ˜¯è¿èƒŒäº†é€’å½’çš„ç¬¬å››æ¡ä¸»è¦è§„åˆ™<strong>åˆæˆæ•ˆç›Šæ³•åˆ™</strong>ã€‚å› ä¸ºåœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">fib(n) = fib(n-1) + fib(n-2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span>å·²ç»è®¡ç®—ä¸€æ¬¡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">fib(n-2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span>äº†ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">fib(n-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>åˆè¦è®¡ç®—ä¸€æ¬¡ã€‚è¿èƒŒäº†æ ¼è¨€&quot;è®¡ç®—ä»»ä½•äº‹æƒ…ä¸è¦è¶…è¿‡ä¸€æ¬¡&quot;ã€‚</p>
</li>
</ol>
<h3 id="3-4-æœ€å¤§å­åºåˆ—å’Œé—®é¢˜çš„æ±‚è§£">3.4 æœ€å¤§å­åºåˆ—å’Œé—®é¢˜çš„æ±‚è§£ã€</h3>
<blockquote>
<p>å­åºåˆ—ä¹‹å’Œï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œä¾‹å¦‚[-1,-2,5-3,8,-1]ï¼Œåˆ™æœ€å¤§å­åºåˆ—ä¹‹å’Œä¸º10 ï¼š5+(-3)+8<br>
å­åºåˆ—ï¼šåŸæ•°ç»„ä¸­è¿ç»­çš„æ•°ç»„æˆæ–°çš„æ•°ç»„</p>
</blockquote>
<p>â€ƒâ€ƒå™è¿°å››ä¸ªç®—æ³•æ±‚è§£æå‡ºçš„æœ€å¤§å­åºåˆ—å’Œé—®é¢˜ã€‚</p>
<h4 id="3-4-1-ç®—æ³•ä¸€">3.4.1 ç®—æ³•ä¸€</h4>
<p>â€ƒâ€ƒå¦‚ä¸‹ç®—æ³•ç©·ä¸¾æ‰€æœ‰çš„å¯èƒ½ã€‚æœ¬ç®—æ³•å¹¶ä¸è®¡ç®—å®é™…çš„å­åºåˆ—ï¼Œå®é™…çš„è®¡ç®—è¿˜è¦æ·»åŠ ä¸€äº›é¢å¤–çš„ä»£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxSubSum1</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i++) &#123;    <span class="comment">// ç¡®å®šç®—çš„èµ·å§‹ä½ç½®	</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=i; j&lt;a.length; j++) &#123;    <span class="comment">// ç¡®å®šè®¡ç®—æ±‚å’Œçš„èŒƒå›´</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">thisSum</span> <span class="operator">=</span> <span class="number">0</span>;                <span class="comment">// è®°å½•ä¸´æ—¶å€¼ï¼Œç¡®å®šæ˜¯å¦æ¯”æœ€å¤§å€¼å¤§</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i; k &lt;= j; k++) &#123;  <span class="comment">// ç¡®å®šè¯¥èŒƒå›´å†…çš„å­åºåˆ—çš„å’Œçš„å€¼ã€‚(å®é™…ä¸Šç»“æœåªæœ‰ä¸€ä¸ªå­åºåˆ—)</span></span><br><span class="line">                    thisSum += a[k];            </span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (thisSum &gt; maxSum) &#123;</span><br><span class="line">                    maxSum = thisSum;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxSum;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒè¯¥ç®—æ³•çš„ä¸‰ä¸ªåµŒå¥—forå¾ªç¯éƒ½æ˜¯O(N),æ‰€ä»¥æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚å¿½ç•¥å¸¸æ•°ä¸ä½é˜¶é¡¹ã€‚<br>
ç²¾ç¡®åˆ†æç”± <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mi>i</mi></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><msubsup><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mi>i</mi></mrow><mi>j</mi></msubsup><mn>1</mn></mrow><annotation encoding="application/x-tex">\sum_{i=0}^{N-1} \sum_{j=i}^{N-1} \sum_{k=i}^j 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.417049em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.964564em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.2029000000000005em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span></span></span></span> å¾—åˆ°ã€‚è¯¥&quot;å’Œ&quot;æŒ‡å‡ºç¨‹åºè¢«æ‰§è¡Œå¤šå°‘æ¬¡è¢«æ‰§è¡Œã€‚ä»å†…å‘å¤–æ±‚å€¼ã€‚ç‰¹åˆ«åœ°ï¼Œå°†ç”¨åˆ°å‰Nä¸ªæ•´æ•°æ±‚å’Œä¸å‰Nä¸ªå¹³æ–¹æ•°çš„å’Œå…¬å¼ã€‚</p>
<p>é¦–å…ˆæœ‰</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mi>i</mi></mrow><mi>j</mi></munderover><mn>1</mn><mo>=</mo><mi>j</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mn>1</mn><mspace width="1em"><mo stretchy="false">(</mo><mi>j</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mn>1</mn><mtext>ä¸ª</mtext><mn>1</mn><mtext>ç›¸åŠ </mtext><mo stretchy="false">)</mo></mspace></mrow><annotation encoding="application/x-tex">\sum _{k=i}^j 1 = j-i+1 \quad (j-i+1ä¸ª1ç›¸åŠ )
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.16089em;vertical-align:-1.302113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8587770000000001em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.347113em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord cjk_fallback">ä¸ª</span><span class="mord">1</span><span class="mord cjk_fallback">ç›¸</span><span class="mord cjk_fallback">åŠ </span><span class="mclose">)</span></span></span></span></span></p>
<p>å¾—åˆ°</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mi>i</mi></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mo stretchy="false">(</mo><mi>j</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mspace width="1em"><mo stretchy="false">(</mo><mtext>å¸¦å…¥å¯å¾—ä»</mtext><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3...</mn><mo>+</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo stretchy="false">)</mo></mspace></mrow><annotation encoding="application/x-tex">\sum _{j=i} ^{N-1} (j-i+1) = \frac{(N-i+1)(N-i)}{2} \quad (å¸¦å…¥å¯å¾—ä»1+2+3...+N-i)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.2421130000000007em;vertical-align:-1.4137769999999998em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000006em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mopen">(</span><span class="mord cjk_fallback">å¸¦</span><span class="mord cjk_fallback">å…¥</span><span class="mord cjk_fallback">å¯</span><span class="mord cjk_fallback">å¾—</span><span class="mord cjk_fallback">ä»</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span></span></p>
<p>è¿˜æœ‰<br>
ç¬¬ä¸€è¡Œç†è§£ï¼šä»¤i=i-1ï¼Œæ±‚å’Œä¸‹æ ‡ i-1=0-&gt;i=1ï¼Œä¸Šæ ‡ i-1=N-1-&gt;i=Nã€‚</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mfrac><mrow><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mfrac><mrow><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mi>i</mi><mo>+</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msup><mi>i</mi><mn>2</mn></msup><mo>âˆ’</mo><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo>+</mo><mn>3</mn><mi>N</mi><mo>+</mo><mn>2</mn><mo stretchy="false">)</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mfrac><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>6</mn></mfrac><mo>âˆ’</mo><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo><mfrac><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo>+</mo><mfrac><mrow><msup><mi>N</mi><mn>2</mn></msup><mo>+</mo><mn>3</mn><mi>N</mi><mo>+</mo><mn>2</mn></mrow><mn>2</mn></mfrac><mi>N</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><msup><mi>N</mi><mn>3</mn></msup><mo>+</mo><mn>3</mn><msup><mi>N</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><mi>N</mi></mrow><mn>6</mn></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} 
\sum _{i=0} ^{N-1} {\frac{(N-i+1)(N-i)}{2}} &amp;= \sum_{i=1}^N \frac{(N-i+1)(N-i+2)}{2} \\
&amp;= \frac{1}{2} \sum_{i=1}^N i^2-(N+\frac{3}{2}) + \frac{1}{2}(N^2+3N+2)\sum_{i=1}^N 1 \\
&amp;= \frac{1}{2}\frac{N(N+1)(2N+1)}{6}-(N+\frac{3}{2})\frac{N(N+1)}{2}+\frac{N^2+3N+2}{2}N\\
&amp;= \frac{N^3+3N^2+2N}{6}
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:11.766226000000003em;vertical-align:-5.633113000000002em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.133113000000002em;"><span style="top:-8.133113000000002em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000004em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span style="top:-4.727108000000001em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"></span></span><span style="top:-1.658331em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"></span></span><span style="top:0.8187770000000013em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:5.633113000000002em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.133113000000002em;"><span style="top:-8.133113000000002em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-4.727108000000001em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span></span></span><span style="top:-1.658331em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:0.8187770000000013em;"><span class="pstrut" style="height:3.828336em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">3</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:5.633113000000002em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<h4 id="3-4-2-ç®—æ³•äºŒ">3.4.2 ç®—æ³•äºŒ</h4>
<p>â€ƒâ€ƒå¦‚ä¸‹ç®—æ³•å…·æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„å¤æ‚åº¦ã€‚<br>
è¯¥ç®—æ³•çš„åŒºåˆ«åœ¨äºï¼Œå‘ç°ä¸éœ€è¦ä½¿ç”¨ç¡®å®šèµ·å§‹ä½ç½®ï¼Œåªéœ€è¦æ±‚å’Œå­åºåˆ—çš„èµ·å§‹ä½ç½®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] a = &#123;<span class="number">1</span>, -<span class="number">4</span>, <span class="number">5</span>, -<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, -<span class="number">4</span>, -<span class="number">7</span>, <span class="number">6</span>&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> maxSumSub2(a);</span><br><span class="line">    System.out.println(res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxSumSub2</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// ç¡®å®šå­åºåˆ—æ±‚å’ŒèŒƒå›´çš„èµ·å§‹ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;a.length ; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">thisSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ç¡®å®šå­åºåˆ—çš„ç»ˆæ­¢ä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &lt; a.length; j++) &#123;</span><br><span class="line">            thisSum += a[j];</span><br><span class="line">            <span class="keyword">if</span> (thisSum &gt; maxSum) &#123;</span><br><span class="line">                maxSum = thisSum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxSum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-4-3-ç®—æ³•ä¸‰">3.4.3 ç®—æ³•ä¸‰</h4>
<p>â€ƒâ€ƒå¦‚ä¸‹é€’å½’ç®—æ³•å…·æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(NlogN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>çš„å¤æ‚åº¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] a = &#123;<span class="number">1</span>, -<span class="number">4</span>, <span class="number">5</span>, -<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, -<span class="number">4</span>, -<span class="number">7</span>, <span class="number">6</span>&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> maxSumRec(a, <span class="number">0</span>, a.length-<span class="number">1</span>);</span><br><span class="line">    System.out.println(res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxSumRec</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="comment">// é€’å½’çš„å‡ºå£</span></span><br><span class="line">    <span class="comment">// å¦‚æœleft==rightï¼Œè¯´æ˜åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ æˆ–0å³å¯</span></span><br><span class="line">    <span class="keyword">if</span> (left == right) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[left] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> a[left];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// int center = (left + right)/2;</span></span><br><span class="line">    <span class="comment">// æ¨èï¼Œé¿å…å’Œè¶…å‡ºintæœ€å¤§èŒƒå›´çš„å¯èƒ½</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">center</span> <span class="operator">=</span> left - (left -right)/<span class="number">2</span>;</span><br><span class="line">    <span class="comment">// æå‰é€’å½’è°ƒç”¨ï¼Œå› ä¸ºé€’å½’åˆ°åº•çš„æ—¶å€™ä¸éœ€è¦åšé¢å¤–çš„å¤„ç†ï¼Œä¾‹å¦‚äº¤æ¢</span></span><br><span class="line">    <span class="comment">// é€’å½’è·å¾—å·¦åŠçš„æœ€å¤§å­åºåˆ—å’Œ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">maxLeftSum</span> <span class="operator">=</span> maxSumRec(a, left, center);</span><br><span class="line">    <span class="comment">// é€’å½’è·å¾—å³åŠçš„æœ€å¤§å­åºåˆ—å’Œ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">maxRightSum</span> <span class="operator">=</span> maxSumRec(a, center+<span class="number">1</span>, right);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–é€’å½’äºŒåˆ†æ—¶ï¼Œå·¦è¾¹è¿ç€centerçš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">maxLeftBoarderSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">leftBoarderSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> center; i &gt;= left ; i--) &#123;</span><br><span class="line">        leftBoarderSum += a[i];</span><br><span class="line">        <span class="keyword">if</span> (leftBoarderSum &gt; maxLeftBoarderSum)&#123;</span><br><span class="line">            maxLeftBoarderSum = leftBoarderSum;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒä¸Šï¼Œåˆå§‹åŒ–å³è¾¹è¿ç€center+1çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">maxRightBoarderSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">rightBoardSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> center+<span class="number">1</span>; j &lt;=right ; j++) &#123;</span><br><span class="line">        rightBoardSum += a[j];</span><br><span class="line">        <span class="keyword">if</span> (rightBoardSum &gt; maxRightBoarderSum) &#123;</span><br><span class="line">            maxRightBoarderSum = rightBoardSum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»è€Œè·å–æ¯ä¸€ä¸ªé€’å½’çš„éƒ¨åˆ†çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="comment">// ä»¥ä¸€ä¸ªæœ€å°çš„ä½†é•¿åº¦ä¸ä¸º1éƒ¨åˆ†ä¸¾ä¾‹ï¼Œè¿™ä¸ªé€’å½’éƒ¨åˆ†ä¼šå¾—åˆ°ä¸‰ä¸ªæœ€å¤§å€¼ï¼Œ</span></span><br><span class="line">    <span class="comment">// ä¸€åˆ†ä¸ºäºŒçš„å·¦è¾¹çš„æœ€å¤§å€¼maxLeftSumï¼Œå³è¾¹çš„æœ€å¤§å€¼maxRightSumï¼Œä¸­é—´éƒ¨åˆ†çš„æœ€å¤§å€¼ï¼šmaxLeftBoarderSum + maxRightBoarderSum</span></span><br><span class="line">    <span class="comment">// è¿”å›å…¶ä¸­çš„æœ€å¤§å€¼ï¼Œè¿™ä¸ªæœ€å¤§å€¼åˆä¼šä½œä¸ºä¸Šä¸€çº§é€’å½’çš„å·¦è¾¹æˆ–è€…å³è¾¹çš„æœ€å¤§å€¼ï¼Œ</span></span><br><span class="line">    <span class="comment">// é€’å½’è¿”å›åˆ°æœ€ä¸Šçº§çš„æ—¶å€™ï¼Œç»“æŸï¼Œè·å–åˆ°æ­¤æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">return</span> max3(maxLeftSum, maxRightSum, maxLeftBoarderSum + maxRightBoarderSum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max3</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> Math.max(a, b);</span><br><span class="line">    max = Math.max(max, c);</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>1.é€’å½’çš„æ­£ç¡®æ€§åˆ†æï¼š</strong></p>
<ol>
<li>è¯¥ç®—æ³•é‡‡ç”¨é€’å½’çš„åˆ†æ²»æ€æƒ³ï¼Œå°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒå»è®¡ç®—ï¼Œå› ä¸ºæœ€å¤§å­åºåˆ—åªå¯èƒ½åœ¨ä¸‰å¤„åœ°æ–¹å‡ºç°ï¼šäºŒåˆ†åçš„å·¦åŠéƒ¨åˆ†ï¼ŒäºŒåˆ†åçš„å³åŠéƒ¨åˆ†ï¼ŒäºŒåˆ†åçš„å·¦åŠä¸å³åŠçš„è¿æ¥éƒ¨åˆ†ã€‚</li>
<li>å¯¹äºç¬¬ä¸‰ç§æƒ…å†µï¼Œå¯ä»¥å°†å‰åŠéƒ¨åˆ†çš„æœ€å¤§å’Œ(ä»centerâ€“)åŠ ä¸ŠååŠéƒ¨åˆ†çš„æœ€å¤§å’Œ()ä»center++å¾—åˆ°ã€‚</li>
<li>æœ€åæ¯”è¾ƒè¿™ä¸‰ä¸ªæœ€å¤§å€¼ï¼Œå³å¯å¾—åˆ°çœŸæ­£çš„æœ€å¤§å€¼ã€‚</li>
</ol>
<h4 id="3-4-4-ç®—æ³•å››">3.4.4 ç®—æ³•å››</h4>
<p>â€ƒâ€ƒâ€ƒå¦‚ä¸‹é€’å½’ç®—æ³•å…·æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>çš„å¤æ‚åº¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] a = &#123;<span class="number">1</span>, -<span class="number">4</span>, <span class="number">5</span>, -<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, -<span class="number">4</span>, -<span class="number">7</span>, <span class="number">6</span>&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> getMaxSubSum4(a);</span><br><span class="line">    System.out.println(res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getMaxSubSum4</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–æœ€å¤§å€¼ï¼Œå½“å‰å­åºåˆ—çš„å€¼</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">maxSum</span> <span class="operator">=</span> <span class="number">0</span>, thisSum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; a.length; i++) &#123;</span><br><span class="line">        <span class="comment">// å½“å‰å­åºåˆ—çš„å€¼åŠ ä¸Šä¸‹ä¸ªçš„å€¼</span></span><br><span class="line">        thisSum += a[j];</span><br><span class="line">        <span class="keyword">if</span> (thisSum &gt; maxSum) &#123;</span><br><span class="line">            maxSum = thisSum;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (thisSum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœåŠ åï¼ŒthisSumå°äº0ï¼Œåˆ™thisSumå¿…å®šå°äºmaxSum</span></span><br><span class="line">            <span class="comment">// å¦‚æœthisSum += a[j]åï¼ŒthisSumå°äº0ï¼Œåˆ™è¯´æ˜æœ€å¤§çš„å­åºåˆ—ä¸åœ¨è¿™é‡Œç»“æŸä¸å¼€å§‹(å› ä¸ºæœ‰è´Ÿæ•°)ï¼Œæ‰€ä»¥ä¹Ÿä¸æ”¹å˜ä¹‹å‰è®°å½•çš„maxSum</span></span><br><span class="line">            <span class="comment">// å¦‚æœå°äº0ï¼Œå°†thisSumç½®ä¸º0ï¼Œä»æ–°å¼€å§‹è®¡ç®—ä¹‹åçš„æœ€å¤§å­åºåˆ—ï¼Œå¦‚æœæœ‰æ¯”maxSumè¿˜å¤§çš„ï¼Œåˆ™èµ‹å€¼</span></span><br><span class="line">            thisSum = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxSum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>1.ç®—æ³•çš„æ­£ç¡®æ€§åˆ†æï¼š</strong></p>
<ol>
<li>jä»£è¡¨å½“å‰åºåˆ—çš„ç»ˆç‚¹ï¼Œå¦‚æœa[i]åˆ°a[j]çš„å’Œæ˜¯è´Ÿçš„ï¼Œé‚£ä¹ˆå¯ä»¥å°†iæ¨è¿›åˆ°j+1ï¼Œ</li>
<li>ä»¤ä¸‹æ ‡ï¼š0&lt;i&lt;jï¼Œå¦‚æœthisSumçš„0åˆ°içš„å’Œ&gt;0ï¼Œé‚£ä¹ˆï¼ŒthisSum = a[0] + â€¦+a[i]ï¼Œå¦‚æœthisSumä¸º0ï¼Œåˆ™è¯´æ˜ï¼Œä»a[i]å¼€å§‹çš„å­åºåˆ—ä¸æ˜¯æœ€ä¼˜è§£äº†ã€‚å› ä¸ºå¦‚æœå­˜åœ¨ä¸€ä¸ªæœ€å¤§å€¼ä»a[i]å¼€å§‹ï¼Œæˆ–åŒ…å«a[i]ï¼Œç”±äºthisSumä¸ºè´Ÿï¼Œaè‹¥[i+k]ä¸ºæ­£ï¼Œåˆ™ç»§ç»­ä»a[i+k]ä¸€å®šæ›´ä¼˜ã€‚å°†thisSumç½®ä¸º0ï¼Œåˆ™ä¹‹åçš„æœ€å¤§å€¼ä»a[i+1]å¼€å§‹ï¼Œç®—çš„å€¼å†ä¸maxSumæ¯”è¾ƒï¼Œä»è€Œå¾—åˆ°çœŸæ­£çš„æœ€å¤§å€¼ã€‚</li>
</ol>
<p><strong>2.è”æœºç®—æ³•ï¼š</strong></p>
<p>â€ƒâ€ƒåœ¨ä»»æ„æ—¶åˆ»ï¼Œåªéœ€è¦å¯¹æ“ä½œçš„æ•°æ®è¯»å…¥ä¸€æ¬¡ï¼Œä¸€æ—¦a[i]è¢«è¯»å…¥å¹¶å¤„ç†ï¼Œå®ƒä¸åœ¨éœ€è¦è¢«è®°å¿†ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œç®—æ³•éƒ½èƒ½å¯¹å·²ç»è¯»å…¥çš„æ•°æ®ç»™å‡ºå¯¹åº”çš„å­åºåˆ—çš„æ­£ç¡®é—®é¢˜ç­”æ¡ˆã€‚è€Œä¸”ä»…éœ€è¦å¸¸é‡ç©ºé—´å¹¶ä»¥çº¿æ€§æ—¶é—´è¿è¡Œã€‚</p>
<h3 id="3-5-è¿è¡Œæ—¶é—´çš„å¯¹æ•°">3.5  è¿è¡Œæ—¶é—´çš„å¯¹æ•°</h3>
<blockquote>
<p>ä¸€èˆ¬æ³•åˆ™ï¼šå¦‚æœä¸€ä¸ªç®—æ³•ç”¨O(1)çš„æ—¶é—´æŠŠé—®é¢˜å‰Šå‡ä¸ºå…¶ä¸€éƒ¨åˆ†(é€šå¸¸ä¸º1/2)ï¼Œé‚£ä¹ˆè¯¥ç®—æ³•å°±æ˜¯O(logN)ã€‚<br>
å¦‚æœä¸€ä¸ªç®—æ³•ä½¿ç”¨å¸¸æ•°çš„æ—¶é—´ï¼Œå°†é—®é¢˜å¤æ‚åº¦å‡å°‘ä¸€ä¸ªå¸¸æ•°é‡ï¼Œé‚£ä¹ˆä¸ºO(N)</p>
</blockquote>
<h4 id="3-5-1æŠ˜åŠæŸ¥æ‰¾">3.5.1æŠ˜åŠæŸ¥æ‰¾</h4>
<blockquote>
<p>æŠ˜åŠæŸ¥æ‰¾(binary search)ï¼šç»™å®šä¸€ä¸ªæ•´æ•°Xå’Œä¸€ç»„å·²ç»åœ¨å†…å­˜ä¸­ä¸”å·²ç»æ’å¥½åºçš„æ•´æ•°æ•°ç»„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">A_0,A_1,...,A_{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo separator="true">,</mo><mtext>æ±‚æœ‰ä¸‹æ ‡</mtext><mi>i</mi><mtext>ä½¿</mtext></mrow><annotation encoding="application/x-tex">,æ±‚æœ‰ä¸‹æ ‡iä½¿</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">æ±‚</span><span class="mord cjk_fallback">æœ‰</span><span class="mord cjk_fallback">ä¸‹</span><span class="mord cjk_fallback">æ ‡</span><span class="mord mathdefault">i</span><span class="mord cjk_fallback">ä½¿</span></span></span></span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub><mo>=</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">A_i=X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>,å¦‚æœä¸å­˜åœ¨åˆ™è¿”å› i = nullã€‚</p>
</blockquote>
<p>ç”±äºè¯¥æ•°ç»„å·²ç»æ’åºå¥½ï¼Œå› æ­¤é‡‡ç”¨æŠ˜åŠæŸ¥æ‰¾ï¼š<br>
â€ƒâ€ƒå…ˆæŸ¥æ‰¾æ•°ç»„å±…ä¸­çš„å…ƒç´ ï¼Œå¦‚æœç­‰äºXï¼Œåˆ™æ‰¾åˆ°ã€‚å¦‚æœæ¯”Xå°ï¼Œè¯´æ˜ç»“æœåœ¨å±…ä¸­æ•°ç»„çš„å³è¾¹ã€‚æ¯”Xå¤§åˆ™è¯´æ˜åœ¨å±…ä¸­æ•°ç»„çš„å·¦è¾¹ã€‚å¾ªç¯æ—¶é—´æœ€å¤šä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">log(N-1) + 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearch</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Stringå®ç°äº†Comparableæ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯intæ˜¯åŸºæœ¬ç±»å‹æ²¡æœ‰å®ç°ï¼ŒIntegeræœ‰å®ç°</span></span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;6&quot;</span>, <span class="string">&quot;12&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;20&quot;</span>&#125;;</span><br><span class="line">        <span class="type">String</span> <span class="variable">stringSearch</span> <span class="operator">=</span> getBinarySearch(arr, <span class="string">&quot;6&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Integer[] brr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">18</span>&#125;;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">integerSearch</span> <span class="operator">=</span> getBinarySearch(brr, b);</span><br><span class="line">        System.out.println(stringSearch);</span><br><span class="line">        System.out.println(integerSearch);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›Tç±»å‹ï¼ŒåŒæ—¶é™å®šTçš„ç±»å‹</span></span><br><span class="line">    <span class="comment">// &lt;T extends Comparable&lt;? super T&gt;&gt;é™å®šäº†Tæˆ–Tçš„çˆ¶ç±»å…·æœ‰å¯æ¯”è¾ƒ(Comparableç±»)çš„èƒ½åŠ›</span></span><br><span class="line">    <span class="comment">// Tå¿…é¡»ç»§æ‰¿Comparableæ¥å£ï¼Œæˆ–&lt;? super T&gt;è§„å®šäº†Tæˆ–Tçš„çˆ¶ç±»ç»§æ‰¿äº†Comparable</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;? <span class="built_in">super</span> T&gt;&gt; T <span class="title function_">getBinarySearch</span><span class="params">(T[] a, T x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> a.length -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// åŸºçº¿æ¡ä»¶low&lt;high</span></span><br><span class="line">        <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> low + (high-low)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (a[mid].compareTo(x) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœa[mid] &lt; x</span></span><br><span class="line">                low = mid+<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[mid].compareTo(x) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœa[mid] &gt; x</span></span><br><span class="line">                high = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœa[mid] = xï¼Œè¿™é‡Œè¿”å›xï¼Œå› ä¸ºç±»å‹ä¸ºT</span></span><br><span class="line">                <span class="keyword">return</span> x;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸å­˜åœ¨ï¼Œä¸ç¡®å®šTçš„ç±»å‹ï¼Œè¿”å›null</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-5-2æ¬§å‡ é‡Œå¾—ç®—æ³•-è¾—è½¬ç›¸é™¤æ³•">3.5.2æ¬§å‡ é‡Œå¾—ç®—æ³•(è¾—è½¬ç›¸é™¤æ³•)</h4>
<blockquote>
<p>è®¡ç®—ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬å› æ•°ï¼Œå¦‚gcd(50, 15) = 5</p>
</blockquote>
<p><strong>æ¬§å‡ é‡Œå¾—ç®—æ³•(è¾—è½¬ç›¸é™¤æ³•)</strong>ï¼šgcd(a, b) = gcd(b, a%b)    a&gt;=b;    gcd(a,b)è¡¨ç¤ºaã€bçš„æœ€å¤§å…¬å› æ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getGcd</span><span class="params">(<span class="type">long</span> m, <span class="type">long</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">//ç”±äºjavaå–ä½™çš„ç‰¹æ€§ï¼Œå¦‚æœm &lt; n,ç¬¬ä¸€æ¬¡å¾ªç¯ä¼šäº¤æ¢mï¼Œn</span></span><br><span class="line">    <span class="comment">// ä¾‹ï¼š5ï¼Œ10ï¼›5%10=0...5, ä¹‹åï¼Œm=5ï¼Œn=10</span></span><br><span class="line">    <span class="keyword">while</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">rem</span> <span class="operator">=</span> m % n;</span><br><span class="line">        m = n;</span><br><span class="line">        n = rem;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ç®—æ³•ï¼Œå¦‚ä¸‹å°†è¯æ˜ç»è¿‡ä¸¤æ¬¡è¿­ä»£åï¼Œä½™æ•°æœ€å¤šæ˜¯ä¹‹çš„ä¸€åŠï¼Œä»è€Œè¯æ˜è¿­ä»£æ¬¡æ•°è‡³å¤šä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2O(logN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></p>
<p><strong>å®šç†1</strong>ï¼šå¦‚æœM&gt;Nï¼Œåˆ™M mod N &lt; M/2 (æ³¨æ„javaä¸­å–ä½™å–modçš„åŒºåˆ«)<br>
<strong>è¯æ˜</strong>ï¼š<br>
â€ƒâ€ƒæƒ…å½¢1ï¼šå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>â‰¤</mo><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">N\le M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span>ï¼Œåˆ™ç”±äºä½™æ•°ä¸€å®šå°äºé™¤æ•°Nï¼Œæ•…<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ä½™æ•°</mtext><mo>â‰¤</mo><mi>N</mi><mo>â‰¤</mo><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">ä½™æ•°\le N \le M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord cjk_fallback">ä½™</span><span class="mord cjk_fallback">æ•°</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span>ã€‚<br>
â€ƒâ€ƒæƒ…å½¢2ï¼šå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&gt;</mo><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">N &gt; M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span>ï¼Œä¸”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&lt;</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">N&lt;M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ï¼Œæ‰€ä»¥Mä¸€å®šåªåŒ…å«ä¸€ä¸ªNï¼Œä»è€Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ä½™æ•°</mtext><mo>=</mo><mi>M</mi><mo>âˆ’</mo><mn>1</mn><mo>Ã—</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">ä½™æ•°=M- 1 \times N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">ä½™</span><span class="mord cjk_fallback">æ•°</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span>ï¼Œè€Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&gt;</mo><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">N &gt; M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span>ï¼Œæ‰€ä»¥ä½™æ•°&lt; M/2ã€‚</p>
<p>â€ƒâ€ƒç”±æ­¤å¯çŸ¥ï¼ŒMç»è¿‡ä¸¤æ¬¡æ¬§å‡ é‡Œå¾—ç®—æ³•åï¼ŒMå˜æˆM%Nçš„ä½™æ•°ï¼Œæ•…éœ€æœ€åçš„æƒ…å†µè¦2logNçš„å¤æ‚åº¦ã€‚å®é™…ä¸Šè¯¥ç®—æ³•çš„å¹³å‡å¤æ‚åº¦éœ€è¦å¤§é‡çš„å¤æ‚è®¡ç®—ï¼Œå…¶å¹³å‡è¿­ä»£æ¬¡æ•°çº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>12</mn><mi>l</mi><mi>n</mi><mn>2</mn><mi>l</mi><mi>n</mi><mi>N</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><msup><mi>Ï€</mi><mn>2</mn></msup><mo>+</mo><mn>1.47</mn></mrow><annotation encoding="application/x-tex">(12 ln2 lnN)/\pi^2 + 1.47</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">n</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">4</span><span class="mord">7</span></span></span></span></p>
<p><strong>å¹‚è¿ç®—</strong></p>
<p>â€ƒâ€ƒè®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">X^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span>çš„æ˜æ˜¾çš„ç®—æ³•æ˜¯ä½¿ç”¨N-1æ¬¡ä¹˜æ³•è‡ªä¹˜ï¼Œæœ‰ä¸€ç§é€’å½’ç®—æ³•æ›´å¥½ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>â‰¤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N\le 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>æ˜¯é€’å½’çš„åŸºå‡†æƒ…å½¢ã€‚å¦åˆ™ï¼Œè‹¥Nä¸ºå¶æ•°ï¼Œæˆ‘ä»¬æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mi>N</mi></msup><mo>=</mo><msup><mi>X</mi><mrow><mi>N</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>â‹…</mo><msup><mi>X</mi><mrow><mi>N</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">X^N = X^{N/2} \cdot X^{N/2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå¦‚æœNæ˜¯å¥‡æ•°ï¼Œåˆ™æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mi>N</mi></msup><mo>=</mo><msup><mi>X</mi><mrow><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>â‹…</mo><msup><mi>X</mi><mrow><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>â‹…</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">X^N = X^{(N-1)/2} \cdot X^{(N-1)/2} \cdot X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>ï¼Œä¸€ç›´é€’å½’ä¸‹å»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BigInteger</span> <span class="variable">pow</span> <span class="operator">=</span> pow(<span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;3&quot;</span>), <span class="number">100</span>);</span><br><span class="line">        System.out.println(pow);</span><br><span class="line">        <span class="comment">// Mathå·¥å…·ç±»å·²ç»å®ç°äº†ï¼Œä¸è¿‡é™å®šä¸ºdoubleç±»å‹(å‚æ•°ä¸šåŠ¡double)</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">pow1</span> <span class="operator">=</span> Math.pow(<span class="number">3.0</span>, <span class="number">2.0</span>);</span><br><span class="line">        System.out.println(pow1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BigInteger <span class="title function_">pow</span><span class="params">(BigInteger x, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isEven(n)) &#123;</span><br><span class="line">            <span class="keyword">return</span> pow(x.multiply(x), n / <span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> pow(x.multiply(x), n/<span class="number">2</span>).multiply(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå¶æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isEven</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>èŒƒå‹ä¸å‡½æ•°å¯¹è±¡</title>
    <url>/2021/04/03/%E8%8C%83%E5%9E%8B%E4%B8%8E%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬ä¸€ç« 1.4ä¸1.5èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="1-èŒƒå‹">1. èŒƒå‹</h2>
<p>èŒƒå‹æœºåˆ¶ï¼šå¦‚æœå¯¹è±¡é™¤å»åŸºæœ¬ç±»å‹å¤–ï¼Œå…¶ä½™çš„å®ç°æ–¹æ³•ç›¸åŒï¼Œå¯ä»¥ç”¨èŒƒå‹å®ç°æ¥æè¿°ã€‚</p>
<h3 id="1-1-ä½¿ç”¨objectè¡¨ç¤ºèŒƒå‹">1.1 ä½¿ç”¨Objectè¡¨ç¤ºèŒƒå‹</h3>
<p>â€ƒâ€ƒObjectç±»æ˜¯æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯ä»¥é€šè¿‡Objectç±»å®ç°èŒƒå‹ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemoryCell</span> &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡Objectå®ç°èŒƒå‹å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> Object storedValue;</span><br><span class="line">    <span class="comment">// å†™ï¼šç»™å­˜å‚¨çš„å€¼èµ‹å€¼ï¼Œé€šè¿‡Objectå†™å…¥èŒƒå‹å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(Object x)</span> &#123;</span><br><span class="line">        storedValue = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¯»ï¼šè¿”å›å­˜å‚¨çš„å€¼</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">read</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> storedValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ï¼Œå¦‚æœéœ€è¦ä¸€ä¸ªç‰¹å®šçš„ç±»å‹ä½¿ç”¨ï¼Œåˆ™éœ€è¦å¼ºåˆ¶è½¬ä¸ºæ­£ç¡®çš„ç±»å‹ã€‚</li>
<li>ä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹(8å¤§ç±»å‹)ï¼Œåªæœ‰å¼•ç”¨ç±»å‹(ç±»ã€æ¥å£ç±»å‹ã€æ•°ç»„ç±»å‹ã€æšä¸¾ç±»å‹)ä¸Objectç›¸å®¹ã€‚(è¿™é‡Œæµ‹è¯•å®é™…æ˜¯å¯ä»¥çš„(Java8)ï¼š<strong>è‡ªåŠ¨æ‹†è£…ç®±</strong>)</li>
</ul>
<table><br></table>
<h3 id="1-2-åŒ…è£…ç±»å‹">1.2 åŒ…è£…ç±»å‹</h3>
<p>â€ƒâ€ƒJavaæä¾›äº†8ç§åŸºæœ¬ç±»å‹ï¼Œè¿™8ç§ç±»å‹ä¸èƒ½ä¸Objecctç›¸å®¹ï¼Œæ‰€ä»¥Javaæä¾›äº†å¯¹åº”çš„åŒ…è£…ç±»ã€‚</p>
<table><br></table>
<h3 id="1-3-ä½¿ç”¨æ¥å£è¡¨ç¤ºèŒƒå‹">1.3 ä½¿ç”¨æ¥å£è¡¨ç¤ºèŒƒå‹</h3>
<p>â€ƒâ€ƒåªæœ‰åœ¨ä½¿ç”¨Objectç±»ä¸­å·²æœ‰çš„æ–¹æ³•èƒ½å¤Ÿè¡¨ç¤ºæ‰€æ‰§è¡Œçš„æ“ä½œæ—¶ï¼Œæ‰èƒ½ä½¿ç”¨Objectä½œä¸ºèŒƒå‹ç±»å·¥ä½œã€‚(ä¸ä»£ç å¯¹è±¡ç±»å‹æ— å…³)ã€‚<br>
â€ƒâ€ƒä¾‹å¦‚æ‰¾å‡ºObjectæ•°ç»„ä¸­çš„æœ€å¤§é¡¹ï¼Œä¸ç±»å‹æ— å…³ï¼Œåªèƒ½å®ç°Comparableæ¥å£ï¼Œé‡å†™compareToæ–¹æ³•ã€‚</p>
<table><br></table>
<h3 id="1-5-åˆ©ç”¨javaèŒƒå‹ç‰¹æ€§">1.5 åˆ©ç”¨JavaèŒƒå‹ç‰¹æ€§</h3>
<blockquote>
<p>Javaæ”¯æŒèŒƒå‹ç±»ä¸èŒƒå‹æ–¹æ³•</p>
</blockquote>
<h4 id="1-5-1-ç®€å•èŒƒå‹ç±»å’Œæ¥å£">1.5.1 ç®€å•èŒƒå‹ç±»å’Œæ¥å£</h4>
<p>â€ƒâ€ƒåœ¨ç±»ä¸Šä½¿ç”¨&lt;èŒƒå‹&gt;ï¼Œè¡¨ç¤ºä¸€ä¸ªèŒƒå‹ç±»ã€‚å¦‚ä¸‹æ˜¯å‰é¢çš„MemoryCellç±»èŒƒå‹ç‰ˆä»£ç ã€‚ä¹Ÿå¯ä»¥å®ç°èŒƒå‹æ¥å£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericMemoryCell</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">// æŒ‡å®šèŒƒå‹ä¸ºTï¼Œnewç±»çš„å¯¹è±¡æ—¶å€™å†æŒ‡å®šç±»å‹ï¼Œæ³¨æ„ä¸èƒ½æ˜¯intç±»çš„åŸºæœ¬ç±»å‹</span></span><br><span class="line">    <span class="keyword">private</span> T storedValue;</span><br><span class="line">    <span class="comment">// è¯»ï¼šè¿”å›å­˜å‚¨çš„å€¼</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">read</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> storedValue;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å†™ï¼šç»™å­˜å‚¨çš„å€¼èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        storedValue = x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-5-2-è‡ªåŠ¨æ‹†ç®±-è£…ç®±">1.5.2 è‡ªåŠ¨æ‹†ç®±/è£…ç®±</h4>
<p>è‡ªåŠ¨è£…ç®±ï¼šå¦‚æœä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œä¾‹å¦‚intè¢«ä¼ é€’åˆ°ä¸€ä¸ªéœ€è¦Integerå¯¹è±¡çš„åœ°æ–¹ï¼Œç¼–è¯‘å™¨å¹•åæ’å…¥å¯¹Integeræ„é€ æ–¹æ³•è°ƒç”¨ã€‚<br>
è‡ªåŠ¨æ‹†ç®±ï¼šä¸€ä¸ªåŒ…è£…ç±»å‹ï¼Œä¾‹å¦‚Integerè¢«æ”¾åˆ°éœ€è¦intç±»å‹çš„åœ°æ–¹ï¼Œåˆ™ç¼–è¯‘å™¨å¹•åè°ƒç”¨ä¸€ä¸ªintValueæ–¹æ³•ã€‚<br>
æ³¨æ„ï¼šéœ€è¦æŒ‡å®šèŒƒå‹çš„åœ°æ–¹ï¼Œä»æ˜¯ä¸å¯æ”¹å˜çš„ã€‚</p>
<h4 id="1-5-4-å¸¦æœ‰é™åˆ¶çš„é€šé…ç¬¦">1.5.4 å¸¦æœ‰é™åˆ¶çš„é€šé…ç¬¦</h4>
<p>â€ƒâ€ƒä¸ºäº†è§£å†³èŒƒå‹çš„ä¸€äº›é—®é¢˜ï¼ŒJavaä½¿ç”¨ é€šé…ç¬¦ï¼š<code>?</code>æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œå¦‚ä¸‹æ–¹æ³•è¡¨ç¤ºèŒƒå‹å¿…é¡»æ˜¯Shapeç±»æˆ–è€…å…¶å­ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•çš„é›†åˆå‚æ•°çš„èŒƒå‹å¿…é¡»æ˜¯Shapeç±»æˆ–è€…Shapeç±»çš„å­ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">totalArea</span><span class="params">(Collection&lt;? extends Shape&gt; arr)</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-5-6-ç±»å‹ç•Œé™">1.5.6 ç±»å‹ç•Œé™</h4>
<p>â€ƒâ€ƒä¾‹å¦‚ï¼Œæƒ³å®ç°å¦‚ä¸‹ä»£ç ï¼Œç¼–è¯‘å™¨ä¸èƒ½è¯æ˜åœ¨ç¬¬è¡Œå¯¹compareToçš„è°ƒç”¨æ˜¯åˆæ³•çš„ã€‚åªæœ‰åœ¨<code>T</code>æ˜¯Comparableçš„æƒ…å†µä¸‹æ‰èƒ½ä¿è¯compareToå­˜åœ¨ã€‚å¯ä»¥ä½¿ç”¨<code>ç±»å‹ç•Œé™</code>è§£å†³ã€‚åœ¨&lt;&gt;å†…ï¼ŒæŒ‡å®šå‚æ•°å¿…é¡»å…·æœ‰çš„æ€§è´¨ã€‚<br>
<strong>é”™è¯¯çš„ä»£ç </strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FindMaxTest</span> &#123;</span><br><span class="line">    <span class="comment">// è¿”å›Tç±»å‹çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">findMax</span><span class="params">(T[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="comment">// æ­¤å¤„æŠ¥é”™ï¼ŒTç±»å‹çš„å¯¹è±¡æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œä¸å¯ç›´æ¥æ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">if</span> (arr[i].compareTo(arr[maxIndex]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                maxIndex = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr[maxIndex];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ­£ç¡®ä»£ç </strong>ï¼š<code>&lt;T extends Comparable&lt;? super T&gt;&gt;</code>ï¼š<br>
åŒºåˆ«ï¼š<code>&lt;T extends Comparable&lt;? super T&gt;&gt;</code>ï¼šTå¿…é¡»ç»§æ‰¿Comparableæ¥å£æˆ–è€…çˆ¶ç±»ç»§æ‰¿äº†Comparableæ¥å£<br>
â€ƒâ€ƒ<code>&lt;T extends Comparable&lt;T&gt;&gt;</code>ï¼šTå¿…é¡»ç»§æ‰¿Comparableæ¥å£<br>
â€ƒâ€ƒT extendså†³å®šäº†ä¼ å…¥å¯¹è±¡çš„ä¸Šé™æ˜¯T(åªèƒ½æ˜¯Tæˆ–å­ç±»)ï¼Œ&lt;? super T&gt;å†³å®šäº†ä¸‹é™æ˜¯T(æœ€å°‘Tå®ç°äº†Comparable)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FindMaxTest</span> &#123;</span><br><span class="line">    <span class="comment">// è¿”å›Tç±»å‹çš„å¯¹è±¡,è¿™é‡Œä½¿ç”¨å¦‚ä¸‹èŒƒå‹ï¼Œè§„å®šäº†Tå¿…é¡»ç»§æ‰¿Comparableæ¥å£æˆ–è€…çˆ¶ç±»ç»§æ‰¿äº†Comparableæ¥å£</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;? <span class="built_in">super</span> T&gt;&gt; T <span class="title function_">findMax</span><span class="params">(T[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i].compareTo(arr[maxIndex]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                maxIndex = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr[maxIndex];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-5-7-ç±»å‹æ“¦é™¤">1.5.7 ç±»å‹æ“¦é™¤</h4>
<p>â€ƒâ€ƒJavaä¸­çš„èŒƒå‹æ˜¯ä¼ªèŒƒå‹ï¼Œåªåœ¨æºç ä¸­å­˜åœ¨ï¼Œåªåœ¨æºç ä¸­æœ‰æ•ˆï¼Œæœ‰ç¼–è¯‘æ£€æŸ¥ã€‚ä¸€æ—¦ç¼–è¯‘é€šè¿‡ï¼ŒJavaçš„èŒƒå‹å°±ä¼šè¢«æ“¦é™¤ï¼Œæˆä¸ºåŸç”Ÿç±»å‹ï¼Œç§°ä¸ºç±»å‹æ“¦é™¤ã€‚</p>
<h4 id="1-5-8-èŒƒå‹çš„é™åˆ¶">1.5.8 èŒƒå‹çš„é™åˆ¶</h4>
<p>ç”±äºç±»å‹æ“¦é™¤çš„åŸå› ï¼Œä¸‹é¢çš„æ¯ä¸€ä¸ªé™åˆ¶éƒ½å¿…é¡»éµå®ˆã€‚</p>
<p><strong>åŸºæœ¬ç±»å‹</strong></p>
<p>â€ƒåŸºæœ¬ç±»å‹ä¸èƒ½ç”¨ä½œç±»å‹å‚æ•°ï¼Œå¦‚<code>GenericMemoryCell&lt;int&gt;</code>éæ³•ï¼Œå¿…é¡»ä½¿ç”¨åŒ…è£…ç±»ã€‚</p>
<p><strong>instanceofæ£€æµ‹</strong></p>
<p>â€ƒinsatanceofæ£€æµ‹å’Œç±»å‹è½¬æ¢åªå¯¹åŸå§‹ç±»å‹(æ­¤å¤„çš„GenericMemoryCell)è¿›è¡Œã€‚ç¼–è¯‘é€šè¿‡åï¼Œç±»å‹ä¼šè¢«æ“¦é™¤ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        GenericMemoryCell&lt;Integer&gt; cell1 = <span class="keyword">new</span> <span class="title class_">GenericMemoryCell</span>&lt;&gt;();</span><br><span class="line">        cell1.write(<span class="number">4</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">cell</span> <span class="operator">=</span> cell1;</span><br><span class="line">        GenericMemoryCell&lt;String&gt; cell2 = (GenericMemoryCell&lt;String&gt;) cell;</span><br><span class="line">        <span class="comment">// æ­¤å¤„æŠ¥é”™ï¼ŒIntegerä¸èƒ½è½¬Stringï¼Œä¸Šé¢çš„ä¸æŠ¥é”™ï¼Œå› ä¸ºä¸Šé¢çš„ç±»å‹éƒ½æ˜¯GenericMemoryCellç±»å‹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> cell2.read();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>èŒƒå‹ç±»å‹ä¸èƒ½å®ä¾‹åŒ–</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">T</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>()   <span class="comment">// å³è¾¹æ˜¯éæ³•çš„</span></span><br></pre></td></tr></table></figure>
<p><strong>ä¸èƒ½åˆ›å»ºèŒƒå‹æ•°ç»„</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">T[] arr = <span class="keyword">new</span> <span class="title class_">T</span>[<span class="number">10</span>];    <span class="comment">// å³è¾¹æ˜¯éæ³•çš„</span></span><br></pre></td></tr></table></figure>
<p><strong>ä¸èƒ½å®ä¾‹åŒ–å‚æ•°åŒ–ç±»å‹æ•°ç»„</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">ClassCastExceptionTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ­¤å¤„åé¢éƒ¨åˆ†æŒ‡å®šèŒƒå‹æŠ¥é”™,åªèƒ½ä¸æŒ‡å®šèŒƒå‹ç±»å‹</span></span><br><span class="line">        GenericMemoryCell&lt;String&gt;[] arr1 = <span class="keyword">new</span> <span class="title class_">GenericMemoryCell</span>[<span class="number">10</span>];</span><br><span class="line">        GenericMemoryCell&lt;Double&gt; cell = <span class="keyword">new</span> <span class="title class_">GenericMemoryCell</span>&lt;&gt;();</span><br><span class="line">        cell.write(<span class="number">4.5</span>);</span><br><span class="line">        Object[] arr2 = arr1;</span><br><span class="line">        <span class="comment">// æ­¤å¤„æœ¬åº”è¯¥æŠ¥é”™ï¼Œä¸ºArrayStoreException,å› ä¸ºä¸Šé¢çš„èŒƒå‹è§„å®šä¸ºStringï¼Œç»“æœå­˜å…¥äº†Doubleï¼Œ</span></span><br><span class="line">        <span class="comment">// å¯æ˜¯ç”±äºç±»å‹æ“¦é™¤åï¼Œæ•°ç»„ç±»å‹çš†ä¸ºGenericMemoryCell[]ï¼ŒåŠ å…¥æ•°ç»„ä¸­çš„ç±»å‹ä¹Ÿæ˜¯GenericMemoryCellï¼Œä¸ä¼šæŠ¥é”™ã€‚</span></span><br><span class="line">        arr2[<span class="number">0</span>] = cell;</span><br><span class="line">        <span class="comment">// æ­¤å¤„æŠ¥é”™ï¼ŒDoubleä¸èƒ½è½¬Stringï¼Œä¸Šé¢çš„ä¸æŠ¥é”™ï¼Œå› ä¸ºä¸Šé¢çš„ç±»å‹æ“¦é™¤åéƒ½æ˜¯GenericMemoryCellç±»å‹ã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> arr1[<span class="number">0</span>].read();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<table><br></table>
<h2 id="2-å‡½æ•°å¯¹è±¡">2 å‡½æ•°å¯¹è±¡</h2>
<blockquote>
<p>å®šä¹‰ä¸€ä¸ªåªæœ‰æ–¹æ³•è€Œæ²¡æœ‰æ•°æ®çš„ç±»ï¼Œç„¶åæŠŠè¿™ä¸ªç±»çš„å¯¹è±¡ä¼ é€’ç»™åˆ«çš„æ–¹æ³•ï¼Œè¯¥å¯¹è±¡é€šå¸¸å«åšå‡½æ•°å¯¹è±¡</p>
</blockquote>
<h3 id="2-1-ç®€å•å®ç°">2.1 ç®€å•å®ç°</h3>
<p>â€ƒâ€ƒå¦‚ä¸‹æ˜¯ä¸€ä¸ªä¼ é€’Comparatorç±»å‹çš„å‡½æ•°å¯¹è±¡çš„å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetTheMaxNum</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;ZEBRA&quot;</span>, <span class="string">&quot;alligator&quot;</span>, <span class="string">&quot;crocodile&quot;</span>&#125;;</span><br><span class="line">        System.out.println(findMax(arr, <span class="keyword">new</span> <span class="title class_">CaseInsensitiveCompare</span>()));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¯”è¾ƒæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt;T <span class="title function_">findMax</span><span class="params">(T[] arr, Comparator&lt;? <span class="built_in">super</span> T&gt; cmp)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="comment">// å› ä¸ºæ¯”è¾ƒå™¨æ˜¯å‡åºï¼Œæ‰€ä»¥è¿™é‡Œå¤§äº0çš„æ„æ€æ˜¯arr[i]å¤§äºarr[index]</span></span><br><span class="line">            <span class="keyword">if</span> (cmp.compare(arr[i], arr[maxIndex]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                maxIndex = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr[maxIndex];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡å®šæ¯”è¾ƒå™¨ï¼ŒèŒƒå‹æŒ‡å®šä¼ å…¥çš„ç±»å‹æ˜¯String</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CaseInsensitiveCompare</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;String&gt; &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String  o1, String  o2)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> o1.compareToIgnoreCase(o2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°å­¦çŸ¥è¯†å¤ä¹ ä¸é€’å½’ç®€è®º</title>
    <url>/2021/04/02/%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86%E5%A4%8D%E4%B9%A0%E4%B8%8E%E9%80%92%E5%BD%92%E7%AE%80%E8%AE%BA/</url>
    <content><![CDATA[<p>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æJavaè¯­è¨€æè¿°ã€‹ç¬¬ä¸€ç« 1.2ä¸1.3èŠ‚<strong>è¯»ä¹¦ç¬”è®°</strong></p>
<span id="more"></span>
<h2 id="1-æ•°å­¦çŸ¥è¯†å¤ä¹ ">1. æ•°å­¦çŸ¥è¯†å¤ä¹ </h2>
<h3 id="1-1-æŒ‡æ•°">1.1 æŒ‡æ•°</h3>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mi>A</mi></msup><msup><mi>X</mi><mi>B</mi></msup><mo>=</mo><msup><mi>X</mi><mrow><mi>A</mi><mo>+</mo><mi>B</mi></mrow></msup></mrow><annotation encoding="application/x-tex">X^AX^B=X^{A+B}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.891331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.891331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msup><mi>X</mi><mi>A</mi></msup><msup><mi>X</mi><mi>B</mi></msup></mfrac><mo>=</mo><msup><mi>X</mi><mrow><mi>A</mi><mo>âˆ’</mo><mi>B</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\frac{X^A}{X^B}=X^{A-B}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.204331em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183309999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.767331em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.891331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.891331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mbin mtight">âˆ’</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<table><br></table>
<h3 id="1-2å¯¹æ•°">1.2å¯¹æ•°</h3>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé™¤éç‰¹åˆ«å£°æ˜ã€‚å¦åˆ™æ‰€æœ‰å¯¹æ•°éƒ½æ˜¯ä»¥2ä¸ºåº•ã€‚</p>
<p><strong>å®šç†1.1</strong>ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>A</mi></msub><mi>B</mi><mo>=</mo><mfrac><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>C</mi></msub><mi>B</mi></mrow><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>C</mi></msub><mi>A</mi></mrow></mfrac><mo separator="true">;</mo><mspace width="1em"><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mi>A</mi><mo mathvariant="normal">â‰ </mo><mn>1</mn></mspace></mrow><annotation encoding="application/x-tex">log_AB=\frac{log_CB}{log_CA}; \quad A,B,C&gt;0,A\ne1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.25188em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">A</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel">î€ </span></span><span class="fix"></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p>
<p><strong>å®šç†1.2</strong>:</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>A</mi><mi>B</mi><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>A</mi><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>B</mi><mo separator="true">;</mo><mspace width="1em"><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo>&gt;</mo><mn>0</mn></mspace></mrow><annotation encoding="application/x-tex">logAB=logA+logB; \quad A,B&gt;0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p>
<p><strong>æ¨å¯¼</strong>ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>A</mi><mi mathvariant="normal">/</mi><mi>B</mi><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>A</mi><mo>âˆ’</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">logA/B=logA-logB
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">A</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msup><mi>A</mi><mi>B</mi></msup><mo stretchy="false">)</mo><mo>=</mo><mi>B</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>A</mi></mrow><annotation encoding="application/x-tex">log(A^B)=BlogA
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">A</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>X</mi><mo>&lt;</mo><mi>X</mi><mtext>å¯¹æ‰€æœ‰çš„</mtext><mi>X</mi><mo>&gt;</mo><mn>0</mn><mtext>æˆç«‹</mtext></mrow><annotation encoding="application/x-tex">logX&lt;Xå¯¹æ‰€æœ‰çš„X&gt;0æˆç«‹
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord cjk_fallback">å¯¹</span><span class="mord cjk_fallback">æ‰€</span><span class="mord cjk_fallback">æœ‰</span><span class="mord cjk_fallback">çš„</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord cjk_fallback">æˆ</span><span class="mord cjk_fallback">ç«‹</span></span></span></span></span></p>
<table><br></table>
<h3 id="1-3-çº§æ•°">1.3 çº§æ•°</h3>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><msup><mn>2</mn><mi>i</mi></msup><mo>=</mo><msup><mn>2</mn><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\sum_{i=0}^n2^i=2^{N+1}-1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.974661em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.891331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><msup><mi>A</mi><mi>i</mi></msup><mo>=</mo><mfrac><mrow><msup><mi>A</mi><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>A</mi><mo>âˆ’</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i=0}^nA^i=\frac{A^{N+1}-1}{A-1}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.287661em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183309999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>å¦‚æœ0&lt;A&lt;1 åˆ™</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msup><mi>A</mi><mi>i</mi></msup><mo>â‰¤</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>âˆ’</mo><mi>A</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i=1}^N A^i \le \frac{1}{1-A}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.09077em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">A</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mi>i</mi><mo>=</mo><mfrac><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo>â‰ˆ</mo><mfrac><msup><mi>N</mi><mn>2</mn></msup><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i=1}^N i = \frac{N(N+1)}{2} \approx \frac{N^2}{2}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msup><mi>i</mi><mn>2</mn></msup><mo>=</mo><mfrac><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>6</mn></mfrac><mo>â‰ˆ</mo><mfrac><msup><mi>N</mi><mn>3</mn></msup><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i=1}^N {i^2} = \frac{N(N+1)(2N+1)}{6} \approx \frac{N^3}{3}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msup><mi>i</mi><mi>k</mi></msup><mo>â‰ˆ</mo><mfrac><msup><mi>N</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mrow><mi mathvariant="normal">âˆ£</mi><mi>k</mi><mo>+</mo><mn>1</mn><mi mathvariant="normal">âˆ£</mi></mrow></mfrac><mspace width="1em"><mi>k</mi><mo mathvariant="normal">â‰ </mo><mo>âˆ’</mo><mn>1</mn></mspace></mrow><annotation encoding="application/x-tex">\sum_{i=1}^N {i^k} \approx \frac{N^{k+1}}{|k+1|} \quad k \neq -1 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4621079999999997em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5261079999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mord">âˆ£</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel">î€ </span></span><span class="fix"></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span></span></p>
<p>å½“k=-1æ—¶ï¼Œä¸Šé¢çš„å…¬å¼ä¸æˆç«‹ï¼Œéœ€è¦ä¸‹é¢çš„å…¬å¼ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">H_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºè°ƒå’Œ å’Œï¼Œä¸‹é¢è¿‘ä¼¼å¼çš„è¯¯å·®<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi><mo>â‰ˆ</mo><mn>0.57721566</mn></mrow><annotation encoding="application/x-tex">\gamma \approx 0.57721566</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6775599999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mord">7</span><span class="mord">7</span><span class="mord">2</span><span class="mord">1</span><span class="mord">5</span><span class="mord">6</span><span class="mord">6</span></span></span></span>ï¼Œç§°ä¸ºæ¬§æ‹‰å¸¸æ•°</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>N</mi></msub><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mfrac><mn>1</mn><mi>i</mi></mfrac><mo>â‰ˆ</mo><mi>l</mi><mi>o</mi><msubsup><mi>g</mi><mi>e</mi><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">H_N = \sum_{i=1}^N \frac{1}{i} \approx log_e^N
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">i</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.138331em;vertical-align:-0.247em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">e</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>ä»¥ä¸‹ä¸€èˆ¬ä»£æ•°è¿ç®—ï¼š</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mi>N</mi><mi>f</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum _{i=1}^N f(N) = Nf(N)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><msub><mi>n</mi><mn>0</mn></msub></mrow><mi>N</mi></munderover><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><msub><mi>n</mi><mn>0</mn></msub><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum _{i=n_0}^N f(i) = \sum _{i=1}^Nf(i) - \sum _{i=1}^{n_0-1}f(i)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.206105em;vertical-align:-1.377769em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.377769em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.0898820000000002em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8122130000000003em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.311105em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span></span></p>
<table><br></table>
<h3 id="1-4-æ¨¡è¿ç®—">1.4 æ¨¡è¿ç®—</h3>
<p>å¦‚æœA-Bæ•´<strong>é™¤ä»¥</strong>Nï¼Œé‚£ä¹ˆAä¸Bæ¨¡Nçš„ä½™æ•°æ˜¯ç›¸åŒçš„ã€‚è®°ä½œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>â‰¡</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A \equiv B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>(mod N)ã€‚</p>
<table><br></table>
<h3 id="1-5-è¯æ˜æ–¹æ³•">1.5 è¯æ˜æ–¹æ³•</h3>
<h4 id="1-å½’çº³è¯æ˜æ³•">1. å½’çº³è¯æ˜æ³•</h4>
<ol>
<li>ç¬¬ä¸€æ­¥è¯æ˜<strong>åŸºå‡†æƒ…å½¢</strong>ï¼Œç¡®å®šå®šç†å¯¹æœ€åŸºå‡†çš„å€¼çš„æ­£ç¡®æ€§ã€‚</li>
<li>è¿›è¡Œå½’çº³å‡è®¾ï¼Œå‡è®¾å®šç†å¯¹ç›´åˆ°æœ‰é™æ•° k çš„çš„æ‰€æœ‰æƒ…å†µéƒ½æ˜¯æˆç«‹çš„ã€‚</li>
<li>ä¾æ®è¿™ä¸ªå‡è®¾è¯æ˜å®šç†å¯¹ä¸‹ä¸€ä¸ªå€¼(k+1)æˆç«‹ã€‚</li>
</ol>
<h5 id="1-1è¯æ˜æ¼”ç¤º">1.1è¯æ˜æ¼”ç¤º</h5>
<p>â€ƒâ€ƒè¯æ˜æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F_0=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">F_1=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>2</mn></msub><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">F_2=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>3</mn></msub><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">F_3=3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>4</mn></msub><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">F_4=5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span>, â€¦, ,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>i</mi></msub><mo>=</mo><msub><mi>F</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>F</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">F_i=F_{i-1}+F_{i-2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>, æ»¡è¶³å¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>â‰¥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i\ge1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79549em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œæœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>i</mi></msub><mo>&lt;</mo><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">F_i &lt; (5/3)^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0746639999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span>ã€‚</p>
<p>è¯æ˜ï¼š</p>
<ol>
<li>åŸºå‡†æƒ…å½¢ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn><mo>&lt;</mo><mfrac><mn>5</mn><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">F_1=1&lt; {\frac{5}{3}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>2</mn></msub><mo>=</mo><mn>2</mn><mo>&lt;</mo><mfrac><mn>25</mn><mn>9</mn></mfrac></mrow><annotation encoding="application/x-tex">F_2 = 2&lt; {\frac{25}{9}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li>
<li>å½’çº³å‡è®¾ï¼šå‡è®¾å®šç†å¯¹äºi=1ï¼Œ2ï¼Œâ€¦ï¼Œkæˆç«‹ï¼Œåˆ™æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>k</mi></msub><mo>&lt;</mo><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">F_k &lt; (5/3)^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span></li>
<li>è¯æ˜k+1æˆç«‹ï¼š
<ol>
<li>ç”±å®šä¹‰æœ‰ï¼š  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>F</mi><mi>k</mi></msub><mo>+</mo><msub><mi>F</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">F_{k+1} = F_k + F_{k-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>åˆ™æœ‰ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>&lt;</mo><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mi>k</mi></msup><mo>+</mo><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>=</mo><mo stretchy="false">(</mo><mn>3</mn><mi mathvariant="normal">/</mi><mn>5</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>+</mo><mrow><mo stretchy="false">(</mo><mn>3</mn><mi mathvariant="normal">/</mi><mn>5</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>3</mn><mi mathvariant="normal">/</mi><mn>5</mn><mo>+</mo><mn>9</mn><mi mathvariant="normal">/</mi><mn>25</mn><mo stretchy="false">)</mo><mrow><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup></mrow><mo>&lt;</mo><mo stretchy="false">(</mo><mn>5</mn><mi mathvariant="normal">/</mi><mn>3</mn><msup><mo stretchy="false">)</mo><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">F_{k+1} &lt; (5/3)^k + (5/3)^{k-1} =(3/5)(5/3)^{k+1} + {(3/5)^2}{(5/3)^{k+1}} = (3/5 + 9/25){(5/3)^{k+1}} &lt; (5/3)^{k+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0991079999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0991079999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mord">/</span><span class="mord">5</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0991079999999998em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">3</span><span class="mord">/</span><span class="mord">5</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mord">/</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0991079999999998em;vertical-align:-0.25em;"></span><span class="mord">9</span><span class="mord">/</span><span class="mord">2</span><span class="mord">5</span><span class="mclose">)</span><span class="mord"><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0991079999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">/</span><span class="mord">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></li>
</ol>
</li>
</ol>
<h4 id="2-åè¯æ³•">2. åè¯æ³•</h4>
<ol>
<li>å‡è®¾æŸä¸ªå®šç†ä¸æˆç«‹ã€‚</li>
<li>è¯æ˜è¯¥å‡è®¾å¯¼è‡´æŸä¸ªå·²çŸ¥çš„æ€§è´¨ä¸æˆç«‹ï¼Œè¯æ˜åŸå‡è®¾æ˜¯é”™è¯¯çš„(å®šç†æˆç«‹)ã€‚</li>
</ol>
<h5 id="2-1-è¯æ˜æ¼”ç¤ºï¼š">2.1 è¯æ˜æ¼”ç¤ºï¼š</h5>
<p>â€ƒâ€ƒè¯æ˜å­˜åœ¨æ— ç©·å¤šä¸ªç´ æ•°ã€‚</p>
<p>è¯æ˜ï¼š</p>
<p>1.å‡è®¾å®šç†ä¸æˆç«‹ï¼šå‡è®¾ä¸å­˜åœ¨æ— ç©·å¤šä¸ªç´ æ•°ã€‚</p>
<p>2.æ¨å¯¼æŸä¸ªå·²çŸ¥æ€§è´¨ä¸æˆç«‹ï¼š</p>
<ol>
<li>ç”±1çš„å‡è®¾æœ‰æœ€å¤§ç´ æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">P_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä»¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>P</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>P</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">P_1,P_2,...,P_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¾åºæ’åˆ—ã€‚</li>
<li>è€ƒè™‘æœ‰ ï¼š    <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><msub><mi>P</mi><mn>1</mn></msub><msub><mi>P</mi><mn>2</mn></msub><msub><mi>P</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>P</mi><mi>k</mi></msub><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N=P_1 P_2 P_3...P_k +1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>æ˜¾ç„¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&gt;</mo><msub><mi>P</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">N&gt;P_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæ ¹æ®å‡è®¾(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">P_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºæœ€å¤§ç´ æ•°ï¼Œåˆ™Næ¯”ä¸ä¸ºç´ æ•°)ã€‚ä½†æ˜¯Nä¸èƒ½æ•´<strong>é™¤ä»¥</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>P</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>P</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">P_1,P_2,...,P_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚äº§ç”ŸçŸ›ç›¾ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæ•´æ•°è¦ä¹ˆæ˜¯ç´ æ•°ï¼Œè¦ä¹ˆæ˜¯ç´ æ•°çš„ä¹˜ç§¯ã€‚</li>
<li>å› æ­¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">P_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯æœ€å¤§çš„ç´ æ•°å‡è®¾ä¸æˆç«‹ï¼Œæ„å‘³å®šç†æˆç«‹ã€‚</li>
</ol>
<table><br></table>
<h2 id="2-é€’å½’ç®€è®º">2. é€’å½’ç®€è®º</h2>
<h3 id="2-1-é€’å½’å››æ¡åŸºæœ¬æ³•åˆ™ï¼š">2.1 é€’å½’å››æ¡åŸºæœ¬æ³•åˆ™ï¼š</h3>
<ol>
<li>åŸºå‡†æƒ…å½¢ï¼šå¿…é¡»åŒ…å«æŸäº›åŸºå‡†æƒ…å½¢ï¼Œæ— éœ€é€’å½’å°±èƒ½è§£å‡ºã€‚(ç¨‹åºå‡ºæ ˆæ¡ä»¶)</li>
<li>ä¸æ–­æ¨è¿›ï¼šæ¯ä¸€æ¬¡é€’å½’ï¼Œå¿…é¡»æœç€åŸºå‡†æƒ…å½¢æ¨è¿›</li>
<li>è®¾è®¡æ³•åˆ™ï¼šå‡è®¾æ‰€æœ‰é€’å½’è°ƒç”¨éƒ½èƒ½è¿è¡Œ</li>
<li>åˆæˆæ•ˆç›Šæ³•åˆ™ï¼šåœ¨æ±‚è§£ä¸€ä¸ªé—®é¢˜çš„åŒä¸€å®ä¾‹æ—¶ï¼Œåˆ‡å‹¿åœ¨ä¸åŒçš„é€’å½’è°ƒç”¨ä¸­åšé‡å¤æ€§çš„å·¥ä½œã€‚(åœ¨è®¡ç®—F(n-1)æ—¶åŒæ—¶è°ƒç”¨äº†F(n-2)ï¼Œè€ŒåŒæ—¶åŸå¼ä¹Ÿéœ€è¦è°ƒç”¨ä¸€æ¬¡F(n-2)ï¼Œé‡å¤)</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecurdiveTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// é™æ€æ–¹æ³•é‡Œé¢ä¸èƒ½è°ƒæ™®é€šæ–¹æ³•</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span>  f(<span class="number">4</span>); <span class="comment">//è®¡ç®—f(4s)</span></span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// é€’å½’å‡ºå£</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * f(x-<span class="number">1</span>) + x * x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»“æœ58</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>csåŸºç¡€</category>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>HotSpotçš„ç»†èŠ‚å®ç°</title>
    <url>/2021/03/30/HotSpot%E7%9A%84%E7%BB%86%E8%8A%82%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p>HotSpotçš„ç»†èŠ‚å®ç° (è¯»ä¹¦ç¬”è®°)</p>
<span id="more"></span>
<h3 id="1-æ ¹èŠ‚ç‚¹-gc-roots-æšä¸¾">1. æ ¹èŠ‚ç‚¹(GC Roots)æšä¸¾</h3>
<blockquote>
<p>æšä¸¾å‡ºæ‰€æœ‰GC Rootsæ ¹èŠ‚ç‚¹</p>
</blockquote>
<p>â€ƒâ€ƒå¯ä»¥ä½œä¸ºGC Rootsçš„èŠ‚ç‚¹ä¸»è¦æœ‰ï¼šå…¨å±€æ€§çš„å¼•ç”¨ä¸ä¸Šä¸‹æ–‡æ‰§è¡Œï¼Œè¯¦è§<a href="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" title="JVMåƒåœ¾å›æ”¶">JVMåƒåœ¾å›æ”¶</a>çš„å¯è¾¾æ€§åˆ†æå°èŠ‚ã€‚ç›®å‰ï¼Œæ‰€æœ‰æ”¶é›†å™¨è¿›è¡Œ<strong>æ ¹èŠ‚ç‚¹(GC Roots)æšä¸¾</strong>å¿…é¡»STWã€‚ç°åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•è€—æ—¶æŸ¥æ‰¾å¼•ç”¨é“¾å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å¹¶å‘ã€‚<br>
â€ƒâ€ƒç›®å‰çš„Javaè™šæ‹Ÿæœºä½¿ç”¨å‡†ç¡®å¼åƒåœ¾å›æ”¶é›†ï¼Œæ‰€ä»¥å½“ç”¨æˆ·çº¿ç¨‹1åï¼Œå¹¶ä¸éœ€è¦æ£€æŸ¥å®Œæ‰€æœ‰ä¸Šä¸‹æ–‡å’Œå…¨å±€å¼•ç”¨ä½ç½®ï¼Œè™šæ‹Ÿæœºåº”å½“<strong>ç›´æ¥å¾—åˆ°å“ªäº›åœ°æ–¹å­˜æ”¾å¯¹è±¡å¼•ç”¨</strong>ã€‚HotSpotä½¿ç”¨OopMapçš„æ•°æ®ç»“æ„ã€‚(å¹¶ä¸éœ€è¦çœŸçš„å…¨éƒ¨ä»æ–¹æ³•åŒºç­‰GC Rootså¼€å§‹æŸ¥æ‰¾)ã€‚</p>
<table><br></table>
<h3 id="2-å®‰å…¨ç‚¹-safepoint">2. å®‰å…¨ç‚¹(SafePoint)</h3>
<blockquote>
<p>åœ¨&quot;ç‰¹å®šçš„ä½ç½®&quot;è®°å½•ä¿®æ”¹å¼•ç”¨å…³ç³»çš„æŒ‡ä»¤</p>
</blockquote>
<p>â€ƒâ€ƒåœ¨ç¨‹åºè¿è¡ŒæœŸé—´å¾ˆå¤šæŒ‡ä»¤éƒ½æ˜¯æœ‰å¯èƒ½ä¿®æ”¹å¼•ç”¨å…³ç³»çš„ï¼Œå³è¦ä¿®æ”¹OopMapï¼Œå¦‚æœå¯¹æ¯ä¸€æ¡æŒ‡ä»¤éƒ½ç”ŸæˆOopMapï¼Œå°†ä¼šéœ€è¦å¤§é‡çš„ç©ºé—´å­˜å‚¨æ•°æ®ç»“æ„ã€‚å› æ­¤è®¾ç½®äº†SafePointå»å¼ºåˆ¶ç”¨æˆ·ç¨‹åºæ‰§è¡Œåˆ°SafePointæš‚åœå¼€å§‹å¤„ç†OopMap å¹¶GCã€‚<br>
â€ƒâ€ƒå®‰å…¨ç‚¹ä½ç½®çš„é€‰å–åŸºæœ¬ä¸Šæ˜¯ä»¥â€œæ˜¯å¦å…·æœ‰è®©ç¨‹åºé•¿æ—¶é—´æ‰§è¡Œçš„ç‰¹å¾â€ä¸ºæ ‡å‡†è¿›è¡Œé€‰å®šçš„ã€‚(â€œé•¿æ—¶é—´æ‰§è¡Œâ€çš„æœ€æ˜æ˜¾ç‰¹å¾å°±æ˜¯æŒ‡ä»¤åºåˆ—çš„å¤ç”¨ï¼Œä¸æŒ‡ä»¤é•¿çŸ­æ— å…³ã€‚ä¾‹å¦‚æ–¹æ³•è°ƒç”¨ã€å¾ªç¯è·³è½¬ã€å¼‚å¸¸è·³è½¬ ç­‰éƒ½å±äºæŒ‡ä»¤åºåˆ—å¤ç”¨ï¼Œæ‰€ä»¥åªæœ‰å…·æœ‰è¿™äº›åŠŸèƒ½çš„æŒ‡ä»¤æ‰ä¼šäº§ç”Ÿå®‰å…¨ç‚¹)ã€‚</p>
<p>â€ƒâ€ƒéœ€è¦è€ƒè™‘æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨å®‰å…¨ç‚¹åœé¡¿ï¼š<strong>æŠ¢å…ˆå¼ä¸­æ–­ã€ä¸»åŠ¨å¼ä¸­æ–­</strong>ã€‚</p>
<ul>
<li>æŠ¢å…ˆå¼ä¸­æ–­ï¼šGCæ—¶å…ˆä¸­æ–­æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹ï¼Œå¦‚æœå‘ç°æœ‰çº¿ç¨‹æ²¡æœ‰åˆ°è¾¾å®‰å…¨ç‚¹ï¼Œæ¢å¤æ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰çº¿ç¨‹åˆ°å®‰å…¨ç‚¹(ç›®å‰å‡ ä¹ä¸ç”¨)</li>
<li>ä¸»åŠ¨å¼ä¸­æ–­ï¼šGCæ—¶ï¼Œä¸ç›´æ¥å¯¹çº¿ç¨‹æ“ä½œï¼Œè®°å½•ä¸€ä¸ªæ ‡å¿—ï¼Œå„çº¿ç¨‹ä¸æ–­è½®è¯¢è¿™ä¸ªæ ‡å¿—(æ ‡å¿—ä¸å®‰å…¨ç‚¹é‡åˆ)ï¼Œä¸€æ—¦å‘ç°ä¸­æ–­æ ‡å¿—ä¸ºçœŸæ—¶ï¼Œåœ¨è‡ªå·±æœ€è¿‘çš„ä¸­æ–­ç‚¹ä¸»åŠ¨ä¸­æ–­æŒ‚èµ·ã€‚</li>
</ul>
<p>HotSpotä¸ºäº†æé«˜è½®è¯¢çš„æ•ˆç‡ï¼Œä½¿ç”¨å†…å­˜ä¿æŠ¤é™·é˜±æ–¹å¼ï¼Œå°†è½®è¯¢æ“ä½œç²¾ç®€è‡³æ±‡ç¼–æŒ‡ä»¤ã€‚<br>
<strong>å†…å­˜ä¿æŠ¤é™·é˜±</strong>ï¼šéœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ï¼ŒæŠŠxxå†…å­˜é¡µè®¾ç½®ä¸å¯è¯»ï¼Œæ‰§è¡ŒtestæŒ‡ä»¤ä¼šäº§ç”Ÿä¸€ä¸ªè‡ªé™·å¼‚å¸¸ä¿¡å·ï¼Œè¢«é¢„å…ˆæ³¨å†Œçš„å¼‚å¸¸æŒ‚èµ·ç­‰å¾…ã€‚</p>
<table><br></table>
<h3 id="3-å®‰å…¨åŒºåŸŸ">3. å®‰å…¨åŒºåŸŸ</h3>
<blockquote>
<p>æŒ‡èƒ½å¤Ÿç¡®ä¿åœ¨æŸä¸€æ®µä»£ç ç‰‡æ®µä¹‹ä¸­ï¼Œå¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ï¼Œåœ¨è¿™ä¸ªåŒºåŸŸä¸­ä»»æ„åœ°æ–¹å¼€å§‹åƒåœ¾æ”¶é›†éƒ½æ˜¯å®‰å…¨çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®‰å…¨åŒºåŸŸçœ‹ä½œè¢«æ‰©å±•æ‹‰ä¼¸äº†çš„å®‰å…¨ç‚¹ã€‚</p>
</blockquote>
<p>â€ƒâ€ƒé•¿æ—¶é—´ä¸æ‰§è¡Œçš„æŸæ®µä»£ç ï¼Œè¯¥çº¿ç¨‹æ— æ³•å“åº”è™šæ‹Ÿæœºçš„ä¸­æ–­è¯·æ±‚ï¼Œå¿…é¡»å¼•å…¥å®‰å…¨åŒºåŸŸ(Safe Region)è§£å†³ã€‚</p>
<p>â€ƒâ€ƒå½“ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œåˆ°<strong>å®‰å…¨åŒºåŸŸ</strong>é‡Œé¢çš„ä»£ç æ—¶ï¼Œé¦–å…ˆæ ‡è¯†è‡ªå·±è¿›å…¥å®‰å…¨åŒºåŸŸã€‚åƒåœ¾æ”¶é›†æ—¶ï¼Œä¸éœ€è¦å¤„ç†è¿™äº›å®‰å…¨åŒºåŸŸçš„çº¿ç¨‹ã€‚å½“çº¿ç¨‹ç¦»å¼€å®‰å…¨åŒºåŸŸï¼Œè¦æ£€æŸ¥è™šæ‹Ÿæœºæ˜¯å¦å·²ç»å®Œæˆæ ¹èŠ‚ç‚¹æšä¸¾ã€‚å¦‚æœå®Œæˆï¼Œçº¿ç¨‹æ­£å¸¸ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æ”¶åˆ°å¯ä»¥ç¦»å¼€å®‰å…¨åŒºåŸŸçš„ä¿¡å·ã€‚</p>
<table><br></table>
<h3 id="4-è®°å¿†é›†ä¸å¡è¡¨">4. è®°å¿†é›†ä¸å¡è¡¨</h3>
<h4 id="4-1-è®°å¿†é›†">4.1 è®°å¿†é›†</h4>
<blockquote>
<p>è®°å¿†é›†ï¼šè®°å½•ä»éæ”¶é›†åŒºåŸŸæŒ‡å‘æ”¶é›†åŒºåŸŸçš„æŒ‡é’ˆé›†åˆçš„æŠ½è±¡æ•°æ®ç»“æ„ã€‚</p>
</blockquote>
<p>â€ƒâ€ƒè®°å¿†é›†æ˜¯ä¸ºäº†è§£å†³å¯¹è±¡è·¨ä»£å¼•ç”¨çš„é—®é¢˜ï¼Œæ–°ç”Ÿä»£å»ºç«‹çš„æ•°æ®ç»“æ„ï¼Œé¿å…æŠŠè€å¹´ä»£åŠ å…¥GC Rootsæ‰«æèŒƒå›´ã€‚å¦‚æœä¸è€ƒè™‘æ•ˆç‡å’Œæˆæœ¬ï¼Œæœ€ç®€å•çš„å®ç°å¯ä»¥ç”¨éæ”¶é›†åŒºåŸŸä¸­æ‰€æœ‰è·¨ä»£å¼•ç”¨çš„å¯¹è±¡æ•°ç»„å®ç°ã€‚åƒåœ¾æ”¶é›†å™¨ä¸éœ€è¦è¿™ä¹ˆå®Œæ•´çš„è®°å½•ç²¾åº¦ã€‚</p>
<ul>
<li>å­—é•¿ç²¾åº¦ï¼šæ¯ä¸ªè®°å½•ç²¾ç¡®åˆ°ä¸€ä¸ªæœºå™¨å­—é•¿(å¤„ç†å™¨å¯»å€ä½ï¼Œå¦‚32ä½ã€64ä½)ï¼Œè¯¥å­—åŒ…å«è·¨ä»£æŒ‡é’ˆã€‚</li>
<li>å¯¹è±¡ç²¾åº¦ï¼šæ¯ä¸ªè®°å½•ç²¾ç¡®åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å­—æ®µå«æœ‰ä¸€ä¸ªè·¨ä»£æŒ‡é’ˆã€‚</li>
<li>å¡ç²¾åº¦ï¼šæ¯ä¸ªè®°å½•ç²¾ç¡®åˆ°ä¸€å—å†…å­˜åŒºåŸŸï¼Œè¯¥åŒºåŸŸå«æœ‰è·¨ä»£æŒ‡é’ˆã€‚</li>
</ul>
<h4 id="4-2-å¡è¡¨">4.2 å¡è¡¨</h4>
<blockquote>
<p>ä¸Šé¢çš„å¡ç²¾åº¦å°±æ˜¯ç”¨å¡è¡¨å®ç°çš„è®°å¿†é›†ï¼Œ<strong>å¡è¡¨å°±æ˜¯è®°å¿†é›†çš„ä¸€ç§å…·ä½“ä½“ç°</strong>ï¼Œå®ƒå®šä¹‰äº†è®°å¿†é›†çš„è®°å½•ç²¾åº¦ã€ä¸å †å†…å­˜æ˜ å°„çš„å…³ç³»(å¡è¡¨ä¸è®°å¿†é›†ç±»æ¯”HashMapä¸Mapçš„å…³ç³»è®°å¿†)</p>
</blockquote>
<p>â€ƒâ€ƒå¡è¡¨çš„æœ€ç®€å•çš„å½¢å¼å¯ä»¥åªæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒHotSpoté»˜è®¤å¡è¡¨é€»è¾‘</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CARD_TABLE [this address &gt;&gt; 9] = 0;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒå­—èŠ‚æ•°ç»„CARD_TABLEçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¯¹åº”ç€å…¶è¡¨ç¤ºåŒºåŸŸä¸­ä¸€å—å¤§å°çš„å†…å­˜å—ï¼Œè¿™ä¸ªå†…å­˜å—è¢«ç§°ä½œ&quot;<strong>å¡é¡µ</strong>&quot;(Card Page)ã€‚ä¸€èˆ¬å¡é¡µéƒ½æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>å­—èŠ‚æ•°ã€‚å¦‚ä¸Šä»£ç ï¼ŒHotSpotè™šæ‹Ÿæœºä½¿ç”¨çš„å¡é¡µæ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">2^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>ï¼Œå³512å­—èŠ‚(åœ°å€å³ç§»9ä½ï¼Œåœ°å€é™¤ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">2^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>)ã€‚<br>
å¦‚æœ<strong>å¡è¡¨</strong>æ ‡è¯†å†…å­˜åŒºåŸŸçš„èµ·å§‹åœ°å€æ˜¯0x0000çš„è¯ï¼Œæ•°ç»„CARD_TABLEçš„ç¬¬0ã€1ã€2å·å…ƒç´ ï¼Œåˆ†åˆ«å¯¹åº”äº† åœ°å€èŒƒå›´ä¸º0x0000ï½0x01FFã€0x0200ï½0x03FFã€0x0400ï½0x05FFçš„å¡é¡µå†…å­˜å—ã€‚</p>
<img src="/2021/03/30/HotSpot%E7%9A%84%E7%BB%86%E8%8A%82%E5%AE%9E%E7%8E%B0/å¡è¡¨å¯¹å¡é¡µå¯»å€.png" alt="å¡è¡¨å¯¹å¡é¡µå¯»å€" style="zoom:80%;">
<p>â€ƒâ€ƒä¸€ä¸ªå¡é¡µçš„å†…å­˜ä¸­é€šå¸¸åŒ…å«ä¸æ­¢ä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦å¡é¡µå†…æœ‰ä¸€ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰å¯¹è±¡çš„å­—æ®µå­˜åœ¨ç€è·¨ä»£ æŒ‡é’ˆï¼Œé‚£å°±å°†å¯¹åº”å¡è¡¨çš„æ•°ç»„å…ƒç´ çš„å€¼æ ‡è¯†ä¸º1ï¼Œç§°ä¸ºè¿™ä¸ªå…ƒç´ å˜è„ï¼ˆDirtyï¼‰ï¼Œæ²¡æœ‰åˆ™æ ‡è¯†ä¸º0ã€‚åœ¨åƒ åœ¾æ”¶é›†å‘ç”Ÿæ—¶ï¼Œåªè¦ç­›é€‰å‡ºå¡è¡¨ä¸­å˜è„çš„å…ƒç´ ï¼Œå°±èƒ½è½»æ˜“å¾—å‡ºå“ªäº›å¡é¡µå†…å­˜å—ä¸­åŒ…å«è·¨ä»£æŒ‡é’ˆï¼ŒæŠŠå®ƒä»¬åŠ å…¥GC Rootsä¸­ä¸€å¹¶æ‰«æã€‚</p>
<table><br></table>
<h3 id="5-å†™å±éšœ">5. å†™å±éšœ</h3>
<p>â€ƒâ€ƒä½¿ç”¨è®°å¿†é›†ç¼©å‡GC Rootsæ‰«æèŒƒå›´åï¼Œè¿˜éœ€è¦è§£å†³<strong>å¡è¡¨</strong>çš„å…ƒç´ ç»´æŠ¤é—®é¢˜ï¼Œä¾‹å¦‚å®ƒä»¬ä½•æ—¶å˜è„ã€è°æŠŠå®ƒä»¬å˜è„ã€‚</p>
<ul>
<li>ä½•æ—¶å˜è„ï¼šæœ‰å…¶ä»–åˆ†ä»£åŒºåŸŸå¯¹è±¡å¼•ç”¨æœ¬åŒºåŸŸå¯¹è±¡æ—¶ï¼Œå¡è¡¨å˜è„ã€‚</li>
<li>è°æ“ä½œï¼šå†™å±éšœ(Writte Barrier)ã€‚</li>
</ul>
<blockquote>
<p>å†™å±éšœï¼šçœ‹ä½œè™šæ‹Ÿæœºå±‚é¢å¯¹&quot;å¼•ç”¨ç±»å‹å­—æ®µèµ‹å€¼&quot;è¿™ä¸ªåŠ¨ä½œçš„AOPåˆ‡é¢ï¼Œåœ¨å¼•ç”¨å¯¹è±¡èµ‹å€¼æ—¶ä¼šäº§ç”Ÿä¸€ä¸ªç¯å½¢é€šçŸ¥ï¼Œä¾›ç¨‹åºæ‰§è¡Œé¢å¤–åŠ¨ä½œã€‚ç›´è‡³G1æ”¶é›†å™¨å‡ºç°ä¹‹å‰ï¼Œå…¶ä»–æ”¶é›†å™¨éƒ½åªç”¨åˆ°äº†å†™åå±éšœã€‚</p>
</blockquote>
<p>â€ƒâ€ƒå¼€å¯å†™å±éšœä¼šå¯¼è‡´æ¯æ¬¡å¼•ç”¨æ›´æ–°äº§ç”Ÿé¢çš„å¼€é”€ã€‚<br>
â€ƒâ€ƒå¡è¡¨åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹é¢ä¸´&quot;ä¼ªå…±äº«&quot;é—®é¢˜ï¼šç°ä»£å¤„ç†å™¨çš„ç¼“å­˜ç³»ç»Ÿæ˜¯ä»¥ç¼“å­˜è¡Œä¸ºå•ä½å­˜å‚¨çš„ï¼Œå½“å¤šçº¿ç¨‹ä¿®æ”¹äº’ç›¸ç‹¬ç«‹çš„å˜é‡æ—¶ï¼Œå¦‚æœè¿™äº›å˜é‡æ°å¥½ä½äºåŒä¸€ä¸ªç¼“å­˜è¡Œï¼Œä¼šå½¼æ­¤å½±å“(å†™å›ã€æ— æ•ˆåŒ–ã€åŒæ­¥)ï¼Œå¯¼è‡´æ€§èƒ½é™ä½ã€‚<br>
å¦‚æœå¤„ç†å™¨çš„ç¼“å­˜è¡Œå¤§å°ä¸º64å­—èŠ‚ï¼Œç”±äºä¸€ä¸ªå¡è¡¨å…ƒç´ å 1ä¸ªå­—èŠ‚ï¼Œ64ä¸ªå¡è¡¨å…ƒç´ å°†å…±äº«åŒä¸€ä¸ªç¼“å­˜è¡Œï¼Œè¿™64ä¸ªå¡è¡¨å…ƒç´ å¯¹åº”çš„å¡é¡µæ€»å†…å­˜ä¸º32KB(64*512å­—èŠ‚)ã€‚å¦‚æœä¸åŒçº¿ç¨‹æ›´æ–°çš„å¯¹è±¡æ­£å¥½å¤„äº32KBçš„å†…å­˜åŒºåŸŸï¼Œå¯¼è‡´æ›´æ–°å¡è¡¨æ—¶æ­£å¥½å†™å…¥åŒä¸€ä¸ªç¼“å­˜è€Œå½±å“æ€§èƒ½ã€‚</p>
<p>é¿å…ä¼ªå…±äº«é—®é¢˜ï¼šå…ˆæ£€æŸ¥å¡è¡¨æ ‡è®°ï¼Œåªæœ‰å½“å¡è¡¨å…ƒç´ æœªè¢«æ ‡è®°æ—¶æ‰å°†å…¶å˜è„ã€‚åœ¨JDK 7ä¹‹åï¼ŒHotSpotè™šæ‹Ÿæœºå¢åŠ äº†ä¸€ä¸ªæ–°çš„å‚æ•°-XXï¼š+UseCondCardMarkï¼Œç”¨æ¥å†³å®šæ˜¯å¦å¼€å¯ å¡è¡¨æ›´æ–°çš„æ¡ä»¶åˆ¤æ–­ã€‚å¼€å¯ä¼šå¢åŠ ä¸€æ¬¡é¢å¤–åˆ¤æ–­çš„å¼€é”€ï¼Œä½†èƒ½å¤Ÿé¿å…ä¼ªå…±äº«é—®é¢˜ã€‚</p>
<table><br></table>
<h3 id="6-å¹¶å‘çš„å¯è¾¾æ€§åˆ†æ">6. å¹¶å‘çš„å¯è¾¾æ€§åˆ†æ</h3>
<blockquote>
<p>å¯è¾¾æ€§åˆ†æç†è®ºä¸Šè¦æ±‚å…¨éƒ¨è¿‡ç¨‹éƒ½åŸºäºä¸€ä¸ªèƒ½ä¿è¯ä¸€è‡´æ€§çš„å¿«ç…§ä¸­æ‰èƒ½è¿›è¡Œåˆ†æã€‚æ„å‘³ç€è¦å…¨ç¨‹STWã€‚</p>
</blockquote>
<p>â€ƒâ€ƒåœ¨æ ¹èŠ‚ç‚¹æšä¸¾ä¸­ï¼Œç”±äºOopsMapçš„å­˜åœ¨ï¼Œåœé¡¿ç›¸å¯¹å›ºå®šï¼Œä¸ä¸å †ç›¸å…³ã€‚ä½†æ˜¯GC Rootså¾€ä¸‹éå†è€—æ—¶ä¾æ—§ä¸Javaå †æˆæ­£æ¯”ä¾‹å…³ç³»ã€‚</p>
<p>â€ƒâ€ƒä¸ºç”Ÿä¹ˆå¿…é¡»ä¿è¯ä¸€è‡´å¿«ç…§æ‰èƒ½éå†ï¼Ÿ</p>
<h4 id="6-1-ä¸‰è‰²æ ‡è®°ï¼š">6.1 ä¸‰è‰²æ ‡è®°ï¼š</h4>
<ul>
<li>ç™½è‰²ï¼šå¯¹è±¡å°šæœªè¢«åƒåœ¾æ”¶é›†å™¨è®¿é—®è¿‡ã€‚å¦‚æœåœ¨åˆ†æç»“æŸé˜¶æ®µï¼Œä»æ˜¯ç™½è‰²ï¼Œåˆ™ä¸å¯è¾¾ã€‚</li>
<li>é»‘è‰²ï¼šå¯¹è±¡å·²ç»è¢«åƒåœ¾æ”¶é›†å™¨è®¿é—®è¿‡ï¼Œä¸”è¯¥å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è®¿é—®è¿‡ï¼Œé»‘è‰²å¯¹è±¡ä¸å¯èƒ½ç›´æ¥æŒ‡å‘ç™½è‰²å¯¹è±¡ã€‚</li>
<li>ç°è‰²ï¼šå¯¹è±¡å·²ç»è¢«åƒåœ¾æ”¶é›†å™¨è®¿é—®è¿‡ï¼Œä½†å¯¹è±¡ä¸Šè‡³å°‘è¿˜æœ‰ä¸€ä¸ªå¼•ç”¨æ¯ä¸€è¢«æ‰«æè¿‡ã€‚</li>
</ul>
<h4 id="5-2-ä¸‰è‰²æ ‡è®°çš„è¿‡ç¨‹ï¼š">5.2 ä¸‰è‰²æ ‡è®°çš„è¿‡ç¨‹ï¼š</h4>
<p>â€ƒâ€ƒé¦–å…ˆGCRotsè¢«æŸ“æˆç°è‰²ï¼Œä»GCRootså‘ä¸‹éå†ã€‚å°†GCRootsæŒ‡å‘ç™½è‰²çš„å¯¹è±¡åœ¨æŸ“æˆç°è‰²ï¼Œåœ¨è¯¥GCRootséå†å®Œç›´æ¥æŒ‡å‘çš„å¯¹è±¡åï¼Œè¯¥GCRootsæŸ“æˆé»‘è‰²ã€‚å†ä»è¢«æŸ“ç°è‰²çš„å¯¹è±¡å‘ä¸‹éå†ï¼Œé‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œéå†å®Œæˆåã€‚å‰©ä½™çš„ç™½è‰²å¯¹è±¡è¢«åˆ¤æ–­ä¸ºåƒåœ¾ã€‚</p>
<h4 id="5-3-å¹¶å‘ä¸‰è‰²æ ‡è®°çš„é—®é¢˜ï¼š">5.3 å¹¶å‘ä¸‰è‰²æ ‡è®°çš„é—®é¢˜ï¼š</h4>
<p>â€ƒâ€ƒå¦‚æœç”¨æˆ·æ”¶é›†çº¿ç¨‹ä¸GCçº¿ç¨‹å¹¶å‘å·¥ä½œï¼Œ å¯èƒ½ä¼šå‡ºç°ä¸¤ç§é—®é¢˜ã€‚</p>
<ol>
<li>å°†åŸæœ¬æ¶ˆäº¡çš„å¯¹è±¡æ ‡è®°ä¸ºå­˜æ´»ï¼š<br>
GCçº¿ç¨‹å°†æŸå¯¹è±¡æ ‡è®°ä¸ºé»‘è‰²ï¼Œè¿™æ—¶ç”¨æˆ·çº¿ç¨‹å°†è¯¥å¯¹è±¡çš„å¼•ç”¨å»é™¤ï¼Œå¯¼è‡´è¯¥å¯¹è±¡å®é™…åº”è¯¥æ¶ˆäº¡ï¼Œä½†æ˜¯è¢«æ ‡è®°ä¸ºé»‘è‰²ï¼Œå¯¼è‡´å­˜æ´»ã€‚(å¯ä»¥å¿å—ï¼Œç§°ä¸ºæµ®åŠ¨åƒåœ¾)ã€‚(ç‹¬ç«‹çš„éGCRootsçš„é»‘è‰²å¯¹è±¡)</li>
<li>å°†åŸæœ¬å­˜æ´»çš„å¯¹è±¡æ ‡è®°ä¸ºåƒåœ¾ï¼š
<ol>
<li>èµ‹å€¼å™¨æ’å…¥äº†ä¸€æ¡æˆ–å¤šæ¡ä»é»‘è‰²å¯¹è±¡åˆ°ç™½è‰²å¯¹è±¡çš„æ–°å¼•ç”¨ã€‚(æ·»åŠ é»‘è‰²æŒ‡å‘ç™½è‰²)</li>
<li>èµ‹å€¼å™¨åˆ é™¤äº†å…¨éƒ¨ä»ç°è‰²å¯¹è±¡åˆ°è¯¥ç™½è‰²å¯¹è±¡çš„ç›´æ¥æˆ–é—´æ¥å¼•ç”¨ã€‚(åˆ é™¤ç°è‰²æŒ‡å‘ç™½è‰²çš„é“¾æ¥)</li>
</ol>
</li>
</ol>
<p>â€ƒâ€ƒç”±äºGCä¸ä¼šå†ä»é»‘è‰²å¯¹è±¡å¼€å§‹éå†ï¼Œæ‰€ä»¥è¯¥ç™½è‰²å¯¹è±¡ä¸ä¼šå†è¢«æ ‡è®°ã€‚æ ‡è®°å®Œæˆåï¼Œè¯¥å¯¹è±¡è¢«è¯¯åˆ¤ä¸ºåƒåœ¾ã€‚(ä¸å¯å¿å—)ï¼Œéœ€è¦ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³ã€‚</p>
<p><img src="/2021/03/30/HotSpot%E7%9A%84%E7%BB%86%E8%8A%82%E5%AE%9E%E7%8E%B0/%E5%AD%98%E6%B4%BB%E5%AF%B9%E8%B1%A1%E8%AF%AF%E5%88%A4%E4%B8%BA%E6%AD%BB%E4%BA%A1.png" alt></p>
<h4 id="5-4-ä¸‰è‰²å¹¶å‘æ ‡è®°é—®é¢˜çš„è§£å†³">5.4 ä¸‰è‰²å¹¶å‘æ ‡è®°é—®é¢˜çš„è§£å†³</h4>
<blockquote>
<p>ç”±äºå¿…é¡»åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼Œåªéœ€ç ´åå…¶ä¸­ä¸€ä¸ªå³å¯ã€‚<br>
å¢é‡æ›´æ–°ä¸åŸå§‹å¿«ç…§ã€‚</p>
</blockquote>
<h5 id="5-4-1-å¢é‡æ›´æ–°">5.4.1 å¢é‡æ›´æ–°</h5>
<p>â€ƒâ€ƒå¢é‡æ›´æ–°ç ´åçš„æ˜¯ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œå½“é»‘è‰²å¯¹è±¡æ’å…¥æ–°çš„æŒ‡å‘ç™½è‰²å¯¹è±¡çš„å¼•ç”¨å…³ç³»æ—¶ï¼Œå°†è¿™ä¸ªæ–°çš„æ’å…¥è®°å½•ä¸‹æ¥ï¼Œç­‰å¹¶å‘æ‰«æç»“æŸåï¼Œå†å°†è¿™äº›è®°å½•è¿‡çš„å¼•ç”¨å…³ç³»ä¸­çš„é»‘è‰²å¯¹è±¡ä¸ºæ ¹ï¼Œé‡æ–°æ‰«æä¸€æ¬¡ã€‚(ä¸€æ—¦é»‘è‰²å¯¹è±¡æŒ‡å‘æŒ‡å‘ç™½è‰²å¯¹è±¡ï¼Œå°†é»‘è‰²å¯¹è±¡è½¬å˜ä¸ºç°è‰²)ã€‚</p>
<h5 id="5-4-2-åŸå§‹å¿«ç…§">5.4.2 åŸå§‹å¿«ç…§</h5>
<p>â€ƒâ€ƒåŸå§‹å¿«ç…§ç ´åç¬¬äºŒä¸ªæ¡ä»¶ï¼Œå½“ç°è‰²å¯¹è±¡åˆ é™¤æŒ‡å‘ç™½è‰²å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œå°†è¿™ä¸ªè¦åˆ é™¤çš„å¼•ç”¨è®°å½•ä¸‹æ¥ï¼Œåœ¨å¹¶å‘æ‰«æç»“æŸåï¼Œå°†è¿™äº›è®°å½•è¿‡çš„ç°è‰²å¯¹è±¡ä¸ºæ ¹ï¼Œä»æ–°æ‰«æä¸€æ¬¡ã€‚(æ— è®ºå¼•ç”¨å…³ç³»åˆ é™¤ä¸å¦ï¼ŒæŒ‰åˆšå¼€å§‹æ‰«æçš„é‚£ä¸€åˆ»çš„å¯¹è±¡å¿«ç…§æœç´¢)ã€‚</p>
<h4 id="5-5-ä¸‰è‰²æ ‡è®°è¡¥å……">5.5 ä¸‰è‰²æ ‡è®°è¡¥å……</h4>
<p>â€ƒâ€ƒä»¥ä¸Šå¯¹å¼•ç”¨å…³ç³»çš„æ’å…¥æˆ–åˆ é™¤ï¼Œéƒ½æ˜¯é€šè¿‡å†™å±éšœå®ç°çš„ã€‚ä¾‹å¦‚CMSæ˜¯åŸºäºå¢é‡æ›´æ–°åšå¹¶å‘æ ‡è®°ï¼ŒG1ã€Shenandoahä½¿ç”¨åŸå§‹å¿«ç…§ã€‚</p>
<table><br></table>
<h3 id="å‚è€ƒ">å‚è€ƒ</h3>
<ul>
<li>ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ç¬¬äºŒéƒ¨åˆ†ç¬¬ä¸‰ç« </li>
</ul>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>Jvm</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoç¼–è¾‘ç›¸å…³</title>
    <url>/2021/03/22/hexo%E7%BC%96%E8%BE%91%E7%9B%B8%E5%85%B3/</url>
    <content><![CDATA[<p>è®°å½•hexoå¸¸ç”¨æ“ä½œ</p>
<span id="more"></span>
<h4 id="1-hexoé¦–è¡Œç¼©è¿›ï¼š">1. hexoé¦–è¡Œç¼©è¿›ï¼š</h4>
<p>â€ƒâ€ƒä¸€ä¸ªä»£è¡¨ä¸€ä¸ªæ±‰å­—å­—ç¬¦</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&amp;emsp;</span><br></pre></td></tr></table></figure>
<h4 id="2-hexoæ–‡ç« è·³è½¬å…¶ä»–æ–‡ç« ">2.hexoæ–‡ç« è·³è½¬å…¶ä»–æ–‡ç« </h4>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">è·³è½¬åˆ°ä¸€ç¯‡åä¸º hello-world çš„æ–‡ç« </span><br><span class="line">&#123;% post_link hello-world %&#125;</span><br><span class="line">&#123;% post_link hello-world ä½ å¥½ä¸–ç•Œ %&#125;</span><br></pre></td></tr></table></figure>
<a href="/2020/12/31/hello-world/" title="ä½ å¥½ä¸–ç•Œ">ä½ å¥½ä¸–ç•Œ</a>
<h4 id="3-æ·»åŠ æ•°å­¦å…¬å¼">3. æ·»åŠ æ•°å­¦å…¬å¼</h4>
<p>â€ƒâ€ƒ<a href="https://blog.csdn.net/mingzhuo_126/article/details/82722455">æ•°å­¦å…¬å¼</a>   <a href="https://blog.csdn.net/dabokele/article/details/79577072">åšå®¢2</a>      (æŸCSDNåšå®¢)</p>
<p>â€ƒâ€ƒÂ ç©ºæ ¼ ï¼ša,b     a;b    a\ b    a\quad b</p>
<h4 id="4-ç©ºè¡Œ">4. ç©ºè¡Œ</h4>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">äºŒé€‰ä¸€ï¼Œæ¨èä¸Šé¢çš„</span><br></pre></td></tr></table></figure>
<h4 id="5-å­—è‡ªå®šä¹‰">5. å­—è‡ªå®šä¹‰</h4>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#x27;font-size:40px; font-family:å¾®è½¯é›…é»‘; color:red&#x27;</span>&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;display:block;&quot;</span>&gt;</span>æ–‡å­—å±…ä¸­æ˜¾ç¤ºï¼Œä¸¤ä¸ªéƒ½å¿…é¡»æœ‰<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="6-hexoæ–°å»ºè‰ç¨¿">6.hexoæ–°å»ºè‰ç¨¿</h4>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">hexo new draft &quot;<span class="tag">&lt;<span class="name">title</span>&gt;</span>&quot;</span><br></pre></td></tr></table></figure>
<h4 id="7-hexoå°†è‰ç¨¿å‘å¸ƒ">7.hexoå°†è‰ç¨¿å‘å¸ƒ</h4>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">hexo publish &quot;<span class="tag">&lt;<span class="name">title</span>&gt;</span>&quot;</span><br></pre></td></tr></table></figure>
<h4 id="8-katleæ¸²æŸ“å¼•æ“todoé—®é¢˜">8.katleæ¸²æŸ“å¼•æ“todoé—®é¢˜</h4>
<p>â€ƒâ€ƒæ¢æ¸²æŸ“å¼•æ“åtodoListæ¸²æŸ“å‡ºç°é—®é¢˜ï¼Œä½¿ç”¨htmlè¯­æ³•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">diabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span>text<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">diabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;ç½‘å€&quot;</span>&gt;</span>text<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="9-æ·»åŠ å›¾ç‰‡">9. æ·»åŠ å›¾ç‰‡</h4>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;ML&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://seopic.699pic.com/photo/40005/7241.jpg_wh1200.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ML&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:80%;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span>å›¾1ï¼šMachine Learning<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="10">
<li>æ·»åŠ æ–‡çŒ®å¼•ç”¨</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">## Markdown å¢åŠ æ–‡çŒ®å¼•ç”¨</span><br><span class="line"></span><br><span class="line">è¿™è¾¹æ–‡ç« æ˜¯ä»‹ç»å¦‚ä½•åœ¨ Markdown ä¸­å¢åŠ æ–‡çŒ®å¼•ç”¨ã€‚[<span class="tag">&lt;<span class="name">sup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">sup</span>&gt;</span>](#refer-anchor-1)</span><br><span class="line"></span><br><span class="line">## å‚è€ƒ</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;refer-anchor-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">- [1] [ç™¾åº¦å­¦æœ¯](http://xueshu.baidu.com/)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;refer-anchor-2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">- [2] [Wikipedia](https://en.wikipedia.org/wiki/Main_Page)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç«™ç‚¹ç›¸å…³</category>
        <category>åšå®¢ç›¸å…³</category>
      </categories>
  </entry>
  <entry>
    <title>JVMåƒåœ¾å›æ”¶</title>
    <url>/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</url>
    <content><![CDATA[<p>JVMçš„GCè¯»ä¹¦ç¬”è®°</p>
<span id="more"></span>
<ul>
<li>STWï¼šStop The Worldï¼ŒGCæ—¶æš‚åœç”¨æˆ·çš„çº¿ç¨‹ã€‚</li>
<li>STABï¼šSnapshot At The Beginningï¼ŒåŸå§‹å¿«ç…§(ä¿ç•™å¼€å§‹æ—¶çš„å¯¹è±¡å›¾)ã€‚ç”¨äºè§£å†³å¹¶å‘æ‰«ææ—¶å¯¹è±¡æ¶ˆå¤±çš„é—®é¢˜ã€‚</li>
<li>TAMSï¼šTop at Mark Startï¼ŒG1ä¸ºæ¯ä¸ªRegionè®¾è®¡çš„ä¸¤ä¸ªåä¸ºTAMSçš„æŒ‡é’ˆï¼Œå¹¶å‘å›æ”¶æ—¶æ–°åˆ†é…çš„å¯¹è±¡åœ°å€éƒ½å¿…é¡»è¦åœ¨è¿™ä¸¤ä¸ªæŒ‡é’ˆä½ç½®ä»¥ä¸Šã€‚</li>
</ul>
<h3 id="1-å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥">1. å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥</h3>
<p>â€ƒâ€ƒJavaå †æ˜¯åƒåœ¾å›æ”¶å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºGCå †ã€‚ç°ä»£æ”¶é›†å™¨åŸºæœ¬é‡‡ç”¨åˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•ã€‚æ‰€ä»¥ Java å †è¿˜å¯ä»¥ç»†åˆ†ä¸ºï¼šæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼šå†ç»†è‡´ä¸€ç‚¹æœ‰ï¼šEden ç©ºé—´ã€From Survivorã€To Survivor ç©ºé—´ã€è€ç”Ÿä»£ç­‰ã€‚<strong>è¿›ä¸€æ­¥åˆ’åˆ†çš„ç›®çš„æ˜¯æ›´å¥½åœ°å›æ”¶å†…å­˜ï¼Œæˆ–è€…æ›´å¿«åœ°åˆ†é…å†…å­˜ã€‚</strong><br>
â€ƒâ€ƒæ€»ç»“ï¼šEdenåŒºï¼šæ ‡è®°-å¤åˆ¶ï¼› SurvivoråŒºï¼šæ ‡è®°-å¤åˆ¶ï¼› è€ç”Ÿä»£ï¼šæ ‡è®°æ•´ç†ã€‚</p>
<p><img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/Java%E5%A0%86%E7%A9%BA%E9%97%B4%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84.png" alt><br>
â€ƒâ€ƒå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¯¹è±¡é¦–å…ˆåœ¨EdenåŒºåˆ†é…ï¼Œåœ¨ä¸€æ¬¡æ–°ç”Ÿä»£GCåï¼Œå¦‚æœå¯¹è±¡è¿˜æ´»ç€ï¼Œåˆ™ä¼šè¿›å…¥S0æˆ–è€…S1ï¼Œå¹¶ä¸”å¯¹è±¡çš„å¹´é¾„è¿˜ä¼šåŠ 1(Eden-&gt;SurvivoråŒºåå¯¹è±¡çš„åˆå§‹å¹´é¾„å˜ä¸º1)ï¼Œå½“å®ƒçš„å¹´é¾„å¢åŠ åˆ°ä¸€å®šçš„ç¨‹åº¦ï¼Œå°±ä¼šæ™‹å‡åˆ°è€å¹´ä»£ä¸­ï¼Œå¹´é¾„é˜ˆå€¼å¯ä»¥é€šè¿‡å‚æ•°<code>-XX:MaxTenuringThreshold</code>è®¾ç½®ã€‚<br>
â€ƒâ€ƒåŠ¨æ€å¹´é¾„è®¡ç®—ï¼šâ€œHotspot éå†æ‰€æœ‰å¯¹è±¡æ—¶ï¼ŒæŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§å¯¹å…¶æ‰€å ç”¨çš„å¤§å°è¿›è¡Œç´¯ç§¯ï¼Œå½“ç´¯ç§¯çš„æŸä¸ªå¹´é¾„å¤§å°è¶…è¿‡äº† survivor åŒºçš„ä¸€åŠæ—¶ï¼Œå–è¿™ä¸ªå¹´é¾„å’Œ MaxTenuringThreshold ä¸­æ›´å°çš„ä¸€ä¸ªå€¼ï¼Œä½œä¸ºæ–°çš„æ™‹å‡å¹´é¾„é˜ˆå€¼â€ã€‚</p>
<p>â€ƒâ€ƒå¯¹è±¡é¦–å…ˆåœ¨EdenåŒºè¯ç”Ÿï¼Œå¦‚æœEdenåŒºæ»¡äº†ï¼Œæ‰§è¡ŒMinor GCï¼Œå°†EdenåŒºå’ŒSurvivor FromåŒºå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°Survivor ToåŒºï¼Œæ¸…é™¤EdenåŒºå’ŒSurvivor FromåŒºã€‚<br>
â€ƒâ€ƒEdenåŒºç›¸å½“äºæ ‡è®°-å¤åˆ¶ç®—æ³•(æ ‡è®°åå¤åˆ¶åˆ°Survivor ToåŒºï¼Œæ¸…é™¤EdenåŒº)ã€‚Survivor From/ToåŒºæ˜¯æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼ŒSurvivoråŒºä¸€åˆ†ä¸ºäºŒï¼ŒFromåŒºå¯¹è±¡ç»å†ä¸€æ¬¡æ ‡è®°åï¼Œå¤åˆ¶åˆ°ToåŒºï¼Œæ¸…é™¤FromåŒºã€‚</p>
<h4 id="1-1-hotspotè™šæ‹Ÿæœºgc">1.1 HotSpotè™šæ‹ŸæœºGC</h4>
<p>â€ƒâ€ƒé’ˆå¯¹HotSpot VMçš„å®ç°ï¼Œå®ƒé‡Œé¢çš„GCå‡†ç¡®çš„åˆ†ç±»åªæœ‰ä¸¤å¤§ç§ï¼š</p>
<ol>
<li>
<p>éƒ¨åˆ†GC(Partial GC):</p>
<ul>
<li>æ–°ç”Ÿä»£æ”¶é›†(Minor GC / Young GC) ï¼šåªå¯¹æ–°ç”Ÿä»£è¿›è¡Œåƒåœ¾æ”¶é›†</li>
<li>è€å¹´ä»£GC(Major GC / Old GC) ï¼šåªå¯¹è€å¹´ä»£è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚(Major GCåœ¨æœ‰çš„è¯­å¢ƒä¸‹= Full GCï¼Œæ³¨æ„é—®æ¸…æ¥šæé—®è€…æ„å›¾)</li>
<li>æ··åˆæ”¶é›†(Mixed GC)ï¼šå¯¹æ•´ä¸ªæ–°ç”Ÿä»£å’Œéƒ¨åˆ†è€å¹´ä»£è¿›è¡Œåƒåœ¾æ”¶é›†</li>
</ul>
</li>
<li>
<p>æ•´å †æ”¶é›†(Full GC)ï¼šæ”¶é›†æ•´ä¸ªJavaå †å’Œæ–¹æ³•åŒº</p>
</li>
</ol>
<table><br></table>
<h3 id="2-å¯¹è±¡å·²æ­»ï¼Ÿ">2. å¯¹è±¡å·²æ­»ï¼Ÿ</h3>
<p>â€ƒâ€ƒjavaå †æ˜¯åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸï¼Œå› æ­¤ä¹Ÿæˆä¸ºGCå †ã€‚åœ¨è¿›è¡Œå›æ”¶å‰ï¼Œéœ€è¦åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ­»äº¡ã€‚ç®—æ³•ï¼šå¼•ç”¨è®¡æ•°æ³•ã€å¯è¾¾æ€§åˆ†æç®—æ³•ã€‚</p>
<h4 id="2-1-å¼•ç”¨è®¡æ•°æ³•">2.1 å¼•ç”¨è®¡æ•°æ³•</h4>
<p>â€ƒâ€ƒç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å®ƒï¼Œè®¡æ•°å™¨åŠ ä¸€ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å‡ä¸€ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸ºé›¶çš„å¯¹è±¡å°±æ˜¯ä¸å¯èƒ½åœ¨è¢«ä½¿ç”¨çš„ã€‚</p>
<p>â€ƒâ€ƒè¿™ä¸ªæ–¹æ³•åŸç†ç®€å•ï¼Œæ•ˆç‡ä¹Ÿé«˜ã€‚ä½†æ˜¯ï¼Œåœ¨<strong>ä¸»æµJavaè™šæ‹Ÿæœºæ²¡æœ‰ä½¿ç”¨å¼•ç”¨è®¡æ•°æ³•æ¥ç®¡ç†å†…å­˜</strong>ï¼Œä¸»è¦åŸå› æ˜¯å¾ˆéš¾è§£å†³å¯¹è±¡çš„ç›¸äº’å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚(ç›¸äº’å¾ªç¯å¼•ç”¨ï¼šå¯¹è±¡Aä¸å¯¹è±¡Bç›¸äº’å¼•ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–å†æ— å…¶ä»–å¼•ç”¨ï¼Œå®é™…ä¸Šè¿™ä¸¤ä¸ªå¯¹è±¡å·²ç»ä¸èƒ½å†è¢«è®¿é—®ï¼Œä½†æ˜¯ä»–ä»¬ç›¸äº’å¼•ç”¨ç€å¯¹æ–¹ï¼Œå¯¼è‡´ä»–ä»¬çš„å¼•ç”¨è®¡æ•°ä¸ä¸ºé›¶ï¼Œå¼•ç”¨è®¡æ•°ç®—æ³•æ— æ³•å›æ”¶ä»–ä»¬)ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReferenceCountingGc</span> &#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ReferenceCountingGc</span> <span class="variable">objA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReferenceCountingGc</span>();</span><br><span class="line">        <span class="type">ReferenceCountingGc</span> <span class="variable">objB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReferenceCountingGc</span>();</span><br><span class="line">        objA.instance = objB;</span><br><span class="line">        objB.instance = objA;</span><br><span class="line">        objA = <span class="literal">null</span>;</span><br><span class="line">        objB = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-å¯è¾¾æ€§åˆ†æç®—æ³•">2.2 å¯è¾¾æ€§åˆ†æç®—æ³•</h4>
<p>â€ƒâ€ƒåŸºæœ¬æ€è·¯æ˜¯é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸º&quot;GC Roots&quot;çš„æ ¹å¯¹è±¡ä½œä¸ºèµ·å§‹èŠ‚ç‚¹é›†ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®å¼•ç”¨å…³ç³»å‘ä¸‹æœç´¢ï¼Œæœç´¢é€šè¿‡çš„è·¯å¾„ç§°ä¸º&quot;å¼•ç”¨é“¾&quot;(Reference Chain)ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œåˆ™è¯¥å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚</p>
<img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/GC_Rootsåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¾¾.png" style="zoom:80%;">
<p>Javaä¸­ï¼Œå¯ä»¥ä½œä¸ºGC Rootsçš„å¯¹è±¡æ˜¯ï¼š</p>
<ul>
<li>è™šæ‹Ÿæœºæ ˆ(æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆ(Nativeæ–¹æ³•)ä¸­å¼•ç”¨çš„å¯¹è±¡</li>
<li>åœ¨æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li>
<li>åœ¨æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li>
<li>æ‰€æœ‰è¢«åŒæ­¥é”æŒæœ‰çš„å¯¹è±¡</li>
</ul>
<h4 id="2-3-å†è°ˆå¼•ç”¨">2.3 å†è°ˆå¼•ç”¨</h4>
<p>â€ƒâ€ƒæ— è®ºæ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°ç®—æ³•åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡ï¼Œè¿˜æ˜¯é€šè¿‡å¯è¾¾æ€§åˆ†æç®—æ³•åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¼•ç”¨é“¾å¯è¾¾ï¼Œåˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»éƒ½å’Œâ€œå¼•ç”¨â€ç¦»ä¸å¼€å…³ç³»ã€‚å¸Œæœ›æè¿°ä¸€äº›å¯¹è±¡ï¼šå½“å†…å­˜ç©ºé—´è¶³å¤Ÿæ—¶ï¼Œèƒ½å¤Ÿä¿ç•™åœ¨å†…å­˜ä¹‹ä¸­ï¼Œå¦‚æœå†…å­˜ç©ºé—´åœ¨GCåä»ç„¶ç´§å¼ ï¼Œå°±å¯ä»¥æŠ›å¼ƒè¿™äº›å¯¹è±¡ã€‚<br>
â€ƒâ€ƒåœ¨JDK1.2ä¹‹åï¼ŒJavaå¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºå¼ºå¼•ç”¨ï¼ˆStrongly Re-ferenceï¼‰ã€è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰ã€å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰å’Œè™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰4ç§ï¼Œè¿™4ç§å¼•ç”¨å¼º åº¦ä¾æ¬¡é€æ¸å‡å¼±ã€‚</p>
<ol>
<li>å¼ºå¼•ç”¨ï¼šæŒ‡ç¨‹åºä»£ç ä¹‹ä¸­æœ€æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œç±»ä¼¼&quot;Object obj = new Object()&quot;ï¼Œ(æ ˆä¸Šçš„å¯¹è±¡æŒ‡å‘å †ä¸­çš„å¯¹è±¡)è¿™ç§å¼•ç”¨å…³ç³»ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»è¿˜åœ¨ï¼ŒGCå›æ”¶å™¨æ°¸è¿œä¸ä¼šå›æ”¶è¢«å¼ºå¼•ç”¨çš„å¯¹è±¡ã€‚(å®æ„¿æŠ›å‡ºOOMé”™è¯¯)</li>
<li>è½¯å¼•ç”¨ï¼šæŒ‡ä¸€äº›æœ‰ç”¨ï¼Œä½†éå¿…é¡»çš„å¯¹è±¡ã€‚åœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå‰ï¼Œä¼šå¯¹è¿™äº›å¯¹è±¡è¿›è¡ŒäºŒæ¬¡å›æ”¶ï¼Œå¦‚æœè¿™æ¬¡å›æ”¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºOOM(Out Of Memory Error)å¼‚å¸¸ã€‚JDK1.2ä¹‹åæä¾›SoftReferenceç±»å®ç°è½¯å¼•ç”¨</li>
<li>å¼±å¼•ç”¨ï¼šæŒ‡ä¸€äº›æœ‰ç”¨ï¼Œä½†éå¿…é¡»çš„å¯¹è±¡ï¼Œä½†å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ã€‚å½“åƒåœ¾æ”¶é›†å™¨å¼€å§‹å·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚JDK1.2ä¹‹åæä¾›äº†WeakReferenceç±»å®ç°å¼±å¼•ç”¨</li>
<li>è™šå¼•ç”¨ï¼šæ˜¯ä¸€ç§æœ€å¼±çš„å¼•ç”¨å…³ç³»ï¼Œå½¢åŒè™šè®¾ï¼Œæ— æ³•é€šè¿‡è™šå¼•ç”¨è·å–ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œä»»ä½•æ—¶å€™éƒ½èƒ½è¢«å›æ”¶ã€‚JDK1.2ä¹‹åæä¾›äº†PhantomReferenceç±»å®ç°è™šå¼•ç”¨ã€‚<br>
<strong>ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„åªæ˜¯ä¸ºäº†èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥</strong>ã€‚</li>
</ol>
<p>ç‰¹åˆ«æ³¨æ„ï¼šåœ¨ç¨‹åºè®¾è®¡ä¸­ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨å¼±å¼•ç”¨ä¸è™šå¼•ç”¨ï¼Œä½¿ç”¨è½¯å¼•ç”¨çš„æƒ…å†µè¾ƒå¤šï¼Œè¿™æ˜¯å› ä¸º<strong>è½¯å¼•ç”¨å¯ä»¥åŠ é€Ÿ JVM å¯¹åƒåœ¾å†…å­˜çš„å›æ”¶é€Ÿåº¦ï¼Œå¯ä»¥ç»´æŠ¤ç³»ç»Ÿçš„è¿è¡Œå®‰å…¨ï¼Œé˜²æ­¢å†…å­˜æº¢å‡ºï¼ˆOutOfMemoryï¼‰ç­‰é—®é¢˜çš„äº§ç”Ÿ</strong>ã€‚</p>
<h4 id="2-4-ä¸å¯è¾¾å¯¹è±¡å¹¶é-éæ­»ä¸å¯">2.4 ä¸å¯è¾¾å¯¹è±¡å¹¶é&quot;éæ­»ä¸å¯&quot;</h4>
<p>â€ƒâ€ƒå³ä½¿åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­åˆ¤å®šä¸ºä¸å¯è¾¾çš„å¯¹è±¡ï¼Œä¹Ÿä¸æ˜¯&quot;éæ­»ä¸å¯&quot;çš„ï¼Œè¿™æ—¶å€™ä»–å¤„äº&quot;ç¼“åˆ‘&quot;é˜¶æ®µã€‚<br>
å®£åˆ¤æ­»äº¡è‡³å°‘è¦ç»å†ä¸¤ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼šå¦‚æœå¯¹è±¡åœ¨è¿›è¡Œå¯è¾¾æ€§åˆ†æåå‘ç°ä¸å¯è¾¾ï¼Œé‚£ä¹ˆè¿›è¡Œç¬¬ä¸€æ¬¡æ ‡è®°ï¼Œéšåç­›é€‰ä¸€æ¬¡ï¼Œå¦‚æœè¯¥å¯¹è±¡æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•ï¼Œæˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°†è¿™ä¸¤ç§æƒ…å†µè§†ä¸º&quot;æ²¡æœ‰å¿…è¦æ‰§è¡Œ&quot;ã€‚(finalize()æ–¹æ³•åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡ä¸ä¼šæ‰§è¡Œ(å³ä½¿è¦†ç›–) )ã€‚</p>
<p>â€ƒâ€ƒå¦‚æœè¿™ä¸ªå¯¹è±¡æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡ä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªåä¸ºF-Queueçš„é˜Ÿåˆ—ä¸­ï¼Œåœ¨ä¹‹åè™šæ‹Ÿç»æµè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„Finalizerçº¿ç¨‹åŒºæ‰§è¡Œfinalize()æ–¹æ³•ã€‚<br>
ä¸æ¨èä½¿ç”¨finalize()æ–¹æ³•ã€‚</p>
<h4 id="2-5-æ–¹æ³•åŒº-å…ƒç©ºé—´-çš„å›æ”¶">2.5 æ–¹æ³•åŒº(å…ƒç©ºé—´)çš„å›æ”¶</h4>
<p>â€ƒâ€ƒJavaè™šæ‹Ÿæœºè§„èŒƒä¸å¼ºåˆ¶è¦æ±‚æ˜¯å¦åœ¨è™šæ‹Ÿæœºçš„æ–¹æ³•åŒº(å…ƒç©ºé—´)å®ç°åƒåœ¾å›æ”¶ï¼Œæ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶&quot;æ€§ä»·æ¯”æ¯”è¾ƒä½&quot;ã€‚<br>
æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶ä¸»è¦æœ‰ä¸¤éƒ¨åˆ†å†…å®¹ï¼šåºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ä½¿ç”¨çš„ç±»å‹ã€‚</p>
<p>åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯å¦åºŸå¼ƒï¼š<br>
å¸¸é‡æ± ä¸­çš„æ–¹æ³•ã€å­—æ®µç¬¦å·ç­‰ç­‰å¦‚æœæ²¡æœ‰å¯¹è±¡å¼•ç”¨å®ƒï¼Œå¦‚æœè¿™æ—¶å‘ç”Ÿå›æ”¶ä¸”æœ‰å¿…è¦çš„è¯ï¼Œè¯¥å¯¹è±¡å°±ä¼šè¢«æ¸…ç†å‡ºå¸¸é‡æ± ã€‚</p>
<p>åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯å¦åºŸå¼ƒï¼šéœ€è¦æ»¡è¶³ä¸‹åˆ—3ä¸ªæ¡ä»¶(ä»…è¯´æ˜è¢«å…è®¸ï¼Œä¸ä¸€å®šå¿…ç„¶)ï¼š</p>
<ul>
<li>è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶(å †ä¸­ä¸å†æœ‰è¯¥ç±»ä¸è¯¥ç±»çš„å­ç±»çš„å®ä¾‹)</li>
<li>åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶(é™¤éæ˜¯è®¾è®¡çš„å¯æ›¿æ¢çš„ç±»åŠ è½½å™¨ï¼Œå¦åˆ™å¾ˆéš¾è¾¾æˆ)</li>
<li>æ”¹äº†å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚</li>
</ul>
<table><br></table>
<h3 id="3-åƒåœ¾å›æ”¶ç®—æ³•">3. åƒåœ¾å›æ”¶ç®—æ³•</h3>
<p>æ ‡è®°æ¸…é™¤ã€æ ‡è®°å¤åˆ¶ã€æ ‡è®°æ•´ç†ã€åˆ†ä»£åƒåœ¾å›æ”¶ã€‚</p>
<h4 id="3-1-æ ‡è®°-æ¸…é™¤ç®—æ³•">3.1 æ ‡è®°-æ¸…é™¤ç®—æ³•</h4>
<p>â€ƒâ€ƒåˆ†ä¸º&quot;æ ‡è®°&quot;å’Œ&quot;æ¸…é™¤&quot;ä¸¤ä¸ªé˜¶æ®µï¼šæ ‡è®°å‡ºæ‰€æœ‰ä¸éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œæ ‡è®°å®Œæˆåï¼Œç»Ÿä¸€å›æ”¶æ‰€æœ‰æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚æœ€åŸºç¡€çš„ç®—æ³•ã€‚å…¶ä»–ç®—æ³•éƒ½æ˜¯å¯¹å…¶ç¼ºç‚¹æ”¹è¿›è€Œæ¥ã€‚<br>
â€ƒâ€ƒç¼ºç‚¹ï¼šæ•ˆç‡ä¸ç¨³å®šã€å†…å­˜ç©ºé—´çš„ç¢ç‰‡åŒ–ã€‚</p>
<h4 id="3-2-æ ‡è®°-å¤åˆ¶ç®—æ³•">3.2 æ ‡è®°-å¤åˆ¶ç®—æ³•</h4>
<p>â€ƒâ€ƒåŠåŒºå¤åˆ¶ï¼šå°†å¯ç”¨å†…å­˜ä¸€åˆ†ä¸ºäºŒç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡ä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—ä½¿ç”¨å®Œåï¼Œå°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å»ï¼Œç„¶åæŠŠä½¿ç”¨çš„ç©ºé—´æ¸…ç†ã€‚è¿™æ ·å°±ä½¿æ¯æ¬¡çš„å†…å­˜å›æ”¶éƒ½æ˜¯å¯¹å†…å­˜åŒºé—´çš„ä¸€åŠè¿›è¡Œå›æ”¶ã€‚<br>
â€ƒâ€ƒä¼˜ç‚¹ï¼šä¸ä¼šå‡ºç°ç¢ç‰‡åŒ–é—®é¢˜ï¼Œæ•ˆç‡é«˜ã€‚<br>
â€ƒâ€ƒç¼ºç‚¹ï¼šå†…å­˜åªèƒ½ä½¿ç”¨ä¸€åŠ</p>
<h4 id="3-3-æ ‡è®°-æ•´ç†ç®—æ³•">3.3 æ ‡è®°-æ•´ç†ç®—æ³•</h4>
<p>â€ƒâ€ƒé’ˆå¯¹è€å¹´ä»£å­˜äº¡çš„ç‰¹å¾ï¼Œæå‡ºäº†&quot;æ ‡è®°-æ•´ç†&quot;ç®—æ³•ã€‚æ ‡è®°è¿‡ç¨‹åŒ&quot;æ ‡è®°æ¸…é™¤&quot;ç®—æ³•ï¼Œä½†åç»­çš„æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘å†…å­˜ç©ºé—´çš„ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚<br>
â€ƒâ€ƒå¦‚æœç§»åŠ¨æ‰€æœ‰çš„å­˜æ´»å¯¹è±¡ï¼Œå°†ä¼šæ˜¯ä¸€ç§æä¸ºè´Ÿé‡çš„æ“ä½œï¼Œè€Œä¸”ä¼šæš‚åœç”¨æˆ·åº”ç”¨ç¨‹åºæ‰èƒ½è¿›è¡Œï¼Œè¿™æ ·çš„åœé¡¿è¢«ç§°ä¸º&quot;Stop The World&quot;ã€‚ å¦‚æœä¸ç§»åŠ¨ï¼Œé‡‡ç”¨æ ‡è®°æ¸…é™¤ï¼Œç©ºé—´ä¼šç¢ç‰‡åŒ–ã€‚ å…³æ³¨ååé‡çš„è™šæ‹Ÿæœºé‡‡ç”¨æ ‡è®°-æ•´ç†ï¼Œå…³æ³¨å»¶è¿Ÿçš„é‡‡ç”¨æ ‡è®°-æ¸…é™¤ã€‚</p>
<h4 id="3-4-åˆ†ä»£æ”¶é›†ç®—æ³•">3.4 åˆ†ä»£æ”¶é›†ç®—æ³•</h4>
<p>â€ƒâ€ƒæ ¹æ®<code>å¼±åˆ†ä»£å‡è¯´</code>ä¸<code>å¼ºåˆ†ä»£å‡è¯´</code>ï¼Œç°ä»£åƒåœ¾æ”¶é›†å™¨å°†Javaå †è‡³å°‘åˆ’åˆ†ä¸º<code>æ–°ç”Ÿä»£</code>ä¸<code>è€å¹´ä»£</code>ä¸¤ä¸ªåŒºåŸŸã€‚<br>
â€ƒâ€ƒæ ¹æ®<code>è·¨ä»£å¼•ç”¨å‡è¯´</code>ï¼šå­˜åœ¨äº’ç›¸å¼•ç”¨å…³ç³»çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œæ˜¯åº”è¯¥å€¾ å‘äºåŒæ—¶ç”Ÿå­˜æˆ–è€…åŒæ—¶æ¶ˆäº¡çš„ã€‚åªéœ€åœ¨æ–°ç”Ÿä»£ä¸Šå»ºç«‹ä¸€ä¸ªå…¨å±€çš„æ•°æ®ç»“æ„ï¼ˆè¯¥ç»“æ„è¢«ç§° ä¸ºâ€œè®°å¿†é›†â€ï¼ŒRemembered Setï¼‰</p>
<p>â€ƒâ€ƒ<strong>æ¯”å¦‚åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ¯æ¬¡æ”¶é›†éƒ½ä¼šæœ‰å¤§é‡å¯¹è±¡æ­»å»ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©â€æ ‡è®°-å¤åˆ¶â€œç®—æ³•ï¼Œåªéœ€è¦ä»˜å‡ºå°‘é‡å¯¹è±¡çš„å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆæ¯æ¬¡åƒåœ¾æ”¶é›†ã€‚è€Œè€å¹´ä»£çš„å¯¹è±¡å­˜æ´»å‡ ç‡æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œè€Œä¸”æ²¡æœ‰é¢å¤–çš„ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»é€‰æ‹©â€œæ ‡è®°-æ¸…é™¤â€æˆ–â€œæ ‡è®°-æ•´ç†â€ç®—æ³•è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚</strong></p>
<p>â€ƒå¼±åˆ†ä»£å‡è¯´ï¼šç»å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•ç­çš„ã€‚<br>
â€ƒå¼ºåˆ†ä»£å‡è¯´ï¼šç†¬è¿‡è¶Šå¤šæ¬¡åƒåœ¾æ”¶é›†è¿‡ç¨‹çš„å¯¹è±¡å°±è¶Šéš¾ä»¥æ¶ˆäº¡ã€‚<br>
â€ƒè·¨ä»£å¼•ç”¨å‡è¯´ï¼šè·¨ä»£å¼•ç”¨ç›¸å¯¹äºåŒä»£å¼•ç”¨æ¥è¯´ä»…å æå°‘æ•°ã€‚</p>
<table><br></table>
<h3 id="4-ç»å…¸åƒåœ¾æ”¶é›†å™¨">4. ç»å…¸åƒåœ¾æ”¶é›†å™¨</h3>
<p><strong>å¦‚æœè¯´æ”¶é›†ç®—æ³•æ˜¯å†…å­˜å›æ”¶çš„æ–¹æ³•è®ºï¼Œé‚£ä¹ˆåƒåœ¾æ”¶é›†å™¨å°±æ˜¯å†…å­˜å›æ”¶çš„å…·ä½“å®ç°ã€‚</strong><br>
jdk8ç¯å¢ƒä¸‹ï¼Œé»˜è®¤ä½¿ç”¨ Parallel Scavengeï¼ˆæ–°ç”Ÿä»£ï¼‰+ Parallel Oldï¼ˆè€å¹´ä»£ï¼‰ã€‚<br>
ç°åœ¨JVM64ä½é»˜è®¤ä½¿ç”¨Serverç±»å‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">javaÂ -XX:+PrintCommandLineFlagsÂ -version</span><br><span class="line">æŸ¥çœ‹å½“å‰JVMçš„é»˜è®¤å‚æ•°</span><br></pre></td></tr></table></figure>
<h4 id="4-1-serial-ä¸²è¡Œ-æ”¶é›†å™¨">4.1 <strong>Serial(ä¸²è¡Œ)æ”¶é›†å™¨</strong></h4>
<p>â€ƒâ€ƒSerial (ä¸²è¡Œ)æ”¶é›†å™¨æ˜¯æœ€åŸºç¡€çš„æ”¶é›†å™¨ï¼Œå¦‚å…¶åä¸€æ ·æ˜¯ä¸€ä¸ªå•çº¿ç¨‹å·¥ä½œçš„æ”¶é›†å™¨ï¼Œä¸ä»…æ„å‘³ç€åªä¼šä½¿ç”¨ä¸€ä¸ªå¤„ç†å™¨æˆ–ä¸€æ¡çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†ï¼Œæœ€é‡è¦çš„æ˜¯å¼ºè°ƒå®ƒè¿›è¡Œåƒåœ¾å›æ”¶æ—¶éœ€è¦æš‚åœå…¶ä»–æ‰€æœ‰å·¥ä½œçº¿ç¨‹(â€œ<strong>Stop the World</strong>â€)ï¼Œç›´åˆ°æ”¶é›†ç»“æŸã€‚Stop The Worldå¯¹å¾ˆå¤šåº”ç”¨è€Œè¨€æ˜¯ä¸å¯æ¥å—çš„ã€‚<br>
â€ƒâ€ƒ<strong>æ–°ç”Ÿä»£é‡‡ç”¨<code>æ ‡è®°-å¤åˆ¶</code>ï¼Œè€ç”Ÿä»£é‡‡ç”¨(Serial Old)<code>æ ‡è®°-æ•´ç†</code>ï¼Œè¯¥æ”¶é›†å™¨åº”ç”¨åœ¨æ–°ç”Ÿä»£</strong></p>
<p><img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/Serial(%E4%B8%B2%E8%A1%8C)%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8.png" alt></p>
<p>â€ƒâ€ƒä¼˜ç¼ºç‚¹ï¼šç®€å•è€Œé«˜æ•ˆï¼Œé¢å¤–å†…å­˜æ¶ˆè€—æœ€å°ï¼Œæ²¡æœ‰çº¿ç¨‹çš„äº¤äº’å¼€é”€ã€‚å…·æœ‰å¾ˆé«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡ï¼ŒSeriallæ”¶é›†å™¨å¯¹äºè¿è¡Œåœ¨Clientæ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºæ¥è¯´æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h4 id="4-2-parnew-å¹¶è¡Œ-æ”¶é›†å™¨">4.2 ParNew(å¹¶è¡Œ)æ”¶é›†å™¨</h4>
<p>â€ƒâ€ƒParNewæ”¶é›†å™¨å®è´¨ä¸Šæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆï¼Œé™¤äº†åŒæ—¶ä½¿ç”¨å¤šæ¡çº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ä¹‹å¤–ï¼Œå…¶ä½™çš„è¡Œä¸º(æ§åˆ¶å‚æ•°ã€æ”¶é›†ç®—æ³•ã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥)ä¸Serialæ”¶é›†å™¨å®Œå…¨ä¸€è‡´ã€‚<br>
â€ƒâ€ƒ<strong>æ–°ç”Ÿä»£é‡‡ç”¨<code>æ ‡è®°-å¤åˆ¶</code>ï¼Œè€ç”Ÿä»£é‡‡ç”¨(Serial Old)<code>æ ‡è®°-æ•´ç†</code>ï¼Œè¯¥æ”¶é›†å™¨åº”ç”¨åœ¨æ–°ç”Ÿä»£</strong></p>
<p><img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/ParNew(%E5%B9%B6%E8%A1%8C)%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8.png" alt></p>
<p>â€ƒâ€ƒåœ¨JDK1.7ä¹‹å‰<code>ParNew</code>æ˜¯è®¸å¤šè¿è¡Œåœ¨Serveræ¨¡å¼ä¸‹çš„HotSpotè™šæ‹Ÿæœºçš„æ–°ç”Ÿä»£é¦–è¦é€‰æ‹©ã€‚é™¤äº†<code>Serial</code>æ”¶é›†å™¨å¤–(JDK9ä¹‹å‰)ï¼Œç›®å‰åªæœ‰<code>ParNew</code>èƒ½ä¸CMSæ”¶é›†å™¨é…åˆå·¥ä½œã€‚<br>
â€ƒâ€ƒ(G1è¿™ä¸ªé¢å‘å…¨å †çš„åƒåœ¾æ”¶é›†å™¨è¯ç”Ÿï¼Œè‡ªJDK9å¼€å§‹ï¼Œ<code>ParNew</code>åŠ <code>CMS</code>ä¸å†æ˜¯å®˜æ–¹æ¨èçš„æœåŠ¡ç«¯æ¨¡å¼ä¸‹çš„æ”¶é›†å™¨è§£å†³æ–¹æ¡ˆã€‚å®˜æ¨èG1ï¼ŒåŒæ—¶ï¼šå–æ¶ˆäº†ParNewåŠ  Serial Oldä»¥åŠSerialåŠ CMSè¿™ä¸¤ç»„æ”¶é›†å™¨ç»„åˆçš„æ”¯æŒï¼Œæ„å‘³ç€ParNewå’ŒCMSä»æ­¤åªèƒ½äº’ç›¸æ­é…ä½¿ç”¨)</p>
<p><strong>å¹¶è¡Œå’Œå¹¶å‘æ¦‚å¿µè¡¥å……ï¼š</strong></p>
<ul>
<li>
<p><strong>å¹¶è¡Œï¼ˆParallelï¼‰</strong> ï¼šæŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶<strong>ç”¨æˆ·çº¿ç¨‹ä»ç„¶å¤„äºç­‰å¾…çŠ¶æ€</strong>ã€‚</p>
</li>
<li>
<p><strong>å¹¶å‘ï¼ˆConcurrentï¼‰</strong>ï¼šæŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼ˆä½†ä¸ä¸€å®šæ˜¯å¹¶è¡Œï¼Œå¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œï¼‰ï¼Œ<strong>ç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­è¿è¡Œ</strong>ï¼Œè€Œåƒåœ¾æ”¶é›†å™¨è¿è¡Œåœ¨å¦ä¸€ä¸ª CPU ä¸Šï¼Œç”±äºæ”¶é›†å™¨å ç”¨ä¸€éƒ¨åˆ†èµ„æºï¼Œæ­¤æ—¶ç¨‹åºçš„ååé‡å—ä¸€å®šå½±å“ã€‚</p>
</li>
</ul>
<h4 id="4-3-parallel-scavenge-å¹¶è¡Œjdk8-æ”¶é›†å™¨">4.3 Parallel Scavenge(å¹¶è¡ŒJDK8)æ”¶é›†å™¨</h4>
<p>JDK8é»˜è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œâ€œååé‡ä¼˜å…ˆæ”¶é›†å™¨â€ã€‚<code>-XX:+UseParallelGC -XX:-UseParallelOldGC</code>åŒæ—¶å¯ç”¨ä¸¤ä¸ªæ”¶é›†å™¨æ­é…ã€‚JDK9æ—¶å®˜å®£G1æ›¿ä»£Parallel ScavengeåŠ Parallel Oldç»„åˆã€‚</p>
<p>â€ƒâ€ƒ<code>Parallel Scavenge</code>ä¸<code>ParNew</code>éå¸¸ç›¸ä¼¼ï¼Œå¹¶è¡Œæ”¶é›†çš„å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œ<code>CMS</code>ç­‰æ”¶é›†å™¨çš„å…³æ³¨ç‚¹æ˜¯å°½å¯èƒ½åœ°ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´(Stop The World)ï¼Œè€Œ<code>Parallel Scavenge</code>æ”¶é›†å™¨çš„ç›®æ ‡åˆ™æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ï¼ˆThroughputï¼‰ï¼Œé«˜æ•ˆç‡çš„åˆ©ç”¨CPUã€‚æ‰€è°“ååé‡å°±æ˜¯å¤„ç†å™¨ç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸å¤„ç†å™¨æ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ã€‚</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ååé‡</mtext><mo>=</mo><mfrac><mtext>è¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´</mtext><mrow><mtext>è¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´</mtext><mo>+</mo><mtext>è¿è¡Œåƒåœ¾æ”¶é›†æ—¶é—´</mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">ååé‡ = \frac{è¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´}{è¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´+è¿è¡Œåƒåœ¾æ”¶é›†æ—¶é—´}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">å</span><span class="mord cjk_fallback">å</span><span class="mord cjk_fallback">é‡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.1296600000000003em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">è¿</span><span class="mord cjk_fallback">è¡Œ</span><span class="mord cjk_fallback">ç”¨</span><span class="mord cjk_fallback">æˆ·</span><span class="mord cjk_fallback">ä»£</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">çš„</span><span class="mord cjk_fallback">æ—¶</span><span class="mord cjk_fallback">é—´</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord cjk_fallback">è¿</span><span class="mord cjk_fallback">è¡Œ</span><span class="mord cjk_fallback">åƒ</span><span class="mord cjk_fallback">åœ¾</span><span class="mord cjk_fallback">æ”¶</span><span class="mord cjk_fallback">é›†</span><span class="mord cjk_fallback">æ—¶</span><span class="mord cjk_fallback">é—´</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">è¿</span><span class="mord cjk_fallback">è¡Œ</span><span class="mord cjk_fallback">ç”¨</span><span class="mord cjk_fallback">æˆ·</span><span class="mord cjk_fallback">ä»£</span><span class="mord cjk_fallback">ç </span><span class="mord cjk_fallback">çš„</span><span class="mord cjk_fallback">æ—¶</span><span class="mord cjk_fallback">é—´</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>â€ƒâ€ƒå¦‚æœå¯¹æ”¶é›†å™¨è¿ä½œä¸äº†è§£ï¼Œæ‰‹å·¥ä¼˜åŒ–å›°éš¾ï¼Œå¯ä»¥ä½¿ç”¨<strong>Paralle Scavengeæ”¶é›†å™¨é…åˆè‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥</strong>ï¼Œåªéœ€è¦è®¾ç½®å¥½åŸºæœ¬çš„å†…å­˜æ•°æ®(å¦‚-Xmxè®¾ç½®æœ€å¤§å †)ï¼Œç„¶åä½¿ç”¨<code>-XX:MaxGCPauseMillis</code>(æ›´å…³æ³¨æœ€å¤§åœé¡¿æ—¶é—´)ï¼Œæˆ–è€…<code>-XX:GCTimeRatio</code>(æ›´å…³æ³¨ååé‡)ç»™è™šæ‹Ÿæœºè®¾ç½®ä¸€ä¸ªä¼˜åŒ–ç›®æ ‡ï¼Œå…·ä½“ç»†èŠ‚ç”±è™šæ‹Ÿæœºå»è°ƒèŠ‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-XX:+UseParallelGC</span><br><span class="line">    ä½¿ç”¨ Parallel æ”¶é›†å™¨+ è€å¹´ä»£ä¸²è¡Œ</span><br><span class="line"></span><br><span class="line">-XX:+UseParallelOldGC</span><br><span class="line">    ä½¿ç”¨ Parallel æ”¶é›†å™¨+ è€å¹´ä»£å¹¶è¡Œ</span><br><span class="line">    </span><br><span class="line">-XX:MaxGCPauseMillis</span><br><span class="line">    è®¾ç½®æ¯æ¬¡GCæœ€å¤§åœé¡¿æ¯«ç§’æ•°ï¼š-XX:MaxGCPauseMillis=n, ä¼šé™ä½ååé‡ï¼Œè¯¥å‚æ•°è°¨æ…ä½¿ç”¨(VMå°†è®¾ç½®æ›´å°çš„å †ï¼Œä»¥å­˜å‚¨ç›¸å¯¹å°‘é‡çš„å¯¹è±¡ï¼Œæ¥æå‡å›æ”¶é€Ÿç‡ï¼Œä¼šå¯¼è‡´æ›´é«˜é¢‘ç‡çš„GCã€‚)</span><br><span class="line"></span><br><span class="line">-XX:GCTimeRatio</span><br><span class="line">    è®¾ç½®æœ€å¤§ååé‡ï¼š-XX:GCTimeRatio=nï¼Œåˆ™å…è®¸æœ€å¤§çš„ 1/(1+n)*100% çš„æ—¶é—´å»åƒåœ¾å›æ”¶ï¼Œé»˜è®¤å€¼ä¸ºn=99ï¼Œå°±æ˜¯å…è®¸1%çš„æ—¶é—´å»è¿›è¡Œåƒåœ¾å›æ”¶(0&lt;n&lt;100çš„æ•´æ•°)ã€‚  è¡¨ç¤ºè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´æ˜¯GCè¿è¡Œæ—¶é—´çš„nå€ã€‚</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒ<strong>æ–°ç”Ÿä»£é‡‡ç”¨<code>æ ‡è®°-å¤åˆ¶</code>ï¼Œè€ç”Ÿä»£é‡‡ç”¨(Serial Old)<code>æ ‡è®°-æ•´ç†</code>ï¼Œè¯¥æ”¶é›†å™¨åº”ç”¨åœ¨æ–°ç”Ÿä»£</strong></p>
<p><strong>å®˜æ–¹å»ºè®®ç­–ç•¥</strong></p>
<ol>
<li>å°½é‡ä¸è®¾ç½®æœ€å¤§å †ï¼Œé€‰æ‹©åˆé€‚çš„ç›®æ ‡ååé‡</li>
<li>å¦‚æœå¯ä»¥è¾¾åˆ°ååé‡ç›®æ ‡ï¼Œä½†æ˜¯æš‚åœæ—¶é—´å¤ªé•¿ï¼Œè¯·é€‰æ‹©ä¸€ä¸ªæš‚åœæ—¶é—´ç›®æ ‡è¿›è¡ŒæŠ˜è¡·ï¼ˆä»¥é™ä½ååé‡ä¸ºä»£ä»·ï¼‰</li>
<li>å¦‚æœæœªè¾¾åˆ°ååé‡ç›®æ ‡ï¼Œè¯·è®¾ç½®å°½å¯èƒ½å¤§çš„å †ï¼ˆå°äºç‰©ç†å¯ç”¨å†…å­˜)</li>
</ol>
<h4 id="4-4-serial-old-ä¸²è¡Œ-æ”¶é›†å™¨">4.4 Serial Old(ä¸²è¡Œ)æ”¶é›†å™¨</h4>
<p>â€ƒâ€ƒSerial æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä»–æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œä½¿ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ï¼Œä¸»è¦æ„ä¹‰ä¾›å®¢æˆ·ç«¯çš„HotSpotè™šæ‹Ÿæœºä½¿ç”¨ã€‚å®ƒä¸»è¦æœ‰ä¸¤å¤§ç”¨é€”ï¼šä¸€ç§ç”¨é€”æ˜¯åœ¨ JDK1.5 ä»¥åŠä»¥å‰çš„ç‰ˆæœ¬ä¸­ä¸ <code>Parallel Scavenge</code> æ”¶é›†å™¨æ­é…ä½¿ç”¨ï¼Œå¦ä¸€ç§ç”¨é€”æ˜¯ä½œä¸º <code>CMS</code> æ”¶é›†å™¨çš„åå¤‡æ–¹æ¡ˆã€‚</p>
<h4 id="3-5-5-parallel-old-å¹¶è¡Œ-æ”¶é›†å™¨">3.5.5 Parallel Old(å¹¶è¡Œ)æ”¶é›†å™¨</h4>
<p><code>-XX:+UseParallelOldGC</code>å¼€å¯è¯¥æ”¶é›†å™¨ï¼Œè€å¹´ä»£å¹¶è¡Œæ”¶é›†å™¨</p>
<p>â€ƒâ€ƒParallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘æ”¶é›†ï¼ŒåŸºäºæ ‡è®°æ•´ç†ã€‚JDK6æä¾›ï¼Œè§£å†³äº†Parallel Scavengeåªèƒ½ä¸Serial Oldä½¿ç”¨çš„å°´å°¬åœ°ä½ï¼Œæ— æ³•ä¸CMSé…åˆä½¿ç”¨ã€‚è‡³æ­¤&quot;ååé‡ä¼˜å…ˆ&quot;æ”¶é›†å™¨æœ‰äº†æ¯”è¾ƒåå‰¯å…¶å®çš„æ­é…ç»„åˆã€‚æ³¨é‡ååé‡æˆ–è€…å¤„ç†å™¨æ¯”è¾ƒç¨€ç¼ºçš„åœºåˆå¯ä»¥è€ƒè™‘ã€‚</p>
<p><img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/Parallel_Scavenge--Parallel_Old.png" alt></p>
<h4 id="3-5-6-cms-å¹¶å‘-æ”¶é›†å™¨">3.5.6 CMS(å¹¶å‘)æ”¶é›†å™¨</h4>
<p><code>-XX:+UseConcMarkSweepGC</code>å¼€å¯CMSï¼Œè€å¹´ä»£å¹¶å‘æ”¶é›†å™¨ï¼Œ</p>
<p>â€ƒâ€ƒCMS(Concurrent Mark Sweep)æ”¶é›†å™¨ä»¥<strong>æœ€çŸ­åœé¡¿æ—¶é—´ä¸ºç›®æ ‡</strong>ï¼Œäº’è”ç½‘ç½‘ç«™æˆ–è€…B/Sç³»ç»Ÿçš„æœåŠ¡ç«¯éå¸¸é€‚åˆä½¿ç”¨(å¦‚æœè€å¹´ä»£ä¸é¢‘ç¹GCæˆ–è€…å†…å­˜&lt;6gæ¨èï¼ŒJDK9æ—¶è¢«å®˜æ–¹ä¸æ¨èï¼Œæ¨èG1)ã€‚ä»åç§°å¯ä»¥çœ‹å‡ºCMSæ”¶é›†å™¨åŸºäº<strong>æ ‡è®°æ¸…é™¤</strong>ç®—æ³•å®ç°.<br>
æ•´ä½“åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åˆå§‹æ ‡è®°ï¼šæš‚åœæ‰€æœ‰å…¶ä»–çº¿ç¨‹(STW)ï¼Œè®°å½•ä¸‹ä¸GCRootsç›¸è¿çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼›</li>
<li>å¹¶å‘æ ‡è®°ï¼šä»GCRootså…³è”çš„å¯¹è±¡å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡æ ‡è®°ï¼Œè€—æ—¶é•¿ä½†ä¸éœ€è¦STWï¼Œå› ä¸ºç”¨æˆ·çº¿ç¨‹å¯èƒ½ä¼šä¸æ–­çš„æ›´æ–°å¼•ç”¨åŸŸï¼Œæ‰€ä»¥ GC çº¿ç¨‹æ— æ³•ä¿è¯å¯è¾¾æ€§åˆ†æçš„å®æ—¶æ€§ã€‚æ‰€ä»¥è¿™ä¸ªç®—æ³•é‡Œä¼šè·Ÿè¸ªè®°å½•è¿™äº›å‘ç”Ÿå¼•ç”¨æ›´æ–°çš„åœ°æ–¹ã€‚(é‡‡ç”¨<strong>å¢é‡æ›´æ–°</strong>ç®—æ³•è§£å†³å¹¶å‘æ‰«ææ—¶å¯¹è±¡æ¶ˆå¤±çš„é—®é¢˜)</li>
<li>é‡æ–°æ ‡è®°ï¼šä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´ï¼Œå› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚é€šå¸¸åœé¡¿æ—¶é—´æ¯”åˆå§‹æ ‡è®°æ—¶é—´é•¿ï¼Œè¿œæ¯”å¹¶å‘æ ‡è®°æ—¶é—´çŸ­ã€‚</li>
<li>å¹¶å‘æ¸…é™¤ï¼šæ¸…ç†åˆ é™¤æ ‡è®°é˜¶æ®µåˆ¤æ–­å·²ç»æ­»äº¡çš„å¯¹è±¡ï¼Œä¸éœ€è¦ç§»åŠ¨å­˜æ´»å¯¹è±¡ï¼Œå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘ã€‚</li>
</ol>
<p><img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/CMS(%E5%B9%B6%E5%8F%91)%E6%94%B6%E9%9B%86%E5%99%A8.png" alt></p>
<p>â€ƒâ€ƒå¯ä»¥çœ‹åˆ°ï¼Œè€—æ—¶æœ€é•¿çš„å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤ï¼Œåƒåœ¾æ”¶é›†å™¨å’Œç”¨æˆ·çº¿ç¨‹å¯ä»¥ä¸€èµ·å¹¶å‘æ‰§è¡Œã€‚<br>
<strong>ä¼˜ç‚¹</strong>ï¼šå¹¶å‘æ”¶é›†ã€ä½åœé¡¿<br>
<strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><strong>å¯¹å¤„ç†å™¨èµ„æºæ•æ„Ÿ</strong>ï¼šå¹¶å‘é˜¶æ®µè™½ä¸ä¼šSTWï¼Œä½†æ˜¯ä¼šå ç”¨ä¸€éƒ¨åˆ†çº¿ç¨‹ã€‚</li>
<li><strong>æ— æ³•æ”¶é›†æµ®åŠ¨åƒåœ¾</strong>ï¼š<br>
(æµ®åŠ¨åƒåœ¾ï¼šå¹¶å‘æ ‡è®°/æ¸…ç†é˜¶æ®µï¼Œç”¨æˆ·çº¿ç¨‹è¿è¡Œï¼Œåƒåœ¾å¯¹è±¡äº§ç”Ÿï¼ŒCMSè¿™æ¬¡GCæ— æ³•å¤„ç†ï¼Œåªèƒ½ä¸‹æ¬¡å¤„ç†)ã€‚<br>
ç”±äºæ— æ³•æ”¶é›†æµ®åŠ¨åƒåœ¾å¯èƒ½å‡ºç°ï¼šâ€œConcurrent Mode Failure&quot;å¤±è´¥è€Œå¯¼è‡´STWçš„Full GCäº§ç”Ÿã€‚<br>
JDk1.6æ—¶ï¼ŒCMSæ”¶é›†å™¨çš„å¯åŠ¨é˜ˆå€¼<code>è€å¹´ä»£ä½¿ç”¨ç©ºé—´</code>é»˜è®¤æå‡è‡³92%ï¼Œè¦æ˜¯CMSè¿è¡ŒæœŸé—´ï¼Œé¢„ç•™çš„å†…å­˜æ— æ³•æ»¡è¶³åˆ†é…å¯¹è±¡ï¼Œä¼šå‡ºç°ä¸€æ¬¡&quot;å¹¶å‘å¤±è´¥â€ï¼Œå¯¼è‡´å†»ç»“ç”¨æˆ·çº¿ç¨‹(STW)ï¼Œä¸´æ—¶å¯ç”¨Serial Oldæ”¶é›†å™¨ã€‚è¯·æ ¹æ®å®é™…éœ€è¦è®¾ç½®å‚æ•°<code>-XX: CMSInitiatingOccupancyFraction</code>å‚æ•°(å¯ç”¨é˜ˆå€¼)</li>
<li><strong>æ ‡è®°æ¸…é™¤ï¼Œäº§ç”Ÿç©ºé—´ç¢ç‰‡</strong>ï¼š<br>
<code>-XX: +UseCMS-CompactAtFullCollection</code>é»˜è®¤å¼€å¯ï¼ŒJDK9åºŸå¼ƒï¼ŒCMSæ”¶é›†å™¨ä¸å¾—ä¸FullGCæ—¶å¼€å¯åˆå¹¶æ•´ç†(STW)<br>
<code>-XX: CMSFullGCsBeforeCompaction</code>JDK9åºŸå¼ƒï¼Œè¡¨ç¤ºCMSæ‰§è¡Œnæ¬¡FullGCåï¼Œæ•´ç†ï¼Œé»˜è®¤ä¸º0ï¼šæ¯æ¬¡FullGCä¼šç¢ç‰‡æ•´ç†ã€‚</li>
</ul>
<h4 id="3-5-7-g1æ”¶é›†å™¨">3.5.7 G1æ”¶é›†å™¨</h4>
<p>â€ƒâ€ƒG1(Garbage First)æ”¶é›†å™¨ä¸»è¦æ˜¯é¢å‘æœåŠ¡ç«¯çš„æ”¶é›†å™¨ï¼Œå¼€åˆ›<strong>å±€éƒ¨æ”¶é›†æ€è·¯</strong>å’Œ<strong>åŸºäºRegionçš„å†…å­˜å¸ƒå±€å½¢å¼</strong>ï¼Œä¸»è¦é’ˆå¯¹é…å¤‡<strong>å¤šé¢—å¤„ç†å™¨åŠå¤§å®¹é‡å†…å­˜</strong>($\geq$6g)çš„æœºå™¨ã€‚ ä»¥æé«˜æ¦‚ç‡æ»¡è¶³GCåœé¡¿æ—¶é—´è¦æ±‚çš„åŒæ—¶,è¿˜å…·å¤‡é«˜ååé‡æ€§èƒ½ç‰¹å¾ã€‚G1çš„å‡ºç°(<strong>JDK7æ­£å¼å‡ºç°</strong>)å¯¼è‡´<code>CMS</code>è¢«å®˜æ–¹å£°æ˜ä¸ºä¸æ¨èçš„æ”¶é›†å™¨ï¼ŒåŒæ—¶ç”¨æ¥å–ä»£<code>Parallel Scavenge</code>åŠ <code>Parallel Old</code>ç»„åˆã€‚G1æ˜¯ä¸€ä¸ªé¢å‘æ•´å †(æ–°ç”Ÿä»£+è€å¹´ä»£)çš„æ”¶é›†å™¨ã€‚<br>
â€ƒâ€ƒG1è™½ç„¶ä»æ˜¯éµå¾ªåˆ†ä»£æ”¶é›†ç†è®ºè®¾è®¡çš„ï¼Œä½†æ˜¯ï¼šG1æŠŠè¿ç»­çš„Javaå †åˆ’åˆ†ä¸ºå¤šä¸ªç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸ(Region)ï¼Œæ¯ä¸ªRegionéƒ½å¯ä»¥æ ¹æ®éœ€è¦æ‰®æ¼”Edenç©ºé—´ã€Survivorç©ºé—´æˆ–è€…è€å¹´ä»£ï¼ŒG1èƒ½å¤Ÿå¯¹æ‰®æ¼”ä¸åŒè§’è‰²çš„Regioné‡‡ç”¨ä¸åŒçš„ç­–ç•¥å»å¤„ç†ã€‚<br>
â€ƒâ€ƒRegionç§æœ‰ä¸€ç±»ç‰¹æ®Šçš„<code>Humongous</code>åŒºåŸŸï¼Œä¸“é—¨å­˜å‚¨<strong>å¤§å¯¹è±¡</strong>(å¤§å°è¶…è¿‡ä¸€ä¸ªRegionå®¹é‡çš„ä¸€åŠ)ï¼Œæ¯ä¸ªRegionå¯ä»¥é€šè¿‡å‚æ•°<code>-XX:G1HeapRegionSize</code>è®¾ç½®ï¼Œå–å€¼1MB~32MBï¼Œä¸”ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>ï¼Œå¯¹äºè¶…è¿‡æ•´ä¸ªRegionçš„å¤§å¯¹è±¡ï¼Œä¼šè¢«å­˜æ”¾åœ¨Nä¸ªè¿ç»­çš„<code>Humongous Region</code>ä¸­ï¼ŒG1å¤§å¤šæ•°æŠŠ<code>Humongous Region</code>ä½œä¸ºè€å¹´ä»£çš„ä¸€éƒ¨åˆ†çœ‹å¾…ã€‚</p>
<h5 id="1-å¸ƒå±€æ¨¡å‹ï¼š">1. å¸ƒå±€æ¨¡å‹ï¼š</h5>
<p><img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/G1%E6%94%B6%E9%9B%86%E5%99%A8%E7%9A%84%E5%B8%83%E5%B1%80%E6%A8%A1%E5%9E%8B.png" alt="G1æ”¶é›†å™¨çš„å¸ƒå±€æ¨¡å‹"></p>
<h5 id="2-g1æ”¶é›†å™¨çš„ç‰¹ç‚¹ï¼š">2. G1æ”¶é›†å™¨çš„ç‰¹ç‚¹ï¼š</h5>
<ul>
<li><strong>å¹¶è¡Œä¸å¹¶å‘</strong>ï¼šG1 èƒ½å……åˆ†åˆ©ç”¨ CPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ª CPUï¼ˆCPU æˆ–è€… CPU æ ¸å¿ƒï¼‰æ¥ç¼©çŸ­ Stop-The-World åœé¡¿æ—¶é—´ã€‚éƒ¨åˆ†å…¶ä»–æ”¶é›†å™¨åŸæœ¬éœ€è¦åœé¡¿ Java çº¿ç¨‹æ‰§è¡Œçš„ GC åŠ¨ä½œï¼ŒG1 æ”¶é›†å™¨ä»ç„¶å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®© java ç¨‹åºç»§ç»­æ‰§è¡Œã€‚</li>
<li><strong>åˆ†ä»£æ”¶é›†</strong>ï¼šè™½ç„¶ G1 å¯ä»¥ä¸éœ€è¦å…¶ä»–æ”¶é›†å™¨é…åˆå°±èƒ½ç‹¬ç«‹ç®¡ç†æ•´ä¸ª GC å †ï¼Œä½†æ˜¯è¿˜æ˜¯ä¿ç•™äº†åˆ†ä»£çš„æ¦‚å¿µã€‚</li>
<li><strong>ç©ºé—´æ•´åˆ</strong>ï¼šä¸ CMS çš„â€œæ ‡è®°-æ¸…ç†â€ç®—æ³•ä¸åŒï¼ŒG1 ä»æ•´ä½“æ¥çœ‹æ˜¯åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•å®ç°çš„æ”¶é›†å™¨ï¼›ä»å±€éƒ¨ä¸Šæ¥çœ‹æ˜¯åŸºäºâ€œæ ‡è®°-å¤åˆ¶â€ç®—æ³•å®ç°çš„ã€‚</li>
<li><strong>å¯é¢„æµ‹çš„åœé¡¿</strong>ï¼šè¿™æ˜¯ G1 ç›¸å¯¹äº CMS çš„å¦ä¸€ä¸ªå¤§ä¼˜åŠ¿ï¼Œé™ä½åœé¡¿æ—¶é—´æ˜¯ G1 å’Œ CMS å…±åŒçš„å…³æ³¨ç‚¹ï¼Œä½† G1 é™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼Œèƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸º M æ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ã€‚</li>
</ul>
<h5 id="3-g1æ”¶é›†å™¨çš„è¿ä½œè¿‡ç¨‹ï¼š">3. G1æ”¶é›†å™¨çš„è¿ä½œè¿‡ç¨‹ï¼š</h5>
<ul>
<li>åˆå§‹æ ‡è®°(Initial Marking)ï¼šä»…æ ‡è®°GC Rootsèƒ½<strong>ç›´æ¥å…³è”</strong>çš„å¯¹è±¡ï¼Œéœ€è¦ä¿®æ”¹TAMSæŒ‡é’ˆï¼Œéœ€è¦STWï¼Œä½†è€—æ—¶çŸ­ï¼Œä¸”æ˜¯å€Ÿç”¨Minor GCçš„æ—¶å€™åŒæ­¥å®Œæˆï¼Œæ‰€ä»¥æ²¡æœ‰é¢å¤–åœé¡¿ã€‚</li>
<li>å¹¶å‘æ ‡è®°(Concurrent Marking)ï¼šä»GC Rootså¼€å§‹è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œé€’å½’æ‰«ææ•´ä¸ªå †ï¼Œæ‰¾åˆ°è¦å›æ”¶çš„å¯¹è±¡ï¼Œè€—æ—¶é•¿ï¼Œä½†å¯ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œé‡æ–°å¤„ç†SATBè®°å½•ä¸‹å¹¶å‘æ—¶æœ‰å¼•ç”¨å˜åŠ¨çš„å¯¹è±¡ã€‚(é‡‡ç”¨SATBè§£å†³å¹¶å‘æ‰«ææ—¶å¯¹è±¡æ¶ˆå¤±çš„é—®é¢˜)</li>
<li>æœ€ç»ˆæ ‡è®°(Final Marking)ï¼šå¯¹ç”¨æˆ·çº¿ç¨‹åšä¸€ä¸ªçŸ­æš‚çš„æš‚åœï¼Œç”¨äºå¤„ç†å¹¶å‘æ ‡è®°é˜¶æ®µç»“æŸåä»é—ç•™çš„STABè®°å½•ã€‚</li>
<li>ç­›é€‰å›æ”¶(Live Data Counting and Evacuation)ï¼šå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬æ’åºï¼Œåˆ¶å®šå›æ”¶è®¡åˆ’ï¼Œè‡ªç”±é€‰æ‹©ä»»æ„å¤šä¸ªRegionæ„æˆ<strong>å›æ”¶é›†</strong>ï¼Œç„¶åæŠŠå†³å®šå›æ”¶çš„é‚£ä¸€éƒ¨åˆ†Regionçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°ç©ºçš„Regionä¸­ï¼Œå†æ¸…ç†æ‰æ•´ä¸ªæ—§ Regionçš„å…¨éƒ¨ç©ºé—´ï¼Œå¯¹è±¡ç§»åŠ¨ï¼Œéœ€è¦STWã€‚å¤šæ¡æ”¶é›†å™¨çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚</li>
</ul>
<p>â€ƒâ€ƒG1é™¤äº†å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œå…¶ä½™é˜¶æ®µéƒ½éœ€è¦STWï¼Œç¬¦åˆå®˜æ–¹è®¾å®šçš„ç›®æ ‡ï¼šåœ¨å»¶è¿Ÿå¯æ§çš„æƒ…å†µä¸‹è·å¾—å°½å¯èƒ½é«˜çš„åå é‡ã€‚<br>
<img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/G1%E6%94%B6%E9%9B%86%E5%99%A8(%E5%B9%B6%E5%8F%91%E6%95%B4%E5%A0%86)%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="G1æ”¶é›†å™¨(å¹¶å‘æ•´å †)æµç¨‹å›¾"></p>
<h5 id="4-g1å¸¸ç”¨å‚æ•°">4. G1å¸¸ç”¨å‚æ•°</h5>
<table>
<thead>
<tr>
<th>G1çš„å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-XX:+UseG1GC</td>
<td>ä½¿ç”¨ G1 åƒåœ¾æ”¶é›†å™¨</td>
</tr>
<tr>
<td>-XX:MaxGCPauseMillis=200</td>
<td>è®¾ç½®æœŸæœ›è¾¾åˆ°çš„æœ€å¤§GCåœé¡¿æ—¶é—´æŒ‡æ ‡ï¼ˆJVMä¼šå°½åŠ›å®ç°ï¼Œä½†ä¸ä¿è¯è¾¾åˆ°ï¼‰</td>
</tr>
<tr>
<td>-XX:InitiatingHeapOccupancyPercent=45</td>
<td>å¯åŠ¨å¹¶å‘GCå‘¨æœŸæ—¶çš„å †å†…å­˜å ç”¨ç™¾åˆ†æ¯”. G1ä¹‹ç±»çš„åƒåœ¾æ”¶é›†å™¨ç”¨å®ƒæ¥è§¦å‘å¹¶å‘GCå‘¨æœŸ,åŸºäºæ•´ä¸ªå †çš„ä½¿ç”¨ç‡,è€Œä¸åªæ˜¯æŸä¸€ä»£å†…å­˜çš„ä½¿ç”¨æ¯”å€¼. ä¸º 0 åˆ™è¡¨ç¤ºâ€ä¸€ç›´æ‰§è¡ŒGCå¾ªç¯â€. é»˜è®¤å ç”¨ç‡æ˜¯æ•´ä¸ª Java å †çš„ 45%</td>
</tr>
<tr>
<td>-XX:NewRatio=n</td>
<td>æ–°ç”Ÿä»£ä¸è€ç”Ÿä»£(new/old generation)çš„å¤§å°æ¯”ä¾‹(Ratio). é»˜è®¤å€¼ä¸º 2.</td>
</tr>
<tr>
<td>-XX:SurvivorRatio=n</td>
<td>eden/survivor ç©ºé—´å¤§å°çš„æ¯”ä¾‹(Ratio). é»˜è®¤å€¼ä¸º 8.</td>
</tr>
<tr>
<td>-XX:MaxTenuringThreshold=n</td>
<td>æå‡å¹´è€ä»£çš„æœ€å¤§ä¸´ç•Œå€¼(tenuring threshold). é»˜è®¤å€¼ä¸º 15.</td>
</tr>
<tr>
<td>-XX:ParallelGCThreads=n</td>
<td>è®¾ç½®åƒåœ¾æ”¶é›†å™¨åœ¨å¹¶è¡Œé˜¶æ®µä½¿ç”¨çš„çº¿ç¨‹æ•°,é»˜è®¤å€¼éšJVMè¿è¡Œçš„å¹³å°ä¸åŒè€Œä¸åŒ.æœ€å¤šä¸º8</td>
</tr>
<tr>
<td>-XX:ConcGCThreads=n</td>
<td>å¹¶å‘åƒåœ¾æ”¶é›†å™¨ä½¿ç”¨çš„çº¿ç¨‹æ•°é‡. é»˜è®¤å€¼éšJVMè¿è¡Œçš„å¹³å°ä¸åŒè€Œä¸åŒ.</td>
</tr>
<tr>
<td>-XX:G1HeapRegionSize=n</td>
<td>ä½¿ç”¨G1æ—¶Javaå †ä¼šè¢«åˆ†ä¸ºå¤§å°ç»Ÿä¸€çš„çš„åŒº(region)ã€‚æ­¤å‚æ•°å¯ä»¥æŒ‡å®šæ¯ä¸ªheapåŒºçš„å¤§å°. é»˜è®¤å€¼å°†æ ¹æ® heap size ç®—å‡ºæœ€ä¼˜è§£. æœ€å°å€¼ä¸º 1Mb, æœ€å¤§å€¼ä¸º 32Mb.</td>
</tr>
</tbody>
</table>
<h5 id="5-g1æ”¶é›†å™¨ä¸cmsæ”¶é›†å™¨çš„æ¯”è¾ƒï¼š">5. G1æ”¶é›†å™¨ä¸CMSæ”¶é›†å™¨çš„æ¯”è¾ƒï¼š</h5>
<p>â€ƒâ€ƒç”±äºG1ä¸CMSéƒ½å…³æ³¨åœé¡¿æ—¶é—´çš„æ§åˆ¶ï¼Œå› æ­¤å®ƒé—¨ç»å¸¸ä¼šè¢«æ‹¿æ¥æ¯”è¾ƒã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">CMS</th>
<th style="text-align:center">G1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">JDk</td>
<td style="text-align:center">1.6ä»¥ä¸Š</td>
<td style="text-align:center">1.7ä»¥ä¸Š</td>
</tr>
<tr>
<td style="text-align:center">å›æ”¶åŒºåŸŸ</td>
<td style="text-align:center">è€å¹´ä»£</td>
<td style="text-align:center">æ•´å †</td>
</tr>
<tr>
<td style="text-align:center">å›æ”¶ç®—æ³•</td>
<td style="text-align:center">æ ‡è®°æ¸…é™¤</td>
<td style="text-align:center"><strong>æ•´ä½“</strong>æ¥çœ‹â€œæ ‡è®°-æ•´ç†â€ï¼›å±€éƒ¨æ¥çœ‹â€œæ ‡è®°-å¤åˆ¶â€</td>
</tr>
<tr>
<td style="text-align:center">å†…å­˜å¸ƒå±€</td>
<td style="text-align:center">ä¼ ç»Ÿè¿ç»­çš„æ–°ç”Ÿä»£<br>å’Œè€å¹´ä»£</td>
<td style="text-align:center">åˆ†æˆRegionåŒºï¼Œæ¯ä¸ªåŒºåŸŸæ ¹æ®éœ€è¦æ‰®æ¼”æ–°ç”Ÿä»£ä¸è€å¹´ä»£</td>
</tr>
<tr>
<td style="text-align:center">æŒ‡å®šæœ€å¤§åœé¡¿æ—¶é—´</td>
<td style="text-align:center">å¦</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">æŒ‰æ”¶ç›ŠåŠ¨æ€æ”¶é›†</td>
<td style="text-align:center">å¦</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">æµ®åŠ¨åƒåœ¾</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">å†…å­˜ç¢ç‰‡</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:center">å¦(æœ€ç»ˆæ ‡è®°STWï¼Œä¸ä¼šäº§ç”Ÿ)</td>
</tr>
<tr>
<td style="text-align:center">å¡è¡¨(å¤„ç†è·¨ä»£æŒ‡é’ˆ)</td>
<td style="text-align:center">å¡è¡¨ç®€å•</td>
<td style="text-align:center">å¤æ‚ï¼Œæ¯ä¸ªRegionéƒ½æœ‰ï¼Œå¯èƒ½éœ€è¦æ›´å¤šç©ºé—´</td>
</tr>
<tr>
<td style="text-align:center">Full GC</td>
<td style="text-align:center">å†…å­˜å›æ”¶è¾¾ä¸åˆ°åˆ†é…Full GC</td>
<td style="text-align:center">å†…å­˜å›æ”¶è¾¾ä¸åˆ°åˆ†é…Full GC</td>
</tr>
</tbody>
</table>
<h5 id="6-g1è§£å†³çš„ä¸€äº›é—®é¢˜">6. G1è§£å†³çš„ä¸€äº›é—®é¢˜</h5>
<ul>
<li>è·¨Regionå¼•ç”¨å¯¹è±¡è§£å†³ï¼šä½¿ç”¨è®°å¿†é›†ï¼Œæ¯ä¸ªRegionç»´æŠ¤ä¸€ä»½ï¼Œè®°å¿†é›†è®°å½•åˆ«çš„RegionæŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆï¼Œæ ‡è®°æŒ‡é’ˆåœ¨å“ªäº›å¡ä¹Ÿé¡µèŒƒå›´ã€‚æœ¬è´¨ä¸Šæ˜¯å“ˆå¸Œè¡¨ï¼Œè¿™ç§åŒå‘å¡è¡¨ï¼šæˆ‘æŒ‡å‘è°ï¼ŒåŒæ—¶æœ‰è°æŒ‡å‘æˆ‘ã€‚</li>
<li>å¹¶å‘æ ‡è®°é˜¶æ®µæ”¶é›†çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹äº’ä¸å¹²æ‰°ï¼š
<ol>
<li>ä¿è¯ç”¨æˆ·çº¿ç¨‹æ”¹å˜å¯¹è±¡å¼•ç”¨å…³ç³»æ—¶ï¼Œä¸ä¼šæ‰“ç ´åŸæœ¬çš„å¯¹è±¡å›¾ç»“æ„ï¼Œå¯¼è‡´æ ‡è®°ç»“æœå‡ºé”™ã€‚CMSé‡‡ç”¨<strong>å¢é‡æ›´æ–°ç®—æ³•</strong>ï¼Œè€ŒG1é‡‡ç”¨<strong>åŸå§‹å¿«ç…§</strong>(SATB)ã€‚</li>
<li>å›æ”¶è¿‡ç¨‹ä¸­æ–°å¯¹è±¡åˆ›å»ºï¼Œæ¯ä¸ªRegionä¸¤ä¸ªTAMSæŒ‡é’ˆï¼ŒæŠŠRegionä¸€éƒ¨åˆ†ç©ºé—´åˆ’åˆ†ç”¨äºå¹¶å‘å›æ”¶çš„å¯¹è±¡åˆ†é…ï¼Œå¿…é¡»åˆ†é…åˆ°TAMSæŒ‡é’ˆä½ç½®ä¸Šï¼ŒG1é»˜è®¤ä¸å›æ”¶ä»–ä»¬ã€‚</li>
</ol>
</li>
<li>åœé¡¿é¢„æµ‹æ¨¡å‹ï¼šä»¥è¡°å‡å‡å€¼ï¼ˆDecaying Averageï¼‰ä¸ºç†è®ºåŸºç¡€æ¥å®ç°ã€‚é€šè¿‡è¿™äº›ä¿¡æ¯é¢„æµ‹ç°åœ¨å¼€å§‹å›æ”¶ï¼Œç”±å“ªäº›Regionç»„æˆå›æ”¶é›†æ‰å¯ä»¥åœ¨ä¸è¶…è¿‡æœŸæœ›åœé¡¿æ—¶é—´çš„çº¦æŸä¸‹è·å¾—æœ€é«˜çš„æ”¶ç›Šã€‚</li>
</ul>
<table><br></table>
<h3 id="5-ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨">5. ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨</h3>
<p>â€ƒâ€ƒåƒåœ¾æ”¶é›†å™¨çš„ä¸‰é¡¹æŒ‡æ ‡ï¼šå†…å­˜å ç”¨ã€ååé‡ã€å»¶è¿Ÿã€‚ä¼˜ç§€çš„æ”¶é›†å™¨é€šå¸¸æœ€å¤šèƒ½å®ç°å…¶ä¸­çš„ä¸¤é¡¹ã€‚ç›®å‰æ›´å…³æ³¨ï¼š<strong>å»¶è¿Ÿ</strong>ã€‚å†…å­˜å˜å¤§çš„å‘å±•ï¼Œå®Œæ•´çš„GCä¼šå¯¼è‡´å»¶è¿Ÿæ›´é«˜ã€‚å‡ºç°äº†ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ã€‚<br>
<img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/å„æ”¶é›†å™¨å¹¶å‘æƒ…å†µ.png" alt="å„æ”¶é›†å™¨å¹¶å‘æƒ…å†µ" style="zoom:80%; margin: 0 auto"></p>
<p>Compactï¼šæ•´ç†ï¼›  Concuurent=Concï¼šå¹¶å‘ï¼›  partialï¼š</p>
<h4 id="5-1-shenandoahæ”¶é›†å™¨">5.1 Shenandoahæ”¶é›†å™¨</h4>
<p>ToDo</p>
<table><br></table>
<h4 id="5-2-zgc">5.2 ZGC</h4>
<p>å¯å‚è€ƒ <a href="https://tech.meituan.com/2020/08/06/new-zgc-practice-in-meituan.html">æ–°ä¸€ä»£åƒåœ¾å›æ”¶å™¨ZGCçš„æ¢ç´¢ä¸å®è·µ</a><br>
â€ƒåœ¨å¯¹ååé‡å½±å“ä¸å¤§çš„æƒ…å†µï¼Œå®ç°å¯¹ä»»æ„å †å†…å­˜å¤§å°åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´é™åˆ¶åœ¨10æ¯«ç§’å†…ã€‚<br>
ZGCå¯ä»¥<strong>é™ä½å»¶è¿Ÿ</strong>(åœ¨ä½å»¶è¿Ÿï¼šTP999&lt;200msæ”¶ç›Šè¾ƒå¤§)ã€‚  ä½†ä¼šå¸¦æ¥<strong>ååé‡ä¸‹é™</strong>æƒ…å†µ(ZGCå•ä»£åƒåœ¾å›æ”¶ï¼Œæ¯æ¬¡å›æ”¶å¤„ç†å¯¹è±¡æ›´å¤šï¼Œæ›´è€—CPUèµ„æºï¼›ZGCä½¿ç”¨è¯»å±éšœï¼Œéœ€è¦é¢å¤–æ¶ˆè€—è®¡ç®—èµ„æº)ã€‚<br>
JDK11(Linux)å¼€å§‹ã€‚JDK15(Windows)å¼€å§‹ã€‚</p>
<h4 id="1-ç‰¹ç‚¹ï¼š">1.  ç‰¹ç‚¹ï¼š</h4>
<p>â€ƒâ€ƒåŸºäºRegion(<strong>å®˜æ–¹ï¼špage/ZPage</strong>)å†…å­˜å¸ƒå±€ï¼ŒæŸ“è‰²æŒ‡é’ˆå’Œè¯»å±éšœè§£å†³è½¬ç§»è¿‡ç¨‹ä¸­å¯¹è±¡çš„è®¿é—®é—®é¢˜ï¼ŒåŒæ—¶å®ç°äº†å¯å¹¶å‘çš„<strong>æ ‡è®°-æ•´ç†</strong>ç®—æ³•ï¼Œä»¥ä½å»¶è¿Ÿä½é¦–è¦ç›®æ ‡ã€‚</p>
<h4 id="2-å†…å­˜å¸ƒå±€">2. å†…å­˜å¸ƒå±€</h4>
<p>â€ƒâ€ƒZGCåŸºäºRegionå †å†…å­˜å¸ƒå±€ï¼Œä½†ZGCçš„Regionå…·æœ‰åŠ¨æ€æ€§ï¼šåŠ¨æ€åˆ›å»ºä¸é”€æ¯ã€åŠ¨æ€åŒºåŸŸå®¹é‡å¤§å°ã€‚</p>
<ul>
<li>å°å‹Region(Small Region)ï¼šå®¹é‡å›ºå®š2MBï¼Œæ”¾ç½®å°äº256KBå¯¹è±¡ã€‚</li>
<li>ä¸­å‹Region(Small Region)ï¼šå›ºå®š32MBï¼Œæ”¾ç½®256KB<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¤</mo></mrow><annotation encoding="application/x-tex">\leq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">â‰¤</span></span></span></span>n$\leq$4MBå¯¹è±¡ã€‚</li>
<li>å¤§å‹Region(Large Region)ï¼šå®¹é‡ä¸å›ºå®šï¼Œä½†å¿…é¡»ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>ã€‚</li>
</ul>
<h4 id="3-zgcçš„æµç¨‹">3.  ZGCçš„æµç¨‹</h4>
<p>â€ƒâ€ƒå¤§è‡´å¦‚å›¾å››ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µ<strong>éƒ½å¯ä»¥å¹¶å‘</strong>ï¼Œä¸¤ä¸ªé˜¶æ®µé—´ä¼šå­˜åœ¨çŸ­æš‚åœé¡¿å°é˜¶æ®µ(Pause)ï¼ŒçŸ­æš‚åœé¡¿åªä¸GC Rootsç›¸å…³ï¼Œä¸å †å†…å­˜æ— å…³ã€‚<br>
â€ƒâ€ƒZGCé‡‡ç”¨<strong>å¹¶å‘æ•´ç†</strong>ç®—æ³•ï¼ŒZGCåœ¨æ ‡è®°ã€è½¬ç§»ã€å’Œé‡å®šä½é˜¶æ®µå‡ ä¹æ˜¯å¹¶å‘ã€‚</p>
 <img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/ZGCæµç¨‹.png" style="zoom:80%;">
<ul>
<li>å¹¶å‘æ ‡è®°(Concurrent Mark)ï¼šå‰åè¦ç»å†Pause Mark Startä¸Pause Mark EndçŸ­æš‚åœé¡¿ã€‚ZGCçš„æ ‡è®°æ˜¯æŒ‡é’ˆä¸Šè€Œä¸æ˜¯å¯¹è±¡ä¸Šï¼Œæ ‡è®°é˜¶æ®µä¼šæ›´æ–°æŸ“è‰²æŒ‡é’ˆä¸­çš„Marked 0ã€Marked 1æ ‡å¿—ã€‚</li>
<li>å¹¶å‘é¢„å¤‡é‡åˆ†é…(Concurrent Prepare for Relocate)ï¼šæ ¹æ®æŸ¥è¯¢æ¡ä»¶ç»Ÿè®¡æ¸…ç†å“ªäº›Regionï¼Œå°†è¿™äº›Regionç»„æˆ<strong>é‡åˆ†é…é›†</strong>(Relocation Set)ã€‚å¹¶éä¸ºäº†æ”¶ç›Šä¼˜å…ˆGCï¼Œè€Œåªæ˜¯å†³å®šé‡Œé¢çš„å­˜æ´»å¯¹è±¡ä¼šè¢«é‡æ–°å¤åˆ¶åˆ°å…¶ä»–Regionä¸­ã€‚</li>
<li>å¹¶å‘é‡åˆ†é…(Concurrent Relocate)ï¼šæ ¸å¿ƒé˜¶æ®µï¼ŒæŠŠ<strong>é‡åˆ†é…é›†</strong>ä¸­çš„å¯¹è±¡å¤åˆ¶åˆ°æ–°çš„Regionä¸Šï¼Œä¸ºé‡åˆ†é…é›†ä¸­çš„æ¯ä¸ªRegionç»´æŠ¤ä¸€ä¸ªè½¬å‘è¡¨ã€‚<br>
ZGCçš„æŒ‡é’ˆ&quot;è‡ªæ„ˆ&quot;(å¦‚æœç”¨æˆ·çº¿ç¨‹è®¿é—®äº†é‡åˆ†é…é›†çš„å¯¹è±¡ï¼Œè¿™æ¬¡è®¿é—®ä¼šè¢«é¢„ç½®çš„å†…å­˜å±éšœæ‰€æˆªè·ï¼Œå¹¶æ ¹æ®Regionçš„è½¬å‘è¡¨è®°å½•è®¿é—®åˆ°æ–°å¤åˆ¶çš„å¯¹è±¡ï¼ŒåŒæ—¶ä¿®æ­£æ›´æ–°çš„å¼•ç”¨å€¼ï¼ŒæŒ‡å‘æ–°å¯¹è±¡)ã€‚å¥½å¤„åªæœ‰ç¬¬ä¸€æ¬¡ä¼šè½¬å‘ï¼Œæ…¢ä¸€æ¬¡ã€‚</li>
<li>å¹¶å‘é‡æ˜ å°„(Concurrent Remap)ï¼šä¿®æ­£æ•´ä¸ªå †ä¸­æŒ‡å‘<strong>é‡åˆ†é…é›†</strong>ä¸­æ—§å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ï¼Œå› ä¸ºæœ‰&quot;è‡ªæ„ˆ&quot;ï¼ŒZGCçš„è¯¥é˜¶æ®µå¹¶ä¸è¿«åˆ‡ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ä¸å˜æ…¢ã€‚ZGCæŠŠ<strong>å¹¶å‘é‡æ˜ å°„</strong>é˜¶æ®µçš„å·¥ä½œåˆå¹¶åˆ°ä¸‹æ¬¡åƒåœ¾æ”¶é›†çš„<strong>å¹¶å‘æ ‡è®°</strong>é˜¶æ®µå¤„ç†ã€‚</li>
</ul>
<h4 id="4-zgcå…³é”®æŠ€æœ¯">4. ZGCå…³é”®æŠ€æœ¯</h4>
<p>â€ƒâ€ƒZGCé€šè¿‡<strong>ç€è‰²æŒ‡é’ˆ</strong>å’Œ<strong>è¯»å±éšœ</strong>æŠ€æœ¯ï¼Œè§£å†³è½¬ç§»è¿‡ç¨‹ä¸­çš„å¯¹è±¡é—®é¢˜ï¼Œå®ç°å¹¶å‘æ•´ç†ã€‚å‡è®¾å¯¹è±¡å‘ç”Ÿè½¬ç§»ï¼Œä½†å¯¹è±¡åœ°å€æœªåŠæ—¶æ›´æ–°ï¼Œé‚£ä¹ˆåº”ç”¨çº¿ç¨‹å¯èƒ½è®¿é—®åˆ°æ—§åœ°å€ï¼Œä»è€Œé€ æˆé”™è¯¯ã€‚è€Œåœ¨ZGCä¸­ï¼Œåº”ç”¨çº¿ç¨‹è®¿é—®å¯¹è±¡å°†è§¦å‘â€œè¯»å±éšœâ€ï¼Œå¦‚æœå‘ç°å¯¹è±¡è¢«ç§»åŠ¨äº†ï¼Œé‚£ä¹ˆâ€œè¯»å±éšœâ€ä¼šæŠŠè¯»å‡ºæ¥çš„æŒ‡é’ˆæ›´æ–°åˆ°å¯¹è±¡çš„æ–°åœ°å€ä¸Šï¼Œè¿™æ ·åº”ç”¨çº¿ç¨‹å§‹ç»ˆè®¿é—®çš„éƒ½æ˜¯å¯¹è±¡çš„æ–°åœ°å€ã€‚JVMåˆ©ç”¨å¯¹è±¡å¼•ç”¨çš„åœ°å€åˆ¤æ–­å¯¹è±¡è¢«ç§»åŠ¨è¿‡ï¼Œå³ç€è‰²æŒ‡é’ˆã€‚</p>
<h5 id="4-1-ç€è‰²æŒ‡é’ˆï¼š">4.1 ç€è‰²æŒ‡é’ˆï¼š</h5>
<blockquote>
<p>å°†ä¿¡æ¯å­˜å‚¨åœ¨æŒ‡é’ˆä¸­çš„æŠ€æœ¯</p>
</blockquote>
<p>â€ƒâ€ƒç›´æ¥å°†å°‘é‡çš„é¢å¤–ä¿¡æ¯å­˜å‚¨åœ¨æŒ‡é’ˆä¸Š(Linuxä¸‹64ä½æŒ‡é’ˆé«˜18ä½ä¸èƒ½ç”¨æ¥å¯»å€ï¼Œå‰©ä¸‹çš„çš„46ä½æŒ‡é’ˆå–å…¶é«˜4ä½å­˜å‚¨4ä¸ªæ ‡å¿—ä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥ä»æŒ‡é’ˆä¸Šçœ‹åˆ°å¼•ç”¨å¯¹è±¡çš„ä¸‰è‰²æ ‡è®°ã€æ˜¯å¦è¿›å…¥é‡åˆ†é…é›†(ç§»åŠ¨è¿‡)ã€æ˜¯å¦åªèƒ½é€šè¿‡finalize()æ–¹æ³•æ‰èƒ½è®¿é—®)ã€‚<br>
â€ƒâ€ƒZGCåªæ”¯æŒ64ä½ç³»ç»Ÿï¼ŒæŠŠ64ä½è™šæ‹Ÿåœ°å€ç©ºé—´åˆ’åˆ†å¤šä¸ªå­ç©ºé—´ï¼š<br>
<img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/ZGC%E7%9A%8464%E4%BD%8D%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4.png" alt="ZGCçš„64ä½è™šæ‹Ÿåœ°å€ç©ºé—´"><br>
â€ƒâ€ƒå…¶ä¸­ï¼Œ[0~4TB) å¯¹åº”Javaå †ï¼Œ[4TB ~ 8TB) ç§°ä¸ºM0åœ°å€ç©ºé—´ï¼Œ[8TB ~ 12TB) ç§°ä¸ºM1åœ°å€ç©ºé—´ï¼Œ[12TB ~ 16TB) é¢„ç•™æœªä½¿ç”¨ï¼Œ[16TB ~ 20TB) ç§°ä¸ºRemappedç©ºé—´ã€‚<br>
å½“å¯¹è±¡åˆ›å»ºæ—¶ï¼Œé¦–å…ˆåœ¨å †ä¸­ç”³è¯·ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œä¸ä¼šçœŸçš„æ˜ å°„ç‰©ç†åœ°å€ï¼ŒZGCåŒæ—¶ä¼šåœ¨M0ã€M1å’ŒRemappedç©ºé—´åˆ†åˆ«ç”³è¯·ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œä¸”ä¸‰ä¸ªè™šæ‹Ÿåœ°å€å¯¹åº”ä¸€ä¸ªç‰©ç†åœ°å€ã€‚ä½†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªç©ºé—´æœ‰æ•ˆã€‚å› ä¸ºä¸ºäº†ç”¨&quot;ç©ºé—´æ¢æ—¶é—´&quot;ï¼Œé™ä½GCåœé¡¿æ—¶é—´ã€‚</p>
<p>â€ƒâ€ƒZGCå®é™…åªä½¿ç”¨64ä½åœ°å€ç©ºé—´çš„0~41ä½ï¼Œ42~45å­˜å‚¨å…ƒæ•°æ®ï¼Œ47~63ä½å›ºå®šä¸º0ã€‚ZGCå°†å¯¹è±¡å­˜æ´»ä¿¡æ¯å­˜å‚¨åœ¨42~45ä½ï¼Œä¸ä¼ ç»Ÿå¾·åƒåœ¾å›æ”¶å°†å¯¹è±¡å­˜æ´»ä¿¡æ¯æ”¾åœ¨å¯¹è±¡å¤´ä¸­ä¸åŒã€‚<br>
<img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/ZGC%E7%9A%8464%E4%BD%8D%E7%A9%BA%E9%97%B4%E5%9C%B0%E5%9D%80%E4%BD%BF%E7%94%A8.png" alt></p>
<h5 id="4-2-è¯»å±éšœ">4.2 è¯»å±éšœ</h5>
<blockquote>
<p>è¯»å±éšœæ˜¯JVMå‘åº”ç”¨ä»£ç æ’å…¥ä¸€å°æ®µä»£ç çš„æŠ€æœ¯ã€‚å½“åº”ç”¨çº¿ç¨‹ä»å †ä¸­è¯»å–å¯¹è±¡å¼•ç”¨æ—¶ï¼Œå°±ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»…â€œä»å †ä¸­è¯»å–å¯¹è±¡å¼•ç”¨â€æ‰ä¼šè§¦å‘è¿™æ®µä»£ç ã€‚</p>
</blockquote>
<p>è¯»å±éšœç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> obj.FieldA   <span class="comment">// ä»å †ä¸­è¯»å–å¼•ç”¨ï¼Œéœ€è¦åŠ å…¥å±éšœ</span></span><br><span class="line">&lt;Load barrier&gt;</span><br><span class="line"><span class="type">Object</span> <span class="variable">p</span> <span class="operator">=</span> o  <span class="comment">// æ— éœ€åŠ å…¥å±éšœï¼Œå› ä¸ºä¸æ˜¯ä»å †ä¸­è¯»å–å¼•ç”¨</span></span><br><span class="line">o.dosomething() <span class="comment">// æ— éœ€åŠ å…¥å±éšœï¼Œå› ä¸ºä¸æ˜¯ä»å †ä¸­è¯»å–å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span>  obj.FieldB  <span class="comment">//æ— éœ€åŠ å…¥å±éšœï¼Œå› ä¸ºä¸æ˜¯å¯¹è±¡å¼•ç”¨</span></span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒZGCçš„è¯»å±éšœä»£ç ä½œç”¨ï¼šå¯¹è±¡æ ‡è®°ä¸è½¬ç§»è¿‡ç¨‹ä¸­ï¼Œç”¨äºç¡®å®šå¯¹è±¡çš„å¼•ç”¨åœ°å€æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œåšå‡ºç›¸åº”åŠ¨ä½œã€‚</p>
<h5 id="4-3-zgcå¹¶å‘åœ°å€å®ä½“åˆ‡æ¢">4.3 ZGCå¹¶å‘åœ°å€å®ä½“åˆ‡æ¢</h5>
<ul>
<li><strong>åˆå§‹åŒ–</strong>ï¼šZGCåˆå§‹åŒ–ä¹‹åï¼Œæ•´ä¸ªå†…å­˜ç©ºé—´çš„åœ°å€è§†å›¾è¢«è®¾ç½®ä¸ºRemappedã€‚ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œåœ¨å†…å­˜ä¸­åˆ†é…å¯¹è±¡ï¼Œæ»¡è¶³ä¸€å®šæ¡ä»¶ååƒåœ¾å›æ”¶å¯åŠ¨ï¼Œæ­¤æ—¶è¿›å…¥æ ‡è®°é˜¶æ®µã€‚</li>
<li><strong>å¹¶å‘æ ‡è®°é˜¶æ®µ</strong>ï¼šç¬¬ä¸€æ¬¡è¿›å…¥æ ‡è®°é˜¶æ®µæ—¶è§†å›¾ä¸ºM0ï¼Œå¦‚æœå¯¹è±¡è¢«GCæ ‡è®°çº¿ç¨‹æˆ–è€…åº”ç”¨çº¿ç¨‹è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°±å°†å¯¹è±¡çš„åœ°å€è§†å›¾ä»Remappedè°ƒæ•´ä¸ºM0ã€‚æ‰€ä»¥ï¼Œåœ¨æ ‡è®°é˜¶æ®µç»“æŸä¹‹åï¼Œå¯¹è±¡çš„åœ°å€è¦ä¹ˆæ˜¯M0è§†å›¾ï¼Œè¦ä¹ˆæ˜¯Remappedã€‚å¦‚æœå¯¹è±¡çš„åœ°å€æ˜¯M0è§†å›¾ï¼Œé‚£ä¹ˆè¯´æ˜å¯¹è±¡æ˜¯æ´»è·ƒçš„ï¼›å¦‚æœå¯¹è±¡çš„åœ°å€æ˜¯Remappedè§†å›¾ï¼Œè¯´æ˜å¯¹è±¡æ˜¯ä¸æ´»è·ƒçš„ã€‚</li>
<li><strong>å¹¶å‘è½¬ç§»(é‡åˆ†é…)é˜¶æ®µ</strong>ï¼šæ ‡è®°ç»“æŸåå°±è¿›å…¥è½¬ç§»é˜¶æ®µï¼Œæ­¤æ—¶åœ°å€è§†å›¾å†æ¬¡è¢«è®¾ç½®ä¸ºRemappedã€‚å¦‚æœå¯¹è±¡è¢«GCè½¬ç§»çº¿ç¨‹æˆ–è€…åº”ç”¨çº¿ç¨‹è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°±å°†å¯¹è±¡çš„åœ°å€è§†å›¾ä»M0è°ƒæ•´ä¸ºRemappedã€‚</li>
</ul>
<p>â€ƒâ€ƒå…¶å®ï¼Œåœ¨æ ‡è®°é˜¶æ®µå­˜åœ¨ä¸¤ä¸ªåœ°å€è§†å›¾M0å’ŒM1ï¼Œä¸Šé¢çš„è¿‡ç¨‹æ˜¾ç¤ºåªç”¨äº†ä¸€ä¸ªåœ°å€è§†å›¾ã€‚ä¹‹æ‰€ä»¥è®¾è®¡æˆä¸¤ä¸ªï¼Œæ˜¯ä¸ºäº†åŒºåˆ«å‰ä¸€æ¬¡æ ‡è®°å’Œå½“å‰æ ‡è®°ã€‚ä¹Ÿå³ï¼Œç¬¬äºŒæ¬¡è¿›å…¥å¹¶å‘æ ‡è®°é˜¶æ®µåï¼Œåœ°å€è§†å›¾è°ƒæ•´ä¸ºM1ï¼Œè€ŒéM0ã€‚<br>
â€ƒâ€ƒç€è‰²æŒ‡é’ˆå’Œè¯»å±éšœæŠ€æœ¯ä¸ä»…åº”ç”¨åœ¨å¹¶å‘è½¬ç§»é˜¶æ®µï¼Œè¿˜åº”ç”¨åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼šå°†å¯¹è±¡è®¾ç½®ä¸ºå·²æ ‡è®°ï¼Œä¼ ç»Ÿçš„åƒåœ¾å›æ”¶å™¨éœ€è¦è¿›è¡Œä¸€æ¬¡å†…å­˜è®¿é—®ï¼Œå¹¶å°†å¯¹è±¡å­˜æ´»ä¿¡æ¯æ”¾åœ¨å¯¹è±¡å¤´ä¸­ï¼›è€Œåœ¨ZGCä¸­ï¼Œåªéœ€è¦è®¾ç½®æŒ‡é’ˆåœ°å€çš„ç¬¬42~45ä½å³å¯ï¼Œå¹¶ä¸”å› ä¸ºæ˜¯å¯„å­˜å™¨è®¿é—®ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”è®¿é—®å†…å­˜æ›´å¿«ã€‚</p>
<h4 id="5-ä¸‰å¤§ä¼˜åŠ¿ï¼š">5. ä¸‰å¤§ä¼˜åŠ¿ï¼š</h4>
<ul>
<li>æŸä¸ªRegionçš„å­˜æ´»å¯¹è±¡è¢«ç§»èµ°åï¼ŒRegionèƒ½å¤Ÿç«‹å³è¢«é‡Šæ”¾å’Œé‡ç”¨ã€‚(èƒ½å¤Ÿ&quot;è‡ªæ„ˆ&quot;)ã€‚</li>
<li>å¤§å¹…å‡å°‘åƒåœ¾æ”¶é›†ä¸­çš„å†…å­˜å±éšœä½¿ç”¨é‡ï¼Œåªä½¿ç”¨äº†è¯»å±éšœï¼Œæ²¡ä½¿ç”¨å†™å±éšœ(æŸ“è‰²æŒ‡é’ˆ+ä¸æ”¯æŒåˆ†ä»£æ”¶é›†)ã€‚</li>
<li>å¯æ‰©å±•çš„å­˜å‚¨ç»“æ„ï¼ŒLinuxä¸‹64ä½æŒ‡é’ˆè¿˜æœ‰18ä½æ²¡æœ‰ä½¿ç”¨ã€‚</li>
</ul>
<h4 id="6-é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼š">6. é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼š</h4>
<p>â€ƒâ€ƒè™šæ‹Ÿæœºé‡æ–°å®šä¹‰å†…å­˜ä¸­çš„æŸå‡ ä½æŒ‡é’ˆï¼Œå¤„ç†å™¨åªä¼šå°†æ•´ä¸ªæŒ‡é’ˆéƒ½è§†ä¸ºå†…å­˜åœ°å€ã€‚ä½†x86-64ä¸æ”¯æŒç±»ä¼¼SPARCç¡¬ä»¶çš„è™šæ‹Ÿåœ°å€æ©ç ã€‚å› æ­¤ZGCé‡‡ç”¨äº†<strong>è™šæ‹Ÿå†…å­˜æ˜ å°„</strong>æŠ€æœ¯ã€‚<br>
Linux/x86-64å¹³å°çš„ZGCä½¿ç”¨<strong>å¤šé‡æ˜ å°„</strong>å°†å¤šä¸ªä¸åŒçš„è™šæ‹Ÿå†…å­˜åœ°å€æ˜ å°„åˆ°åŒä¸€ä¸ªç‰©ç†å†…å­˜åœ°å€ä¸Šï¼Œå¤šå¯¹ä¸€æ„å‘³ç€è™šæ‹Ÿå†…å­˜ä¸­çœ‹åˆ°çš„åœ°å€ç©ºé—´æ¯”å®é™…çš„å †å†…å­˜å®¹é‡æ›´å¤§ã€‚<br>
<img src="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/å¤šé‡æ˜ å°„ä¸‹çš„å¯»å€.png" alt="image-20210329214227352" style="zoom:80%;"></p>
<h4 id="7-zgcè°ƒä¼˜">7. ZGCè°ƒä¼˜</h4>
<p>è¯·å‚è€ƒï¼š  <a href="https://tech.meituan.com/2020/08/06/new-zgc-practice-in-meituan.html">æ–°ä¸€ä»£åƒåœ¾å›æ”¶å™¨ZGCçš„æ¢ç´¢ä¸å®è·µ</a><br>
ä»¥ä¸‹å‚æ•°æ¥è‡ªä¸Šé¢é“¾æ¥çš„æ–‡ç« ï¼Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-Xms10G -Xmx10G  -- å †çš„æœ€å¤§æœ€å°å†…å­˜ï¼š10g(æŒ‰æœåŠ¡å™¨è°ƒæ•´)</span><br><span class="line">-XX:ReservedCodeCacheSize=256m -XX:InitialCodeCacheSize=256m -- CodeCacheä¸€èˆ¬64mæˆ–128è¶³å¤Ÿ</span><br><span class="line">-XX:+UnlockExperimentalVMOptions -XX:+UseZGC  -- å¯ç”¨ZGC</span><br><span class="line">-XX:ConcGCThreads=2 -XX:ParallelGCThreads=6  -- å¹¶å‘å›æ”¶çº¿ç¨‹ï¼Œé»˜è®¤æ€»æ ¸1/8ï¼› STWé˜¶æ®µä½¿ç”¨çº¿ç¨‹æ•°ï¼Œé»˜è®¤æ€»æ ¸60%</span><br><span class="line">-XX:ZCollectionInterval=120 -XX:ZAllocationSpikeTolerance=5  -- ZGCå‘ç”Ÿçš„æœ€å°æ—¶é—´é—´éš”ï¼Œå•ä½ç§’ï¼› ZGCè§¦å‘è‡ªé€‚åº”ç®—æ³•ä¿®æ­£ç³»æ•°ï¼Œé»˜è®¤2(è¶Šå¤§è¶Šæ—©è§¦å‘GC)</span><br><span class="line">-XX:+UnlockDiagnosticVMOptions -XX:-ZProactive  -- äº‹å‘å¯ç”¨ä¸»åŠ¨å›æ”¶ï¼Œé»˜è®¤å¼€å¯ï¼Œè¿™é‡Œå‚æ•°è¡¨ç¤ºå…³é—­</span><br><span class="line">-Xlog:safepoint,classhisto*=trace,age*,gc*=info:file=/opt/logs/logs/gc-%t.log:time,tid,tags:filecount=5,filesize=50m  -- è®¾ç½®GCæ—¥å¿—çš„å†…å®¹ã€æ ¼å¼ã€ä½ç½®ã€æ—¥å¿—å¤§å°</span><br></pre></td></tr></table></figure>
<table><br></table>
<h3 id="6-åƒåœ¾æ”¶é›†å™¨çš„é€‰æ‹©">6. åƒåœ¾æ”¶é›†å™¨çš„é€‰æ‹©</h3>
<ul>
<li>å¦‚æœæ˜¯æ•°æ®åˆ†æã€ç§‘å­¦è®¡ç®—ï¼Œç›®æ ‡æ˜¯å°½å¿«ç®—å‡ºç»“æœï¼Œåˆ™åº”è¯¥å…³æ³¨ååé‡ã€‚</li>
<li>å¦‚æœæ˜¯SLAåº”ç”¨(ç½‘ç»œæœåŠ¡æä¾›)ï¼Œåœé¡¿æ—¶é—´å½±å“æœåŠ¡è´¨é‡ï¼Œå»¶è¿Ÿæ˜¯å…³æ³¨ç‚¹ã€‚</li>
<li>å®¢æˆ·ç«¯åº”ç”¨æˆ–è€…åµŒå…¥å¼åº”ç”¨ï¼Œåº”è¯¥å…³æ³¨åƒåœ¾æ”¶é›†å™¨çš„å ç”¨å†…å­˜ã€‚</li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¸Šåº”è¯¥è€ƒè™‘JDKçš„å‘è¡Œå•†ã€JDKç‰ˆæœ¬ã€‚</p>
<p>ä¾‹å¦‚ï¼šé¢å‘ç”¨æˆ·æä¾›æœåŠ¡æˆ–è€…è½¯ä»¶è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li>å¦‚æœæœ‰å……è¶³çš„é¢„ç®—ï¼Œæ²¡æœ‰è°ƒä¼˜ç»éªŒï¼šå¯ä»¥è€ƒè™‘å•†ä¸šçš„Zing VMã€‚</li>
<li>ä½¿ç”¨è¾ƒæ–°çš„ç¡¬ä»¶ä¸JDKï¼Œå¯ä»¥è€ƒè™‘ZGCã€‚</li>
<li>å¦‚æœæ˜¯é—ç•™ç³»ç»Ÿï¼Œæ ¹æ®å†…å­˜è§„æ¨¡è¡¡é‡ï¼š4GB~6GBå †å†…å­˜ï¼Œæ¨èCMSï¼Œå¯¹äºæ›´å¤§çš„å †ï¼Œå¯ä»¥è€ƒè™‘G1ã€‚</li>
</ul>
<table><br></table>
<h3 id="å‚è€ƒ">å‚è€ƒ</h3>
<ul>
<li>ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœº JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ç¬¬äºŒéƒ¨åˆ†ç¬¬ä¸‰ç« </li>
<li><a href="https://tech.meituan.com/2020/08/06/new-zgc-practice-in-meituan.html">æ–°ä¸€ä»£åƒåœ¾å›æ”¶å™¨ZGCçš„æ¢ç´¢ä¸å®è·µ</a></li>
</ul>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>Jvm</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå†…å­˜åŒºåŸŸ</title>
    <url>/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/</url>
    <content><![CDATA[<p>Javaçš„å†…å­˜åŒºåŸŸåœ¨jdk1.6æ—¶å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»jdk1.8çš„å†…å­˜åŒºåŸŸï¼ŒåŒæ—¶ä¼šæŒ‡æ˜å‘ç”Ÿäº†é‚£äº›å˜åŒ–ã€‚(è¯»ä¹¦ç¬”è®°)</p>
<span id="more"></span>
<h3 id="ä¸€-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ">ä¸€ã€è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ</h3>
<h4 id="1-å†…å­˜åŒºåŸŸåˆ’åˆ†å›¾ç¤º">1. å†…å­˜åŒºåŸŸåˆ’åˆ†å›¾ç¤º</h4>
<h5 id="1-1-jdk1-7ä¹‹å‰ï¼š">1.1 <strong>JDK1.7ä¹‹å‰</strong>ï¼š</h5>
<p><img src="/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/JDK1.6%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E5%88%92%E5%88%86.png" alt="JDK1.6å†…å­˜åŒºåŸŸåˆ’åˆ†"></p>
<h5 id="1-2-jdk1-8">1.2 <strong>JDK1.8</strong></h5>
<p><img src="/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/JDK1.8%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E5%88%92%E5%88%86.png" alt="JDK1.8å†…å­˜åŒºåŸŸåˆ’åˆ†"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š</p>
<ul>
<li>
<p>çº¿ç¨‹ç§æœ‰ï¼šè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨</p>
</li>
<li>
<p>çº¿ç¨‹å…±äº«ï¼šå †ã€å…ƒç©ºé—´(æ–¹æ³•åŒº)ã€ç›´æ¥å†…å­˜(éè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†)</p>
</li>
</ul>
<h4 id="2-è™šæ‹Ÿæœºæ ˆ">2.è™šæ‹Ÿæœºæ ˆ</h4>
<ol>
<li><strong>è™šæ‹Ÿæœºæ ˆå¯ä»¥ç®€å•çš„ç†è§£ä¸ºæ‰§è¡ŒJava æ–¹æ³• (ä¹Ÿå°±æ˜¯å­—èŠ‚ç ) æœåŠ¡ã€‚æè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ã€‚</strong></li>
<li>Java å†…å­˜å¯ä»¥ç²—ç³™çš„åŒºåˆ†ä¸º<strong>å †å†…å­˜</strong>ï¼ˆHeapï¼‰å’Œ<strong>æ ˆå†…å­˜</strong> (Stack),å…¶ä¸­æ ˆå°±æ˜¯ç°åœ¨è¯´çš„è™šæ‹Ÿæœºæ ˆï¼Œæˆ–è€…è¯´æ˜¯è™šæ‹Ÿæœºæ ˆä¸­å±€éƒ¨å˜é‡è¡¨éƒ¨åˆ†ã€‚ ï¼ˆå®é™…ä¸Šï¼ŒJava è™šæ‹Ÿæœºæ ˆæ˜¯ç”±ä¸€ä¸ªä¸ªæ ˆå¸§ç»„æˆï¼Œè€Œæ¯ä¸ªæ ˆå¸§ä¸­éƒ½æ‹¥æœ‰ï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ä¿¡æ¯ã€‚ï¼‰</li>
<li><strong>Javaè™šæ‹Ÿæœºä¼šå‡ºç°ä¸¤ç§é”™è¯¯ï¼š<code>StackOverFlowerError</code>ä¸<code>OutOfMemoryError</code>(OOM)ã€‚</strong>
<ul>
<li><code>StackOverFlowerError</code>ï¼š<strong>æ ˆå†…å­˜æº¢å‡ºé”™è¯¯</strong>ï¼šè‹¥ Java è™šæ‹Ÿæœºæ ˆçš„å†…å­˜å¤§å°ä¸å…è®¸åŠ¨æ€æ‰©å±•ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹è¯·æ±‚æ ˆçš„æ·±åº¦è¶…è¿‡å½“å‰ Java è™šæ‹Ÿæœºæ ˆçš„æœ€å¤§æ·±åº¦çš„æ—¶å€™ï¼Œå°±æŠ›å‡º <code>StackOverFlowError</code> é”™è¯¯ã€‚</li>
<li><code>OutOfMemoryError</code>ï¼š<strong>å †å†…å­˜æº¢å‡ºé”™è¯¯</strong>ï¼šè‹¥ Java è™šæ‹Ÿæœºå †ä¸­æ²¡æœ‰ç©ºé—²å†…å­˜ï¼Œå¹¶ä¸”åƒåœ¾å›æ”¶å™¨ä¹Ÿæ— æ³•æä¾›æ›´å¤šå†…å­˜çš„è¯ã€‚å°±ä¼šæŠ›å‡º OutOfMemoryError é”™è¯¯ã€‚</li>
</ul>
</li>
<li>Java æ ˆå¯ç”¨ç±»æ¯”æ•°æ®ç»“æ„ä¸­æ ˆï¼ŒJava æ ˆä¸­ä¿å­˜çš„ä¸»è¦å†…å®¹æ˜¯æ ˆå¸§ï¼Œæ¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„æ ˆå¸§è¢«å‹å…¥ Java æ ˆï¼Œæ¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ç»“æŸåï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ ˆå¸§è¢«å¼¹å‡ºã€‚ Java æ–¹æ³•æœ‰ä¸¤ç§è¿”å›æ–¹å¼ï¼š1. return è¯­å¥ã€‚2. æŠ›å‡ºå¼‚å¸¸ã€‚ä»¥ä¸Šä¸¤ç§æ–¹å¼ä¼šå¯¼è‡´æ ˆå¸§å¼¹æ ˆã€‚</li>
</ol>
<h4 id="3-æœ¬åœ°æ–¹æ³•æ ˆ">3.æœ¬åœ°æ–¹æ³•æ ˆ</h4>
<ol>
<li><strong>æœ¬åœ°æ–¹æ³•æ ˆå¯ä»¥ç®€å•çš„ç†è§£ä¸ºæ‰§è¡Œæœ¬åœ° æ–¹æ³• (ä¹Ÿå°±æ˜¯Native) æœåŠ¡ã€‚</strong> åœ¨ HotSpot è™šæ‹Ÿæœºä¸­å’Œ Java è™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€ã€‚</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆçš„æ‰§è¡Œä¹Ÿä¼šåˆ›å»ºæ ˆå¸§ã€‚</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šæœ‰<code>StackOverFlowerError</code>ä¸<code>OutOfMemory</code>é”™è¯¯ã€‚</li>
</ol>
<h4 id="4-ç¨‹åºè®¡æ•°å™¨">4.ç¨‹åºè®¡æ•°å™¨</h4>
<ol>
<li><strong>ç¨‹åºè®¡æ•°å™¨å¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨</strong>ï¼Œå­—èŠ‚ç è§£é‡Šå™¨é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤(å¯ä»¥ä¿å­˜çº¿ç¨‹çš„æ‰§è¡Œç°åœº) ç­‰åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</li>
<li>ç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰è‡ªå·±çš„è®¡æ•°å™¨ï¼Œå„è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç›®çš„æ˜¯ä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ã€‚</li>
<li>ç¨‹åºè®¡æ•°å™¨æ˜¯å”¯ä¸€ä¸ä¼šå‡ºç°<code>OutOfMemory</code>é”™è¯¯ï¼Œç”Ÿå‘½å‘¨æœŸä¸è‡ªå·±çš„çº¿ç¨‹ç›¸åŒ</li>
</ol>
<h4 id="5-å †">5.å †</h4>
<ol>
<li>å †æ˜¯JVMä¸­æœ€å¤§çš„åœ°æ–¹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜</li>
<li>Javaçš„åƒåœ¾å›æ”¶ä¸»è¦åœ¨å †ä¸­ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºGCå †ï¼ŒJava8é‡‡ç”¨çš„åˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•<br>
<span style="color:red"><a href="/2021/03/22/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" title="JVMåƒåœ¾å›æ”¶">JVMåƒåœ¾å›æ”¶</a></span>ã€‚</li>
<li>å †å†…å­˜åˆ†ä¸ºï¼š
<ol>
<li>æ–°ç”Ÿä»£(Young Generation) :åŒ…æ‹¬EdenåŒº(å¤åˆ¶ç®—æ³•ï¼Œgcåå­˜æ´»çš„å¤åˆ¶è¿›å…¥survivoræˆ–è€ç”Ÿä»£(å¤§å¯¹è±¡))ï¼ŒSurvivor Fromä¸Survivor To(å¤åˆ¶)</li>
<li>è€ç”Ÿä»£(Old Generation): (æ ‡è®°æ•´ç†)</li>
<li>æ°¸ç”Ÿä»£(Permanent Generation)   || å…ƒç©ºé—´(JDK1.8)</li>
</ol>
</li>
</ol>
<p><img src="/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/Java%E7%9A%84%E5%A0%86%E5%86%85%E5%AD%98(%E5%B9%B4%E9%BE%84%E4%BB%A3)%E5%88%92%E5%88%86.png" alt="Javaçš„å †å†…å­˜(å¹´é¾„ä»£)åˆ’åˆ†"></p>
<h4 id="6-æ–¹æ³•åŒº-å…ƒç©ºé—´">6.æ–¹æ³•åŒº(å…ƒç©ºé—´)</h4>
<p>çº¿ç¨‹å…±äº«ï¼Œç”¨äºå­˜æ”¾è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</p>
<ol>
<li>
<p>æ–¹æ³•åŒºä¸æ°¸ä¹…ä»£çš„å…³ç³»ï¼š</p>
<ul>
<li>æ°¸ä¹…ä»£æ˜¯HotSpotè™šæ‹Ÿæœºä¸­å¯¹æ–¹æ³•åŒºçš„ä¸€ç§å®ç°ã€‚</li>
</ul>
</li>
<li>
<p>JDK1.8ç§»é™¤æ°¸ä¹…ä»£æ›¿æ¢ä¸ºå…ƒç©ºé—´çš„åŸå› </p>
<ul>
<li>
<p>æ°¸ä¹…ä»£å­˜åœ¨OOMé—®é¢˜ï¼šæ°¸ä¹…ä»£æœ‰JVMè®¾ç½®çš„å›ºå®šå¤§å°ï¼Œå…ƒç©ºé—´å—æœ¬æœºå†…å­˜çš„é™åˆ¶ï¼Œå…ƒç©ºé—´OOMçš„å‡ ç‡ä¼šæ›´å°ã€‚</p>
</li>
<li>
<p>åœ¨ JDK8ï¼Œåˆå¹¶ HotSpot å’Œ JRockit çš„ä»£ç æ—¶, JRockit ä»æ¥æ²¡æœ‰ä¸€ä¸ªå«æ°¸ä¹…ä»£çš„ä¸œè¥¿, åˆå¹¶ä¹‹åå°±æ²¡æœ‰å¿…è¦é¢å¤–çš„è®¾ç½®è¿™ä¹ˆä¸€ä¸ªæ°¸ä¹…ä»£çš„åœ°æ–¹äº†</p>
</li>
</ul>
</li>
</ol>
<h4 id="7-è¿è¡Œæ—¶å¸¸é‡æ± ">7. è¿è¡Œæ—¶å¸¸é‡æ± </h4>
<p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚Class æ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰å¸¸é‡æ± è¡¨ï¼ˆç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰</p>
<ol>
<li>jdk1.7ä¹‹å‰ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± åŒ…æ‹¬å­—ç¬¦ä¸²å¸¸é‡æ± åœ¨æ–¹æ³•åŒºï¼ŒHotSpotçš„å®ç°ä¸ºæ°¸ä¹…ä»£ã€‚</li>
<li>jdk1.7ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä»æ–¹æ³•åŒºç§»å…¥å †ä¸­ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± ä¾æ—§åœ¨æ–¹æ³•åŒºï¼ŒHotSpotçš„å®ç°ä¸ºæ°¸ä¹…ä»£ã€‚</li>
<li>jdk1.8ï¼Œæ°¸ä¹…ä»£ç§»é™¤ï¼Œæ›¿æ¢ä¸ºå…ƒç©ºé—´ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± ä¹Ÿç§»å…¥å…ƒç©ºé—´ã€‚</li>
</ol>
<h4 id="8-ç›´æ¥å†…å­˜">8. ç›´æ¥å†…å­˜</h4>
<p>ç›´æ¥å†…å­˜ä¸å—javaå †åˆ†é…çš„é™åˆ¶ï¼Œå—æœ¬æœºæ€»å†…å­˜å¤§å°ä»¥åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ã€‚ä½¿ç”¨è¿‡å¤šï¼Œä¾æ—§ä¼šå‡ºç°OOMé—®é¢˜ã€‚</p>
<h3 id="äºŒ-hotspotè™šæ‹Ÿæœºçš„å¯¹è±¡ç®¡ç†">äºŒã€HotSpotè™šæ‹Ÿæœºçš„å¯¹è±¡ç®¡ç†</h3>
<h4 id="2-1-å¯¹è±¡çš„åˆ›å»º">2.1ã€ å¯¹è±¡çš„åˆ›å»º</h4>
<p><img src="/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/Java%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B.png" alt></p>
<ol>
<li>
<p><strong>ç±»åŠ è½½æ£€æµ‹</strong><br>
å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡ new æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå°†å»æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°è¿™ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½è¿‡ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚<br>
<span style="color:red">ç±»åŠ è½½æœºåˆ¶ï¼šã€‚ã€‚ã€‚</span></p>
</li>
<li>
<p><strong>åˆ†é…å†…å­˜</strong><br>
åœ¨<strong>ç±»åŠ è½½æ£€æŸ¥</strong>é€šè¿‡åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡<strong>åˆ†é…å†…å­˜</strong>ã€‚å¯¹è±¡æ‰€éœ€çš„å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡ç­‰åŒäºæŠŠä¸€å—ç¡®å®šå¤§å°çš„å†…å­˜ä» Java å †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚<strong>åˆ†é…æ–¹å¼</strong>æœ‰ <strong>â€œæŒ‡é’ˆç¢°æ’â€</strong> å’Œ <strong>â€œç©ºé—²åˆ—è¡¨â€</strong> ä¸¤ç§ï¼Œ<strong>é€‰æ‹©å“ªç§åˆ†é…æ–¹å¼ç”± Java å †æ˜¯å¦è§„æ•´å†³å®šï¼Œè€Œ Java å †æ˜¯å¦è§„æ•´åˆç”±æ‰€é‡‡ç”¨çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å¦å¸¦æœ‰å‹ç¼©æ•´ç†åŠŸèƒ½å†³å®š</strong>ã€‚</p>
<ol>
<li>æŒ‡é’ˆç¢°æ’ï¼šå †å†…å­˜è§„æ•´ï¼Œç”¨è¿‡çš„å†…å­˜ä¸€è¾¹ï¼Œæ²¡ç”¨è¿‡çš„å¦ä¸€åŠï¼Œä¸­é—´ä¸€ä¸ªåˆ†ç•ŒæŒ‡é’ˆï¼Œåªéœ€è¦å‘æ²¡ç”¨è¿‡çš„å†…å­˜æ–¹å‘ç§»åŠ¨æŒ‡é’ˆå³å¯</li>
<li>ç©ºé—²åˆ—è¡¨ï¼šå¯¹å†…å­˜ä¸è§„æ•´ï¼Œå †å†…å­˜ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨è®°å½•é‚£å—å†…å­˜å¯ç”¨ï¼Œåˆ†é…çš„æ—¶å€™æ‰¾ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å†…å­˜æ¥åˆ’åˆ†å¯¹è±¡å®ä¾‹ã€‚</li>
</ol>
<p>åˆ†é…å†…å­˜çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š</p>
<ol>
<li>CAS+å¤±è´¥é‡è¯•æœºåˆ¶ï¼šè™šæ‹Ÿæœºé‡‡ç”¨CASå†é…ä¸Šå¤±è´¥é‡è¯•æœºåˆ¶ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§</li>
<li>TLABï¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹é¢„å…ˆå†EDENåŒºåˆ†é…ä¸€å—å†…å­˜ï¼ŒJVMå†ç»™å¯¹è±¡åˆ†é…å†…å­˜æ—¶é¦–å…ˆåœ¨TLABåˆ†é…ï¼Œå½“å¯¹è±¡å¤§äºTLABçš„å‰©ä½™å†…å­˜æˆ–TLABçš„å†…å­˜ç”¨å°½æ—¶ï¼Œå†é‡‡ç”¨ä¸Šè¿°çš„CASè¿›è¡Œå†…å­˜åˆ†é…ã€‚</li>
</ol>
</li>
<li>
<p><strong>åˆå§‹åŒ–é›¶å€¼</strong><br>
åˆ†é…å†…å­˜å®Œæ¯•ä¹‹åï¼Œéœ€è¦å°†åˆ†é…çš„å†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼Œä¿è¯å¯¹è±¡å®ä¾‹å­—æ®µä¸èµ‹å€¼ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œèƒ½è®¿é—®è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹å¯¹åº”çš„é›¶å€¼ã€‚</p>
</li>
<li>
<p><strong>è®¾ç½®å¯¹è±¡å¤´</strong><br>
åˆå§‹åŒ–é›¶å€¼ä¹‹åï¼Œå¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®ï¼Œä¾‹å¦‚è¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œç ã€å¯¹è±¡çš„ GC åˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚ <strong>è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡å¤´</strong></p>
</li>
<li>
<p><strong>æ‰§è¡Œinitæ–¹æ³•</strong><br>
å¯¹è™šæ‹Ÿæœºè€Œè¨€ï¼Œå¯¹è±¡å·²ç»äº§ç”Ÿï¼Œä½†javaç¨‹åºè€Œè¨€ï¼Œå¯¹è±¡åˆ›å»ºæ‰åˆšå¼€å§‹ï¼Œå¯¹è±¡éœ€è¦æ‰§è¡Œinitæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æŠŠå¯¹è±¡ï¼ˆå®ä¾‹å˜é‡ï¼‰æŒ‰ç…§ç¨‹åºä¸­å®šä¹‰çš„åˆå§‹èµ‹å€¼è¿›è¡Œåˆå§‹åŒ–ï¼›</p>
</li>
</ol>
<h4 id="2-2-å¯¹è±¡çš„å†…å­˜å¸ƒå±€">2.2ã€ å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h4>
<p>â€‹    åœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­å¯ä»¥åˆ†ä¸ºä¸‰å—åŒºåŸŸï¼š<strong>å¯¹è±¡å¤´ã€å®ä¾‹æ•°æ®ã€å¯¹é½å¡«å……</strong></p>
<p><img src="/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/Java%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80.png" alt></p>
<ol>
<li>å¯¹è±¡å¤´ï¼šåŒ…æ‹¬ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼Œç¬¬ä¸€éƒ¨åˆ†<strong>å­˜å‚¨å¯¹è±¡çš„è‡ªèº«è¿è¡Œæ—¶æ•°æ®</strong>(å“ˆå¸Œç ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€çš„æ ‡å¿—ç­‰ç­‰)ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯<strong>ç±»å‹æŒ‡é’ˆ</strong>ï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆã€‚</li>
<li>å®ä¾‹æ•°æ®ï¼šå­˜å‚¨æœ‰æ•ˆä¿¡æ¯ï¼Œå³å­˜å‚¨ç¨‹åºæ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ã€‚</li>
<li>å¯¹é½å¡«å……ï¼šä¸å¿…ç„¶å­˜åœ¨ï¼Œä»…ä»…èµ·ä¸€ä¸ªå ä½çš„ä½œç”¨ï¼šç”±äºHotSpotè™šæ‹Ÿæœºè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯<strong>8å­—èŠ‚çš„æ•´æ•°å€</strong>(å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€)ã€‚å¡«å……æ•°æ®ä¸æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œä»…ä»…æ˜¯ä¸ºäº†å­—èŠ‚å¯¹é½ã€‚<br>
æ ¹æ®â€œè®¡ç®—æœºç»„æˆåŸç†â€ï¼Œ8ä¸ªå­—èŠ‚æ˜¯è®¡ç®—æœºè¯»å–å’Œå­˜å‚¨çš„æœ€ä½³å®è·µ</li>
</ol>
<h4 id="3-3-å¯¹è±¡çš„è®¿é—®å®šä½">3.3 ã€å¯¹è±¡çš„è®¿é—®å®šä½</h4>
<p>â€‹    å¯¹è±¡çš„è®¿é—®ç”±è™šæ‹Ÿæœºå†³å®šï¼Œä¸»æµçš„æœ‰ä¸¤ç§ï¼š1. ä½¿ç”¨å¥æŸ„ã€2.ç›´æ¥æŒ‡é’ˆ</p>
<ol>
<li>å¥æŸ„è®¿é—®ï¼š<br>
javaä¼šå°†å †åˆ’åˆ†å‡ºæ¥ä¸€éƒ¨åˆ†å†…å­˜å»ä½œä¸ºå¥æŸ„æ± ï¼Œreferenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œå¥æŸ„ä¸­åˆ™æ˜¯åŒ…å«çš„å¯¹è±¡å®ä¾‹çš„æ•°æ®çš„åœ°å€å’Œå¯¹è±¡ç±»å‹æ•°æ®(å¦‚å¯¹è±¡çš„ç±»å‹ï¼Œå®ç°çš„æ¥å£ã€æ–¹æ³•ã€çˆ¶ç±»ã€fieldç­‰)çš„å…·ä½“åœ°å€ä¿¡æ¯ã€‚<br>
ä¾‹ï¼šObject obj = new Object();<br>
Object obj è¡¨ç¤ºä¸€ä¸ªæœ¬åœ°å¼•ç”¨ï¼Œå­˜å‚¨åœ¨javaæ ˆçš„æœ¬åœ°å˜é‡è¡¨ä¸­ï¼Œè¡¨ç¤ºä¸€ä¸ªreferenceç±»å‹çš„æ•°æ®ã€‚<br>
new Object()ä½œä¸ºå®ä¾‹å¯¹è±¡å­˜æ”¾åœ¨javaå †ä¸­ï¼ŒåŒæ—¶javaå †ä¸­è¿˜å­˜å‚¨äº†Objectç±»çš„ä¿¡æ¯(å¯¹è±¡çš„ç±»å‹ã€å®ç°æ¥å£ã€æ–¹æ³•ç­‰)çš„å…·ä½“åœ°å€ä¿¡æ¯ï¼Œè¿™äº›åœ°å€ä¿¡æ¯æ‰€æ‰§è¡Œçš„æ•°æ®ç±»å‹å­˜å‚¨åœ¨æ–¹æ³•åŒº</li>
</ol>
<p><img src="/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BF%E9%97%AE%E5%AE%9A%E4%BD%8D-%E4%BD%BF%E7%94%A8%E5%8F%A5%E6%9F%84.png" alt></p>
<ol start="2">
<li>ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼š<br>
ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼Œjavaå¯¹è±¡çš„å†…å­˜å¸ƒå±€å°±å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼Œreferenceä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡åœ°å€ï¼Œå¦‚æœæ˜¯è®¿é—®å¯¹è±¡æœ¬èº«çš„è¯ï¼Œå°±ä¸éœ€è¦å¤šä¸€æ¬¡é—´æ¥è®¿é—®çš„å¼€é”€ã€‚</li>
</ol>
<p><img src="/2021/02/22/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BF%E9%97%AE%E5%AE%9A%E4%BD%8D-%E7%9B%B4%E6%8E%A5%E6%8C%87%E9%92%88.png" alt></p>
<p>ä¼˜åŠ£åŠ¿ï¼š</p>
<ol>
<li>å¥æŸ„ï¼šæœ€å¤§çš„å¥½å¤„æ˜¯referenceä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨(å¦‚åƒåœ¾å›æ”¶çš„ç§»åŠ¨)æ—¶ï¼Œåªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œreferenceæœ¬èº«ä¸éœ€è¦è¢«ä¿®æ”¹ã€‚</li>
<li>æŒ‡é’ˆï¼šæœ€å¤§çš„å¥½å¤„æ˜¯é€Ÿåº¦æ›´å¿«ï¼Œå®ƒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œç”±äºå¯¹è±¡çš„è®¿é—®åœ¨Javaä¸­éå¸¸é¢‘ç¹ï¼Œå› æ­¤è¿™ç±»å¼€é”€ç§¯å°‘æˆå¤šä¹Ÿæ˜¯ä¸€é¡¹å³ä½å¯è§‚çš„æ‰§è¡Œæˆæœ¬ã€‚</li>
</ol>
<h3 id="å‚è€ƒ">å‚è€ƒ</h3>
<ul>
<li>ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœº JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ç¬¬äºŒéƒ¨åˆ†ç¬¬äºŒç« </li>
</ul>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>Jvm</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlå‘½ä»¤æ€»ç»“(äºŒ)</title>
    <url>/2021/02/18/Mysql%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93(%E4%BA%8C)/</url>
    <content><![CDATA[<p><strong>ç‰ˆæƒå£°æ˜</strong>ï¼šæœ¬æ–‡è½¬è½½è‡ª<a href="https://shockerli.net/post/1000-line-mysql-note/">ä¸€åƒè¡Œ MySQL å­¦ä¹ ç¬”è®°</a>ï¼Œå¹¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿›è¡Œäº†<strong>å¢åˆ æ”¹</strong>ã€‚</p>
<span id="more"></span>
<h2 id="mysqlæ¥ä¸Šç¯‡">mysqlæ¥ä¸Šç¯‡</h2>
<p><strong>æ³¨ï¼šæ‰€æœ‰æ“ä½œåŸºäºday01æ•°æ®åº“</strong></p>
<p><strong>æ³¨ï¼šæ‰€æœ‰sqlå‘½ä»¤ä¸­çš„ [å­—æ®µ] æ„ä¸ºå¯é€‰å­—æ®µ</strong></p>
<h3 id="åä¸€-å¤‡ä»½ä¸è¿˜åŸ">åä¸€ã€å¤‡ä»½ä¸è¿˜åŸ</h3>
<p><span style="color:red">æ³¨æ„ï¼šä»¥ä¸‹æ‰€æœ‰å‘½ä»¤ä¸èƒ½åœ¨mysqlçš„å‘½ä»¤ç¯å¢ƒä¸­æ‰§è¡Œï¼Œåœ¨çº¯å‘½ä»¤è¡Œä¸­æ‰§è¡Œã€‚</span>ä»¥ä¸‹è·¯å¾„ä¸ºwindowsè·¯å¾„</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">åˆ©ç”¨ mysqldump æŒ‡ä»¤å®Œæˆã€‚</span><br><span class="line"><span class="comment">-- å¯¼å‡º</span></span><br><span class="line">    mysqldump [options] db_name [tables]</span><br><span class="line">    mysqldump [options] <span class="comment">---database DB1 [DB2 DB3...]</span></span><br><span class="line">    mysqldump [options] <span class="comment">--all--database</span></span><br><span class="line">    <span class="number">1.</span> å¯¼å‡ºä¸€å¼ è¡¨</span><br><span class="line">        mysqldump <span class="operator">-</span>uç”¨æˆ·å <span class="operator">-</span>på¯†ç  åº“å è¡¨å <span class="operator">&gt;</span> æ–‡ä»¶å(D:\a.sql)	</span><br><span class="line">    <span class="number">2.</span> å¯¼å‡ºå¤šå¼ è¡¨</span><br><span class="line">        mysqldump <span class="operator">-</span>uç”¨æˆ·å <span class="operator">-</span>på¯†ç  åº“å è¡¨<span class="number">1</span> è¡¨<span class="number">2</span> è¡¨<span class="number">3</span> <span class="operator">&gt;</span> æ–‡ä»¶å(D:\a.sql)</span><br><span class="line">          <span class="comment">-- ä¾‹ï¼šmysqldump -uç”¨æˆ·å -på¯†ç  day01 user t_user &gt; D:\user_table.sql</span></span><br><span class="line">          <span class="comment">-- è§£é‡Šï¼šå¯¼å‡ºday01ä¸‹çš„userè¡¨ä¸t_userè¡¨</span></span><br><span class="line">    <span class="number">3.</span> å¯¼å‡ºæ‰€æœ‰è¡¨</span><br><span class="line">        mysqldump <span class="operator">-</span>uç”¨æˆ·å <span class="operator">-</span>på¯†ç  åº“å <span class="operator">&gt;</span> æ–‡ä»¶å(D:\a.sql)</span><br><span class="line">    <span class="number">4.</span> å¯¼å‡ºä¸€ä¸ªåº“</span><br><span class="line">        mysqldump <span class="operator">-</span>uç”¨æˆ·å <span class="operator">-</span>på¯†ç  <span class="comment">--lock-all-tables --database åº“å &gt; æ–‡ä»¶å(D:\a.sql)</span></span><br><span class="line">          <span class="comment">-- (--lock-all-tables) åœ¨mysqldumpå¯¼å‡ºçš„æ•´ä¸ªè¿‡ç¨‹ä¸­ä»¥readæ–¹å¼é”ä½æ‰€æœ‰è¡¨</span></span><br><span class="line">	å¯ä»¥<span class="operator">-</span>wæºå¸¦<span class="keyword">WHERE</span>æ¡ä»¶</span><br><span class="line"><span class="comment">-- å¯¼å…¥</span></span><br><span class="line"><span class="number">1.</span> åœ¨ç™»å½•mysqlçš„æƒ…å†µä¸‹ï¼š</span><br><span class="line">    source  å¤‡ä»½æ–‡ä»¶</span><br><span class="line"><span class="number">2.</span> åœ¨ä¸ç™»å½•çš„æƒ…å†µä¸‹</span><br><span class="line">    mysql <span class="operator">-</span>uç”¨æˆ·å <span class="operator">-</span>på¯†ç  åº“å <span class="operator">&lt;</span> å¤‡ä»½æ–‡ä»¶</span><br><span class="line">      <span class="comment">-- ä¾‹ï¼šmysql -uç”¨æˆ·å -på¯†ç  day02 &lt; D:\user_table.sql</span></span><br><span class="line">      <span class="comment">-- è§£é‡Šï¼šå°†Dç›˜è·¯å¾„ä¸‹çš„è¯¥sqlæ–‡ä»¶å¯¼å…¥åˆ°day02æ•°æ®åº“ä¸­(day02æ•°æ®åº“å¿…é¡»å·²ç»å­˜åœ¨)</span></span><br></pre></td></tr></table></figure>
<h3 id="åäºŒ-è§†å›¾">åäºŒã€è§†å›¾</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ä»€ä¹ˆæ˜¯è§†å›¾ï¼šè§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨</span><br><span class="line">    è§†å›¾çš„ä½œç”¨ç±»ä¼¼äºç­›é€‰å‡ºä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œå®šä¹‰è§†å›¾çš„ç­›é€‰å¯ä»¥æ¥è‡ªå½“å‰æˆ–å…¶å®ƒæ•°æ®åº“çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ï¼Œæˆ–è€…å…¶å®ƒè§†å›¾ã€‚</span><br><span class="line">    å®ƒä¸»è¦å‡ºäºä¸¤ç§åŸå› ï¼š</span><br><span class="line">        <span class="number">1.</span> å®‰å…¨åŸå› ï¼Œè§†å›¾å¯ä»¥éšè—ä¸€äº›æ•°æ®ä¸è¡¨ç»“æ„ï¼Œå¯¹å®¢æˆ·ç«¯éšè—çœŸå®çš„è¡¨ç»“æ„</span><br><span class="line">        <span class="number">2.</span> å¦ä¸€åŸå› æ˜¯å¯ä½¿å¤æ‚çš„æŸ¥è¯¢æ˜“äºç†è§£å’Œä½¿ç”¨ã€‚ç®€åŒ–ä¸šåŠ¡é€»è¾‘</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºè§†å›¾</span></span><br><span class="line">    <span class="keyword">CREATE</span> [<span class="keyword">OR</span> REPLACE] [ALGORITHM<span class="operator">=</span>&#123;UNDEFINED <span class="operator">|</span> <span class="keyword">MERGE</span> <span class="operator">|</span> TEMPTABLE&#125;] <span class="keyword">VIEW</span> view_name [(column_list)] <span class="keyword">AS</span> select_statement</span><br><span class="line">    <span class="comment">-- or replace:å¦‚æœå­˜åœ¨åŒåçš„è¡¨åˆ™æ›¿æ¢(ä¹Ÿå¯ç”¨äºå®Œå…¨æ›´æ–°)</span></span><br><span class="line">    <span class="comment">-- ALGORITHM=ï¼š(æŒ‡å®šè§†å›¾æ‰§è¡Œçš„ç®—æ³•ï¼Œä¸€èˆ¬ä¸ç”¨)</span></span><br><span class="line">        <span class="comment">-- UNDEFINED:æœªå®šä¹‰ï¼Œè‡ªåŠ¨ï¼Œè®©ç³»ç»Ÿå¸®ä½ é€‰</span></span><br><span class="line">        <span class="comment">-- MERGE:å½“ä½¿ç”¨è§†å›¾æ—¶ï¼Œä¼šæŠŠæŸ¥è¯¢è§†å›¾çš„è¯­å¥å’Œåˆ›å»ºè§†å›¾çš„è¯­å¥åˆå¹¶èµ·æ¥ï¼Œå½¢æˆä¸€æ¡è¯­</span></span><br><span class="line">        <span class="comment">-- TEMPTABLE:å½“ä½¿ç”¨è§†å›¾æ—¶ï¼Œä¼šæŠŠåˆ›å»ºè§†å›¾çš„è¯­å¥çš„æŸ¥è¯¢ç»“æœå½“æˆä¸€å¼ ä¸´æ—¶è¡¨ï¼Œå†ä»ä¸´æ—¶è¡¨ä¸­è¿›è¡Œç­›é€‰</span></span><br><span class="line">    <span class="comment">-- (column_list)ï¼šç”¨äºç»™è§†å›¾çš„åˆ—å–åˆ«åï¼Œæ•°ç›®å¿…é¡»ç­‰äºSELECTè¯­å¥æ£€ç´¢çš„åˆ—æ•°(ä¸€èˆ¬ä¸ç”¨ï¼Œç›´æ¥åœ¨selectè¡¨åaså–åˆ«åå³å¯)</span></span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šCREATE VIEW view_user (v_id, v_name, v_age) as (SELECT id, name, age FROM user);</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼šå°†ä»useræŸ¥è¯¢åˆ°çš„ç»“æœåˆ›å»ºä¸€å¼ è™šæ‹Ÿè¡¨view_userï¼Œå¹¶å°†å¯¹åº”çš„ç»“æœå–åˆ«åv_id,v_name,v_ageï¼›</span></span><br><span class="line">        <span class="comment">-- æ¨èä¸‹é¢è¿™ç§ï¼Œä¾¿äºç†è§£ï¼Œç»“æœåŒä¸Š</span></span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šCREATE VIEW view_user as (SELECT id as v_id, name as v_name, age as v_age FROM user);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹ç»“æ„</span></span><br><span class="line">    <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹è¡¨çš„çŠ¶æ€(å¯ä»¥ç”¨æ¥æŸ¥çœ‹è¡¨è¿˜æ˜¯è§†å›¾)</span></span><br><span class="line">    <span class="keyword">SHOW</span> <span class="keyword">table</span> status;</span><br><span class="line">    <span class="comment">-- show tables -- æŸ¥çœ‹æ‰€æœ‰è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤è§†å›¾(çœç•¥å·ï¼šå¤šä¸ª)</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span> [IF <span class="keyword">EXISTS</span>] view_name, ...</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- ä¿®æ”¹è§†å›¾ç»“æ„</span></span><br><span class="line">    <span class="operator">-</span> ä¸€èˆ¬ä¸ä¿®æ”¹è§†å›¾ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„æ›´æ–°è§†å›¾éƒ½ä¼šæ˜ å°„åˆ°è¡¨ä¸Šã€‚</span><br><span class="line">    <span class="keyword">ALTER</span> <span class="keyword">VIEW</span> view_name [(column_list)] <span class="keyword">AS</span> select_statement</span><br><span class="line">    <span class="operator">-</span> è§†å›¾çš„å…¶ä»–ç»“æ„çš„ä¿®æ”¹åŒè¡¨çš„ä¿®æ”¹</span><br><span class="line">        <span class="comment">-- æ”¹åï¼šRENAME TABLE view_money to vw_money;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- è§†å›¾çš„å¢åˆ æ”¹</span></span><br><span class="line">    æ³¨ï¼šå¦‚æœå¯¹è§†å›¾çš„ä¸€æ¬¡å¢åˆ æ”¹åªä¼šå½±å“åŸæœ¬ä¸€ä¸ªè¡¨çš„æ•°æ®ï¼Œé‚£ä¹ˆä¼šæ‰§è¡ŒæˆåŠŸå¹¶æ›´æ–°åŸæœ¬çš„è¡¨</span><br><span class="line">        å¦‚æœä¸€æ¬¡å½±å“ä¸¤å¼ æˆ–ä»¥ä¸Šçš„è¡¨çš„æ•°æ®ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</span><br><span class="line">		</span><br><span class="line"><span class="comment">-- è§†å›¾ç®—æ³•(ALGORITHM)</span></span><br><span class="line">    <span class="keyword">MERGE</span>       åˆå¹¶</span><br><span class="line">        å°†è§†å›¾çš„æŸ¥è¯¢è¯­å¥ï¼Œä¸å¤–éƒ¨æŸ¥è¯¢éœ€è¦å…ˆåˆå¹¶å†æ‰§è¡Œï¼</span><br><span class="line">    TEMPTABLE   ä¸´æ—¶è¡¨</span><br><span class="line">        å°†è§†å›¾æ‰§è¡Œå®Œæ¯•åï¼Œå½¢æˆä¸´æ—¶è¡¨ï¼Œå†åšå¤–å±‚æŸ¥è¯¢ï¼</span><br><span class="line">    UNDEFINED   æœªå®šä¹‰(é»˜è®¤)ï¼ŒæŒ‡çš„æ˜¯MySQLè‡ªä¸»å»é€‰æ‹©ç›¸åº”çš„ç®—æ³•ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="åä¸‰-äº‹åŠ¡">åä¸‰ã€äº‹åŠ¡</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">äº‹åŠ¡æ˜¯æŒ‡é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„æ“ä½œçš„å„ä¸ªå•å…ƒï¼Œè¦ä¸å…¨æˆåŠŸè¦ä¸å…¨å¤±è´¥ã€‚</span><br><span class="line">    <span class="operator">-</span> æ”¯æŒè¿ç»­<span class="keyword">SQL</span>çš„é›†ä½“æˆåŠŸæˆ–é›†ä½“æ’¤é”€ã€‚</span><br><span class="line">    <span class="operator">-</span> äº‹åŠ¡æ˜¯æ•°æ®åº“åœ¨æ•°æ®å®Œæ•´æ€§æ–¹é¢çš„ä¸€ä¸ªåŠŸèƒ½ã€‚</span><br><span class="line">    <span class="operator">-</span> éœ€è¦åˆ©ç”¨ InnoDB æˆ– BDB å­˜å‚¨å¼•æ“ï¼Œå¯¹è‡ªåŠ¨æäº¤çš„ç‰¹æ€§æ”¯æŒå®Œæˆã€‚</span><br><span class="line">    <span class="operator">-</span> InnoDBè¢«ç§°ä¸ºäº‹åŠ¡å®‰å…¨å‹å¼•æ“ã€‚</span><br><span class="line"><span class="comment">-- äº‹åŠ¡å¼€å¯</span></span><br><span class="line">    <span class="keyword">START</span> TRANSACTION; æˆ–è€… <span class="keyword">BEGIN</span>;</span><br><span class="line">    å¼€å¯äº‹åŠ¡åï¼Œæ‰€æœ‰è¢«æ‰§è¡Œçš„<span class="keyword">SQL</span>è¯­å¥å‡è¢«è®¤ä½œå½“å‰äº‹åŠ¡å†…çš„<span class="keyword">SQL</span>è¯­å¥ã€‚</span><br><span class="line"><span class="comment">-- äº‹åŠ¡æäº¤</span></span><br><span class="line">    <span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="comment">-- äº‹åŠ¡å›æ»š</span></span><br><span class="line">    <span class="keyword">ROLLBACK</span>;</span><br><span class="line">    å¦‚æœéƒ¨åˆ†æ“ä½œå‘ç”Ÿé—®é¢˜ï¼Œæ˜ å°„åˆ°äº‹åŠ¡å¼€å¯å‰ã€‚</span><br><span class="line"><span class="comment">-- äº‹åŠ¡çš„ç‰¹æ€§</span></span><br><span class="line">    <span class="number">1.</span> åŸå­æ€§ï¼ˆAtomicityï¼‰</span><br><span class="line">        äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚</span><br><span class="line">    <span class="number">2.</span> ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</span><br><span class="line">        äº‹åŠ¡å‰åæ•°æ®çš„å®Œæ•´æ€§å¿…é¡»ä¿æŒä¸€è‡´ã€‚</span><br><span class="line">        <span class="operator">-</span> äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œå¤–éƒ¨æ•°æ®ä¸€è‡´</span><br><span class="line">        <span class="operator">-</span> åœ¨æ•´ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­ï¼Œæ“ä½œæ˜¯è¿ç»­çš„</span><br><span class="line">    <span class="number">3.</span> éš”ç¦»æ€§ï¼ˆIsolationï¼‰</span><br><span class="line">        å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸èƒ½è¢«å…¶å®ƒç”¨æˆ·çš„äº‹ç‰©æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´çš„æ•°æ®è¦ç›¸äº’éš”ç¦»ã€‚</span><br><span class="line">    <span class="number">4.</span> æŒä¹…æ€§ï¼ˆDurabilityï¼‰</span><br><span class="line">        ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚</span><br><span class="line"><span class="comment">-- äº‹åŠ¡çš„å®ç°</span></span><br><span class="line">    <span class="number">1.</span> è¦æ±‚æ˜¯äº‹åŠ¡æ”¯æŒçš„è¡¨ç±»å‹(innodb)</span><br><span class="line">    <span class="number">2.</span> æ‰§è¡Œä¸€ç»„ç›¸å…³çš„æ“ä½œå‰å¼€å¯äº‹åŠ¡</span><br><span class="line">    <span class="number">3.</span> æ•´ç»„æ“ä½œå®Œæˆåï¼Œéƒ½æˆåŠŸï¼Œåˆ™æäº¤ï¼›å¦‚æœå­˜åœ¨å¤±è´¥ï¼Œé€‰æ‹©å›æ»šï¼Œåˆ™ä¼šå›åˆ°äº‹åŠ¡å¼€å§‹çš„å¤‡ä»½ç‚¹ã€‚</span><br><span class="line"><span class="comment">-- äº‹åŠ¡çš„åŸç†</span></span><br><span class="line">    åˆ©ç”¨InnoDBçš„è‡ªåŠ¨æäº¤(autocommit)ç‰¹æ€§å®Œæˆã€‚</span><br><span class="line">    æ™®é€šçš„MySQLæ‰§è¡Œè¯­å¥åï¼Œå½“å‰çš„æ•°æ®æäº¤æ“ä½œå‡å¯è¢«å…¶ä»–å®¢æˆ·ç«¯å¯è§ã€‚</span><br><span class="line">    è€Œäº‹åŠ¡æ˜¯æš‚æ—¶å…³é—­â€œè‡ªåŠ¨æäº¤â€æœºåˆ¶ï¼Œéœ€è¦<span class="keyword">commit</span>æäº¤æŒä¹…åŒ–æ•°æ®æ“ä½œã€‚</span><br><span class="line"><span class="comment">-- æ³¨æ„</span></span><br><span class="line">    <span class="number">1.</span> æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰è¯­å¥ä¸èƒ½è¢«å›æ»šï¼Œæ¯”å¦‚åˆ›å»ºæˆ–å–æ¶ˆæ•°æ®åº“çš„è¯­å¥ï¼Œå’Œåˆ›å»ºã€å–æ¶ˆæˆ–æ›´æ”¹è¡¨æˆ–å­˜å‚¨çš„å­ç¨‹åºçš„è¯­å¥ã€‚</span><br><span class="line">    <span class="number">2.</span> äº‹åŠ¡ä¸èƒ½è¢«åµŒå¥—</span><br><span class="line"><span class="comment">-- ä¿å­˜ç‚¹</span></span><br><span class="line">    <span class="keyword">SAVEPOINT</span> ä¿å­˜ç‚¹åç§° <span class="comment">-- è®¾ç½®ä¸€ä¸ªäº‹åŠ¡ä¿å­˜ç‚¹</span></span><br><span class="line">    <span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> <span class="keyword">SAVEPOINT</span> ä¿å­˜ç‚¹åç§° <span class="comment">-- å›æ»šåˆ°ä¿å­˜ç‚¹</span></span><br><span class="line">    <span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> ä¿å­˜ç‚¹åç§° <span class="comment">-- åˆ é™¤ä¿å­˜ç‚¹</span></span><br><span class="line"><span class="comment">-- InnoDBè‡ªåŠ¨æäº¤ç‰¹æ€§è®¾ç½®</span></span><br><span class="line">    <span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span><span class="operator">|</span><span class="number">1</span>;   <span class="number">0</span>è¡¨ç¤ºå…³é—­è‡ªåŠ¨æäº¤ï¼Œ<span class="number">1</span>è¡¨ç¤ºå¼€å¯è‡ªåŠ¨æäº¤ã€‚</span><br><span class="line">    <span class="operator">-</span> å¦‚æœå…³é—­äº†ï¼Œé‚£æ™®é€šæ“ä½œçš„ç»“æœå¯¹å…¶ä»–å®¢æˆ·ç«¯ä¹Ÿä¸å¯è§ï¼Œéœ€è¦<span class="keyword">commit</span>æäº¤åæ‰èƒ½æŒä¹…åŒ–æ•°æ®æ“ä½œã€‚</span><br><span class="line">    <span class="operator">-</span> ä¹Ÿå¯ä»¥å…³é—­è‡ªåŠ¨æäº¤æ¥å¼€å¯äº‹åŠ¡ã€‚ä½†ä¸<span class="keyword">START</span> TRANSACTIONä¸åŒçš„æ˜¯ï¼Œ</span><br><span class="line">        <span class="keyword">SET</span> autocommitæ˜¯æ°¸ä¹…æ”¹å˜æœåŠ¡å™¨çš„è®¾ç½®ï¼Œç›´åˆ°ä¸‹æ¬¡å†æ¬¡ä¿®æ”¹è¯¥è®¾ç½®ã€‚(é’ˆå¯¹å½“å‰è¿æ¥)</span><br><span class="line">        è€Œ<span class="keyword">START</span> TRANSACTIONè®°å½•å¼€å¯å‰çš„çŠ¶æ€ï¼Œè€Œä¸€æ—¦äº‹åŠ¡æäº¤æˆ–å›æ»šåå°±éœ€è¦å†æ¬¡å¼€å¯äº‹åŠ¡ã€‚(é’ˆå¯¹å½“å‰äº‹åŠ¡)</span><br></pre></td></tr></table></figure>
<h3 id="åå››-é”è¡¨">åå››ã€é”è¡¨</h3>
<p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/av796273680">è¡Œé”ã€è¡¨é”ã€é—´éš™é”</a></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">MyISAM æ”¯æŒè¡¨é”ï¼ŒInnoDB æ”¯æŒè¡Œé”ä¸è¡¨é”</span><br><span class="line">    <span class="operator">-</span> å½“InnoDBä¸­çš„ç´¢å¼•å¤±æ•ˆæ—¶ï¼Œå°±ä¼šç”±è¡Œé”å˜è¡¨é”</span><br><span class="line">    <span class="comment">-- innodbå½“æ›´æ–°æŸæ¡æ•°æ®æ—¶ä¼šå¯ç”¨è¡Œé”ã€‚é”ä½è¿™è¡Œæ•°æ®ã€‚å¦‚æœç´¢å¼•å¤±æ•ˆï¼Œä¼šå‡çº§ä¸ºè¡¨é”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¦‚ä½•ç›´è§‚æŸ¥çœ‹</span></span><br><span class="line">    <span class="number">1.</span> å…³é—­mysqlçš„è‡ªåŠ¨æäº¤ï¼š<span class="keyword">set</span> autocommit<span class="operator">=</span><span class="number">0</span></span><br><span class="line">    <span class="number">2.</span> è¡Œé”ï¼šæ¨¡æ‹Ÿæ›´æ–°ä¸€æ¡æ•°æ®ï¼Œä¸æäº¤(<span class="keyword">commit</span>)(ä¹Ÿå¯ä»¥çœ‹åˆ°é˜²æ­¢è„è¯»)ï¼Œç„¶å<span class="keyword">sql</span>å†æ›´æ–°è¯¥è¡Œï¼Œä¼šçœ‹åˆ°é˜»å¡ã€‚</span><br><span class="line">    <span class="number">3.</span> è¡¨é”ï¼ŒåŒä¸Šï¼Œå†æ¨¡æ‹Ÿå‡ºç´¢å¼•å¤±æ•ˆï¼Œå†<span class="keyword">sql</span>æ›´æ–°å…¶ä»–è¡Œï¼Œä¼šçœ‹åˆ°é˜»å¡ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="åäº”-è§¦å‘å™¨-å°½é‡å°‘ç”¨">åäº”ã€è§¦å‘å™¨(å°½é‡å°‘ç”¨)</h3>
<p>å°‘ç”¨åŸå› ï¼š1.sqlè¯­å¥éƒ¨åˆ†ç¨‹åº¦ä¸Šä¸å¯è¿½è¸ªã€‚2.å›¢é˜Ÿå¼€å‘å®¹æ˜“å¿½è§†ã€‚3.å­˜åœ¨æ€§èƒ½é—®é¢˜</p>
<p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/av882530784">MySQLè§¦å‘å™¨è®¾ç½®</a></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* è§¦å‘å™¨ */</span> <span class="comment">------------------</span></span><br><span class="line">    è§¦å‘ç¨‹åºæ˜¯ä¸è¡¨æœ‰å…³çš„å‘½åæ•°æ®åº“å¯¹è±¡ï¼Œå½“è¯¥è¡¨å‡ºç°ç‰¹å®šäº‹ä»¶æ—¶ï¼Œå°†æ¿€æ´»è¯¥å¯¹è±¡</span><br><span class="line">    ç›‘å¬ï¼šè®°å½•çš„å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€‚</span><br><span class="line"><span class="comment">-- åˆ›å»ºè§¦å‘å™¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_name trigger_time trigger_event <span class="keyword">ON</span> tbl_name <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> trigger_stmt</span><br><span class="line">    å‚æ•°ï¼š</span><br><span class="line">    trigger_nameè§¦å‘å™¨åç§°</span><br><span class="line">    trigger_timeæ˜¯è§¦å‘ç¨‹åºçš„åŠ¨ä½œæ—¶é—´ã€‚å®ƒå¯ä»¥æ˜¯ before æˆ– afterï¼Œä»¥æŒ‡æ˜è§¦å‘ç¨‹åºæ˜¯åœ¨æ¿€æ´»å®ƒçš„è¯­å¥ä¹‹å‰æˆ–ä¹‹åè§¦å‘ã€‚</span><br><span class="line">    trigger_eventæŒ‡æ˜äº†æ¿€æ´»è§¦å‘ç¨‹åºçš„è¯­å¥çš„ç±»å‹</span><br><span class="line">        <span class="keyword">INSERT</span>ï¼šå°†æ–°è¡Œæ’å…¥è¡¨æ—¶æ¿€æ´»è§¦å‘ç¨‹åº</span><br><span class="line">        <span class="keyword">UPDATE</span>ï¼šæ›´æ”¹æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘ç¨‹åº</span><br><span class="line">        <span class="keyword">DELETE</span>ï¼šä»è¡¨ä¸­åˆ é™¤æŸä¸€è¡Œæ—¶æ¿€æ´»è§¦å‘ç¨‹åº</span><br><span class="line">    tbl_nameï¼šç›‘å¬çš„è¡¨ï¼Œå¿…é¡»æ˜¯æ°¸ä¹…æ€§çš„è¡¨ï¼Œä¸èƒ½å°†è§¦å‘ç¨‹åºä¸TEMPORARYè¡¨æˆ–è§†å›¾å…³è”èµ·æ¥ã€‚</span><br><span class="line">    trigger_stmtï¼šå½“è§¦å‘ç¨‹åºæ¿€æ´»æ—¶æ‰§è¡Œçš„è¯­å¥ã€‚æ‰§è¡Œå¤šä¸ªè¯­å¥ï¼Œå¯ä½¿ç”¨BEGIN...ENDå¤åˆè¯­å¥ç»“æ„</span><br><span class="line">        <span class="comment">-- ä¾‹ï¼š delimiter //</span></span><br><span class="line">                <span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger1 after <span class="keyword">INSERT</span> <span class="keyword">ON</span> <span class="keyword">user</span> <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> </span><br><span class="line">                <span class="keyword">BEGIN</span></span><br><span class="line">                    <span class="keyword">sql</span>è¯­å¥;</span><br><span class="line">                    <span class="keyword">sql</span>è¯­å¥;</span><br><span class="line">                <span class="keyword">END</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">                delimiter;  <span class="comment">-- æ­¤å¤„å¯èƒ½ä¹Ÿä¸éœ€è¦</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼šåˆ›å»ºåä¸ºtrigger1çš„è§¦å‘å™¨ï¼šåœ¨userè¡¨çš„insertæ“ä½œæ‰§è¡Œä¹‹åï¼Œæ‰§è¡Œä¸¤æ¡sqlè¯­å¥</span></span><br><span class="line">        <span class="comment">-- æ³¨æ„ï¼šdelimiter // æ˜¯ä¿®æ”¹ç»“æŸç¬¦ï¼Œåé¢çš„//ä¹Ÿè¦ä¿ç•™</span></span><br><span class="line">    			</span><br><span class="line"><span class="comment">-- åˆ é™¤</span></span><br><span class="line">  <span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> [schema_name.]trigger_name</span><br><span class="line">  å¯ä»¥ä½¿ç”¨<span class="keyword">old</span>å’Œ<span class="keyword">new</span>ä»£æ›¿æ—§çš„å’Œæ–°çš„æ•°æ®</span><br><span class="line">      æ›´æ–°æ“ä½œï¼Œæ›´æ–°å‰æ˜¯<span class="keyword">old</span>ï¼Œæ›´æ–°åæ˜¯new.</span><br><span class="line">      åˆ é™¤æ“ä½œï¼Œåªæœ‰old.</span><br><span class="line">      å¢åŠ æ“ä½œï¼Œåªæœ‰new.</span><br><span class="line"><span class="comment">-- æ³¨æ„</span></span><br><span class="line">  <span class="number">1.</span> å¯¹äºå…·æœ‰ç›¸åŒè§¦å‘ç¨‹åºåŠ¨ä½œæ—¶é—´å’Œäº‹ä»¶çš„ç»™å®šè¡¨ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªè§¦å‘ç¨‹åºã€‚</span><br><span class="line"><span class="comment">-- å­—ç¬¦è¿æ¥å‡½æ•°</span></span><br><span class="line">  concat(str1,str2,...])</span><br><span class="line">  concat_ws(separator,str1,str2,...)</span><br><span class="line"><span class="comment">-- åˆ†æ”¯è¯­å¥</span></span><br><span class="line">    if æ¡ä»¶ <span class="keyword">then</span></span><br><span class="line">        æ‰§è¡Œè¯­å¥</span><br><span class="line">    elseif æ¡ä»¶ <span class="keyword">then</span></span><br><span class="line">        æ‰§è¡Œè¯­å¥</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        æ‰§è¡Œè¯­å¥</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"><span class="comment">-- ä¿®æ”¹æœ€å¤–å±‚è¯­å¥ç»“æŸç¬¦</span></span><br><span class="line">    delimiter è‡ªå®šä¹‰ç»“æŸç¬¦å·</span><br><span class="line">        <span class="keyword">SQL</span>è¯­å¥</span><br><span class="line">    è‡ªå®šä¹‰ç»“æŸç¬¦å·</span><br><span class="line">    delimiter ;     <span class="comment">-- ä¿®æ”¹å›åŸæ¥çš„åˆ†å·</span></span><br><span class="line"><span class="comment">-- è¯­å¥å—åŒ…è£¹</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        è¯­å¥å—</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- ç‰¹æ®Šçš„æ‰§è¡Œ</span></span><br><span class="line">    <span class="number">1.</span> åªè¦æ·»åŠ è®°å½•ï¼Œå°±ä¼šè§¦å‘ç¨‹åºã€‚</span><br><span class="line">    <span class="number">2.</span> <span class="keyword">Insert</span> <span class="keyword">into</span> <span class="keyword">on</span> duplicate key <span class="keyword">update</span> è¯­æ³•ä¼šè§¦å‘ï¼š</span><br><span class="line">    å¦‚æœæ²¡æœ‰é‡å¤è®°å½•ï¼Œä¼šè§¦å‘ before <span class="keyword">insert</span>, after <span class="keyword">insert</span>;</span><br><span class="line">    å¦‚æœæœ‰é‡å¤è®°å½•å¹¶æ›´æ–°ï¼Œä¼šè§¦å‘ before <span class="keyword">insert</span>, before <span class="keyword">update</span>, after <span class="keyword">update</span>;</span><br><span class="line">    å¦‚æœæœ‰é‡å¤è®°å½•ä½†æ˜¯æ²¡æœ‰å‘ç”Ÿæ›´æ–°ï¼Œåˆ™è§¦å‘ before <span class="keyword">insert</span>, before <span class="keyword">update</span></span><br><span class="line">    <span class="number">3.</span> Replace è¯­æ³• å¦‚æœæœ‰è®°å½•ï¼Œåˆ™æ‰§è¡Œ before <span class="keyword">insert</span>, before <span class="keyword">delete</span>, after <span class="keyword">delete</span>, after <span class="keyword">insert</span></span><br></pre></td></tr></table></figure>
<h3 id="åå…­-sqlç¼–ç¨‹">åå…­ã€SQLç¼–ç¨‹</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* SQLç¼–ç¨‹ */</span> <span class="comment">------------------</span></span><br><span class="line"><span class="comment">--// å±€éƒ¨å˜é‡ ----------</span></span><br><span class="line"><span class="comment">-- å˜é‡å£°æ˜</span></span><br><span class="line">    <span class="keyword">declare</span> var_name[,...] type [<span class="keyword">default</span> <span class="keyword">value</span>]</span><br><span class="line">    è¿™ä¸ªè¯­å¥è¢«ç”¨æ¥å£°æ˜å±€éƒ¨å˜é‡ã€‚è¦ç»™å˜é‡æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¯·åŒ…å«ä¸€ä¸ª<span class="keyword">default</span>å­å¥ã€‚å€¼å¯ä»¥è¢«æŒ‡å®šä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸éœ€è¦ä¸ºä¸€ä¸ªå¸¸æ•°ã€‚å¦‚æœæ²¡æœ‰<span class="keyword">default</span>å­å¥ï¼Œåˆå§‹å€¼ä¸º<span class="keyword">null</span>ã€‚</span><br><span class="line"><span class="comment">-- èµ‹å€¼</span></span><br><span class="line">    ä½¿ç”¨ <span class="keyword">set</span> å’Œ <span class="keyword">select</span> <span class="keyword">into</span> è¯­å¥ä¸ºå˜é‡èµ‹å€¼ã€‚</span><br><span class="line">    <span class="operator">-</span> æ³¨æ„ï¼šåœ¨å‡½æ•°å†…æ˜¯å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ï¼ˆç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ï¼‰</span><br><span class="line"><span class="comment">--// å…¨å±€å˜é‡ ----------</span></span><br><span class="line"><span class="comment">-- å®šä¹‰ã€èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">set</span> è¯­å¥å¯ä»¥å®šä¹‰å¹¶ä¸ºå˜é‡èµ‹å€¼ã€‚</span><br><span class="line">  <span class="keyword">set</span> <span class="variable">@var</span> <span class="operator">=</span> <span class="keyword">value</span>;</span><br><span class="line">  ä¹Ÿå¯ä»¥ä½¿ç”¨<span class="keyword">select</span> <span class="keyword">into</span>è¯­å¥ä¸ºå˜é‡åˆå§‹åŒ–å¹¶èµ‹å€¼ã€‚è¿™æ ·è¦æ±‚<span class="keyword">select</span>è¯­å¥åªèƒ½è¿”å›ä¸€è¡Œï¼Œä½†æ˜¯å¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå°±æ„å‘³ç€åŒæ—¶ä¸ºå¤šä¸ªå˜é‡è¿›è¡Œèµ‹å€¼ï¼Œå˜é‡çš„æ•°é‡éœ€è¦ä¸æŸ¥è¯¢çš„åˆ—æ•°ä¸€è‡´ã€‚</span><br><span class="line">  è¿˜å¯ä»¥æŠŠèµ‹å€¼è¯­å¥çœ‹ä½œä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé€šè¿‡<span class="keyword">select</span>æ‰§è¡Œå®Œæˆã€‚æ­¤æ—¶ä¸ºäº†é¿å…<span class="operator">=</span>è¢«å½“ä½œå…³ç³»è¿ç®—ç¬¦çœ‹å¾…ï¼Œä½¿ç”¨:<span class="operator">=</span>ä»£æ›¿ã€‚ï¼ˆ<span class="keyword">set</span>è¯­å¥å¯ä»¥ä½¿ç”¨<span class="operator">=</span> å’Œ :<span class="operator">=</span>ï¼‰ã€‚</span><br><span class="line">  <span class="keyword">select</span> <span class="variable">@var</span>:<span class="operator">=</span><span class="number">20</span>;</span><br><span class="line">  <span class="keyword">select</span> <span class="variable">@v1</span>:<span class="operator">=</span>id, <span class="variable">@v2</span><span class="operator">=</span>name <span class="keyword">from</span> t1 limit <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_name <span class="keyword">where</span> <span class="variable">@var</span>:<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">into</span> å¯ä»¥å°†è¡¨ä¸­æŸ¥è¯¢è·å¾—çš„æ•°æ®èµ‹ç»™å˜é‡ã€‚</span><br><span class="line">    <span class="operator">-</span><span class="operator">|</span> <span class="keyword">select</span> <span class="built_in">max</span>(height) <span class="keyword">into</span> <span class="variable">@max</span>_height <span class="keyword">from</span> tb;</span><br><span class="line"><span class="comment">-- è‡ªå®šä¹‰å˜é‡å</span></span><br><span class="line">  ä¸ºäº†é¿å…<span class="keyword">select</span>è¯­å¥ä¸­ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ä¸ç³»ç»Ÿæ ‡è¯†ç¬¦ï¼ˆé€šå¸¸æ˜¯å­—æ®µåï¼‰å†²çªï¼Œç”¨æˆ·è‡ªå®šä¹‰å˜é‡åœ¨å˜é‡åå‰ä½¿ç”¨@ä½œä¸ºå¼€å§‹ç¬¦å·ã€‚</span><br><span class="line">  <span class="variable">@var</span><span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">    <span class="operator">-</span> å˜é‡è¢«å®šä¹‰åï¼Œåœ¨æ•´ä¸ªä¼šè¯å‘¨æœŸéƒ½æœ‰æ•ˆï¼ˆç™»å½•åˆ°é€€å‡ºï¼‰</span><br><span class="line"><span class="comment">--// æ§åˆ¶ç»“æ„ ----------</span></span><br><span class="line"><span class="comment">-- ifè¯­å¥</span></span><br><span class="line">  if search_condition <span class="keyword">then</span></span><br><span class="line">      statement_list   </span><br><span class="line">  [elseif search_condition <span class="keyword">then</span></span><br><span class="line">      statement_list]</span><br><span class="line">  ...</span><br><span class="line">  [<span class="keyword">else</span></span><br><span class="line">      statement_list]</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="comment">-- caseè¯­å¥</span></span><br><span class="line">  <span class="keyword">CASE</span> <span class="keyword">value</span> <span class="keyword">WHEN</span> [compare<span class="operator">-</span><span class="keyword">value</span>] <span class="keyword">THEN</span> <span class="keyword">result</span></span><br><span class="line">  [<span class="keyword">WHEN</span> [compare<span class="operator">-</span><span class="keyword">value</span>] <span class="keyword">THEN</span> <span class="keyword">result</span> ...]</span><br><span class="line">  [<span class="keyword">ELSE</span> <span class="keyword">result</span>]</span><br><span class="line">  <span class="keyword">END</span></span><br><span class="line"><span class="comment">-- whileå¾ªç¯</span></span><br><span class="line">  [begin_label:] while search_condition do</span><br><span class="line">      statement_list</span><br><span class="line">  <span class="keyword">end</span> while [end_label];</span><br><span class="line">  <span class="operator">-</span> å¦‚æœéœ€è¦åœ¨å¾ªç¯å†…æå‰ç»ˆæ­¢ whileå¾ªç¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨æ ‡ç­¾ï¼›æ ‡ç­¾éœ€è¦æˆå¯¹å‡ºç°ã€‚</span><br><span class="line">    <span class="comment">-- é€€å‡ºå¾ªç¯</span></span><br><span class="line">        é€€å‡ºæ•´ä¸ªå¾ªç¯ leave</span><br><span class="line">        é€€å‡ºå½“å‰å¾ªç¯ iterate</span><br><span class="line">        é€šè¿‡é€€å‡ºçš„æ ‡ç­¾å†³å®šé€€å‡ºå“ªä¸ªå¾ªç¯</span><br><span class="line"><span class="comment">--// å†…ç½®å‡½æ•° ----------</span></span><br><span class="line"><span class="comment">-- æ•°å€¼å‡½æ•°</span></span><br><span class="line">  <span class="built_in">abs</span>(x)          <span class="comment">-- ç»å¯¹å€¼ abs(-10.9) = 10</span></span><br><span class="line">  format(x, d)    <span class="comment">-- æ ¼å¼åŒ–åƒåˆ†ä½æ•°å€¼ format(1234567.456, 2) = 1,234,567.46</span></span><br><span class="line">  <span class="built_in">ceil</span>(x)         <span class="comment">-- å‘ä¸Šå–æ•´ ceil(10.1) = 11</span></span><br><span class="line">  <span class="built_in">floor</span>(x)        <span class="comment">-- å‘ä¸‹å–æ•´ floor (10.1) = 10</span></span><br><span class="line">  round(x)        <span class="comment">-- å››èˆäº”å…¥å»æ•´</span></span><br><span class="line">  <span class="built_in">mod</span>(m, n)       <span class="comment">-- m%n m mod n æ±‚ä½™ 10%3=1</span></span><br><span class="line">  pi()            <span class="comment">-- è·å¾—åœ†å‘¨ç‡</span></span><br><span class="line">  pow(m, n)       <span class="comment">-- m^n</span></span><br><span class="line">  <span class="built_in">sqrt</span>(x)         <span class="comment">-- ç®—æœ¯å¹³æ–¹æ ¹</span></span><br><span class="line">  rand()          <span class="comment">-- éšæœºæ•°</span></span><br><span class="line">  <span class="keyword">truncate</span>(x, d)  <span class="comment">-- æˆªå–dä½å°æ•°</span></span><br><span class="line"><span class="comment">-- æ—¶é—´æ—¥æœŸå‡½æ•°</span></span><br><span class="line">  now(), <span class="built_in">current_timestamp</span>();     <span class="comment">-- å½“å‰æ—¥æœŸæ—¶é—´</span></span><br><span class="line">  <span class="built_in">current_date</span>();                 <span class="comment">-- å½“å‰æ—¥æœŸ</span></span><br><span class="line">  <span class="built_in">current_time</span>();                 <span class="comment">-- å½“å‰æ—¶é—´</span></span><br><span class="line">  <span class="type">date</span>(<span class="string">&#x27;yyyy-mm-dd hh:ii:ss&#x27;</span>);    <span class="comment">-- è·å–æ—¥æœŸéƒ¨åˆ†</span></span><br><span class="line">  <span class="type">time</span>(<span class="string">&#x27;yyyy-mm-dd hh:ii:ss&#x27;</span>);    <span class="comment">-- è·å–æ—¶é—´éƒ¨åˆ†</span></span><br><span class="line">  date_format(<span class="string">&#x27;yyyy-mm-dd hh:ii:ss&#x27;</span>, <span class="string">&#x27;%d %y %a %d %m %b %j&#x27;</span>); <span class="comment">-- æ ¼å¼åŒ–æ—¶é—´</span></span><br><span class="line">  unix_timestamp();               <span class="comment">-- è·å¾—unixæ—¶é—´æˆ³</span></span><br><span class="line">  from_unixtime();                <span class="comment">-- ä»æ—¶é—´æˆ³è·å¾—æ—¶é—´</span></span><br><span class="line"><span class="comment">-- å­—ç¬¦ä¸²å‡½æ•°</span></span><br><span class="line">  length(string)          <span class="comment">-- stringé•¿åº¦ï¼Œå­—èŠ‚</span></span><br><span class="line">  <span class="keyword">char_length</span>(string)     <span class="comment">-- stringçš„å­—ç¬¦ä¸ªæ•°</span></span><br><span class="line">  <span class="built_in">substring</span>(str, position [,length])      <span class="comment">-- ä»strçš„positionå¼€å§‹,å–lengthä¸ªå­—ç¬¦</span></span><br><span class="line">  replace(str ,search_str ,replace_str)   <span class="comment">-- åœ¨strä¸­ç”¨replace_stræ›¿æ¢search_str</span></span><br><span class="line">  instr(string ,substring)    <span class="comment">-- è¿”å›substringé¦–æ¬¡åœ¨stringä¸­å‡ºç°çš„ä½ç½®</span></span><br><span class="line">  concat(string [,...])   <span class="comment">-- è¿æ¥å­—ä¸²</span></span><br><span class="line">  charset(str)            <span class="comment">-- è¿”å›å­—ä¸²å­—ç¬¦é›†</span></span><br><span class="line">  lcase(string)           <span class="comment">-- è½¬æ¢æˆå°å†™</span></span><br><span class="line">  <span class="keyword">left</span>(string, length)    <span class="comment">-- ä»string2ä¸­çš„å·¦è¾¹èµ·å–lengthä¸ªå­—ç¬¦</span></span><br><span class="line">  load_file(file_name)    <span class="comment">-- ä»æ–‡ä»¶è¯»å–å†…å®¹</span></span><br><span class="line">  locate(substring, string [,start_position]) <span class="comment">-- åŒinstr,ä½†å¯æŒ‡å®šå¼€å§‹ä½ç½®</span></span><br><span class="line">  lpad(string, length, pad)   <span class="comment">-- é‡å¤ç”¨padåŠ åœ¨stringå¼€å¤´,ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlength</span></span><br><span class="line">  ltrim(string)           <span class="comment">-- å»é™¤å‰ç«¯ç©ºæ ¼</span></span><br><span class="line">  repeat(string, count)   <span class="comment">-- é‡å¤countæ¬¡</span></span><br><span class="line">  rpad(string, length, pad)   <span class="comment">--åœ¨stråç”¨padè¡¥å……,ç›´åˆ°é•¿åº¦ä¸ºlength</span></span><br><span class="line">  rtrim(string)           <span class="comment">-- å»é™¤åç«¯ç©ºæ ¼</span></span><br><span class="line">  strcmp(string1 ,string2)    <span class="comment">-- é€å­—ç¬¦æ¯”è¾ƒä¸¤å­—ä¸²å¤§å°</span></span><br><span class="line"><span class="comment">-- æµç¨‹å‡½æ•°</span></span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">when</span> [<span class="keyword">condition</span>] <span class="keyword">then</span> <span class="keyword">result</span> [<span class="keyword">when</span> [<span class="keyword">condition</span>] <span class="keyword">then</span> <span class="keyword">result</span> ...] [<span class="keyword">else</span> <span class="keyword">result</span>] <span class="keyword">end</span>   å¤šåˆ†æ”¯</span><br><span class="line">  if(expr1,expr2,expr3)  åŒåˆ†æ”¯ã€‚</span><br><span class="line"><span class="comment">-- èšåˆå‡½æ•°</span></span><br><span class="line">  <span class="built_in">count</span>()</span><br><span class="line">  <span class="built_in">sum</span>();</span><br><span class="line">  <span class="built_in">max</span>();</span><br><span class="line">  <span class="built_in">min</span>();</span><br><span class="line">  <span class="built_in">avg</span>();</span><br><span class="line">  group_concat()</span><br><span class="line"><span class="comment">-- å…¶ä»–å¸¸ç”¨å‡½æ•°</span></span><br><span class="line">  md5();</span><br><span class="line">  <span class="keyword">default</span>();</span><br><span class="line"><span class="comment">--// å­˜å‚¨å‡½æ•°ï¼Œè‡ªå®šä¹‰å‡½æ•° ----------</span></span><br><span class="line"><span class="comment">-- æ–°å»º</span></span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> function_name (å‚æ•°åˆ—è¡¨) <span class="keyword">RETURNS</span> è¿”å›å€¼ç±»å‹</span><br><span class="line">        å‡½æ•°ä½“</span><br><span class="line">    <span class="operator">-</span> å‡½æ•°åï¼Œåº”è¯¥åˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”ä¸åº”è¯¥ä¸å·²æœ‰çš„å…³é”®å­—å†²çªã€‚</span><br><span class="line">    <span class="operator">-</span> ä¸€ä¸ªå‡½æ•°åº”è¯¥å±äºæŸä¸ªæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨db_name.funciton_nameçš„å½¢å¼æ‰§è¡Œå½“å‰å‡½æ•°æ‰€å±æ•°æ®åº“ï¼Œå¦åˆ™ä¸ºå½“å‰æ•°æ®åº“ã€‚</span><br><span class="line">    <span class="operator">-</span> å‚æ•°éƒ¨åˆ†ï¼Œç”±&quot;å‚æ•°å&quot;å’Œ&quot;å‚æ•°ç±»å‹&quot;ç»„æˆã€‚å¤šä¸ªå‚æ•°ç”¨é€—å·éš”å¼€ã€‚</span><br><span class="line">    <span class="operator">-</span> å‡½æ•°ä½“ç”±å¤šæ¡å¯ç”¨çš„mysqlè¯­å¥ï¼Œæµç¨‹æ§åˆ¶ï¼Œå˜é‡å£°æ˜ç­‰è¯­å¥æ„æˆã€‚</span><br><span class="line">    <span class="operator">-</span> å¤šæ¡è¯­å¥åº”è¯¥ä½¿ç”¨ begin...end è¯­å¥å—åŒ…å«ã€‚</span><br><span class="line">    <span class="operator">-</span> ä¸€å®šè¦æœ‰ <span class="keyword">return</span> è¿”å›å€¼è¯­å¥ã€‚</span><br><span class="line"><span class="comment">-- åˆ é™¤</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> [IF <span class="keyword">EXISTS</span>] function_name;</span><br><span class="line"><span class="comment">-- æŸ¥çœ‹</span></span><br><span class="line">    <span class="keyword">SHOW</span> <span class="keyword">FUNCTION</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;partten&#x27;</span></span><br><span class="line">    <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> function_name;</span><br><span class="line"><span class="comment">-- ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">ALTER</span> <span class="keyword">FUNCTION</span> function_name å‡½æ•°é€‰é¡¹</span><br><span class="line"><span class="comment">--// å­˜å‚¨è¿‡ç¨‹ï¼Œè‡ªå®šä¹‰åŠŸèƒ½ ----------</span></span><br><span class="line"><span class="comment">-- å®šä¹‰</span></span><br><span class="line">  å­˜å‚¨å­˜å‚¨è¿‡ç¨‹ æ˜¯ä¸€æ®µä»£ç ï¼ˆè¿‡ç¨‹ï¼‰ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„<span class="keyword">sql</span>ç»„æˆã€‚</span><br><span class="line">  ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹é€šå¸¸ç”¨äºå®Œæˆä¸€æ®µä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚æŠ¥åï¼Œäº¤ç­è´¹ï¼Œè®¢å•å…¥åº“ç­‰ã€‚</span><br><span class="line">  è€Œä¸€ä¸ªå‡½æ•°é€šå¸¸ä¸“æ³¨ä¸æŸä¸ªåŠŸèƒ½ï¼Œè§†ä¸ºå…¶ä»–ç¨‹åºæœåŠ¡çš„ï¼Œéœ€è¦åœ¨å…¶ä»–è¯­å¥ä¸­è°ƒç”¨å‡½æ•°æ‰å¯ä»¥ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹ä¸èƒ½è¢«å…¶ä»–è°ƒç”¨ï¼Œæ˜¯è‡ªå·±æ‰§è¡Œ é€šè¿‡<span class="keyword">call</span>æ‰§è¡Œã€‚</span><br><span class="line"><span class="comment">-- åˆ›å»º</span></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_name (å‚æ•°åˆ—è¡¨)</span><br><span class="line">      è¿‡ç¨‹ä½“</span><br><span class="line">  å‚æ•°åˆ—è¡¨ï¼šä¸åŒäºå‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œéœ€è¦æŒ‡æ˜å‚æ•°ç±»å‹</span><br><span class="line">  <span class="keyword">IN</span>ï¼Œè¡¨ç¤ºè¾“å…¥å‹</span><br><span class="line">  <span class="keyword">OUT</span>ï¼Œè¡¨ç¤ºè¾“å‡ºå‹</span><br><span class="line">  <span class="keyword">INOUT</span>ï¼Œè¡¨ç¤ºæ··åˆå‹</span><br><span class="line">  æ³¨æ„ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="åä¸ƒ-å­˜å‚¨è¿‡ç¨‹">åä¸ƒã€å­˜å‚¨è¿‡ç¨‹</h3>
<p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/av582793063?p=2">MySQLæ•°æ®åº“å­˜å‚¨è¿‡ç¨‹</a></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å­˜å‚¨è¿‡ç¨‹ */</span> <span class="comment">------------------</span></span><br><span class="line">  å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€æ®µå¯æ‰§è¡Œæ€§ä»£ç çš„é›†åˆã€‚ç›¸æ¯”å‡½æ•°ï¼Œæ›´åå‘äºä¸šåŠ¡é€»è¾‘ã€‚</span><br><span class="line">  è°ƒç”¨ï¼š<span class="keyword">CALL</span> è¿‡ç¨‹å</span><br><span class="line"><span class="comment">-- æ³¨æ„</span></span><br><span class="line">  <span class="operator">-</span> æ²¡æœ‰è¿”å›å€¼ã€‚</span><br><span class="line">  <span class="operator">-</span> åªèƒ½å•ç‹¬è°ƒç”¨ï¼Œä¸å¯å¤¹æ‚åœ¨å…¶ä»–è¯­å¥ä¸­</span><br><span class="line"><span class="comment">-- å‚æ•°</span></span><br><span class="line">  <span class="keyword">IN</span><span class="operator">|</span><span class="keyword">OUT</span><span class="operator">|</span><span class="keyword">INOUT</span> å‚æ•°å æ•°æ®ç±»å‹</span><br><span class="line">  <span class="keyword">IN</span>      è¾“å…¥ï¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®è¾“å…¥åˆ°è¿‡ç¨‹ä½“å†…éƒ¨çš„å‚æ•°</span><br><span class="line">  <span class="keyword">OUT</span>     è¾“å‡ºï¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå°†è¿‡ç¨‹ä½“å¤„ç†å®Œçš„ç»“æœè¿”å›åˆ°å®¢æˆ·ç«¯</span><br><span class="line">  <span class="keyword">INOUT</span>   è¾“å…¥è¾“å‡ºï¼šæ—¢å¯è¾“å…¥ï¼Œä¹Ÿå¯è¾“å‡º</span><br><span class="line"><span class="comment">-- è¯­æ³•</span></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> è¿‡ç¨‹å (å‚æ•°åˆ—è¡¨)</span><br><span class="line">  <span class="keyword">BEGIN</span></span><br><span class="line">      è¿‡ç¨‹ä½“</span><br><span class="line">  <span class="keyword">END</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¾‹ï¼šç®€å•æ¡ˆä¾‹</span></span><br><span class="line">    <span class="comment">-- åˆ›å»ºåä¸ºmy_procedure01()çš„å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">    delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">    <span class="keyword">create</span> <span class="keyword">procedure</span> my_procedure01()</span><br><span class="line">    <span class="keyword">begin</span> </span><br><span class="line">        <span class="keyword">declare</span> nickname <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">default</span> <span class="string">&#x27;SF&#x27;</span>;	<span class="comment">-- å®šä¹‰åä¸ºnicknameçš„å˜é‡é»˜è®¤åªä¸º&#x27;SF&#x27;</span></span><br><span class="line">        <span class="keyword">select</span> nickname;	<span class="comment">-- æŸ¥è¯¢nicknameçš„å€¼</span></span><br><span class="line">        <span class="keyword">set</span> nickname <span class="operator">=</span> <span class="string">&#x27;UG&#x27;</span>;	<span class="comment">-- æ”¹å˜nicknameçš„å€¼ä¸º&#x27;UG&#x27;</span></span><br><span class="line">        <span class="keyword">select</span> nickname;	<span class="comment">-- æŸ¥è¯¢nicknameçš„å€¼</span></span><br><span class="line">    <span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span>					<span class="comment">-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">	</span><br><span class="line">    <span class="keyword">call</span> my_procedure01();	<span class="comment">-- è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">	</span><br><span class="line">    <span class="keyword">drop</span> <span class="keyword">procedure</span> my_procedure01;	<span class="comment">-- åˆ é™¤å­˜å‚¨è¿‡ç¨‹</span></span><br></pre></td></tr></table></figure>
<h3 id="åå…«-ç”¨æˆ·ä¸æƒé™ç®¡ç†">åå…«ã€ç”¨æˆ·ä¸æƒé™ç®¡ç†</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- rootå¯†ç é‡ç½®(ç¬¬6æ­¥é‡è¦)</span></span><br><span class="line">  <span class="number">1.</span> åœæ­¢MySQLæœåŠ¡(ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ)</span><br><span class="line">      <span class="comment">-- net stop mysql</span></span><br><span class="line">  <span class="number">2.</span>  è·³è¿‡mysqlçš„è¡¨æˆæƒï¼Œ(ä¸è¾“å…¥å¯†ç ä¹Ÿå¯ä»¥è·å–ç®¡ç†å‘˜æƒé™)</span><br><span class="line">      [Linux] <span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>mysql<span class="operator">/</span>bin<span class="operator">/</span>safe_mysqld <span class="comment">--skip-grant-tables &amp;   (å‘½ä»¤å‰æ˜¯è‡ªå·±çš„å®‰è£…åœ°å€)</span></span><br><span class="line">      [Windows] mysqld <span class="comment">--skip-grant-tables</span></span><br><span class="line">  <span class="number">3.</span> å¦å¯ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œé€‰ä¸­mysqlçš„çš„mysqlæ•°æ®åº“</span><br><span class="line">      <span class="comment">-- use mysql</span></span><br><span class="line">  <span class="number">4.</span>æ›´æ–°mysqlæ•°æ®åº“ä¸­çš„<span class="keyword">user</span>è¡¨ï¼Œè¯¥è¡¨å­˜å‚¨äº†ç”¨æˆ·åä¸å¯†ç </span><br><span class="line">      <span class="comment">-- update user set password=(&#x27;root&#x27;) where user=&#x27;root&#x27;;</span></span><br><span class="line">      <span class="comment">-- è§£é‡Šï¼šæ›´æ–°userè¡¨ä¸­åä¸ºrootçš„ç”¨æˆ·çš„å¯†ç ä¸ºroot</span></span><br><span class="line">  <span class="number">5.</span>åˆ·æ–°æƒé™</span><br><span class="line">    <span class="comment">-- FLUSH PRIVILEGES;</span></span><br><span class="line">  <span class="number">6.</span> é€€å‡ºå¹¶æ€æ­»é‡å¯mysql(å¦åˆ™ä¾æ—§å¯ä»¥æ— å¯†ç ä½¿ç”¨)	</span><br><span class="line">    <span class="comment">-- exit;</span></span><br><span class="line">    <span class="comment">-- æ€æ­»mysqlé‡å¯(å…³é—­mysqldæœåŠ¡ï¼Œå¦åˆ™mysqlæœåŠ¡æ— æ³•å¯åŠ¨ï¼Œå¦‚æœç™»å½•mysqlæŠ¥1103é”™è¯¯ï¼Œå‚è€ƒhttps://www.cnblogs.com/rnckty/p/5577818.html)</span></span><br><span class="line">  	</span><br><span class="line"><span class="comment">-- å¢åŠ ç”¨æˆ·</span></span><br><span class="line">    <span class="operator">-</span> å…ˆè¿›å…¥mysqlç¯å¢ƒï¼Œé€‰æ‹©mysqlæ•°æ®åº“ï¼šuse mysql;</span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;user_name&#x27;</span>@<span class="string">&#x27;host&#x27;</span> IDENTIFIED <span class="keyword">BY</span> [PASSWORD] å¯†ç (å­—ç¬¦ä¸²)</span><br><span class="line">    <span class="operator">-</span> å¿…é¡»æ‹¥æœ‰mysqlæ•°æ®åº“çš„å…¨å±€<span class="keyword">CREATE</span> <span class="keyword">USER</span>æƒé™ï¼Œæˆ–æ‹¥æœ‰<span class="keyword">INSERT</span>æƒé™ã€‚</span><br><span class="line">    <span class="operator">-</span> åªèƒ½åˆ›å»ºç”¨æˆ·ï¼Œä¸èƒ½èµ‹äºˆæƒé™ã€‚</span><br><span class="line">    <span class="operator">-</span> ç”¨æˆ·åï¼Œæ³¨æ„å¼•å·ï¼šå¦‚ <span class="string">&#x27;user_name&#x27;</span>@<span class="string">&#x27;192.168.1.1&#x27;</span></span><br><span class="line">        <span class="operator">-</span> user_name:ç”¨æˆ·åã€‚hostï¼šç”¨æˆ·ç™»å½•ipåœ°å€ï¼Œå¦‚åªå…è®¸ä»æœ¬æœºç™»é™†ï¼Œåˆ™å¡«<span class="string">&#x27;localhost&#x27;</span> ï¼Œå…è®¸è¿œç¨‹ç™»ï¼Œåˆ™å¡«<span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="operator">-</span> å¯†ç ä¹Ÿéœ€å¼•å·ï¼Œçº¯æ•°å­—å¯†ç ä¹Ÿè¦åŠ å¼•å·</span><br><span class="line">    <span class="operator">-</span> è¦åœ¨çº¯æ–‡æœ¬ä¸­æŒ‡å®šå¯†ç ï¼Œéœ€å¿½ç•¥PASSWORDå…³é”®è¯ã€‚è¦æŠŠå¯†ç æŒ‡å®šä¸ºç”±PASSWORD()å‡½æ•°è¿”å›çš„æ··ç¼–å€¼ï¼Œéœ€åŒ…å«å…³é”®å­—PASSWORD</span><br><span class="line">      <span class="comment">-- ä¾‹ï¼šcreate user &#x27;user1&#x27;@&#x27;localhost&#x27; identified by &#x27;user1&#x27;;</span></span><br><span class="line">      <span class="comment">-- è§£é‡Šï¼šåˆ›å»ºuser1ç”¨æˆ·ï¼Œå¯†ç æ˜¯user1</span></span><br><span class="line">      	</span><br><span class="line"><span class="comment">-- é‡å‘½åç”¨æˆ·</span></span><br><span class="line">    RENAME <span class="keyword">USER</span> <span class="string">&#x27;old_user_name&#x27;</span>@<span class="string">&#x27;host&#x27;</span> <span class="keyword">TO</span> <span class="string">&#x27;new_user_name&#x27;</span>@<span class="string">&#x27;host&#x27;</span></span><br><span class="line">      <span class="comment">-- ä¾‹ï¼šRENAME USER &#x27;user1&#x27;@&#x27;localhost&#x27; TO &#x27;ren_user1&#x27;@&#x27;localhost&#x27;;</span></span><br><span class="line">      <span class="comment">-- è§£é‡Šï¼šå°†user1ç”¨æˆ·é‡å‘½åä¸ºren_user1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¾ç½®å¯†ç </span></span><br><span class="line">    <span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD(<span class="string">&#x27;å¯†ç &#x27;</span>)  <span class="comment">-- ä¸ºå½“å‰ç”¨æˆ·è®¾ç½®å¯†ç </span></span><br><span class="line">    <span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;user_name&#x27;</span>@<span class="string">&#x27;host&#x27;</span> <span class="operator">=</span> PASSWORD(<span class="string">&#x27;å¯†ç &#x27;</span>) <span class="comment">-- ä¸ºæŒ‡å®šç”¨æˆ·è®¾ç½®å¯†ç </span></span><br><span class="line">      <span class="comment">-- ä¾‹ï¼šset password for &#x27;ren_user1&#x27;@&#x27;localhost&#x27;=password(&#x27;ren_user1&#x27;);</span></span><br><span class="line">      <span class="comment">-- è§£é‡Šï¼šå°†ren_user1ç”¨æˆ·çš„å¯†ç æ”¹ä¸ºren_user1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æƒé™å±‚çº§</span></span><br><span class="line"><span class="comment">-- è¦ä½¿ç”¨GRANTæˆ–REVOKEï¼Œæ‚¨å¿…é¡»æ‹¥æœ‰GRANT OPTIONæƒé™ï¼Œå¹¶ä¸”æ‚¨å¿…é¡»ç”¨äºæ‚¨æ­£åœ¨æˆäºˆæˆ–æ’¤é”€çš„æƒé™ã€‚</span></span><br><span class="line">  <span class="operator">-</span> å…¨å±€å±‚çº§ï¼šå…¨å±€æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šæœåŠ¡å™¨ä¸­çš„æ‰€æœ‰æ•°æ®åº“ï¼Œmysql.user</span><br><span class="line">      <span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;user_name&#x27;</span>@<span class="string">&#x27;host&#x27;</span> å’Œ <span class="keyword">REVOKE</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;user_name&#x27;</span>@<span class="string">&#x27;host&#x27;</span> åªæˆäºˆå’Œæ’¤é”€å…¨å±€æƒé™ã€‚</span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šGRANT ALL ON *.* TO &#x27;ren_user1&#x27;@&#x27;localhost&#x27;</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼šç»™ä¸ren_user1ç”¨æˆ·å…¨å±€æƒé™ï¼ŒALLæŒ‡ä»£æ‰€æœ‰æƒé™ï¼Œ*.*æŒ‡ä»£å…¨å±€</span></span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šREVOKE ALL ON *.* FROM &#x27;ren_user1&#x27;@&#x27;localhost&#x27;</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼šç§»é™¤ren_user1ç”¨æˆ·å…¨å±€æƒé™</span></span><br><span class="line">  <span class="operator">-</span> æ•°æ®åº“å±‚çº§ï¼šæ•°æ®åº“æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰ç›®æ ‡ï¼Œmysql.db, mysql.host</span><br><span class="line">      <span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> db_name.<span class="operator">*</span> <span class="keyword">TO</span> å’Œ<span class="keyword">REVOKE</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> db_name.<span class="operator">*</span> <span class="keyword">FROM</span> åªæˆäºˆå’Œæ’¤é”€æ•°æ®åº“æƒé™ã€‚</span><br><span class="line">  <span class="operator">-</span> è¡¨å±‚çº§ï¼šè¡¨æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼Œmysql.talbes_priv</span><br><span class="line">      <span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> db_name.tbl_name <span class="keyword">TO</span>å’Œ<span class="keyword">REVOKE</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> db_name.tbl_name <span class="keyword">FROM</span>åªæˆäºˆå’Œæ’¤é”€è¡¨æƒé™ã€‚</span><br><span class="line">  <span class="operator">-</span> åˆ—å±‚çº§ï¼šåˆ—æƒé™é€‚ç”¨äºä¸€ä¸ªç»™å®šè¡¨ä¸­çš„å•ä¸€åˆ—ï¼Œmysql.columns_priv</span><br><span class="line">      å½“ä½¿ç”¨<span class="keyword">REVOKE</span>æ—¶ï¼Œæ‚¨å¿…é¡»æŒ‡å®šä¸è¢«æˆæƒåˆ—ç›¸åŒçš„åˆ—ã€‚</span><br><span class="line">      <span class="keyword">GRANT</span> <span class="keyword">ALL</span> (col1ï¼Œcol2) <span class="keyword">ON</span> db_name.tbl_name <span class="keyword">TO</span> </span><br><span class="line"><span class="comment">-- æƒé™åˆ—è¡¨ï¼Œå¦‚ä¸‹å¯ä»¥æ›¿æ¢ä¸Šé¢çš„ALL</span></span><br><span class="line">    <span class="keyword">ALL</span> [PRIVILEGES]    <span class="comment">-- è®¾ç½®é™¤GRANT OPTIONä¹‹å¤–çš„æ‰€æœ‰ç®€å•æƒé™</span></span><br><span class="line">    <span class="keyword">ALTER</span>   <span class="comment">-- å…è®¸ä½¿ç”¨ALTER TABLE</span></span><br><span class="line">    <span class="keyword">ALTER</span> ROUTINE   <span class="comment">-- æ›´æ”¹æˆ–å–æ¶ˆå·²å­˜å‚¨çš„å­ç¨‹åº</span></span><br><span class="line">    <span class="keyword">CREATE</span>  <span class="comment">-- å…è®¸ä½¿ç”¨CREATE TABLE</span></span><br><span class="line">    <span class="keyword">CREATE</span> ROUTINE  <span class="comment">-- åˆ›å»ºå·²å­˜å‚¨çš„å­ç¨‹åº</span></span><br><span class="line">    <span class="keyword">CREATE</span> TEMPORARY TABLES     <span class="comment">-- å…è®¸ä½¿ç”¨CREATE TEMPORARY TABLE</span></span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">USER</span>     <span class="comment">-- å…è®¸ä½¿ç”¨CREATE USER, DROP USER, RENAME USERå’ŒREVOKE ALL PRIVILEGESã€‚</span></span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">VIEW</span>     <span class="comment">-- å…è®¸ä½¿ç”¨CREATE VIEW</span></span><br><span class="line">    <span class="keyword">DELETE</span>  <span class="comment">-- å…è®¸ä½¿ç”¨DELETE</span></span><br><span class="line">    <span class="keyword">DROP</span>    <span class="comment">-- å…è®¸ä½¿ç”¨DROP TABLE</span></span><br><span class="line">    <span class="keyword">EXECUTE</span>     <span class="comment">-- å…è®¸ç”¨æˆ·è¿è¡Œå·²å­˜å‚¨çš„å­ç¨‹åº</span></span><br><span class="line">    FILE    <span class="comment">-- å…è®¸ä½¿ç”¨SELECT...INTO OUTFILEå’ŒLOAD DATA INFILE</span></span><br><span class="line">    INDEX   <span class="comment">-- å…è®¸ä½¿ç”¨CREATE INDEXå’ŒDROP INDEX</span></span><br><span class="line">    <span class="keyword">INSERT</span>  <span class="comment">-- å…è®¸ä½¿ç”¨INSERT</span></span><br><span class="line">    LOCK TABLES     <span class="comment">-- å…è®¸å¯¹æ‚¨æ‹¥æœ‰SELECTæƒé™çš„è¡¨ä½¿ç”¨LOCK TABLES</span></span><br><span class="line">    PROCESS     <span class="comment">-- å…è®¸ä½¿ç”¨SHOW FULL PROCESSLIST</span></span><br><span class="line">    <span class="keyword">REFERENCES</span>  <span class="comment">-- æœªè¢«å®æ–½</span></span><br><span class="line">    RELOAD  <span class="comment">-- å…è®¸ä½¿ç”¨FLUSH</span></span><br><span class="line">    REPLICATION CLIENT  <span class="comment">-- å…è®¸ç”¨æˆ·è¯¢é—®ä»å±æœåŠ¡å™¨æˆ–ä¸»æœåŠ¡å™¨çš„åœ°å€</span></span><br><span class="line">    REPLICATION SLAVE   <span class="comment">-- ç”¨äºå¤åˆ¶å‹ä»å±æœåŠ¡å™¨ï¼ˆä»ä¸»æœåŠ¡å™¨ä¸­è¯»å–äºŒè¿›åˆ¶æ—¥å¿—äº‹ä»¶ï¼‰</span></span><br><span class="line">    <span class="keyword">SELECT</span>  <span class="comment">-- å…è®¸ä½¿ç”¨SELECT</span></span><br><span class="line">    <span class="keyword">SHOW</span> DATABASES  <span class="comment">-- æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">SHOW</span> <span class="keyword">VIEW</span>   <span class="comment">-- å…è®¸ä½¿ç”¨SHOW CREATE VIEW</span></span><br><span class="line">    SHUTDOWN    <span class="comment">-- å…è®¸ä½¿ç”¨mysqladmin shutdown</span></span><br><span class="line">    SUPER   <span class="comment">-- å…è®¸ä½¿ç”¨CHANGE MASTER, KILL, PURGE MASTER LOGSå’ŒSET GLOBALè¯­å¥ï¼Œmysqladmin debugå‘½ä»¤ï¼›å…è®¸æ‚¨è¿æ¥ï¼ˆä¸€æ¬¡ï¼‰ï¼Œå³ä½¿å·²è¾¾åˆ°max_connectionsã€‚</span></span><br><span class="line">    <span class="keyword">UPDATE</span>  <span class="comment">-- å…è®¸ä½¿ç”¨UPDATE</span></span><br><span class="line">    USAGE   <span class="comment">-- â€œæ— æƒé™â€çš„åŒä¹‰è¯</span></span><br><span class="line"><span class="comment">-- åŒæ—¶æˆäºˆç”¨æˆ·æˆäºˆæƒé™çš„æƒé™</span></span><br><span class="line">    <span class="keyword">GRANT</span> OPTION    <span class="comment">-- å…è®¸æˆäºˆæƒé™  </span></span><br><span class="line">      <span class="comment">-- è¿™é‡Œä½¿ç”¨è·Ÿåœ¨æœ«å°¾</span></span><br><span class="line">      <span class="comment">-- ä¾‹å­ï¼šGRANT ALL ON *.* TO &#x27;ren_user1&#x27;@&#x27;localhost&#x27; with GRANT OPTION</span></span><br><span class="line">	  </span><br><span class="line"><span class="comment">-- åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;user_name&#x27;</span>@<span class="string">&#x27;host&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="åä¹-è¡¨ç»´æŠ¤">åä¹ã€è¡¨ç»´æŠ¤</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* è¡¨ç»´æŠ¤ */</span></span><br><span class="line"><span class="comment">-- åˆ†æå’Œå­˜å‚¨è¡¨çš„å…³é”®å­—åˆ†å¸ƒ</span></span><br><span class="line">ANALYZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> è¡¨å ...</span><br><span class="line">   <span class="operator">-</span> ANALYZE <span class="keyword">TABLE</span>è¯­å¥è¢«å†™å…¥äºŒè¿›åˆ¶æ—¥å¿—ä¸­ï¼Œé™¤éä½¿ç”¨äº†è‡ªé€‰çš„NO_WRITE_TO_BINLOGå…³é”®è¯ï¼ˆæˆ–å…¶åˆ«å<span class="keyword">LOCAL</span>ï¼‰ã€‚</span><br><span class="line">      <span class="comment">-- ä¾‹ï¼šanalyze  table day01.user;</span></span><br><span class="line">      <span class="comment">-- è§£é‡Šï¼šåˆ†æday01ä¸­çš„userè¡¨</span></span><br><span class="line">      <span class="comment">-- ç»“æœå‚æ•°è§£é‡Š</span></span><br><span class="line">          <span class="comment">-- Table:è¡¨åç§°  Opï¼šè¿›è¡ŒçŠ¶æ€  Msg_typeï¼šçŠ¶æ€ã€é”™è¯¯ã€ä¿¡æ¯æˆ–è­¦å‘Šä¹‹ä¸€  Msg_textï¼šæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">-- æ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨æ˜¯å¦æœ‰é”™è¯¯</span></span><br><span class="line"><span class="keyword">CHECK</span> <span class="keyword">TABLE</span> tbl_name [, tbl_name] ... [option] ...</span><br><span class="line">option <span class="operator">=</span> &#123;QUICK <span class="operator">|</span> FAST <span class="operator">|</span> MEDIUM <span class="operator">|</span> EXTENDED <span class="operator">|</span> CHANGED&#125;</span><br><span class="line">    <span class="comment">-- ä¾‹:check TABLE day01.user [quick];</span></span><br><span class="line"><span class="comment">-- æ•´ç†æ•°æ®æ–‡ä»¶çš„ç¢ç‰‡</span></span><br><span class="line">OPTIMIZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> tbl_name [, tbl_name] ...</span><br><span class="line">    <span class="comment">-- ä¾‹ï¼šoptimize table day01.user;</span></span><br></pre></td></tr></table></figure>
<h3 id="äºŒå-æ‚é¡¹">äºŒåã€æ‚é¡¹</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æ‚é¡¹ */</span> <span class="comment">------------------</span></span><br><span class="line"><span class="number">1.</span> å¯ç”¨åå¼•å·ï¼ˆ`ï¼‰ä¸ºæ ‡è¯†ç¬¦ï¼ˆåº“åã€è¡¨åã€å­—æ®µåã€ç´¢å¼•ã€åˆ«åï¼‰åŒ…è£¹ï¼Œä»¥é¿å…ä¸å…³é”®å­—é‡åï¼ä¸­æ–‡ä¹Ÿå¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼</span><br><span class="line"><span class="number">2.</span> æ¯ä¸ªåº“ç›®å½•å­˜åœ¨ä¸€ä¸ªä¿å­˜å½“å‰æ•°æ®åº“çš„é€‰é¡¹æ–‡ä»¶db.optã€‚</span><br><span class="line"><span class="number">3.</span> æ³¨é‡Šï¼š</span><br><span class="line">    å•è¡Œæ³¨é‡Š # æ³¨é‡Šå†…å®¹</span><br><span class="line">    å¤šè¡Œæ³¨é‡Š <span class="comment">/* æ³¨é‡Šå†…å®¹ */</span></span><br><span class="line">    å•è¡Œæ³¨é‡Š <span class="comment">-- æ³¨é‡Šå†…å®¹     (æ ‡å‡†SQLæ³¨é‡Šé£æ ¼ï¼Œè¦æ±‚åŒç ´æŠ˜å·ååŠ ä¸€ç©ºæ ¼ç¬¦ï¼ˆç©ºæ ¼ã€TABã€æ¢è¡Œç­‰ï¼‰)</span></span><br><span class="line"><span class="number">4.</span> æ¨¡å¼é€šé…ç¬¦ï¼š</span><br><span class="line">    _   ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">    <span class="operator">%</span>   ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œç”šè‡³åŒ…æ‹¬é›¶å­—ç¬¦</span><br><span class="line">    å•å¼•å·éœ€è¦è¿›è¡Œè½¬ä¹‰ \<span class="string">&#x27;</span></span><br><span class="line"><span class="string">5. CMDå‘½ä»¤è¡Œå†…çš„è¯­å¥ç»“æŸç¬¦å¯ä»¥ä¸º &quot;;&quot;, &quot;\G&quot;, &quot;\g&quot;ï¼Œä»…å½±å“æ˜¾ç¤ºç»“æœã€‚å…¶ä»–åœ°æ–¹è¿˜æ˜¯ç”¨åˆ†å·ç»“æŸã€‚delimiter å¯ä¿®æ”¹å½“å‰å¯¹è¯çš„è¯­å¥ç»“æŸç¬¦ã€‚</span></span><br><span class="line"><span class="string">6. SQLå¯¹å¤§å°å†™ä¸æ•æ„Ÿ</span></span><br><span class="line"><span class="string">7. æ¸…é™¤å·²æœ‰è¯­å¥ï¼š\c</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>sql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlå‘½ä»¤æ€»ç»“(ä¸€)</title>
    <url>/2021/02/14/Mysql%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93(%E4%B8%80)/</url>
    <content><![CDATA[<p><strong>ç‰ˆæƒå£°æ˜</strong>ï¼šæœ¬æ–‡è½¬è½½è‡ª<a href="https://shockerli.net/post/1000-line-mysql-note/">ä¸€åƒè¡Œ MySQL å­¦ä¹ ç¬”è®°</a>ï¼Œå¹¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿›è¡Œäº†<strong>å¢åˆ æ”¹</strong>ã€‚</p>
<span id="more"></span>
<h2 id="mysql">mysql</h2>
<p><strong>æ³¨ï¼šæ‰€æœ‰æ“ä½œåŸºäºday01æ•°æ®åº“</strong></p>
<p><strong>æ³¨ï¼šæ‰€æœ‰sqlå‘½ä»¤ä¸­çš„ [å­—æ®µ] æ„ä¸ºå¯é€‰å­—æ®µ</strong></p>
<p>åˆ›å»ºè¡¨(<span style="color:red">ä»¥ä¸‹è¡¨å‡ä¸ºè™šæ„</span>)ï¼š</p>
<p><strong>user</strong>è¡¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>`  (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `age` <span class="type">int</span>(<span class="number">10</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `money` <span class="keyword">double</span>(<span class="number">10</span>, <span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `score` <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `money`(`money`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `normalIndex`(`name`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">8</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="number">24</span>, <span class="number">1000.00</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">2000.00</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;æœªè®¾ç½®&#x27;</span>, <span class="number">18</span>, <span class="number">0.00</span>, <span class="number">7</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="number">18</span>, <span class="number">3000.00</span>, <span class="number">6</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">6</span>, <span class="string">&#x27;ç”°ä¸ƒ&#x27;</span>, <span class="number">18</span>, <span class="number">3500.00</span>, <span class="number">9</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">7</span>, <span class="string">&#x27;ç”°ä¸ƒ&#x27;</span>, <span class="number">17</span>, <span class="number">4100.00</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>t_userè¡¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `t_user`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_user`  (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `age` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">4</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of t_user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_user` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="number">23</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_user` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;æå››&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_user` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>t_moneyè¡¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_money</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `t_money`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_money`  (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `money` <span class="keyword">double</span>(<span class="number">40</span>, <span class="number">0</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">4</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of t_money</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_money` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_money` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="number">200</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_money` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ä¸€-åŸºæœ¬æ“ä½œ">ä¸€ã€åŸºæœ¬æ“ä½œ</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å¯åŠ¨MySQL</span></span><br><span class="line">    net <span class="keyword">start</span> mysql;</span><br><span class="line"><span class="comment">-- åˆ›å»ºWindowsæœåŠ¡</span></span><br><span class="line">    sc <span class="keyword">create</span> mysql binPath<span class="operator">=</span> mysqld_bin_path;(æ³¨æ„ï¼šç­‰å·ä¸å€¼ä¹‹é—´æœ‰ç©ºæ ¼)</span><br><span class="line"><span class="comment">/* è¿æ¥ä¸æ–­å¼€æœåŠ¡å™¨ */</span></span><br><span class="line">    mysql <span class="operator">-</span>h åœ°å€ <span class="operator">-</span>P ç«¯å£ <span class="operator">-</span>u ç”¨æˆ·å <span class="operator">-</span>p å¯†ç ;</span><br><span class="line">    <span class="keyword">SHOW</span> PROCESSLIST <span class="comment">-- æ˜¾ç¤ºå“ªäº›çº¿ç¨‹æ­£åœ¨è¿è¡Œ</span></span><br><span class="line">    <span class="keyword">SHOW</span> VARIABLES <span class="comment">-- æ˜¾ç¤ºç³»ç»Ÿå˜é‡ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åœæ­¢MySQL</span></span><br><span class="line">    net stop mysql;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒ-æ•°æ®åº“çš„æ“ä½œ">äºŒã€æ•°æ®åº“çš„æ“ä½œ</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥çœ‹æ‰€æœ‰å·²å­˜åœ¨çš„æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">show</span> databases;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">create</span> database[if <span class="keyword">not</span> <span class="keyword">exists</span>] æ•°æ®åº“å æ•°æ®åº“é€‰é¡¹</span><br><span class="line">    æ•°æ®åº“é€‰é¡¹ï¼š</span><br><span class="line">        <span class="type">CHARACTER</span> <span class="keyword">SET</span> charset_name</span><br><span class="line">        <span class="keyword">COLLATE</span> collation_name</span><br><span class="line">    <span class="comment">-- å®ä¾‹ï¼šå¦‚æœåä¸ºday01çš„æ•°æ®åº“ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºï¼Œåˆ›å»ºé»˜è®¤ç¼–ç ä¸ºutf8ï¼Œæ’åºè§„åˆ™ä¸ºutf8_general_ci</span></span><br><span class="line">    <span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> day01 <span class="keyword">DEFAULT</span> CHARSET utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- ä½¿ç”¨è¯¥æ•°æ®åº“</span></span><br><span class="line">    use æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹å½“å‰é€‰ä¸­ä½¿ç”¨çš„æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">select</span> database();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹æŒ‡å®šçš„æ•°æ®åº“æ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">show</span> <span class="keyword">create</span> database æ•°æ®åº“å;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- åˆ é™¤æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">drop</span> database[if <span class="keyword">exists</span>] æ•°æ®åº“å;</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰-è¡¨æ“ä½œ">ä¸‰ã€è¡¨æ“ä½œ</h3>
<ol>
<li>è®°å¿†ï¼šæ“ä½œè¡¨ï¼Œ(ä¸æ“ä½œè¡¨çš„æ•°æ®)ï¼Œéƒ½éœ€è¦åŠ ä¸Štableå‚æ•°</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºè¡¨</span></span><br><span class="line">    <span class="keyword">CREATE</span> [TEMPORARY] <span class="keyword">TABLE</span>[ IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] [åº“å.]è¡¨å ( è¡¨çš„ç»“æ„å®šä¹‰ )[ è¡¨é€‰é¡¹]</span><br><span class="line">    <span class="comment">-- TEMPORARY è¡¨ç¤ºåˆ›å»ºä¸´æ—¶è¡¨ï¼Œä¼šè¯ç»“æŸåæ¶ˆå¤±</span></span><br><span class="line">    <span class="comment">-- è¡¨ç»“æ„å®šä¹‰ï¼š</span></span><br><span class="line">        å­—æ®µå æ•°æ®ç±»å‹ [<span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>] [<span class="keyword">DEFAULT</span> default_value] [AUTO_INCREMENT] [<span class="keyword">UNIQUE</span> [KEY] <span class="operator">|</span> [<span class="keyword">PRIMARY</span>] KEY] [COMMENT <span class="string">&#x27;string&#x27;</span>]</span><br><span class="line">        [<span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>]ï¼šä¸èƒ½ä¸ºç©º<span class="operator">/</span>å¯ä»¥ä¸ºç©º(é»˜è®¤)</span><br><span class="line">        [<span class="keyword">DEFAULT</span> default_value]ï¼šå¦‚æœä¸ºç©ºåˆ™è‡ªåŠ¨è®¾ç½®å€¼ä¸ºdefault_value</span><br><span class="line">        [AUTO_INCREMENT] ï¼šè‡ªå¢é•¿ï¼Œä¸€èˆ¬ç”¨äºä¸»é”®id</span><br><span class="line">        [<span class="keyword">UNIQUE</span> [KEY]ï¼šå”¯ä¸€çº¦æŸï¼ŒåŒä¸»é”®ä¸€æ ·ï¼Œå€¼ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯å¯ä»¥è®¾ç½®å¤šä¸ª</span><br><span class="line">        [<span class="keyword">PRIMARY</span>] KEY]ï¼šä¸»é”®</span><br><span class="line">        [COMMENT <span class="string">&#x27;string&#x27;</span>]ï¼šè¡¨æ³¨é‡Š</span><br><span class="line">    <span class="comment">-- å®ä¾‹ï¼š</span></span><br><span class="line">      <span class="comment">-- å¦‚æœä¸å­˜åœ¨å°±åˆ›å»º userè¡¨(é¿å…å­˜åœ¨æŠ¥é”™)</span></span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> if <span class="keyword">not</span> <span class="keyword">EXISTS</span> <span class="keyword">user</span>(</span><br><span class="line">		<span class="comment">-- åˆ›å»ºè‡ªå¢é•¿idä¸»é”®</span></span><br><span class="line">		id <span class="type">int</span> <span class="keyword">PRIMARY</span> key auto_increment,</span><br><span class="line">		<span class="comment">-- åˆ›å»ºstringç±»å‹å§“åä¸èƒ½ä¸ºç©ºï¼Œé»˜è®¤å€¼æœª&#x27;æœªè®¾ç½®&#x27;ï¼Œæ³¨é‡Šï¼šå§“å</span></span><br><span class="line">		name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;æœªè®¾ç½®&#x27;</span> COMMENT <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">		<span class="comment">-- åˆ›å»ºstringç±»å‹moneä¸èƒ½ä¸ºç©ºï¼Œå¹¶ä¸”å”¯ä¸€çº¦æŸ(å¦‚æœå¯ä»¥ä¸ºnullï¼Œæ˜¯å…è®¸å­˜åœ¨å¤šä¸ªnullçš„)</span></span><br><span class="line">		money <span class="keyword">DOUBLE</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">UNIQUE</span></span><br><span class="line">	)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">-- æŸ¥çœ‹æ‰€æœ‰è¡¨</span></span><br><span class="line">    <span class="keyword">show</span> tables </span><br><span class="line">    <span class="keyword">show</span> tables <span class="keyword">from</span> æ•°æ®åº“å</span><br><span class="line">    <span class="comment">-- æŸ¥çœ‹è¡¨ä¸­æ•°æ®å°±æ˜¯sqlè¯­å¥select *;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹è¡¨</span></span><br><span class="line">    <span class="comment">-- ä¿®æ”¹è¡¨æœ¬èº«</span></span><br><span class="line">        <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å è¡¨çš„é€‰é¡¹</span><br><span class="line">        egï¼š<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å ENGINE<span class="operator">=</span>MYISAM; (å°†è¡¨çš„å¼•æ“æ”¹ä¸ºmyisam)</span><br><span class="line">    <span class="comment">-- å¯¹è¡¨è¿›è¡Œé‡å‘½å</span></span><br><span class="line">        RENAME <span class="keyword">TABLE</span> åŸè¡¨å <span class="keyword">TO</span> æ–°è¡¨å;</span><br><span class="line">        RENAME <span class="keyword">TABLE</span> åŸè¡¨å <span class="keyword">TO</span> åº“å.è¡¨å (å¯ä»¥å°†è¡¨ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ•°æ®åº“)</span><br><span class="line">    <span class="comment">-- ä¿®æ”¹è¡¨çš„å­—æ®µ(ALTER TABLE è¯­æ³•)</span></span><br><span class="line">        <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å æ“ä½œå</span><br><span class="line">        <span class="comment">-- æ“ä½œå</span></span><br><span class="line">            <span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] å­—æ®µå®šä¹‰			 <span class="comment">-- å¢åŠ å­—æ®µ</span></span><br><span class="line">                AFTER å­—æ®µå				 <span class="comment">-- åœ¨xxä¹‹åå¢åŠ å­—æ®µ</span></span><br><span class="line">                <span class="keyword">FIRST</span>				  	   <span class="comment">-- å¢åŠ åœ¨ç¬¬ä¸€ä¸ªä½ç½®</span></span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šALTER TABLE `user` ADD score INT(8);  ç»™userè¡¨æ·»åŠ ä¸€ä¸ªscoreå­—æ®µ</span></span><br><span class="line">            <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY			   	    <span class="comment">-- åˆ›å»ºä¸»é”®</span></span><br><span class="line">            <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> [ç´¢å¼•å] (å­—æ®µå)      <span class="comment">-- åˆ›å»ºå”¯ä¸€ç´¢å¼•</span></span><br><span class="line">            <span class="keyword">ADD</span> INDEX [ç´¢å¼•å] (å­—æ®µå)        <span class="comment">-- åˆ›å»ºæ™®é€šç´¢å¼•</span></span><br><span class="line">            <span class="keyword">DROP</span>[ <span class="keyword">COLUMN</span>] å­—æ®µå              <span class="comment">-- åˆ é™¤å­—æ®µ</span></span><br><span class="line">            MODIFY[ <span class="keyword">COLUMN</span>] å­—æ®µå å­—æ®µå±æ€§     <span class="comment">-- æ”¯æŒå¯¹å­—æ®µå±æ€§è¿›è¡Œä¿®æ”¹ï¼Œä¸èƒ½ä¿®æ”¹å­—æ®µå(æ‰€æœ‰åŸæœ‰å±æ€§ä¹Ÿéœ€å†™ä¸Š)</span></span><br><span class="line">            CHANGE[ <span class="keyword">COLUMN</span>] åŸå­—æ®µå æ–°å­—æ®µå å­—æ®µå±æ€§      <span class="comment">-- æ”¯æŒå¯¹å­—æ®µåä¿®æ”¹</span></span><br><span class="line">            <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY     <span class="comment">-- åˆ é™¤ä¸»é”®(åˆ é™¤ä¸»é”®å‰éœ€åˆ é™¤å…¶AUTO_INCREMENTå±æ€§)</span></span><br><span class="line">            <span class="keyword">DROP</span> INDEX ç´¢å¼•å     <span class="comment">-- åˆ é™¤ç´¢å¼•</span></span><br><span class="line">            <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY å¤–é”®    <span class="comment">-- åˆ é™¤å¤–é”®</span></span><br><span class="line">            </span><br><span class="line"><span class="comment">-- åˆ é™¤è¡¨</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">TABLE</span>[ IF <span class="keyword">EXISTS</span>] è¡¨å ...</span><br><span class="line"><span class="comment">-- æ¸…ç©ºè¡¨æ•°æ®</span></span><br><span class="line">    <span class="keyword">TRUNCATE</span> [<span class="keyword">TABLE</span>] è¡¨å</span><br><span class="line"><span class="comment">-- å¤åˆ¶è¡¨ç»“æ„</span></span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">LIKE</span> è¦å¤åˆ¶çš„è¡¨å</span><br><span class="line"><span class="comment">-- å¤åˆ¶è¡¨ç»“æ„å’Œæ•°æ®</span></span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> è¡¨å [<span class="keyword">AS</span>] <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> è¦å¤åˆ¶çš„è¡¨å</span><br><span class="line"><span class="comment">-- æ£€æŸ¥è¡¨æ˜¯å¦æœ‰é”™è¯¯</span></span><br><span class="line">    <span class="keyword">CHECK</span> <span class="keyword">TABLE</span> tbl_name [, tbl_name] ... [option] ...</span><br><span class="line"><span class="comment">-- ä¼˜åŒ–è¡¨</span></span><br><span class="line">    OPTIMIZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> tbl_name [, tbl_name] ...</span><br><span class="line"><span class="comment">-- ä¿®å¤è¡¨</span></span><br><span class="line">    REPAIR [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]</span><br><span class="line"><span class="comment">-- åˆ†æè¡¨</span></span><br><span class="line">    ANALYZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure>
<h3 id="å››-æ•°æ®æ“ä½œ">å››ã€æ•°æ®æ“ä½œ</h3>
<ol>
<li><span style="color:red">æ³¨æ„</span>ï¼šåˆ æ”¹æ“ä½œä¸€å®šè¦åŠ æ¡ä»¶ï¼Œå¦åˆ™å°±æ˜¯åˆ æ”¹æ•´å¼ è¡¨(å‡†å¤‡è·‘è·¯)</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å¢</span></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> è¡¨å [(å­—æ®µåˆ—è¡¨)] <span class="keyword">VALUES</span> (å€¼åˆ—è¡¨)[,(å€¼åˆ—è¡¨),,,]</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> è¡¨å <span class="keyword">SET</span> å­—æ®µå<span class="operator">=</span>å€¼[,å­—æ®µå<span class="operator">=</span>å€¼,,,]   <span class="comment">-- æ¨èä¸Šé¢</span></span><br><span class="line"><span class="comment">-- åˆ </span></span><br><span class="line">    <span class="keyword">DELETE</span> <span class="keyword">FROM</span> è¡¨å [åˆ é™¤æ¡ä»¶çš„å¥å­]</span><br><span class="line">    <span class="comment">-- æ²¡æœ‰æ¡ä»¶é»˜è®¤åˆ é™¤å…¨éƒ¨</span></span><br><span class="line"><span class="comment">-- æ”¹</span></span><br><span class="line">    <span class="keyword">UPDATE</span> è¡¨å <span class="keyword">SET</span> å­—æ®µå<span class="operator">=</span>æ–°å€¼[,å­—æ®µå<span class="operator">=</span>æ–°å€¼,,,] [æ›´æ–°æ¡ä»¶]</span><br><span class="line">    <span class="comment">-- æ²¡æœ‰æ¡ä»¶é»˜è®¤æ›´æ”¹å…¨éƒ¨</span></span><br><span class="line"><span class="comment">-- æŸ¥</span></span><br><span class="line">    <span class="keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="keyword">FROM</span> è¡¨å [æŸ¥è¯¢æ¡ä»¶]</span><br></pre></td></tr></table></figure>
<h3 id="å…­-select">å…­ã€SELECT</h3>
<ol>
<li>selectï¼šåˆ›å»ºä¸€å¼ ä¸´æ—¶çš„è¡¨ï¼Œæ¥å­˜å‚¨æŸ¥è¯¢åˆ°çš„æ•°æ®</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>] select_expr <span class="keyword">FROM</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> [åˆè®¡å‡½æ•°] <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">HAVING</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">-</span><span class="operator">&gt;</span> LIMIT</span><br><span class="line">    <span class="comment">-- å­—æ®µé‡Šä¹‰ï¼š</span></span><br><span class="line">        <span class="keyword">ALL</span>:å±•ç¤ºæŸ¥è¯¢åˆ°çš„æ‰€æœ‰æ•°æ®ï¼Œå’Œä¸å†™æ•ˆæœä¸€æ ·</span><br><span class="line">        <span class="keyword">DISTINCT</span>:æŸ¥è¯¢å»é‡åçš„ç»“æœ</span><br><span class="line">            <span class="comment">-- æ³¨ï¼šSELECT DISTINCT * from è¡¨å;    æµ‹è¯•ä¸èµ·æ•ˆæœ</span></span><br><span class="line">            <span class="comment">-- SELECT DISTINCT å­—æ®µå FROM è¡¨å	  åˆ›å»ºä¸€å¼ åªæœ‰æŸå­—æ®µå»é‡åçš„ä¸´æ—¶è¡¨(åŒæ ·è®¾ç½®å¤šä¸ªå­—æ®µå¤±æ•ˆ)</span></span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> å­—æ®µå[<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]ï¼šå°†æŸ¥è¯¢åˆ°çš„ç»“æœåˆ†ç»„(å®é™…æ•ˆæœç›¸å½“äºæ ¹æ®å­—æ®µåå»é‡åå±•ç¤º(æŠ›å¼ƒé‡å¤å­—æ®µåé¢çš„))</span><br><span class="line">		         é…åˆæŸäº›ä¾‹å¦‚<span class="built_in">count</span>()ã€<span class="built_in">avg</span>(å­—æ®µå)å¯ä»¥è¾¾åˆ°åˆ†ç»„å±•ç¤ºçš„æ•ˆæœ; [å‡åº<span class="operator">|</span>é™åº]</span><br><span class="line">         <span class="keyword">HAVING</span>ï¼šå¯¹ <span class="keyword">GROUP</span> <span class="keyword">BY</span> åçš„è¡¨å†è¿›è¡Œè¿‡æ»¤</span><br><span class="line">         <span class="keyword">ORDER</span> <span class="keyword">BY</span> å­—æ®µå; æ’åºï¼Œåªä¼šæ ¹æ®å­—æ®µåæ’åºï¼Œä¸ä¼šå»æ‰é‡å¤æ•°æ®</span><br><span class="line">         LIMIT a,bï¼šåˆ†é¡µæŸ¥è¯¢ï¼Œa:èµ·å§‹è¡Œæ•°(ä»<span class="number">0</span>å¼€å§‹è®¡æ•°)ï¼Œåˆ†é¡µæŸ¥è¯¢é¡µæ•° </span><br><span class="line">             <span class="comment">-- select * from user limit 1,3;   åˆ†é¡µï¼šä»ç¬¬2è¡Œå¼€å§‹ï¼Œä¸€æ¬¡æŸ¥è¯¢3ä¸ªï¼›</span></span><br><span class="line">			</span><br><span class="line">a. select_exprï¼š</span><br><span class="line">    <span class="comment">-- å¯ä»¥ç”¨*è¡¨ç¤ºæ‰€æœ‰å­—æ®µ</span></span><br><span class="line">        <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line">    <span class="comment">-- å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ï¼ˆè®¡ç®—å…¬å¼ã€å‡½æ•°è°ƒç”¨ã€å­—æ®µä¹Ÿæ˜¯ä¸ªè¡¨è¾¾å¼ï¼‰ </span></span><br><span class="line">    <span class="comment">-- å¤‡æ³¨ï¼šselectå°±æ˜¯åˆ›å»ºä¸€å¼ ä¸´æ—¶çš„è¡¨ï¼Œå¦‚æœç›´æ¥ç»™æ•°æ®(å¦‚ä¸‹åˆ—çš„è®¡ç®—å…¬å¼ï¼Œå‡½æ•°è°ƒç”¨now()ç­‰ä¸ä»è¡¨ä¸­æŸ¥çš„ä¼šç›´æ¥åˆ›å»ºåˆ°ä¸´æ—¶è¡¨ä¸­)</span></span><br><span class="line">        <span class="keyword">select</span> name, <span class="number">29</span><span class="operator">+</span><span class="number">25</span>, now() <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line">    <span class="comment">-- å¯ä»¥ä¸ºæ¯ä¸ªåˆ—ä½¿ç”¨åˆ«åã€‚é€‚ç”¨äºç®€åŒ–åˆ—æ ‡è¯†ï¼Œé¿å…å¤šä¸ªåˆ—æ ‡è¯†ç¬¦é‡å¤ã€‚</span></span><br><span class="line">        <span class="operator">-</span> ä½¿ç”¨ <span class="keyword">as</span> å…³é”®å­—ï¼Œä¹Ÿå¯çœç•¥ as.</span><br><span class="line">        <span class="keyword">select</span> <span class="keyword">user</span><span class="operator">+</span><span class="number">10</span> <span class="keyword">as</span> add10 <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"> </span><br><span class="line">b. <span class="keyword">FROM</span> å­å¥</span><br><span class="line">    ç”¨äºæ ‡è¯†æŸ¥è¯¢æ¥æºã€‚</span><br><span class="line">    <span class="comment">-- å¯ä»¥ä¸ºè¡¨èµ·åˆ«åã€‚ä½¿ç”¨aså…³é”®å­—ã€‚</span></span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb1 <span class="keyword">AS</span> tt, tb2 <span class="keyword">AS</span> bb;</span><br><span class="line">    <span class="comment">-- fromå­å¥åï¼Œå¯ä»¥åŒæ—¶å‡ºç°å¤šä¸ªè¡¨ã€‚</span></span><br><span class="line">        <span class="comment">-- å¤šä¸ªè¡¨ä¼šæ¨ªå‘å åŠ åˆ°ä¸€èµ·ï¼Œè€Œæ•°æ®ä¼šå½¢æˆä¸€ä¸ªç¬›å¡å°”ç§¯ã€‚</span></span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb1, tb2;</span><br><span class="line">    <span class="comment">-- å‘ä¼˜åŒ–ç¬¦æç¤ºå¦‚ä½•é€‰æ‹©ç´¢å¼•</span></span><br><span class="line">        USE INDEXã€IGNORE INDEXã€FORCE INDEX :ä½¿ç”¨æŒ‡å®šçš„ç´¢å¼•ï¼Œå¿½ç•¥ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•ï¼Œå¼ºåˆ¶ä½¿ç”¨æŒ‡å®šç´¢å¼•</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1 USE INDEX (key1,key2) <span class="keyword">WHERE</span> key1<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> key2<span class="operator">=</span><span class="number">2</span> <span class="keyword">AND</span> key3<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1 IGNORE INDEX (key3) <span class="keyword">WHERE</span> key1<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> key2<span class="operator">=</span><span class="number">2</span> <span class="keyword">AND</span> key3<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">c. <span class="keyword">WHERE</span> å­å¥</span><br><span class="line">    <span class="comment">-- ä»fromè·å¾—çš„æ•°æ®æºä¸­è¿›è¡Œç­›é€‰ã€‚</span></span><br><span class="line">    <span class="comment">-- æ•´å‹1è¡¨ç¤ºçœŸï¼Œ0è¡¨ç¤ºå‡ã€‚</span></span><br><span class="line">    <span class="comment">-- è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦å’Œè¿ç®—æ•°ç»„æˆã€‚</span></span><br><span class="line">        <span class="comment">-- è¿ç®—æ•°ï¼šå˜é‡ï¼ˆå­—æ®µï¼‰ã€å€¼ã€å‡½æ•°è¿”å›å€¼</span></span><br><span class="line">        <span class="comment">-- è¿ç®—ç¬¦ï¼š</span></span><br><span class="line">            <span class="operator">=</span>, <span class="operator">&lt;=&gt;</span>,(ç­‰äº);   <span class="operator">!=</span>, <span class="operator">&lt;&gt;</span>,(ä¸ç­‰äºï¼Œ)    </span><br><span class="line">            	<span class="comment">-- ä¸¤é è¿‘æ‹¬å·çš„åè€…ï¼Œå¦‚æœä¸ºtrueï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0(å¯ä»¥åˆ¤æ–­æ˜¯å¦ä½nullçš„æƒ…å†µï¼Œå»ºè®®ä½¿ç”¨is nullæ¥è¿›è¡Œåˆ¤æ–­)</span></span><br><span class="line">            <span class="operator">&lt;=</span>,<span class="operator">&lt;</span>, <span class="operator">&gt;=</span>, <span class="operator">&gt;</span>,  <span class="operator">!</span>,(å–ç¬¦å·ç›¸å)    <span class="operator">&amp;&amp;</span>,(åŒ<span class="keyword">and</span>ï¼Œä½†æ˜¯ç”¨äºé€»è¾‘åˆ¤æ–­) <span class="operator">||</span>,</span><br><span class="line">            (<span class="keyword">not</span>)<span class="keyword">in</span>,</span><br><span class="line">            	<span class="comment">-- (ä¸)åœ¨é›†åˆä¸­ï¼Œä¾‹ï¼šselect * from user where name in(&quot;å¼ ä¸‰&quot;,&quot;ç‹äº”&quot;);æŸ¥è¯¢(é™¤)å¼ ä¸‰ç‹äº”</span></span><br><span class="line">            (<span class="keyword">not</span>) <span class="keyword">like</span>,</span><br><span class="line">            	<span class="comment">-- (ä¸)åŒ¹é…çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ä½¿ç”¨%å å¤šä½ç¬¦ï¼Œ_å ä¸€ä½ç¬¦</span></span><br><span class="line">            (<span class="keyword">not</span>) <span class="keyword">between</span> <span class="keyword">and</span>, </span><br><span class="line">            	<span class="comment">-- åœ¨Aå’ŒBä¹‹é—´çš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">is</span> (<span class="keyword">not</span>),</span><br><span class="line">            	<span class="comment">-- ä¸€èˆ¬å’Œnullä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦ä½null</span></span><br><span class="line">            <span class="keyword">and</span>, <span class="keyword">or</span>, <span class="keyword">not</span>, </span><br><span class="line">            xor	</span><br><span class="line">            	<span class="comment">-- é€»è¾‘å¼‚æˆ–ï¼Œå¦‚æœæœ‰nullåˆ™ä¸ºnullï¼Œå¦‚æœç›¸åŒä¸º0ï¼Œä¸ç›¸åŒä¸º1(ä¸€èˆ¬ä¸ç”¨)</span></span><br><span class="line">            <span class="keyword">is</span><span class="operator">/</span><span class="keyword">is</span> <span class="keyword">not</span> åŠ ä¸Šture<span class="operator">/</span><span class="literal">false</span><span class="operator">/</span><span class="literal">unknown</span>ï¼Œæ£€éªŒæŸä¸ªå€¼çš„çœŸå‡</span><br><span class="line">            <span class="operator">&lt;=&gt;</span>ä¸<span class="operator">&lt;&gt;</span>åŠŸèƒ½ç›¸åŒï¼Œ<span class="operator">&lt;=&gt;</span>å¯ç”¨äº<span class="keyword">null</span>æ¯”è¾ƒ</span><br><span class="line">            </span><br><span class="line">d. <span class="keyword">GROUP</span> <span class="keyword">BY</span> å­å¥, åˆ†ç»„å­å¥</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> å­—æ®µ<span class="operator">/</span>åˆ«å [æ’åºæ–¹å¼]</span><br><span class="line">    åˆ†ç»„åä¼šè¿›è¡Œæ’åºã€‚å‡åºï¼š<span class="keyword">ASC</span>ï¼Œé™åºï¼š<span class="keyword">DESC</span></span><br><span class="line">    ä»¥ä¸‹[åˆè®¡å‡½æ•°]éœ€é…åˆ <span class="keyword">GROUP</span> <span class="keyword">BY</span> ä½¿ç”¨ï¼š</span><br><span class="line">        count è¿”å›ä¸åŒçš„é<span class="keyword">NULL</span>å€¼æ•°ç›®  <span class="built_in">count</span>(<span class="operator">*</span>)ã€<span class="built_in">count</span>(å­—æ®µ)</span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šselect name,count(*) from user group by name;  æ ¹æ®å§“ååˆ†ç»„æŸ¥è¯¢æ€»æ•°</span></span><br><span class="line">        sum æ±‚å’Œ</span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šselect age, sum(money) from user group by age; æ ¹æ®å¹´é¾„åˆ†ç»„ï¼Œè®¡ç®—æ¯ä¸ªå¹´é¾„çš„æ€»é‡‘é’±</span></span><br><span class="line">        max æ±‚æœ€å¤§å€¼</span><br><span class="line">        min æ±‚æœ€å°å€¼</span><br><span class="line">        avg æ±‚å¹³å‡å€¼</span><br><span class="line">        group_concat è¿”å›å¸¦æœ‰æ¥è‡ªä¸€ä¸ªç»„çš„è¿æ¥çš„é<span class="keyword">NULL</span>å€¼çš„å­—ç¬¦ä¸²ç»“æœã€‚ç»„å†…å­—ç¬¦ä¸²è¿æ¥ã€‚(ä¾‹å¦‚ä¸€ä¸ªidå¯¹åº”å¤šä¸ªåˆ†æ•°ï¼Œæ ¹æ®idåˆ†ç»„åï¼Œæ‰€æœ‰åˆ†æ•°æ˜¾ç¤ºæ‹¼æ¥åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œé»˜è®¤ç”¨é€—å·æ‹¼æ¥)(å°†å¤šä¸ªæ•°æ®ä»¥æ‹¼æ¥çš„æ–¹å¼æ”¾å…¥åŒä¸€ç»„)</span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šSELECT name,GROUP_CONCAT( [DISTINCT] score) from user group by name;</span></span><br><span class="line">            <span class="comment">-- è§£é‡Šï¼šæŸ¥è¯¢å§“åï¼Œè¯¥å§“åçš„æ‰€æœ‰ [å»é‡] åˆ†æ•°(åœ¨åŒä¸€ä¸ªæ ¼å­é‡Œæ˜¾ç¤ºé»˜è®¤é€—å·åˆ†å‰²)ï¼Œä»¥å§“ååˆ†ç»„</span></span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šSELECT name,GROUP_CONCAT(score ORDER BY score DESC   SEPARATOR &#x27;;&#x27;) FROM user GROUP BY `name`;</span></span><br><span class="line">            <span class="comment">-- è§£é‡Šï¼šæŸ¥è¯¢å§“åï¼Œè¯¥å§“åçš„æ‰€æœ‰åˆ†æ•°,åŒæ—¶æŒ‡å®šåˆ†æ•°æ’åºæ–¹å¼(åœ¨åŒä¸€ä¸ªæ ¼å­é‡Œæ˜¾ç¤º)ï¼ŒæŒ‡å®šä»¥&#x27;;&#x27;åˆ†å‰²ï¼Œä»¥å§“ååˆ†ç»„</span></span><br><span class="line"></span><br><span class="line">e. <span class="keyword">HAVING</span> å­å¥ï¼Œæ¡ä»¶å­å¥(æ¦‚æ‹¬ï¼š<span class="keyword">having</span>å¯ä»¥æ¥èšåˆå‡½æ•°ï¼Œç”¨äºgroupby åï¼›<span class="keyword">where</span>åªèƒ½æ¥æ•°æ®åº“å­˜åœ¨çš„å€¼ï¼Œä¸€èˆ¬ç”¨<span class="keyword">where</span>)</span><br><span class="line">    ä¸ <span class="keyword">where</span> åŠŸèƒ½ã€ç”¨æ³•ç›¸åŒï¼Œæ‰§è¡Œæ—¶æœºä¸åŒã€‚</span><br><span class="line">    <span class="keyword">where</span> åœ¨å¼€å§‹æ—¶æ‰§è¡Œæ£€æµ‹æ•°æ®ï¼Œå¯¹åŸæ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚</span><br><span class="line">    <span class="keyword">having</span> å¯¹ç­›é€‰å‡ºçš„ç»“æœå†æ¬¡è¿›è¡Œè¿‡æ»¤ã€‚</span><br><span class="line">    <span class="keyword">having</span> å­—æ®µå¿…é¡»æ˜¯æŸ¥è¯¢å‡ºæ¥çš„ï¼Œ<span class="keyword">where</span> å­—æ®µå¿…é¡»æ˜¯æ•°æ®è¡¨å­˜åœ¨çš„ã€‚</span><br><span class="line">    <span class="keyword">where</span> ä¸å¯ä»¥ä½¿ç”¨å­—æ®µçš„åˆ«åï¼Œ<span class="keyword">having</span> å¯ä»¥ã€‚å› ä¸ºæ‰§è¡Œ<span class="keyword">WHERE</span>ä»£ç æ—¶ï¼Œå¯èƒ½å°šæœªç¡®å®šåˆ—å€¼ã€‚</span><br><span class="line">    <span class="keyword">where</span> ä¸å¯ä»¥ä½¿ç”¨åˆè®¡å‡½æ•°ã€‚ä¸€èˆ¬éœ€ç”¨åˆè®¡å‡½æ•°æ‰ä¼šç”¨ <span class="keyword">having</span></span><br><span class="line">    <span class="keyword">SQL</span>æ ‡å‡†è¦æ±‚<span class="keyword">HAVING</span>å¿…é¡»å¼•ç”¨<span class="keyword">GROUP</span> <span class="keyword">BY</span>å­å¥ä¸­çš„åˆ—æˆ–ç”¨äºåˆè®¡å‡½æ•°ä¸­çš„åˆ—ã€‚</span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šSELECT `name`,sum(money) FROM user GROUP BY `name` HAVING sum(money)&gt;2000;</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼šæŸ¥è¯¢å§“åï¼Œæ€»é’± é€šè¿‡å§“ååˆ†ç»„ï¼Œå¹¶ä¸”åˆ†ç»„ä¹‹åæ€»é‡‘é¢å¤§äº2000çš„</span></span><br><span class="line"></span><br><span class="line">f. <span class="keyword">ORDER</span> <span class="keyword">BY</span> å­å¥ï¼Œæ’åºå­å¥</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> æ’åºå­—æ®µ<span class="operator">/</span>åˆ«å æ’åºæ–¹å¼ [,æ’åºå­—æ®µ<span class="operator">/</span>åˆ«å æ’åºæ–¹å¼]...</span><br><span class="line">        å‡åºï¼š<span class="keyword">ASC</span>ï¼Œé™åºï¼š<span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line">g. LIMIT å­å¥ï¼Œé™åˆ¶ç»“æœæ•°é‡å­å¥(å³åˆ†é¡µæŸ¥è¯¢)</span><br><span class="line">    ä»…å¯¹å¤„ç†å¥½çš„ç»“æœè¿›è¡Œæ•°é‡é™åˆ¶ã€‚å°†å¤„ç†å¥½çš„ç»“æœçš„çœ‹ä½œæ˜¯ä¸€ä¸ªé›†åˆï¼ŒæŒ‰ç…§è®°å½•å‡ºç°çš„é¡ºåºï¼Œç´¢å¼•ä»<span class="number">0</span>å¼€å§‹ã€‚</span><br><span class="line">    limit èµ·å§‹ä½ç½®, è·å–æ¡æ•°(ç¬¬ä¸€è¡Œç´¢å¼•ä¸º<span class="number">0</span>)</span><br><span class="line">        çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä»ç´¢å¼•<span class="number">0</span>å¼€å§‹ã€‚limit è·å–æ¡æ•°</span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šSELECT * FROM user LIMIT 0,3; </span></span><br><span class="line">            <span class="comment">-- è§£é‡Šï¼šä»ç´¢å¼•0(ç¬¬ä¸€ä¸ª)å¼€å§‹ï¼Œæ€»å…±æŸ¥3ä¸ª</span></span><br><span class="line">h. <span class="keyword">DISTINCT</span>, <span class="keyword">ALL</span> é€‰é¡¹</span><br><span class="line">    <span class="keyword">distinct</span> å»é™¤é‡å¤è®°å½•</span><br><span class="line">        é»˜è®¤ä¸º <span class="keyword">all</span>, å…¨éƒ¨è®°å½•</span><br></pre></td></tr></table></figure>
<h3 id="ä¸ƒ-union-æ³¨æ„ä¸joinåŒºåˆ«">ä¸ƒã€UNION(æ³¨æ„ä¸joinåŒºåˆ«)</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* UNION */</span> <span class="comment">------------------</span></span><br><span class="line">    å°†å¤šä¸ª<span class="keyword">select</span>æŸ¥è¯¢çš„ç»“æœç»„åˆæˆä¸€ä¸ªç»“æœé›†åˆã€‚(ä¸¤å¼ è¡¨çš„ä¸¤ä¸ªåˆ—åˆå¹¶ä¸ºåŒä¸€ä¸ªåˆ—)</span><br><span class="line">    <span class="keyword">SELECT</span> ... <span class="keyword">UNION</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>] <span class="keyword">SELECT</span> ...</span><br><span class="line">        é»˜è®¤ <span class="keyword">DISTINCT</span> æ–¹å¼ï¼Œå³æ‰€æœ‰è¿”å›çš„è¡Œéƒ½æ˜¯å”¯ä¸€çš„(å»é‡)</span><br><span class="line">        <span class="comment">-- UNION è¯­å¥ï¼šç”¨äºå°† ä¸åŒè¡¨ ä¸­ç›¸åŒåˆ—ä¸­æŸ¥è¯¢çš„æ•°æ®å±•ç¤ºå‡ºæ¥ï¼›ï¼ˆä¸åŒ…æ‹¬é‡å¤æ•°æ®ï¼‰</span></span><br><span class="line">        <span class="comment">-- UNION ALL è¯­å¥ï¼šç”¨äºå°† ä¸åŒè¡¨ ä¸­ç›¸åŒåˆ—ä¸­æŸ¥è¯¢çš„æ•°æ®å±•ç¤ºå‡ºæ¥ï¼›ï¼ˆåŒ…æ‹¬é‡å¤æ•°æ®ï¼‰</span></span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šSELECT name FROM user UNION ALL (SELECT username FROM t_user);</span></span><br><span class="line">            <span class="comment">-- è§£é‡Šï¼šä¸¤å¼ è¡¨çš„nameåˆ—ä¸usernameåˆ—æ”¾åˆ°ä¸´æ—¶è¡¨çš„åä¸ºname(åå­—ä»¥å‰é¢çš„ä¸ºå‡†)çš„åˆ—ä¸­</span></span><br><span class="line">         æ¯ä¸ª<span class="keyword">select</span>æŸ¥è¯¢çš„å­—æ®µåˆ—è¡¨(æ•°é‡ã€ç±»å‹)åº”ä¸€è‡´ï¼Œå› ä¸ºç»“æœä¸­çš„å­—æ®µåä»¥ç¬¬ä¸€æ¡<span class="keyword">select</span>è¯­å¥ä¸ºå‡†ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="å…«-å­æŸ¥è¯¢">å…«ã€å­æŸ¥è¯¢</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å­æŸ¥è¯¢éœ€è¦ç”¨æ‹¬å·åŒ…æ‹¬</span></span><br><span class="line"><span class="comment">-- fromå‹</span></span><br><span class="line">    <span class="keyword">from</span>åè¦æ±‚æ˜¯ä¸€å¼ è¡¨æˆ–æ˜¯å­æŸ¥è¯¢äº§ç”Ÿçš„ä¸´æ—¶è¡¨ï¼Œ</span><br><span class="line">        <span class="operator">-</span> å¦‚æœæ˜¯ç”Ÿæˆçš„ä¸´æ—¶è¡¨ï¼Œåˆ™å¿…é¡»ç»™å­æŸ¥è¯¢äº§ç”Ÿçš„ä¸´æ—¶è¡¨å–åˆ«å</span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šselect * from (select * from user where id&gt;1) as another_table where id&gt;2;</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼šuserè¡¨ä¸­id&gt;1çš„ç»„æˆä¸€å¼ ä¸´æ—¶è¡¨ï¼Œå–åˆ«åanother_tableï¼Œå†æŸ¥è¯¢è¿™å¼ ä¸´æ—¶è¡¨ä¸­id&gt;2çš„ã€‚</span></span><br><span class="line">			</span><br><span class="line"><span class="comment">-- whereå‹</span></span><br><span class="line">    <span class="operator">-</span> <span class="keyword">where</span>åçš„å­æŸ¥è¯¢ä¸€ä¸ªæˆ–å¤šä¸ªå€¼</span><br><span class="line">    <span class="operator">-</span> å¯ä»¥ä¸ç”¨ç»™å­æŸ¥è¯¢èµ·åˆ«å</span><br><span class="line">    <span class="operator">-</span> <span class="keyword">where</span>å­æŸ¥è¯¢çš„è¡¨ä¸èƒ½ç”¨äºæ›´æ–°åˆ é™¤</span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šSELECT * FROM user WHERE money = (SELECT max(money) FROM `user`);</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼š æŸ¥è¯¢é‡‘é¢æœ€å¤šç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">-- åˆ—å­æŸ¥è¯¢</span></span><br><span class="line">            å­—æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€åˆ—</span><br><span class="line">            ä½¿ç”¨<span class="keyword">in</span>æˆ–<span class="keyword">not</span> <span class="keyword">in</span>å®ŒæˆæŸ¥è¯¢</span><br><span class="line">                 <span class="comment">-- ä¾‹ï¼šSELECT * FROM user WHERE name in (SELECT `username` FROM t_user);</span></span><br><span class="line">                 <span class="comment">-- è§£é‡Šï¼šæŸ¥è¯¢åå­—åœ¨t_userè¡¨ä¸­çš„äººçš„ä¿¡æ¯</span></span><br><span class="line">             æˆ–ä½¿ç”¨<span class="keyword">exists</span> å’Œ <span class="keyword">not</span> <span class="keyword">exists</span> æ¡ä»¶ï¼Œè¿”å›<span class="number">1</span>æˆ–<span class="number">0</span>ã€‚å¸¸ç”¨äºåˆ¤æ–­æ¡ä»¶ã€‚</span><br><span class="line">                 <span class="comment">-- ä¾‹ï¼šSELECT * FROM user WHERE EXISTS (SELECT * FROM t_user WHERE id&gt;3);</span></span><br><span class="line">                 <span class="comment">-- è§£é‡Šï¼šå­æŸ¥è¯¢ï¼šå¦‚æœid&gt;3çš„æŸ¥è¯¢ç»“æœæœ‰å€¼ï¼Œåˆ™EXISTSè¿”å›1(true),ç›¸å½“äºåªæœ‰ä¸»æŸ¥è¯¢</span></span><br><span class="line">	    <span class="comment">-- è¡Œå­æŸ¥è¯¢</span></span><br><span class="line">            å­æŸ¥è¯¢çš„çš„æ¡ä»¶(ç»“æœ)æ˜¯ä¸€ä¸ªè¡Œ</span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šselect * from user where (name, age) in (select name, age from t_user);</span></span><br><span class="line">            <span class="comment">-- è§£é‡Šï¼šå­æŸ¥è¯¢çš„ç»“æœè¦åŒ¹é…çš„æ¡ä»¶æœ‰ä¸¤ä¸ª(name,age),ä¸€è¡Œ</span></span><br><span class="line">        <span class="comment">-- ç‰¹æ®Šè¿ç®—ç¬¦</span></span><br><span class="line">        <span class="operator">!=</span> <span class="keyword">all</span>()    ç›¸å½“äº <span class="keyword">not</span> <span class="keyword">in</span></span><br><span class="line">        <span class="operator">=</span> <span class="keyword">some</span>()    ç›¸å½“äº <span class="keyword">in</span>ã€‚<span class="keyword">any</span> æ˜¯ <span class="keyword">some</span> çš„åˆ«å</span><br><span class="line">        <span class="operator">!=</span> <span class="keyword">some</span>()   ä¸ç­‰åŒäº <span class="keyword">not</span> <span class="keyword">in</span>ï¼Œä¸ç­‰äºå…¶ä¸­æŸä¸€ä¸ª</span><br><span class="line">        <span class="keyword">all</span>, <span class="keyword">some</span> å¯ä»¥é…åˆå…¶ä»–è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="ä¹-è¿æ¥æŸ¥è¯¢-join">ä¹ã€è¿æ¥æŸ¥è¯¢(join)</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å°†å¤šä¸ªè¡¨çš„å­—æ®µæ‹¼æ¥æˆä¸€å¼ è¡¨</span></span><br><span class="line"><span class="comment">-- å†…è¿æ¥(inner join)</span></span><br><span class="line">    <span class="operator">-</span> å†…è¿æ¥åªå±•ç¤ºæ‰€æœ‰<span class="keyword">on</span>åé¢æ¡ä»¶æˆç«‹çš„åˆ—ï¼Œä¸ä»¥å“ªä¸€å¼ è¡¨ä¸ºå‡†</span><br><span class="line">    <span class="operator">-</span> é»˜è®¤å³æ˜¯å†…è¿æ¥ï¼Œå¯ä»¥çœç•¥<span class="keyword">inner</span>ã€‚</span><br><span class="line">    <span class="operator">-</span> åªæœ‰æ•°æ®å­˜åœ¨æ—¶æ‰èƒ½å‘é€è¿æ¥ã€‚å³è¿æ¥ç»“æœä¸èƒ½å‡ºç°ç©ºè¡Œã€‚</span><br><span class="line">    <span class="keyword">on</span> è¡¨ç¤ºè¿æ¥æ¡ä»¶ã€‚å…¶æ¡ä»¶è¡¨è¾¾å¼ä¸<span class="keyword">where</span>ç±»ä¼¼ã€‚ä¹Ÿå¯ä»¥çœç•¥æ¡ä»¶ï¼ˆè¡¨ç¤ºæ¡ä»¶æ°¸è¿œä¸ºçœŸï¼‰</span><br><span class="line">    <span class="keyword">where</span> ä¹Ÿå¯ç”¨<span class="keyword">where</span>è¡¨ç¤ºè¿æ¥æ¡ä»¶ã€‚</span><br><span class="line">    è¿˜æœ‰ <span class="keyword">using</span>, ä½†éœ€å­—æ®µåç›¸åŒã€‚ <span class="keyword">using</span>(å­—æ®µå)</span><br><span class="line">        <span class="comment">-- ä¾‹ï¼šSELECT * FROM user JOIN t_user on user.`name`=t_user.username;</span></span><br><span class="line">        <span class="comment">-- è§£é‡Šï¼šå°†userã€t_userä¸­nameä¸usernameç›¸åŒçš„åˆ—æ‹¼æ¥åˆ°ä¸€å¼ ä¸´æ—¶è¡¨(ä¸ä»¥å…¶ä¸­ä¸€å¼ è¡¨ä¸ºå‡†)ï¼Œä¸åŒçš„åˆ—éƒ½ä¸å±•ç¤º</span></span><br><span class="line">    <span class="comment">-- äº¤å‰è¿æ¥ cross join</span></span><br><span class="line">        å³ï¼Œæ²¡æœ‰æ¡ä»¶çš„å†…è¿æ¥ã€‚</span><br><span class="line">        <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb1 <span class="keyword">cross</span> <span class="keyword">join</span> tb2</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¤–è¿æ¥(outer join)</span></span><br><span class="line">    <span class="operator">-</span> å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œä¹Ÿä¼šå‡ºç°åœ¨ç»“æœä¸­</span><br><span class="line">    <span class="comment">-- å·¦å¤–è¿æ¥ left join</span></span><br><span class="line">        ä»¥å·¦è¾¹çš„è¡¨ä¸ºå‡†ï¼Œå·¦è¾¹çš„è¡¨çš„æ•°æ®å…¨éƒ¨å±•ç¤ºï¼Œå¦‚æœå³è¾¹è¡¨çš„æ•°æ®å¦‚æœä¸å­˜åœ¨ï¼Œç”¨<span class="keyword">null</span>å¡«å……ã€‚</span><br><span class="line">            <span class="comment">-- ä¾‹ï¼šSELECT * FROM user left JOIN t_user on user.`name`=t_user.username;</span></span><br><span class="line">            <span class="comment">-- è§£é‡Šï¼šå°†å·¦è¡¨userçš„æ•°æ®å…¨éƒ¨å±•ç¤ºï¼Œå³è¡¨t_userä¸­nameä¸usernameç›¸ç­‰çš„åˆ—æ‹¼æ¥å±•ç¤ºï¼Œå¦‚æœä¸ç­‰å¤„çš„å€¼å¡«nullã€‚</span></span><br><span class="line">    <span class="comment">-- å³å¤–è¿æ¥ right join</span></span><br><span class="line">        ä»¥å³è¾¹çš„è¡¨ä¸ºå‡†ï¼Œå³è¾¹çš„è¡¨çš„æ•°æ®å…¨éƒ¨å±•ç¤ºï¼Œå¦‚æœå·¦è¾¹è¡¨çš„æ•°æ®å¦‚æœä¸å­˜åœ¨ï¼Œç”¨<span class="keyword">null</span>å¡«å……ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è‡ªç„¶è¿æ¥(natural join)</span></span><br><span class="line">    è‡ªåŠ¨åˆ¤æ–­è¿æ¥æ¡ä»¶å®Œæˆè¿æ¥ã€‚</span><br><span class="line">    ç›¸å½“äºçœç•¥äº†<span class="keyword">using</span>ï¼Œä¼šè‡ªåŠ¨æŸ¥æ‰¾ç›¸åŒå­—æ®µåã€‚</span><br><span class="line">    <span class="keyword">natural</span> <span class="keyword">join</span></span><br><span class="line">    <span class="keyword">natural</span> <span class="keyword">left</span> <span class="keyword">join</span></span><br><span class="line">    <span class="keyword">natural</span> <span class="keyword">right</span> <span class="keyword">join</span></span><br><span class="line"><span class="keyword">select</span> info.id, info.name, info.stu_num, extra_info.hobby, extra_info.sex <span class="keyword">from</span> info, extra_info <span class="keyword">where</span> info.stu_num <span class="operator">=</span> extra_info.stu_id;</span><br></pre></td></tr></table></figure>
<h3 id="å-truncate">åã€TRUNCATE</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* TRUNCATE */</span> <span class="comment">------------------</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> [<span class="keyword">TABLE</span>] tbl_name</span><br><span class="line">    <span class="comment">-- ä¾‹ï¼šTRUNCATE TABLE test ;</span></span><br><span class="line">    <span class="comment">-- è§£é‡Šï¼šåˆ é™¤testè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®(ä½†ä¿ç•™è¡¨ç»“æ„)ï¼Œç±»ä¼¼å¦‚ä¸‹ä¸¤ä¸ªæ­¥éª¤</span></span><br><span class="line">a.æ¸…ç©ºæ•°æ®</span><br><span class="line">b.åˆ é™¤é‡å»ºè¡¨</span><br><span class="line">åŒºåˆ«ï¼š</span><br><span class="line"><span class="number">1</span>ï¼Œ<span class="keyword">truncate</span> æ˜¯åˆ é™¤è¡¨å†åˆ›å»ºï¼Œ<span class="keyword">delete</span> æ˜¯é€æ¡åˆ é™¤</span><br><span class="line"><span class="number">2</span>ï¼Œ<span class="keyword">truncate</span> é‡ç½®auto_incrementçš„å€¼ã€‚è€Œ<span class="keyword">delete</span>ä¸ä¼š</span><br><span class="line"><span class="number">3</span>ï¼Œ<span class="keyword">truncate</span> ä¸çŸ¥é“åˆ é™¤äº†å‡ æ¡ï¼Œè€Œ<span class="keyword">delete</span>çŸ¥é“ã€‚</span><br><span class="line"><span class="number">4</span>ï¼Œå½“è¢«ç”¨äºå¸¦åˆ†åŒºçš„è¡¨æ—¶ï¼Œ<span class="keyword">truncate</span> ä¼šä¿ç•™åˆ†åŒº</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>sql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‰æ¡sqlè¯­å¥è®°å½•</title>
    <url>/2021/01/28/%E4%B8%89%E6%9D%A1sql%E8%AF%AD%E5%8F%A5%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>å‡ æ¡sqlè¯­å¥ï¼Œè§‰å¾—ç®—æ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œé‚è®°å½•ä¸‹æ¥</p>
<span id="more"></span>
<p>æ‰€ç”¨åˆ°çš„è¡¨çš„ç¤ºä¾‹å¤§è‡´å¦‚ä¸‹(æ•°æ®çº¯å±è™šæ„)</p>
<p><img src="/2021/01/28/%E4%B8%89%E6%9D%A1sql%E8%AF%AD%E5%8F%A5%E8%AE%B0%E5%BD%95/t_member.png" alt></p>
<h2 id="ä¸€-ç»Ÿè®¡æ¯ä¸ªæœˆçš„æ€»ä¼šå‘˜æ•°é‡">ä¸€ã€ç»Ÿè®¡æ¯ä¸ªæœˆçš„æ€»ä¼šå‘˜æ•°é‡</h2>
<p>è¿™ä¸ªéœ€è¦åœ¨controllerä¸ä¸šåŠ¡å±‚è¿›è¡Œä¸€å®šçš„é€»è¾‘ï¼Œsqlå±‚åªéœ€è¦æŸ¥è¯¢æ¯ä¸ªæœˆçš„xå¹´xæœˆ31æ—¥ä¹‹å‰çš„æ•°æ®å³å¯ã€‚å…·ä½“å®ç°é€»è¾‘å¦‚ä¸‹ï¼Œ<strong>å‡è®¾æŸ¥è¯¢çš„æ˜¯è¿‘ä¸€å¹´çš„æ¯ä¸ªæœˆçš„ä¼šå‘˜æ•°é‡ï¼š</strong></p>
<ol>
<li>åœ¨controllerå±‚é€šè¿‡æ—¥å†å¯¹è±¡éå†å‡ºè¿‘ä¸€å¹´çš„æ•°æ®æ”¾å…¥é›†åˆä¸­ï¼Œæ ¼å¼ä¸ºyyyy-MM;</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM&quot;</span>);</span><br><span class="line"><span class="comment">// æŸ¥è¯¢æœˆä»½é›†åˆ</span></span><br><span class="line">List&lt;String&gt; months = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä¸¤ä¸ªæ—¥å†å¯¹è±¡ï¼Œå­˜å‚¨å¼€å§‹ã€ç»“æŸæ—¥æœŸ</span></span><br><span class="line"><span class="type">Calendar</span> <span class="variable">startTime</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"><span class="type">Calendar</span> <span class="variable">endTime</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®æ—¥å†çš„å¼€å§‹ç»“æŸæ—¶é—´</span></span><br><span class="line">startTime.setTime(sdf.parse(startTimeStr));</span><br><span class="line">endTime.setTime(sdf.parse(endTimeStr));</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ·»åŠ å¹´æœˆ</span></span><br><span class="line"><span class="keyword">while</span> (startTime.before(endTime)) &#123;</span><br><span class="line">    months.add(sdf.format(startTime.getTime()));</span><br><span class="line">    startTime.add(Calendar.MONTH, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸Šé¢çš„å¾ªç¯ä¸ä¼šåŠ å…¥æœ€åä¸€ä¸ªæœˆï¼Œæ‰‹åŠ¨åŠ å…¥</span></span><br><span class="line">months.add(sdf.format(endTime.getTime()));</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åœ¨serviceå±‚éå†ï¼Œå¹¶æ‰‹åŠ¨æ‹¼æ¥-31æ—¥ï¼ŒæŸ¥è¯¢è¯¥å¹´æœˆæ—¥ä¹‹å‰çš„ä¼šå‘˜æ€»æ•°ï¼Œåœ¨å­˜å…¥é›†åˆ</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é›†åˆæ”¾æŸ¥è¯¢åˆ°çš„ç»“æœ</span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">null</span> != months)&#123;</span><br><span class="line">    <span class="comment">// 2020-02</span></span><br><span class="line">    <span class="keyword">for</span> (String month : months) &#123;</span><br><span class="line">        month+=<span class="string">&quot;-31&quot;</span>;</span><br><span class="line">        list.add(memberDao.findMemberCountBeforeDate(month));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>MysqlæŸ¥è¯¢æŸä¸ªæ—¥æœŸä¹‹å‰çš„æ€»äººæ•°ï¼š</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(id) <span class="keyword">from</span> t_member <span class="keyword">where</span> regTime <span class="operator">&amp;</span>lt;<span class="operator">=</span> #&#123;<span class="keyword">value</span>&#125;     ( <span class="operator">&amp;</span>lt;  &quot;&lt;&quot;çš„è½¬ä¹‰)</span><br></pre></td></tr></table></figure>
<h2 id="äºŒ-æŸ¥è¯¢ç”·å¥³æ€§åˆ«æ•°é‡">äºŒã€æŸ¥è¯¢ç”·å¥³æ€§åˆ«æ•°é‡</h2>
<ol>
<li>è¿™ä¸ªåªéœ€è¦åœ¨sqlä½¿ç”¨å³å¯</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">case</span> sex <span class="keyword">when</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;ç”·&#x27;</span> <span class="keyword">when</span> <span class="string">&#x27;2&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;å¥³&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;æœªçŸ¥&#x27;</span> <span class="keyword">end</span> <span class="keyword">as</span> name, <span class="built_in">COUNT</span>(id) <span class="keyword">as</span> <span class="string">&#x27;value&#x27;</span> <span class="keyword">FROM</span> t_member <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æŸ¥è¯¢ç»“æœ</li>
</ol>
<p><img src="/2021/01/28/%E4%B8%89%E6%9D%A1sql%E8%AF%AD%E5%8F%A5%E8%AE%B0%E5%BD%95/%E7%94%B7%E5%A5%B3%E5%8D%A0%E6%AF%94%E7%BB%93%E6%9E%9C.png" alt></p>
<h2 id="ä¸‰-æŸ¥è¯¢ä¼šå‘˜å¹´é¾„æ®µäººæ•°">ä¸‰ã€æŸ¥è¯¢ä¼šå‘˜å¹´é¾„æ®µäººæ•°</h2>
<p><strong>å±•ç¤º0-18å²ï¼Œ18-30å²ï¼Œ30-45å²ï¼Œ45å²ä»¥ä¸Šçš„äººæ•°å’Œå æ¯”ã€‚</strong></p>
<ol>
<li>ç”±äºæ•°æ®åº“çš„æ—¥æœŸæ˜¯dateç±»å‹çš„ï¼Œæ‰€ä»¥betweenæ˜¯åŒ…æ‹¬å³è¾¹ç•Œçš„ï¼Œ18è¦å½’çº³åˆ°18-30å²ï¼Œæ‰€ä»¥è¿™é‡Œ0-18å²åªèƒ½between 0 and 17ï¼›åé¢çš„åŒç†ã€‚
<ul>
<li>æ³¨ï¼šå¦‚æœæ˜¯datetimeç±»å‹ï¼Œæ˜¯ä¸è¿‡åŒ…æ‹¬å³è¾¹ç•Œçš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨0 between 18ï¼›</li>
</ul>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> (<span class="keyword">case</span></span><br><span class="line">	<span class="keyword">when</span> a.age <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">18</span> <span class="keyword">then</span> &quot;0-18å²&quot;</span><br><span class="line">	<span class="keyword">when</span> a.age <span class="keyword">between</span> <span class="number">18</span> <span class="keyword">and</span> <span class="number">30</span> <span class="keyword">then</span> &quot;18-30å²&quot;</span><br><span class="line">	<span class="keyword">when</span> a.age <span class="keyword">between</span> <span class="number">31</span> <span class="keyword">and</span> <span class="number">45</span> <span class="keyword">then</span> &quot;30-45å²&quot;</span><br><span class="line">	<span class="keyword">when</span> a.age <span class="operator">&gt;=</span> <span class="number">45</span> <span class="keyword">then</span> &quot;45å²ä»¥ä¸Š&quot;</span><br><span class="line">	<span class="keyword">end</span>) <span class="keyword">as</span> name,		<span class="comment">-- è®¾ç½®å„ä¸ªå¹´é¾„æ®µ</span></span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> <span class="keyword">value</span>,	 <span class="comment">-- è®¾ç½®å„ä¸ªå¹´é¾„æ®µçš„äººæ•° </span></span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">/</span>(<span class="keyword">select</span> <span class="built_in">count</span>(id) <span class="keyword">from</span> t_member) <span class="keyword">as</span> proportion 	<span class="comment">-- è®¾ç½®å„ä¸ªå¹´é¾„æ®µçš„å æ¯”</span></span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> timestampdiff(<span class="keyword">year</span>, birthday,date_format(now(), <span class="string">&#x27;%y-%m-%d&#x27;</span>)) <span class="keyword">as</span> age <span class="keyword">from</span> t_member) <span class="keyword">as</span> a </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> name;		<span class="comment">-- æŸ¥è¯¢å¹´é¾„</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æŸ¥è¯¢ç»“æœ</li>
</ol>
<p><img src="/2021/01/28/%E4%B8%89%E6%9D%A1sql%E8%AF%AD%E5%8F%A5%E8%AE%B0%E5%BD%95/%E5%B9%B4%E9%BE%84%E5%8D%A0%E6%AF%94%E7%BB%93%E6%9E%9C.png" alt></p>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>sql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>ElementUI+Vue+PageHelpå®ç°åˆ†é¡µå±•ç¤º</title>
    <url>/2021/01/08/ElementUI-Vue-PageHelp%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2/</url>
    <content><![CDATA[<p>è¡¨æ ¼çš„åˆ†é¡µå±•ç¤ºä¸ä»…èƒ½è®©é¡µé¢æ›´æ¸…æ™°ï¼Œè¿˜èƒ½å¤Ÿå‡è½»æ•°æ®åº“çš„è´Ÿæ‹…ã€‚</p>
<span id="more"></span>
<h2 id="ä¸€-å‰ç«¯">ä¸€ã€å‰ç«¯</h2>
<p>å‰ç«¯ä¸»è¦å®ç°ä¸¤ä¸ªåŠŸèƒ½(è¡¨æ ¼ä¸åˆ†é¡µä½¿ç”¨elementUI)ï¼š</p>
<ol>
<li>ç”¨æˆ·è¿›å…¥æ—¶ï¼ŒæŸ¥è¯¢æ‰€æœ‰</li>
<li>ç”¨æˆ·æ‰‹åŠ¨æŸ¥è¯¢ï¼ŒæŸ¥è¯¢å‡ºç»“æœï¼Œå¹¶å°†ç”¨æˆ·è·³è½¬åˆ°ç¬¬ä¸€é¡µçš„ç»“æœ</li>
</ol>
<h3 id="1-æŸ¥è¯¢æ‰€æœ‰">1.æŸ¥è¯¢æ‰€æœ‰</h3>
<ol>
<li>ç”¨æˆ·è¿›å…¥è¯¥é¡µé¢å°±æŸ¥è¯¢æ‰€æœ‰ï¼šåˆ™è¯¥æ–¹æ³•å¿…é¡»åœ¨é¡µé¢çš„ created() å‡½æ•°ä¸­è°ƒç”¨ï¼ŒåŒæ—¶æŸ¥è¯¢è¯­å¥queryStringé»˜è®¤ä¸ºnullã€å½“å‰é¡µé»˜è®¤ä¸º1ï¼Œä½¿ç”¨findPage()æ–¹æ³•</li>
<li>è¯·æ±‚çš„æ•°æ®å…¨éƒ¨å°è£…åœ¨ pagination ä¸­ã€‚</li>
<li>è¿”å›çš„æ‰€æœ‰æŸ¥åˆ°çš„ç»“æœä½¿ç”¨ dataList æ•°ç»„æ¥æ”¶ï¼Œdatalist ç»‘å®šäº†è¡¨æ ¼ä¸­çš„æ•°æ®</li>
<li>ç”¨æˆ·åˆ‡æ¢å½“å‰é¡µï¼šè°ƒç”¨ handleCurrentChange(currentPage) æ–¹æ³• (<span style="color:red">æ³¨ï¼šcurrentPageï¼šelementUIè·å–ç”¨æˆ·é€‰æ‹©é¡µç </span>)ï¼Œèµ‹å€¼å½“å‰é¡µåï¼Œå†æ¬¡åˆ†é¡µæŸ¥è¯¢findPage()</li>
</ol>
<h3 id="2-ç”¨æˆ·æŸ¥è¯¢">2. ç”¨æˆ·æŸ¥è¯¢</h3>
<ol>
<li>ç”¨æˆ·è¾“å…¥ç»‘å®š queryStringï¼Œåˆ™è¿™æ¬¡æŸ¥è¯¢å¸¦æ¡ä»¶ï¼Œ</li>
<li>ç”¨æˆ·æŸ¥è¯¢åå¿…é¡»å°†ç”¨æˆ·å®šä½åˆ°ç¬¬ä¸€é¡µ(æ— è®ºä»–ç°åœ¨åœ¨ç¬¬å‡ é¡µ)ï¼Œ è°ƒç”¨handleCurrentChange(1)ï¼Œå³å¯</li>
</ol>
<h3 id="3-å®ç°">3.å®ç°</h3>
<ul>
<li>é‡ç‚¹çœ‹å‡ å¤„æ³¨é‡Šå¤„å’Œvueçš„jséƒ¨åˆ†å³å¯ï¼Œ</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡µé¢meta --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ†é¡µæŸ¥è¯¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ ·å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/elementui/index.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/font-awesome/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;hold-transition&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;filter-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--v-modelç»‘å®šç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢æ¡ä»¶ pagination.queryString--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;é¡¹ç›®ç¼–ç /é¡¹ç›®åç§°&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;pagination.queryString&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;filter-item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç”¨æˆ·è‡ªå·±æŸ¥è¯¢ï¼ŒæŸ¥è¯¢åå®šä½åˆ°ç¬¬ä¸€é¡µ handleCurrentChange(1)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;handleCurrentChange(1)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dalfBut&quot;</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :data=&quot;dataList ç»‘å®šè¡¨æ ¼ä¸­çš„æ•°æ®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">current-row-key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">:data</span>=<span class="string">&quot;dataList&quot;</span> <span class="attr">stripe</span> <span class="attr">highlight-current-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;index&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åºå·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;code&quot;</span> <span class="attr">label</span>=<span class="string">&quot;é¡¹ç›®ç¼–ç &quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;é¡¹ç›®åç§°&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;é€‚ç”¨æ€§åˆ«&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--å°†0ã€1ã€2è½¬æ¢ä¸ºå¯¹åº”çš„æ€§åˆ«--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; scope.row.sex == &#x27;0&#x27; ? &#x27;ä¸é™&#x27; : scope.row.sex == &#x27;1&#x27; ? &#x27;ç”·&#x27; : &#x27;å¥³&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;age&quot;</span> <span class="attr">label</span>=<span class="string">&quot;é€‚ç”¨å¹´é¾„&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;remark&quot;</span> <span class="attr">label</span>=<span class="string">&quot;é¡¹ç›®è¯´æ˜&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;æ“ä½œ&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è·å–åŸæœ‰æ•°æ®--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--scope.rowç›¸å½“äºå½“å‰è¡Œçš„æ•°æ®å¯¹è±¡ï¼Œå¯ä»¥è·å–id(row.id)æŸ¥è¯¢æ•°æ®ï¼Œç„¶åå›æ˜¾ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleUpdate(scope.row)&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleDelete(scope.row)&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆ†é¡µå‚æ•°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination-container&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">class</span>=<span class="string">&quot;pagiantion&quot;</span>                          &lt;!<span class="attr">--</span>è¿™é‡Œæ³¨é‡Šä¼šå‡ºç°é—®é¢˜ï¼Œä½¿ç”¨è¯·åˆ é™¤<span class="attr">--</span>&gt;</span></span><br><span class="line">                    @current-change=&quot;handleCurrentChange&quot;       <span class="comment">&lt;!--å½“å‰é¡µç»‘å®šçš„å‡½æ•°ï¼Œåˆ‡æ¢å½“å‰é¡µæ—¶è°ƒç”¨--&gt;</span></span><br><span class="line">                    :current-page=&quot;pagination.currentPage&quot;      <span class="comment">&lt;!--å½“å‰é¡µ--&gt;</span></span><br><span class="line">                    :page-size=&quot;pagination.pageSize&quot;            <span class="comment">&lt;!--æ¯é¡µå¤§å°--&gt;</span></span><br><span class="line">                    layout=&quot;total, prev, pager, next, jumper&quot;</span><br><span class="line">                    :total=&quot;pagination.total&quot;&gt;                  <span class="comment">&lt;!--æ•°æ®æ€»æ¡æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥ç»„ä»¶åº“ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../plugins/elementui/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/axios-0.18.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pagination</span>: &#123;<span class="comment">//åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">currentPage</span>: <span class="number">1</span>,<span class="comment">//å½“å‰é¡µç </span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">pageSize</span>: <span class="number">10</span>,<span class="comment">//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">total</span>: <span class="number">0</span>,<span class="comment">//æ€»è®°å½•æ•°</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">queryString</span>: <span class="literal">null</span><span class="comment">//æŸ¥è¯¢æ¡ä»¶,é»˜è®¤ä¸ºç©ºï¼Œåœ¨ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œé»˜è®¤æŸ¥è¯¢å…¨éƒ¨ï¼Œå½“ç”¨æˆ·åœ¨è¾“å…¥æ¡†æŸ¥è¯¢ï¼Œæ‰èµ‹å€¼(v-modelç»‘å®š)</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dataList</span>: [],<span class="comment">//å½“å‰é¡µè¦å±•ç¤ºçš„åˆ†é¡µåˆ—è¡¨æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//é’©å­å‡½æ•°ï¼ŒVUEå¯¹è±¡åˆå§‹åŒ–å®Œæˆåè‡ªåŠ¨æ‰§è¡Œ</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æŸ¥è¯¢æ‰€æœ‰æŠ½å–æˆfindPageä¾¿äºå¤ç”¨</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">findPage</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//åˆ†é¡µæŸ¥è¯¢</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">findPage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æŸ¥è¯¢æ‰€æœ‰æ£€æŸ¥é¡¹,postè¯·æ±‚å‚æ•°åœ¨é€—å·åé¢å•ç‹¬å†™ï¼Œgetè¯·æ±‚çš„å‚æ•°ï¼šurl.doï¼Ÿå‚æ•°å˜é‡å+å‚æ•°å€¼</span></span></span><br><span class="line"><span class="language-javascript">                axios.<span class="title function_">post</span>(<span class="string">&#x27;/checkitem/findPage.do&#x27;</span>, <span class="variable language_">this</span>.<span class="property">pagination</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">flag</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// ç»‘å®šæ•°æ®, resè¿”å›çš„ç»“æœåŒ…å«total:æ•°æ®åº“æ€»å…±å¤šå°‘æ¡ï¼Œrowsï¼šåˆ†é¡µæŸ¥è¯¢åˆ°çš„ç»“æœ</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// res.dataæ˜¯å¾—åˆ°çš„åç«¯çš„å°è£…çš„æ•°æ®ï¼Œres.data.dataæ˜¯åç«¯å°è£…çš„æ•°æ®ä¸­æŸ¥è¯¢çš„åˆ†é¡µçš„ç»“æœï¼Œ</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// res.data.data.rowsæ˜¯åç«¯å°è£…çš„æ•°æ®ä¸­æŸ¥è¯¢çš„åˆ†é¡µçš„ç»“æœä¸­rowsçš„å€¼ï¼Œå…·ä½“æŸ¥çœ‹com.songbirds.health.entity.Resultå®ä½“ç±»</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">rows</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// æ€»è®°å½•æ•°</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">total</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">message</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//åˆ‡æ¢é¡µç </span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">handleCurrentChange</span>(<span class="params">currentPage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å°†å½“å‰çš„é¡µç èµ‹å€¼ç»™åˆ†é¡µçš„å½“å‰é¡µ</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span> = currentPage;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// èµ‹å€¼åæŸ¥è¯¢</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">findPage</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æŸ¥è¯¢ååº”è¯¥å°†å½“å‰é¡µç æ”¹ä¸º1(é¿å…åé¢é¡µæ²¡æ•°æ®æ˜¾ç¤ºï¼Œä½†æ˜¯æ˜¯æœ‰æ•°æ®çš„)ï¼Œåœ¨htmlä¸­è°ƒç”¨è¯¥æ–¹æ³•æ—¶è¦èµ‹å€¼currentPage=1</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ä¸Šé¢æ³¨é‡Šè¿™ä¸ªç”¨åœ¨ç”¨æˆ·æŸ¥è¯¢ï¼Œç”¨æˆ·æŸ¥è¯¢ç›´æ¥è°ƒç”¨handleCurrentChange(1)ï¼Œç”¨æˆ·æŸ¥è¯¢åï¼Œå°†ç”¨æˆ·è·³åˆ°ç¬¬ä¸€é¡µ</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="äºŒ-åç«¯">äºŒã€åç«¯</h2>
<h3 id="0-ç»“æœå°è£…ç±»">0.ç»“æœå°è£…ç±»</h3>
<ol>
<li>å‰ç«¯åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æ•°æ®çš„å°è£…ï¼šQueryPageBean</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QueryPageBean</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer currentPage;<span class="comment">//é¡µç </span></span><br><span class="line">    <span class="keyword">private</span> Integer pageSize;<span class="comment">//æ¯é¡µè®°å½•æ•°(å¤§å°)</span></span><br><span class="line">    <span class="keyword">private</span> String queryString;<span class="comment">//æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCurrentPage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> currentPage;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// todo getä¸setæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åç«¯æŸ¥è¯¢åˆ°çš„åˆ†é¡µç»“æœçš„å°è£…ï¼šPageResult&lt;&gt;</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageResult</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long total;<span class="comment">//æ€»è®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; rows;<span class="comment">//å½“å‰é¡µç»“æœ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PageResult</span><span class="params">(Long total, List&lt;T&gt; rows)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.total = total;</span><br><span class="line">        <span class="built_in">this</span>.rows = rows;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// todo getä¸setæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è¿”å›çš„ç»“æœå°è£…ï¼šResult</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag;<span class="comment">//æ‰§è¡Œç»“æœï¼Œtrueä¸ºæ‰§è¡ŒæˆåŠŸ falseä¸ºæ‰§è¡Œå¤±è´¥</span></span><br><span class="line">    <span class="keyword">private</span> String message;<span class="comment">//è¿”å›ç»“æœä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> Object data;<span class="comment">//è¿”å›æ•°æ®</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(<span class="type">boolean</span> flag, String message)</span> &#123; <span class="comment">// ä¿å­˜ã€ä¿®æ”¹ä¿å­˜ï¼Œ(ä¸éœ€è¦è¿”å›æ•°æ®ç»“æœ)</span></span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(<span class="type">boolean</span> flag, String message, Object data)</span> &#123;<span class="comment">// æŸ¥è¯¢å›æ˜¾(éœ€è¦è¿”å›æ•°æ®ç»“æœ)</span></span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFlag</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// todo getä¸setæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-controllerå±‚">1. controllerå±‚</h3>
<ol>
<li>ç”±äºå‘çš„æ˜¯postè¯·æ±‚ï¼Œæ‰€ä»¥ï¼Œè¯·æ±‚çš„æ•°æ®éœ€è¦ä»è¯·æ±‚ä½“ä¸­è·å–ã€‚å®ç°å¦‚ä¸‹</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/checkitem&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckItemController</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: [queryPageBean] ï¼šåç«¯ç”¨æ¥æ¥å—å‰ç«¯çš„æŸ¥è¯¢çš„æ‰€æœ‰è¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: com.songbirds.health.entity.Result ï¼šè¿”å›çš„å°è£…çš„ç»“æœæ•°æ®</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: songbirds</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2021/1/7-21:19</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/findPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">findPage</span><span class="params">(<span class="meta">@RequestBody</span> QueryPageBean queryPageBean)</span>&#123;  <span class="comment">// @RequestBody æŒ‡å®šä»è¯·æ±‚ä½“è·å–</span></span><br><span class="line">        <span class="comment">// PageResultï¼šç”¨äºå°è£…æ•°æ®åº“åˆ†é¡µæŸ¥è¯¢çš„ç»“æœ</span></span><br><span class="line">        PageResult&lt;CheckItem&gt; pageResult = checkItemService.findPage(queryPageBean);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="literal">true</span>, <span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span>, pageResult);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>
<h3 id="2-serviceimplå®ç°ç±»å±‚ï¼š-serviceå±‚ç•¥">2. serviceImplå®ç°ç±»å±‚ï¼š(serviceå±‚ç•¥)</h3>
<ol>
<li>éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰æŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚æœæœ‰ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢ã€‚å¦‚æœæ²¡æœ‰ï¼ŒæŸ¥è¯¢å…¨éƒ¨</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(interfaceClass = CheckItemService.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckItemServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CheckItemService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: [queryPageBean]</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: PageResult&lt;CheckItem&gt; : åˆ†é¡µæŸ¥è¯¢å°è£…çš„ç»“æœ</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: songbirds</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2021/1/7-18:20</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PageResult&lt;CheckItem&gt; <span class="title function_">findPage</span><span class="params">(QueryPageBean queryPageBean)</span> &#123;</span><br><span class="line">        <span class="comment">// å‰ç«¯ä¼ æ¥çš„pageSizeä¸èƒ½æ— é™å¤§ï¼Œæ ¹æ®å‰ç«¯ä¼ å‚è¿›è¡Œåˆ†é¡µ</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„å¯é™åˆ¶ï¼šqueryPageBean.getPageSize() &gt; 50?50:queryPageBean.getPageSize();ç›´æ¥æ›¿æ¢ä¸‹é¢çš„ç¬¬äºŒä¸ªå‚æ•°å³å¯</span></span><br><span class="line">        <span class="comment">// å‚æ•°ï¼šarg0ï¼šå½“å‰é¡µï¼Œ arg1ï¼šæ¯é¡µå¤§å°</span></span><br><span class="line">        PageHelper.startPage(queryPageBean.getCurrentPage(), queryPageBean.getPageSize());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŸ¥è¯¢æ¡ä»¶ä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isNotEmpty(queryPageBean.getQueryString()))&#123;</span><br><span class="line">            <span class="comment">// ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line">            queryPageBean.setQueryString(<span class="string">&quot;%&quot;</span> + queryPageBean.getQueryString() + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	    <span class="comment">// ä½¿ç”¨æŸ¥è¯¢æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line">        <span class="comment">// Pageï¼šcom.github.pagehelper.Pageï¼Œç»§æ‰¿Arraylist,æ‰€ä»¥å¯ä»¥å°è£…é›†åˆ</span></span><br><span class="line">        <span class="comment">// ç”±äºä½¿ç”¨äº†PageHelperï¼Œä»–ä¼šè‡ªåŠ¨æ‹¦æˆªæŸ¥è¯¢åˆ†é¡µæ‰€éœ€çš„ç»“æœ(æ€»æ¡æ•°ï¼Œæ¯é¡µå¤§å°(åœ¨ä¸Šé¢start</span></span><br><span class="line">        Pageæ–¹æ³•ä¸­å·²ç»è®¾ç½®äº†))</span><br><span class="line">        Page&lt;CheckItem&gt; page = checkItemDao.findByCondition(queryPageBean.getQueryString());</span><br><span class="line">        <span class="comment">// è·å–com.github.pagehelper.Pageä¸­çš„total(æ€»æ•°)ä¸Result(ç»“æœ)</span></span><br><span class="line">        PageResult&lt;CheckItem&gt; pageResult = <span class="keyword">new</span> <span class="title class_">PageResult</span>&lt;&gt;(page.getTotal(),page.getResult());</span><br><span class="line">        <span class="keyword">return</span> pageResult;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-daoå¯¹åº”çš„xml-daoå±‚ç•¥">3.daoå¯¹åº”çš„xml(daoå±‚ç•¥)</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">   <span class="comment">&lt;!-- ç”±äºä½¿ç”¨äº†PageHelperï¼Œä»–ä¼šè‡ªåŠ¨æ‹¦æˆªæŸ¥è¯¢åˆ†é¡µæ‰€éœ€çš„ç»“æœï¼Œè¿™é‡Œåªä¸“æ³¨æ ¸å¿ƒï¼ŒæŸ¥è¯¢ç”¨æˆ·éœ€è¦çš„ç»“æœå³å¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByCondition&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;string&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;checkItem&quot;</span>&gt;</span></span><br><span class="line">       select * from t_checkitem</span><br><span class="line">       <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- åŠ¨æ€æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œå‚æ•°ä¸ºåŸºç¡€æ•°æ®ç±»å‹ç”¨value --&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- åˆ¤æ–­æŸ¥è¯¢æ¡ä»¶QueryStringæ˜¯å¦ä¸ºç©º --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;value != null and value.length&gt;0&quot;</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- ç”¨æˆ·æŸ¥è¯¢codeç¼–ç æˆ–è€…åç§°çš†å¯ --&gt;</span></span><br><span class="line">               code like #&#123;queryString&#125; or name like #&#123;queryString&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰-ç»“æœå±•ç¤º">ä¸‰ã€ç»“æœå±•ç¤º</h3>
<ol>
<li>è¿›å…¥é¡µé¢æŸ¥è¯¢å…¨éƒ¨</li>
</ol>
<p><img src="/2021/01/08/ElementUI-Vue-PageHelp%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%85%A8%E9%83%A8%E7%A0%81.png" alt></p>
<ol start="2">
<li>ç”¨æˆ·æ‰‹åŠ¨æŸ¥è¯¢</li>
</ol>
<p><img src="/2021/01/08/ElementUI-Vue-PageHelp%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2/%E7%94%A8%E6%88%B7%E6%89%8B%E5%8A%A8%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E7%A0%81.png" alt></p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>ajax</tag>
        <tag>ElementUI</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueå‘é€ajaxè¯·æ±‚</title>
    <url>/2021/01/06/Vue%E5%8F%91%E9%80%81ajax%E8%AF%B7%E6%B1%82/</url>
    <content><![CDATA[<p>Vueå‘é€å¼‚æ­¥ajaxçš„è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨axiosæ¥å®ç°</p>
<span id="more"></span>
<h2 id="elementuiä¸vueæ˜¾ç¤ºè¡¨æ ¼">ElementUIä¸Vueæ˜¾ç¤ºè¡¨æ ¼</h2>
<p>è¿™é‡Œçš„è¡¨æ ¼æ‘˜è‡ªelementå®˜ç½‘ï¼Œå¦‚ä¸‹å†…å®¹æ˜¯ç›´æ¥å†™æ­»åœ¨è¡¨æ ¼ä¸­çš„ï¼Œæœªä½¿ç”¨ä»»ä½•è¯·æ±‚ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Table<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/elementui/index.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../plugins/elementui/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :data åŒå‘ç»‘å®švueä¸­çš„dataçš„tableDataï¼Œç›¸å½“äºv-forçš„ä¼šéå†é›†åˆ(ElementUIåº•å±‚å°è£…äº†v-for)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">border</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lableï¼šåˆ—åï¼Œpropï¼švueä¸­åä¸ºdataçš„å®é™…çš„å‚æ•°ï¼Œä¸‹åŒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;date&quot;</span> <span class="attr">label</span>=<span class="string">&quot;æ—¥æœŸ&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å§“å&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åœ°å€&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// Vueé¦–å­—æ¯å¤§å†™</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">tableData</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">date</span>: <span class="string">&#x27;2016-05-02&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="string">&#x27;ç‹å°è™&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">address</span>: <span class="string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">date</span>: <span class="string">&#x27;2016-05-04&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="string">&#x27;ç‹å°è™&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">address</span>: <span class="string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1517 å¼„&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">date</span>: <span class="string">&#x27;2016-05-01&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="string">&#x27;ç‹å°è™&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">address</span>: <span class="string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1519 å¼„&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">date</span>: <span class="string">&#x27;2016-05-03&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="string">&#x27;ç‹å°è™&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">address</span>: <span class="string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1516 å¼„&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ²¡æœ‰ç¼–è¯‘å®Œçš„æ—¶å€™å‘é€è¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//ç¼–è¯‘å®Œçš„æ—¶å€™å‘é€è¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å®šä¹‰æ–¹æ³•çš„åœ°æ–¹</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœ">æ•ˆæœ</h2>
<img src="/2021/01/06/Vue%E5%8F%91%E9%80%81ajax%E8%AF%B7%E6%B1%82/01/06/Vue%E5%8F%91%E9%80%81ajax%E8%AF%B7%E6%B1%82/Vue-ElementUI-UnSend.png" class title="ElementUIæœªå‘é€è¯·æ±‚">
<h2 id="axioså¼‚æ­¥è¯·æ±‚">axioså¼‚æ­¥è¯·æ±‚</h2>
<p>Vueå‘é€å¼‚æ­¥ajaxçš„è¯·æ±‚ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨axiosæ¥å®ç°ï¼Œå¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨çš„å®ä¾‹ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Table<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥ElementUI cssæ ·å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../plugins/elementui/index.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥ç»„ä»¶åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../plugins/elementui/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/axios-0.18.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :data åŒå‘ç»‘å®švueä¸­çš„dataçš„dataListï¼Œç›¸å½“äºv-forçš„ä¼šéå†é›†åˆ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:dataList</span>=<span class="string">&quot;users&quot;</span> <span class="attr">border</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lableï¼šåˆ—åï¼Œpropï¼švueä¸­åä¸ºdataçš„å®é™…çš„å‚æ•°ï¼Œä¸‹åŒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;date&quot;</span> <span class="attr">label</span>=<span class="string">&quot;æ—¥æœŸ&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å§“å&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åœ°å€&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// Vueé¦–å­—æ¯å¤§å†™</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        ECMAScript5çš„å†™æ³•</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        data:&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">           user:[]</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ECMAScript6çš„å†™æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å­˜æ”¾æ•°æ®çš„åœ°æ–¹</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;<span class="attr">users</span>:[]&#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ²¡æœ‰ç¼–è¯‘å®Œçš„æ—¶å€™å‘é€è¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">get</span>(<span class="string">&#x27;/checkitem/findAll.do&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">flag</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// å¦‚æœæŸ¥è¯¢åˆ°(res.data.flag==true)ï¼Œç»™dataListèµ‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">message</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//ç¼–è¯‘å®Œçš„æ—¶å€™å‘é€è¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å®šä¹‰æ–¹æ³•çš„åœ°æ–¹</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            htmlè°ƒç”¨çš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­æ‰§è¡Œaxiosè¯·æ±‚</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            add()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                axios.get().........</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            */</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>ajax</tag>
        <tag>ElementUI</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/12/31/hello-world/</url>
    <content><![CDATA[<h1>ä½ å¥½ä¸–ç•Œ</h1>
]]></content>
  </entry>
</search>
